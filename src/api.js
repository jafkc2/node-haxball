var Jq=(()=>{var O=(t,i)=>()=>(i||t((i={xM:{}}).xM,i),i.xM);var R=O((Uw,un)=>{un.xM=un.to||(un.to={proxy:null,backend:{hostname:"www.haxball.com",hostnameWs:"p2p.haxball.com",secure:!0},yi:null,Hs:9,noVariableValueChangeEvent:!1,noWebRTC:!1,fixNames:!0,yn:null,stunServers:[{urls:"stun:stun.l.google.com:19302"}],backendUrl:"wss://www.haxball.com/",httpUrl:"https://p2p.haxball.com/rs/",setTimeout:null,clearTimeout:null,setInterval:null,clearInterval:null,console:null,requestAnimationFrame:null,cancelAnimationFrame:null,crypto:null,WebSocket:null,XMLHttpRequest:null,performance:null,JSON5:null,pako:null,RTCPeerConnection:null,RTCIceCandidate:null,RTCSessionDescription:null,E:(t,i,n)=>{var r=new t,e=Object.keys(r),s=Object.keys(r.__proto__),u=e.concat(s);i.forEach((h,o)=>{if(!(!h||u.includes(h))){var l=e[o];l&&(u.push(h),Object.defineProperty(t.prototype,h,{get:function(){return this[l]},set:function(c){this[l]=c}}))}}),n.forEach((h,o)=>{if(!(!h||u.includes(h))){var l=s[o];l&&(u.push(h),t.prototype[h]=t.prototype[l])}})}})});var We=O((Fw,Ke)=>{var E=R();Ke.xM=(t,i)=>{var{setTimeout:n,clearTimeout:r,setInterval:e,clearInterval:s,console:u,requestAnimationFrame:h,cancelAnimationFrame:o,crypto:l,WebSocket:c,XMLHttpRequest:w,performance:C,JSON5:m,pako:f}=t,v=i?.backend;v&&(v.hostname!=null&&(E.backend.hostname=v.hostname),v.hostnameWs!=null&&(E.backend.hostnameWs=v.hostnameWs),v.secure!=null&&(E.backend.secure=v.secure)),v=i?.proxy,v&&(E.proxy={},v.HttpUrl!=null&&(E.proxy.HttpUrl=v.HttpUrl),v.WebSocketUrl!=null&&(E.proxy.WebSocketUrl=v.WebSocketUrl),v.WebSocketChangeOriginAllowed!=null&&(E.proxy.WebSocketChangeOriginAllowed=v.WebSocketChangeOriginAllowed)),i?.version!=null&&(E.Hs=i.version),E.backendUrl=(E.backend.secure?"wss":"ws")+"://"+E.backend.hostnameWs+"/",E.httpUrl=i?.proxy?.HttpUrl||(E.backend.secure?"https":"http")+"://"+E.backend.hostname+"/rs/",i?.stunServer!=null&&(E.stunServers=[{urls:i.stunServer}]),i?.noWebRTC!=null&&(E.noWebRTC=i.noWebRTC),i?.fixNames!=null&&(E.fixNames=i.fixNames),E.setTimeout=n,E.clearTimeout=r,E.setInterval=e,E.clearInterval=s,E.console=u,E.requestAnimationFrame=h,E.cancelAnimationFrame=o,E.crypto=l,E.WebSocket=c,E.XMLHttpRequest=w,E.performance=C,E.JSON5=m,E.pako=f,E.yi=i?.proxyAgent,E.yn=i?.identityToken,String.fromCodePoint||(String.fromCodePoint=A=>A<65536?String.fromCharCode(A):String.fromCharCode((A>>10)+55232)+String.fromCharCode((A&1023)+56320)),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(A,z){var a=new Uint8Array(this,A,z==null?null:z-A),ut=new Uint8Array(a.byteLength);return ut.set(a),ut.buffer});var y=t.webkitRTCPeerConnection||t.mozRTCPeerConnection||t.RTCPeerConnection,p=t.webkitRTCIceCandidate||t.mozRTCIceCandidate||t.RTCIceCandidate,q=t.webkitRTCSessionDescription||t.mozRTCSessionDescription||t.RTCSessionDescription;if(!E.noWebRTC){var S=new y({iceServers:[]});try{S.createAnswer().catch(function(A){S.close()})}catch{var N=N.RTCPeerConnection.prototype,T=N.createOffer,M=N.createAnswer;N.createOffer=function(z){var a=this;return new Promise(function(ut,J){T.call(a,ut,J,z)})},N.createAnswer=function(z){var a=this;return new Promise(function(ut,J){M.call(a,ut,J,z)})}}}E.RTCPeerConnection=y,E.RTCIceCandidate=p,E.RTCSessionDescription=q}});var xe=O((Hw,hn)=>{function Qe(t,{x:i,y:n},r){return t.s?.c.C.findIndex(e=>{var s=e.e.x-i,u=e.e.y-n;return s*s+u*u<=r*r})}function Xe(t,{x:i,y:n},r){return t.s?.c.T.findIndex(e=>{var s,u,h,o,l,c,w;if(0*e.jt==0){if(u=i-e.We.x,h=n-e.We.y,(e.Tr.x*u+e.Tr.y*h>0&&e.Rr.x*u+e.Rr.y*h>0)==e.jt<=0)return!1;s=Math.sqrt(u*u+h*h)-e.Js}else{if(o=e.Z.e,l=e.z.e,u=l.x-o.x,h=l.y-o.y,c=i-l.x,w=n-l.y,(i-o.x)*u+(n-o.y)*h<=0||c*u+w*h>=0)return!1;s=e.b.x*c+e.b.y*w}return Math.abs(s)<r})}function Ye(t,{x:i,y:n},r){return t.N.Pt.findIndex(e=>{var s=e.ri,u=e.ei,h=u.x-s.x,o=u.y-s.y,l=i-u.x,c=n-u.y;if((i-s.x)*h+(n-s.y)*o<=0||l*h+c*o>=0)return!1;var w=Math.sqrt(o*o+h*h);return Math.abs(l*o/w-c*h/w)<r})}function $e(t,{x:i,y:n},r){return t.s?.c.Q.findIndex(e=>Math.abs(e.st-(e.b.x*i+e.b.y*n))<r)}function Ze(t,{x:i,y:n},r){var e=t.s?.c;if(!e)return-1;var s=e.p;return e.wt.findIndex(u=>{var h=s[u.$t];if(!h)return!1;var o=s[u.Zt];if(!o)return!1;var l=h.e,c=o.e,w=c.x-l.x,C=c.y-l.y,m=i-c.x,f=n-c.y;if((i-l.x)*w+(n-l.y)*C<=0||m*w+f*C>=0)return!1;var v=Math.sqrt(C*C+w*w);return Math.abs(m*C/v-f*w/v)<r})}function ze(t,{x:i,y:n}){return t.s?.c.p.findIndex(r=>{var e=r.e.x-i,s=r.e.y-n;return e*e+s*s<=r.I*r.I})}function io(t,{x:i,y:n},r){r||(r=t.s?.N.Ti.I);var e=r*r,s=t.s?.N.Dt.findIndex(u=>{var h=u.x-i,o=u.y-n;return h*h+o*o<=e});return s>=0?[s,1]:(s=t.s?.N.at.findIndex(u=>{var h=u.x-i,o=u.y-n;return h*h+o*o<=e}),s>=0?[s,2]:[-1,-1])}function no(t,i,n){return t.s?.c.C[Qe(t,i,n)]}function ro(t,i,n){return t.s?.c.T[Xe(t,i,n)]}function eo(t,i,n){return t.N.Pt[Ye(t,i,n)]}function so(t,i,n){return t.s?.c.Q[$e(t,i,n)]}function uo(t,i,n){return t.s?.c.wt[Ze(t,i,n)]}function ho(t,i){return t.s?.c.p[ze(t,i)]}hn.xM=hn.io||(hn.io={getVertexIndexAtMapCoord:Qe,getVertexAtMapCoord:no,getSegmentIndexAtMapCoord:Xe,getSegmentAtMapCoord:ro,getGoalIndexAtMapCoord:Ye,getGoalAtMapCoord:eo,getPlaneIndexAtMapCoord:$e,getPlaneAtMapCoord:so,getJointIndexAtMapCoord:Ze,getJointAtMapCoord:uo,getDiscIndexAtMapCoord:ze,getDiscAtMapCoord:ho,getSpawnPointIndexAtMapCoord:io})});var qi=O((Jw,fn)=>{var Cr=null,on=[];function fo(t){t&&on.push(t)}function oo(t){if(t){var i=on.indexOf(t);i<0||on.splice(i,1)}}function Hi(t,i=null){this.abbr=t,this.api={errors:{}},this.defineMetadata(i)}Object.defineProperty(Hi,"current",{get:function(){return Cr},set:function(t){Cr=t,on.forEach(i=>{i._onLanguageChange?.(t?.abbr)})}});Hi.prototype.defineMetadata=function(t){};Hi.resolveText=function(t,i){if(t){for(var n=/\$([\d]+)\?\("([^"]*)":"([^"]*)"\)/gm,r=/\$([\d]+)/gm,e,s="",u=0;(e=n.exec(t))!=null;)s+=t.substring(u,e.index)+(i[e[1]-1]?e[2]:e[3]),u=e.index+e[0].length;for(s+=t.substring(u),t="",u=0;(e=r.exec(s))!=null;)t+=s.substring(u,e.index)+i[e[1]-1],u=e.index+e[0].length;return t+=s.substring(u),t}};fn.xM=fn.no||(fn.no={Language:Hi,addRoomToList:fo,removeRoomFromList:oo,sh:(t,i)=>Hi.resolveText(Cr?.api?.errors?.[t],i||[])})});var Q=O((Kw,ln)=>{ln.xM=ln.ro||(ln.ro={Empty:0,ConnectionClosed:1,GameStateTimeout:2,RoomClosed:3,RoomFull:4,WrongPassword:5,BannedBefore:6,IncompatibleVersion:7,FailedHost:8,Unknown:9,Cancelled:10,FailedPeer:11,KickedNow:12,Failed:13,MasterConnectionError:14,StadiumParseError:15,StadiumParseSyntaxError:16,StadiumParseUnknownError:17,ObjectCastError:18,TeamColorsReadError:19,UTF8CharacterDecodeError:20,ReadTooMuchError:21,ReadWrongStringLengthError:22,EncodeUTF8CharNegativeError:23,EncodeUTF8CharTooLargeError:24,CalculateLengthOfUTF8CharNegativeError:25,CalculateLengthOfUTF8CharTooLargeError:26,BufferResizeParameterTooSmallError:27,BadColorError:28,BadTeamError:29,StadiumLimitsExceededError:30,MissingActionConfigError:31,UnregisteredActionError:32,MissingImplementationError:33,AnnouncementActionMessageTooLongError:34,ChatActionMessageTooLongError:35,KickBanReasonTooLongError:36,ChangeTeamColorsInvalidTeamIdError:37,MissingRecaptchaCallbackError:38,ReplayFileVersionMismatchError:39,ReplayFileReadError:40,JoinRoomNullIdAuthError:41,PlayerNameTooLongError:42,PlayerCountryTooLongError:43,PlayerAvatarTooLongError:44,PlayerJoinBlockedByMPDError:45,PlayerJoinBlockedByORError:46,PluginNotFoundError:47,PluginNameChangeNotAllowedError:48,LibraryNotFoundError:49,LibraryNameChangeNotAllowedError:50,AuthFromKeyInvalidIdFormatError:51,BadActorError:55,AuthBannedError:56,NoProxyIdentityProblem:57,NoProxyIdentitySolution:58})});var X=O((Ww,cn)=>{var{E:be}=R(),ft=Q(),{sh:lo}=qi();function vn(){this.code=ft.Empty,this.params=null}vn.prototype={toString:function(){return lo(this.code,this.params)}};function ot(t,...i){var n=new vn;return n.code=t,n.params=i,n}function co(t){this.Ks=t}function De(t){this.Et=t}function pn(t){this.zt=t,Error.captureStackTrace?.(this,pn)}pn.prototype=Error.prototype;Object.defineProperty(pn.prototype,"message",{get:function(){return String(this.zt)}});function vo(t){switch(t){case 4001:return ot(ft.RoomClosed);case 4100:return ot(ft.RoomFull);case 4101:return ot(ft.WrongPassword);case 4102:return ot(ft.BannedBefore);case 4103:return ot(ft.IncompatibleVersion)}return ot(ft.ConnectionClosed,t)}var po={Error:()=>[ot(ft.MasterConnectionError),ot(ft.MasterConnectionError)],eo:()=>[ot(ft.FailedHost),ot(ft.Failed)],so:()=>[ot(ft.Cancelled),ot(ft.Empty)],uo:t=>[vo(t)]};be(vn,["code","params"],[]);be(De,["version"],[]);cn.xM=cn.ho||(cn.ho={Ht:ot,HBError:vn,Qe:co,fo:De,q:pn,At:po})});var Ci=O((Qw,wn)=>{wn.xM=wn.oo||(wn.oo={RoomConfig:0,Plugin:1,Renderer:2,Library:3})});var ae=O((Xw,yn)=>{yn.xM=yn.allowFlags||(yn.allowFlags={JoinRoom:1,CreateRoom:2})});var ts=O((Yw,qn)=>{qn.xM=qn.lo||(qn.lo={None:0,Grass:1,Hockey:2})});var gr=O(($w,Cn)=>{Cn.xM=Cn.co||(Cn.co={Player:0,IP:1,Auth:2})});var is=O((Zw,gn)=>{gn.xM=gn.Gi||(gn.Gi={None:0,Player:1})});var ns=O((zw,mn)=>{mn.xM=mn.vo||(mn.vo={ball:0,red:1,blue:2,redKO:3,blueKO:4,wall:5,kick:6,score:7,free1:8,free2:9,free3:10,free4:11,free5:12,free6:13,free7:14,free8:15,free9:16,free10:17,free11:18,free12:19,free13:20,free14:21,free15:22,free16:23,free17:24,free18:25,free19:26,free20:27,c0:28,c1:29,c2:30,c3:31})});var rs=O((xw,Sn)=>{Sn.xM=Sn.po||(Sn.po={ConnectingToMaster:0,ConnectingToPeer:1,AwaitingState:2,Active:3,ConnectionFailed:4})});var es=O((bw,Nn)=>{Nn.xM=Nn.wo||(Nn.wo={Backward:-1,Still:0,Forward:1})});var ss=O((Dw,kn)=>{kn.xM=kn.yo||(kn.yo={BeforeKickOff:0,Playing:1,AfterGoal:2,Ending:3})});var V=O((aw,On)=>{On.xM=On.qo||(On.qo={SendAnnouncement:0,SendChatIndicator:1,CheckConsistency:2,SendInput:3,SendChat:4,JoinRoom:5,KickBanPlayer:6,StartGame:7,StopGame:8,PauseResumeGame:9,SetGamePlayLimit:10,SetStadium:11,SetPlayerTeam:12,SetTeamsLock:13,SetPlayerAdmin:14,AutoTeams:15,SetPlayerSync:16,Ping:17,SetAvatar:18,SetTeamColors:19,ReorderPlayers:20,SetKickRateLimit:21,SetHeadlessAvatar:22,SetDiscProperties:23,CustomEvent:24,BinaryCustomEvent:25,SetPlayerIdentity:26})});var us=O((ty,Tn)=>{Tn.xM=Tn.Co||(Tn.Co={None:0,GK:1,SW:2,WBL:3,DL:4,DC:5,DR:6,WBR:7,DML:8,DMC:9,DMR:10,ML:11,MC:12,MR:13,AML:14,AMC:15,AMR:16,FL:17,FC:18,FR:19,ST:20})});var mr=O((iy,Rn)=>{Rn.xM=Rn.go||(Rn.go={Void:0,Boolean:1,Integer:2,Number:3,String:4,Color:5,CollisionFlags:6,Coordinate:7,Team:8,TeamWithSpec:9,BgType:10,CameraFollow:11,KickOffReset:12,Flag:13,File:14,PlayerId:15,Keys:16,Progress:17,PlayerPositionInGame:18})});var hs=O((ny,Pn)=>{Pn.xM=Pn.mo||(Pn.mo={AddonType:Ci(),AllowFlags:ae(),BackgroundType:ts(),BanEntryType:gr(),CameraFollow:is(),CollisionFlags:ns(),ConnectionState:rs(),Direction:es(),ErrorCodes:Q(),GamePlayState:ss(),OperationType:V(),PlayerPositionInGame:us(),VariableType:mr()})});var j=O((ry,An)=>{var{setTimeout:ls,clearTimeout:fs,performance:Sr}=R(),zt=Q(),{Ht:xt,q:St}=X();function cs(t,i){var n=t.charCodeAt(i);if(n==n)return n}function Mn(){}Mn.substr=function(t,i,n){if(n==null)n=t.length;else if(0>n)if(i==0)n=t.length+n;else return"";return t.substr(i,n)};Mn.remove=function(t,i){var n=t.indexOf(i);return n==-1?!1:(t.splice(n,1),!0)};function Ji(t,i){i==null&&(i=!1),this.v=t,this._t=i,this.l=0}Ji.So=function(t,i){var n=t.getUint8(i),r,e,s,u,h,o=i;if(!(n&128))++i;else if((n&224)==192)r=t.getUint8(i+1),n=(n&31)<<6|r&63,i+=2;else if((n&240)==224)r=t.getUint8(i+1),e=t.getUint8(i+2),n=(n&15)<<12|(r&63)<<6|e&63,i+=3;else if((n&248)==240)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),n=(n&7)<<18|(r&63)<<12|(e&63)<<6|s&63,i+=4;else if((n&252)==248)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),n=(n&3)<<24|(r&63)<<18|(e&63)<<12|(s&63)<<6|u&63,i+=5;else if((n&254)==252)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),h=t.getUint8(i+5),n=(n&1)<<30|(r&63)<<24|(e&63)<<18|(s&63)<<12|(u&63)<<6|h&63,i+=6;else throw new St(xt(zt.UTF8CharacterDecodeError,i,n));return{char:n,length:i-o}};Ji.prototype={Lt:function(t){if(t==null&&(t=this.v.byteLength-this.l),this.l+t>this.v.byteLength)throw new St(xt(zt.ReadTooMuchError));var i=new Uint8Array(this.v.buffer,this.v.byteOffset+this.l,t);return this.l+=t,i},uh:function(t){var i=this.Lt(t);return t=new ArrayBuffer(t),new Uint8Array(t).set(i),t},Pr:function(){return this.v.getInt8(this.l++)},O:function(){return this.v.getUint8(this.l++)},Ws:function(){var t=this.v.getInt16(this.l,this._t);return this.l+=2,t},At:function(){var t=this.v.getUint16(this.l,this._t);return this.l+=2,t},M:function(){var t=this.v.getInt32(this.l,this._t);return this.l+=4,t},ut:function(){var t=this.v.getUint32(this.l,this._t);return this.l+=4,t},Qs:function(){var t=this.v.getFloat32(this.l,this._t);return this.l+=4,t},S:function(){var t=this.v.getFloat64(this.l,this._t);return this.l+=8,t},Jt:function(){for(var t=this.l,i=0,n,r=0;n=this.v.getUint8(t+i),5>i&&(r|=(n&127)<<7*i>>>0),++i,(n&128)!=0;);return this.l+=i,r|0},Dn:function(t){var i=this.l,n,r="";for(t=i+t;i<t;)n=Ji.So(this.v,i),i+=n.length,r+=String.fromCodePoint(n.char);if(i!=t)throw new St(xt(zt.ReadWrongStringLengthError,i-t));return this.l=i,r},si:function(){var t=this.Jt();return 0>=t?null:this.Dn(t-1)},li:function(){return this.Dn(this.Jt())},hh:function(){return this.Dn(this.O())},Ar:function(){var t=this.li();return JSON.parse(t)}};function rt(t,i){i==null&&(i=!1),this.v=t,this._t=i,this.l=0}rt.U=function(t,i){return i==null&&(i=!1),t==null&&(t=16),new rt(new DataView(new ArrayBuffer(t)),i)};rt.No=function(t,i,n){var r=n;if(0>t)throw new St(xt(zt.EncodeUTF8CharNegativeError,t));if(128>t)i.setUint8(n,t&127),++n;else if(2048>t)i.setUint8(n,t>>6&31|192),i.setUint8(n+1,t&63|128),n+=2;else if(65536>t)i.setUint8(n,t>>12&15|224),i.setUint8(n+1,t>>6&63|128),i.setUint8(n+2,t&63|128),n+=3;else if(2097152>t)i.setUint8(n,t>>18&7|240),i.setUint8(n+1,t>>12&63|128),i.setUint8(n+2,t>>6&63|128),i.setUint8(n+3,t&63|128),n+=4;else if(67108864>t)i.setUint8(n,t>>24&3|248),i.setUint8(n+1,t>>18&63|128),i.setUint8(n+2,t>>12&63|128),i.setUint8(n+3,t>>6&63|128),i.setUint8(n+4,t&63|128),n+=5;else if(-2147483648>t)i.setUint8(n,t>>30&1|252),i.setUint8(n+1,t>>24&63|128),i.setUint8(n+2,t>>18&63|128),i.setUint8(n+3,t>>12&63|128),i.setUint8(n+4,t>>6&63|128),i.setUint8(n+5,t&63|128),n+=6;else throw new St(xt(zt.EncodeUTF8CharTooLargeError,t));return n-r};rt.ko=function(t){if(0>t)throw new St(xt(zt.CalculateLengthOfUTF8CharNegativeError,t));if(128>t)return 1;if(2048>t)return 2;if(65536>t)return 3;if(2097152>t)return 4;if(67108864>t)return 5;if(-2147483648>t)return 6;throw new St(xt(zt.CalculateLengthOfUTF8CharTooLargeError,t))};rt.Xe=function(t){for(var i=0,n=t.length,r=0;r<n;)i+=rt.ko(cs(t,r++));return i};rt.Oo=function(t){return t>>>=0,128>t?1:16384>t?2:2097152>t?3:268435456>t?4:5};rt.prototype={Ye:function(){var t=new ArrayBuffer(this.l),i=new Uint8Array(this.v.buffer,this.v.byteOffset,this.l);return new Uint8Array(t).set(i),t},dt:function(){return new Uint8Array(this.v.buffer,this.v.byteOffset,this.l)},_n:function(){return new DataView(this.v.buffer,this.v.byteOffset,this.l)},To:function(){return new Ji(this._n(),this._t)},Vi:function(t){this.v.byteLength<t&&this.Ro(2*this.v.byteLength>=t?2*this.v.byteLength:t)},Ro:function(t){if(1>t)throw new St(xt(zt.BufferResizeParameterTooSmallError));if(this.v.byteLength<t){var i=new Uint8Array(this.v.buffer);t=new ArrayBuffer(t),new Uint8Array(t).set(i),this.v=new DataView(t)}},o:function(t){var i=this.l++;this.Vi(this.l),this.v.setUint8(i,t)},Xs:function(t){var i=this.l;this.l+=2,this.Vi(this.l),this.v.setInt16(i,t,this._t)},Ut:function(t){var i=this.l;this.l+=2,this.Vi(this.l),this.v.setUint16(i,t,this._t)},G:function(t){var i=this.l;this.l+=4,this.Vi(this.l),this.v.setInt32(i,t,this._t)},St:function(t){var i=this.l;this.l+=4,this.Vi(this.l),this.v.setUint32(i,t,this._t)},Ys:function(t){var i=this.l;this.l+=4,this.Vi(this.l),this.v.setFloat32(i,t,this._t)},g:function(t){var i=this.l;this.l+=8,this.Vi(this.l),this.v.setFloat64(i,t,this._t)},Yt:function(t){var i=this.l;this.l+=t.byteLength,this.Vi(this.l),new Uint8Array(this.v.buffer,this.v.byteOffset,this.v.byteLength).set(t,i)},$e:function(t){this.Yt(new Uint8Array(t))},ci:function(t){this.Ft(rt.Xe(t)),this.Mr(t)},ui:function(t){t==null?this.Ft(0):(this.Ft(rt.Xe(t)+1),this.Mr(t))},fh:function(t){var i=rt.Xe(t);if(255<i)throw new St(null);this.o(i),this.Mr(t)},Ze:function(t){this.ci(JSON.stringify(t))},Mr:function(t){var i=this.l;this.Vi(i+rt.Xe(t));for(var n=t.length,r=0;r<n;)i+=rt.No(cs(t,r++),this.v,i);this.l=i},Ft:function(t){var i=this.l;t>>>=0,this.Vi(i+rt.Oo(t)),this.v.setUint8(i,t|128),128<=t?(this.v.setUint8(i+1,t>>7|128),16384<=t?(this.v.setUint8(i+2,t>>14|128),2097152<=t?(this.v.setUint8(i+3,t>>21|128),268435456<=t?(this.v.setUint8(i+4,t>>28&127),t=5):(this.v.setUint8(i+3,this.v.getUint8(i+3)&127),t=4)):(this.v.setUint8(i+2,this.v.getUint8(i+2)&127),t=3)):(this.v.setUint8(i+1,this.v.getUint8(i+1)&127),t=2)):(this.v.setUint8(i,this.v.getUint8(i)&127),t=1),this.l+=t}};function vs(t){this.Po=t,this.Kt=[]}vs.prototype={add:function(t){for(var i=this.Kt.length,n=0,r=this.ze=0;r<i;){var e=r++,s=this.Kt[e];s.index++,s.weight*=.97,this.Kt[n].index<s.index&&(n=e),this.ze+=s.weight}for(i>=this.Po?(i=this.Kt[n],this.ze-=i.weight,this.Kt.splice(n,1)):i={},i.value=t,i.weight=1,i.index=0,this.ze+=i.weight,t=0;t<this.Kt.length&&this.Kt[t].value<=i.value;)++t;this.Kt.splice(t,0,i)},xe:function(t){if(this.Kt.length==0)return 0;if(this.Kt.length==1)return this.Kt[0].value;t*=this.ze;for(var i=this.Kt[0].weight,n=0;n<this.Kt.length-1&&!(i>=t);)++n,i+=this.Kt[n].weight;return this.Kt[n].value},max:function(){return this.Kt.length==0?0:this.Kt[this.Kt.length-1].value}};function ps(t,i){this.oh=t,this.$s=i,this.dn=t,this.be=Sr.now()}ps.prototype={lh:function(t){return t==null&&(t=1),this.lt(),t<=this.dn?(this.dn-=t,!0):!1},Ao:function(t){return this.lt(),t-=this.dn,0>=t?0:this.be+t*this.$s-Sr.now()},Pv:function(t,i){var n=this.Ao(t);this.dn-=t,ls(i,n|0)},lt:function(){var t=Sr.now(),i=Math.floor((t-this.be)/this.$s);this.be+=i*this.$s,this.dn+=i,this.dn>=this.oh&&(this.dn=this.oh,this.be=t)}};var os={};An.xM=An.Mo||(An.Mo={D:Mn,F:Ji,w:rt,jo:vs,St:ps,Integer:os,ch:(t,i)=>{var n=i!=null;if(n){switch(i){case Array:n=t instanceof Array;break;case Boolean:n=typeof t=="boolean";break;case Number:n=typeof t=="number";break;case os:n=typeof t=="number"&&(t|0)===t;break;case String:n=typeof t=="string";break;default:n=!1}if(n)return t}throw new St(xt(zt.ObjectCastError,JSON.stringify(t),JSON.stringify(i)))},vh:(t,i)=>new Promise((n,r)=>{var e=ls(()=>{r("Timed out")},i);t.then(s=>{fs(e),n(s)},s=>{fs(e),r(s)})}),Bn:(t,i)=>t.length<=i?t:Mn.substr(t,0,i),extend:(t,i)=>{var n=Object.create(t),r;for(r in i)n[r]=i[r];return i.toString!==Object.prototype.toString&&(n.toString=i.toString),n}})});var li=O((ey,jn)=>{var{D:wo}=j(),Nr="0123456789ABCDEF";function ws(){}ws.parseInt=function(t){return t=parseInt(t,!t||t[0]!="0"||t[1]!="x"&&t[1]!="X"?10:16),isNaN(t)?null:t};function En(){}En.startsWith=function(t,i){return t.length>=i.length?wo.substr(t,0,i.length)==i:!1};En.replace=function(t,i,n){return t.split(i).join(n)};En.Zs=function(t,i){var n="";do n=Nr.charAt(t&15)+n,t>>>=4;while(t>0);if(i!=null)for(;n.length<i;)n="0"+n;return n};var yo=t=>{for(var i="",n=0;n<t.length;)i+=String.fromCharCode(Nr.indexOf(t.charAt(n++))<<4|Nr.indexOf(t.charAt(n++)));return i},qo=t=>{for(var i="",n=0,r=t.byteLength;n<r;)i+=String.fromCharCode(t[n++]);return i};jn.xM=jn.Eo||(jn.Eo={ph:yo,wh:qo,K:ws,J:En})});var ht=O((sy,ys)=>{var{E:Co}=R();function vt(t,i,n,r,e){this.id=t,this.k=i,this.yh=n,this.u=r,this.f=e}vt.spec=new vt(0,16777215,0,-1,0);vt.red=new vt(1,15035990,-1,8,2);vt.blue=new vt(2,5671397,1,16,4);vt.i=[vt.spec,vt.red,vt.blue];Co(vt,["id","color","defenseDir","cMask","cGroup"],[]);ys.xM=vt});var ii=O((uy,_n)=>{_n.xM=_n._o||(_n._o={Li:0})});var qs=O((Bn,In)=>{var dn=(()=>{var t=(c,w)=>()=>(w||c((w={xM:{}}).xM,w),w.xM),i=t((c,w)=>{function C(m,f){this.x=m,this.y=f}C.prototype={qh:function(){this.x=-this.x,this.y=-this.y}},w.xM=C}),n=t((c,w)=>{var C=i();w.xM=function(m){var{f=32,u:v=63,h:y=1,Bo:p=0,Io:q=0}=m||{};this.f=f,this.u=v,this.h=y,this.e=new C(p,q)}}),r=t((c,w)=>{function C(f){var{f:v=32,u:y=63,h:p=1,Wt:q=0,Z:S=null,z:N=null}=f||{};this.Tr=this.Rr=this.b=null,this.Js=0,this.We=null,this.Z=S,this.z=N,this.Wt=q,this.h=p,this.u=y,this.f=v,this.jt=1/0}var m=i();C.prototype={Ri:function(f){if(f*=.017453292519943295,0>f){f=-f;var v=this.Z;this.Z=this.z,this.z=v,this.Wt=-this.Wt}.17435839227423353<f&&5.934119456780721>f&&(this.jt=1/Math.tan(f/2))},getCurveDegrees:function(){return isFinite(this.jt)?114.59155902616465*Math.atan(1/this.jt):0},calculateNormals:function(){var{jt:f,z:{e:v},Z:{e:y}}=this,p,q,S,N;isFinite(f)?(S=.5*(v.x-y.x),N=.5*(v.y-y.y),p=y.x+S-N*f,q=y.y+N+S*f,S=y.x-p,N=y.y-q,this.Js=Math.sqrt(S*S+N*N),this.Tr=new m(q-y.y,y.x-p),this.Rr=new m(v.y-q,p-v.x),0>=f&&(this.Tr.qh(),this.Rr.qh()),this.We=new m(p,q)):(S=y.x-v.x,N=y.y-v.y,q=Math.sqrt(N*N+S*S),this.b=new m(-N/q,S/q))}},w.xM=C}),e=t((c,w)=>{var C=i();w.xM=function(m){var{f=32,u:v=63,h:y=1,st:p=0,Av:q=0,Mv:S=0}=m||{};this.f=f,this.u=v,this.h=y,this.st=p,this.b=new C(q,S)}}),s=t((c,w)=>{function C(f){var{jv:v=0,Ev:y=0,_v:p=0,dv:q=0}=f||{};this.ei=new m(p,q),this.ri=new m(v,y)}var m=i();C.prototype={Go:function({x:f,y:v},{x:y,y:p}){var{ri:{x:q,y:S},ei:{x:N,y:T}}=this,M=y-f,A=p-v;return 0<A*(q-f)-M*(S-v)==0<A*(N-f)-M*(T-v)?!1:(M=N-q,A=T-S,0<A*(f-q)-M*(v-S)!=0<A*(y-q)-M*(p-S))}},w.xM=C}),u=t((c,w)=>{var C=i();w.xM=function(m){var{f=63,u:v=63,Y:y=.99,H:p=1,h:q=.5,I:S=10,xgravity:N=0,ygravity:T=0,xspeed:M=0,yspeed:A=0,Bo:z=0,Io:a=0}=m||{};this.f=f,this.u=v,this.Y=y,this.H=p,this.h=q,this.I=S,this.P=new C(N,T),this.A=new C(M,A),this.e=new C(z,a)}}),h=t((c,w)=>{w.xM=function(C){var{Pi:m=1/0,Bt:f=100,It:v=100,$t:y=0,Zt:p=0}=C||{};this.Pi=m,this.Bt=f,this.It=v,this.$t=y,this.Zt=p}}),o=t((c,w)=>{function C(f){m.apply(this,[f])}var m=u();C.prototype={Ch:function(f,v,y){var{A:p,H:q}=this;p.x+=f*v*q,p.y+=f*y*q},Vo:function(f,v){var{A:y}=this;y.x+=f,y.y+=v},Lo:function(){var{x:f,y:v}=this.A;return 0<f*f+v*v}},w.xM=C}),l=t((c,w)=>{function C(){this.p=[],this.C=[],this.Q=[],this.T=[],this.wt=[]}C.prototype={De:function(m,f){var v,y,p,q,S,N,{p:T,Q:M,T:A,C:z,wt:a}=this;T.forEach(({e:J,A:B,P:it,Y:nt})=>{var{x:wt,y:mt}=B;J.x+=m*wt,J.y+=m*mt,B.x=nt*(wt+it.x),B.y=nt*(mt+it.y)}),T.forEach((J,B)=>{var{h:it,I:nt,u:wt,f:mt,H:Dt,e:W,A:Y}=J;for(v=B+1;v<T.length;v++)if(p=T[v],p.u&mt&&p.f&wt){var{e:Zt,A:yt}=p,ct=W.x-Zt.x,at=W.y-Zt.y,qt=ct*ct+at*at,I=p.I+nt;if(0<qt&&qt<=I*I){qt=Math.sqrt(qt),ct/=qt,at/=qt;var ti=Dt/(Dt+p.H);I-=qt,qt=I*ti,W.x+=ct*qt,W.y+=at*qt,I-=qt,Zt.x-=ct*I,Zt.y-=at*I,I=ct*(Y.x-yt.x)+at*(Y.y-yt.y),0>I&&(I*=it*p.h+1,ti*=I,Y.x-=ct*ti,Y.y-=at*ti,ti=I-ti,yt.x+=ct*ti,yt.y+=at*ti,f?.jr?.(B,J,v,p))}}if(Dt!=0){M.forEach((F,Fi)=>{if(F.u&mt&&F.f&wt){var{b:{x:U,y:G}}=F;q=F.st-(U*W.x+G*W.y)+nt,0<q&&(W.x+=U*q,W.y+=G*q,q=Y.x*U+Y.y*G,0>q&&(q*=it*F.h+1,Y.x-=q*U,Y.y-=q*G,f?.Er?.(B,J,Fi)))}}),A.forEach((F,Fi)=>{if(F.u&mt&&F.f&wt){var U,G,H,{x:yr,y:qr}=W;if(isFinite(F.jt)){if(G=F.We,U=yr-G.x,G=qr-G.y,H=F.Tr,I=F.Rr,(0<H.x*U+H.y*G&&0<I.x*U+I.y*G)==0>=F.jt||(I=Math.sqrt(U*U+G*G),I==0))return;H=I-F.Js,U/=I,G/=I}else{var{x:Ue,y:Fe}=F.Z.e,{x:He,y:Je}=F.z.e;if(G=He-Ue,U=Je-Fe,H=yr-He,I=qr-Je,0>=(yr-Ue)*G+(qr-Fe)*U||0<=H*G+I*U)return;G=F.b,U=G.x,G=G.y,H=U*H+G*I}if(I=F.Wt,I==0)0>H&&(H=-H,U=-U,G=-G);else if(0>I&&(I=-I,H=-H,U=-U,G=-G),H<-I)return;H>=nt||(H=nt-H,W.x+=U*H,W.y+=G*H,H=U*Y.x+G*Y.y,0>H&&(H*=it*F.h+1,Y.x-=U*H,Y.y-=G*H,f?._r?.(B,J,Fi)))}});var to=nt*nt;z.forEach((F,Fi)=>{if(F.u&mt&&F.f&wt&&(q=W.x-F.e.x,S=W.y-F.e.y,N=q*q+S*S,0<N&&N<=to)){N=Math.sqrt(N),q/=N,S/=N,N=nt-N,W.x+=q*N,W.y+=S*N,N=q*Y.x+S*Y.y;var U=0>N;U&&(N*=it*F.h+1,Y.x-=q*N,Y.y-=S*N),f?.dr?.(B,J,Fi,U)}})}});for(var ut=0;2>ut;ut++)a.forEach(({Zt:J,$t:B,Pi:it,It:nt,Bt:wt},mt)=>{if(J=T[J],B=T[B],J&&B){var{e:Dt,A:W,H:Y}=J,{e:Zt,A:yt,H:ct}=B;if(y=Dt.x-Zt.x,B=Dt.y-Zt.y,p=Math.sqrt(y*y+B*B),!(0>=p)){if(y/=p,B/=p,v=Y/(Y+ct),v!=v&&(v=.5),nt>=wt)q=nt,S=0;else if(p<=nt)q=nt,S=1;else if(p>=wt)q=wt,S=-1;else return;p=q-p,isFinite(it)?(v=it*p*.5,y*=v,B*=v,W.x+=y*Y,W.y+=B*Y,yt.x-=y*ct,yt.y-=B*ct,f?.an?.(mt,!1,!0)):(q=p*v,Dt.x+=y*q*.5,Dt.y+=B*q*.5,p-=q,Zt.x-=y*p*.5,Zt.y-=B*p*.5,p=y*(W.x-yt.x)+B*(W.y-yt.y),(it=0>=S*p)&&(v*=p,W.x-=y*v,W.y-=B*v,v=p-v,yt.x+=y*v,yt.y+=B*v),f?.an?.(mt,!0,it))}}})},addDisc:function(m){this.p.push(m)},removeDisc:function(m){m=this.p.indexOf(m),0>m||this.p.splice(m,1)}},w.xM=C});return t((c,w)=>{w.xM={Point:i(),zs:n(),ae:r(),xs:e(),Uo:s(),ts:u(),bs:h(),Ds:o(),as:l()}})()})();typeof Bn<"u"?(typeof In<"u"&&In.xM&&(Bn=In.xM=dn),Bn.Bv=dn):typeof root<"u"?root.nago=dn:window.nago=dn});var gi=O((hy,Gn)=>{var{E:ri}=R(),{extend:ei}=j(),Vn=ht(),gs=ii(),{Point:go,zs:ms,ae:Ss,xs:Ns,Uo:ks,ts:Os,bs:Ts,Ds:Rs,as:Ps}=qs(),Cs=1/Math.SQRT2;function kr(){ms.call(this),this.id=0}kr.prototype=ei(ms.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),t.g(this.h),t.G(this.u),t.G(this.f)},a:function(t){var i=this.e;i.x=t.S(),i.y=t.S(),this.h=t.S(),this.u=t.M(),this.f=t.M()}});function Or(){Ss.call(this),this.Nt=!0,this.k=0}Or.prototype=ei(Ss.prototype,{$:function(t){var i=0,n=t.l;t.o(0),t.o(this.Z.id),t.o(this.z.id),this.Wt!=0&&(i=1,t.g(this.Wt)),this.jt!=1/0&&(i|=2,t.g(this.jt)),this.k!=0&&(i|=4,t.G(this.k)),this.Nt&&(i|=8),t.v.setUint8(n,i),t.g(this.h),t.G(this.u),t.G(this.f)},a:function(t,i){var n=t.O();this.Z=i[t.O()],this.z=i[t.O()],this.Wt=n&1?t.S():0,this.jt=n&2?t.S():1/0,this.k=n&4?t.M():0,this.Nt=(n&8)!=0,this.h=t.S(),this.u=t.M(),this.f=t.M()}});function Tr(){Ns.call(this)}Tr.prototype=ei(Ns.prototype,{$:function(t){var i=this.b;t.g(i.x),t.g(i.y),t.g(this.st),t.g(this.h),t.G(this.u),t.G(this.f)},a:function(t){var i=this.b;i.x=t.S(),i.y=t.S(),this.st=t.S(),this.h=t.S(),this.u=t.M(),this.f=t.M()}});function Rr(){ks.call(this),this.R=Vn.spec}Rr.prototype=ei(ks.prototype,{$:function(t){var i=this.ri;t.g(i.x),t.g(i.y),i=this.ei,t.g(i.x),t.g(i.y),t.o(this.R.id)},a:function(t){var i=this.ri;i.x=t.S(),i.y=t.S(),i=this.ei,i.x=t.S(),i.y=t.S(),this.R=Vn.i[t.Pr()]||Vn.spec}});function Pr(){Os.call(this),this.k=16777215}Pr.prototype=ei(Os.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),i=this.A,t.g(i.x),t.g(i.y),i=this.P,t.g(i.x),t.g(i.y),t.g(this.I),t.g(this.h),t.g(this.H),t.g(this.Y),t.St(this.k),t.G(this.u),t.G(this.f)},a:function(t){var i=this.e;i.x=t.S(),i.y=t.S(),i=this.A,i.x=t.S(),i.y=t.S(),i=this.P,i.x=t.S(),i.y=t.S(),this.I=t.S(),this.h=t.S(),this.H=t.S(),this.Y=t.S(),this.k=t.ut(),this.u=t.M(),this.f=t.M()},Fo:function(){var t=new Nt;return this.gh(t),t},gh:function(t){var i=t.e,n=this.e;i.x=n.x,i.y=n.y,i=t.A,n=this.A,i.x=n.x,i.y=n.y,i=t.P,n=this.P,i.x=n.x,i.y=n.y,t.I=this.I,t.h=this.h,t.H=this.H,t.Y=this.Y,t.k=this.k,t.u=this.u,t.f=this.f}});function Ar(){Ts.call(this),this.k=0}Ar.prototype=ei(Ts.prototype,{$:function(t){t.o(this.Zt),t.o(this.$t),t.g(this.It),t.g(this.Bt),t.g(this.Pi),t.G(this.k)},a:function(t){this.Zt=t.O(),this.$t=t.O(),this.It=t.S(),this.Bt=t.S(),this.Pi=t.S(),this.k=t.M()}});function Nt(){Rs.call(this),this.d=null,this.Ai=-1,this.tt=null,this.mh=0,this.k=16777215}Nt.In=function(t,i){t.I=i.I,t.h=i.h,t.H=i.H,t.Y=i.Y,t.k=i.k,t.u=i.u,t.f=i.f;var n=t.e,r=i.e;n.x=r.x,n.y=r.y,n=t.A,r=i.A,n.x=r.x,n.y=r.y,n=t.P,r=i.P,n.x=r.x,n.y=r.y};Nt.prototype=ei(Rs.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),i=this.A,t.g(i.x),t.g(i.y),i=this.P,t.g(i.x),t.g(i.y),t.g(this.I),t.g(this.h),t.g(this.H),t.g(this.Y),t.St(this.k),t.G(this.u),t.G(this.f)},a:function(t){var i=this.e;i.x=t.S(),i.y=t.S(),i=this.A,i.x=t.S(),i.y=t.S(),i=this.P,i.x=t.S(),i.y=t.S(),this.I=t.S(),this.h=t.S(),this.H=t.S(),this.Y=t.S(),this.k=t.ut(),this.u=t.M(),this.f=t.M()},Ui:function(){var t=gs.Li;return t!=this.Ai&&(this.tt||(this.tt=new Nt),this.Ai=t,Nt.In(this.tt,this)),this.tt}});function ni(){Ps.call(this),this.Pt=[],this.Ai=-1,this.tt=null}ni.In=function(t,i){if(i.p==null)t.p=null;else{t.p==null&&(t.p=[]);for(var n=t.p,r=i.p,e=r.length,s;n.length>e;)n.pop();for(e=0,s=r.length;e<s;){var u=e++;n[u]=r[u].Ui()}}t.C=i.C,t.T=i.T,t.Q=i.Q,t.wt=i.wt};ni.prototype=ei(Ps.prototype,{$:function(t){t.o(this.p.length);for(var i=0,n=this.p.length;i<n;){var r=i++,e=this.p[r];e.mh=r,e.$(t)}},a:function(t){this.p=[];for(var i=t.O(),n=0;n<i;){++n;var r=new Nt;r.a(t),this.addDisc(r)}},Ui:function(){var t=gs.Li;return t!=this.Ai&&(this.tt||(this.tt=new ni),this.Ai=t,ni.In(this.tt,this)),this.tt},kickBall:function(t,i,n){var e=i.e,s=t.e,r=e.x-s.x,e=e.y-s.y,s=Math.sqrt(r*r+e*e);if(!(s-i.I-t.I>=4)){var u=r/s,h=e/s;return i.Ch(n.qn,u,h),t.Ch(-n.Cn,u,h),!0}},Ho:function(t,i){var n=t.Ot,r=((n&8)>0)-((n&4)>0),e=r==0,s=((n&2)>0)-((n&1)>0),u=s==0;!e&&!u&&(r*=Cs,s*=Cs),n=t.qi,(!e||!u)&&(u=n?i.gn:i.mn,t.V.Vo(r*u,s*u)),t.V.Y=n?i.Sn:i.Y},Sh:function(t,i){t.V&&(this.removeDisc(t.V),i?.(t),t.V=null)},Jo:function(t,i,n){t.Ot=0;var r=t.V;r==null&&(r=new Nt,r.d=t.id,t.V=r,this.addDisc(r),n?.(t));var e=i.Ti;r.k=0,r.I=e.I,r.H=e.H,r.Y=e.Y,r.h=e.h,r.u=39,r.f=t.R.f|e.f;var s=t.R==Vn.red?i.Dt:i.at;s.length==0?(r.e.x=t.R.yh*i.Mi,r.e.y=0):(t=r.e,s=s[s.length-1],t.x=s.x,t.y=s.y),s=r.A,s.x=0,s.y=0,r=r.P,e=e.P,r.x=e.x,r.y=e.y}});ni.Ko=t=>{var i=new ni;return i.C=t.C,i.T=t.T,i.Pt=t.Pt,i.Q=t.Q,i.wt=t.wt,t.p.forEach(n=>{var r=new Nt;return r.e.x=n.e.x,r.e.y=n.e.y,r.A.x=n.A.x,r.A.y=n.A.y,r.P.x=n.P.x,r.P.y=n.P.y,r.I=n.I,r.h=n.h,r.H=n.H,r.Y=n.Y,r.k=n.k,r.u=n.u,r.f=n.f,i.addDisc(r),r}),i};ri(kr,["cGroup","cMask","bCoef","pos","id"],[]);ri(Or,["normal","v1Normal","v0Normal","arcRadius","arcCenter","v0","v1","bias","bCoef","cMask","cGroup","curveF","vis","color"],[]);ri(Tr,["cGroup","cMask","bCoef","dist","normal"],[]);ri(Rr,["p1","p0","team"],[]);ri(Pr,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","color"],[]);ri(Ar,["strength","maxLength","minLength","d1","d0","color"],[]);ri(Nt,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","playerId",null,"ext",null,"color"],[]);ri(ni,["discs","vertices","planes","segments","joints","goals",null,"ext"],[]);Gn.xM=Gn.Wo||(Gn.Wo={Point:go,zs:kr,ae:Or,xs:Tr,Qo:Rr,ts:Pr,bs:Ar,Ds:Nt,as:ni})});var Mr=O((fy,Ln)=>{var{noVariableValueChangeEvent:mo}=R(),Un=[];function P(t,i){Un.push({name:t})}function So(t){var i=Un.findIndex(n=>n.name==t);i<0||Un.splice(i,1)}P("PlayerObjectCreated");P("PlayerDiscCreated");P("PlayerDiscDestroyed");P("RoomLink");P("PlayerBallKick");P("TeamGoal");P("GameEnd");P("GameTick");P("PlayerSyncChange");P("Announcement");P("KickOff");P("AutoTeams");P("ScoreLimitChange");P("TimeLimitChange");P("PlayerAdminChange");P("PlayerAvatarChange");P("PlayerHeadlessAvatarChange");P("PlayersOrderChange");P("PlayerTeamChange");P("StadiumChange");P("TeamColorsChange");P("TeamsLockChange");P("PlayerJoin");P("GamePauseChange");P("PlayerChat");P("PlayerInputChange");P("PlayerChatIndicatorChange");P("PlayerLeave");P("SetDiscProperties");P("KickRateLimitChange");P("GameStart");P("GameStop");P("PingData");P("PingChange");P("CollisionDiscVsDisc");P("CollisionDiscVsSegment");P("CollisionDiscVsPlane");P("CollisionDiscVsVertex");P("ModifyJoint");P("TimeIsUp");P("PositionsReset");P("BansClear");P("BanClear");P("HandicapChange");P("RoomRecaptchaModeChange");P("RoomTokenChange");P("RoomRecordingChange");P("RoomPropertiesChange");P("CustomEvent");P("BinaryCustomEvent");P("IdentityEvent");P("PluginActiveChange");P("ConfigUpdate");P("RendererUpdate");P("PluginUpdate");P("LibraryUpdate");P("LanguageChange");mo||P("VariableValueChange");Ln.xM=Ln.tu||(Ln.tu={tu:Un,Xo:P,Yo:So})});var d=O((oy,Fn)=>{var mi=Q(),{Ht:Si,q:Ni}=X();function Ct(){this.L=0}Ct.iu=new Map;Ct.yt=function(t){return t.ot==null&&(t.ot=!0),t.ct==null&&(t.ct=!0),t};Ct.qt=function(t){if(t.Nh=t.prototype.eventType,t.vt==null)throw new Ni(Si(mi.MissingActionConfigError));t.prototype.tr=t.vt,Ct.iu.set(t.Nh,t)};Ct.Nn=function(t,i){var n=t?.it?.Nh;if(n==null)throw new Ni(Si(mi.UnregisteredActionError));i.o(n),t.ht(i)};Ct.ai=function(t,i){var n=Object.create(Ct.iu.get(t.O()).prototype);return n.L=0,n.kt=0,n.ft(t,i),n};Ct.prototype={kh:function(){return!0},apply:function(){throw new Ni(Si(mi.MissingImplementationError))},ft:function(){throw new Ni(Si(mi.MissingImplementationError))},ht:function(){throw new Ni(Si(mi.MissingImplementationError))},copy:function(){throw new Ni(Si(mi.MissingImplementationError))},it:Ct};Object.defineProperty(Ct.prototype,"eventType",{get(){return null}});function No(t,i){return t.L=i.L,t.kt=i.kt,t.i=i.i,t.is=i.is,t}Fn.xM=Fn.$o||(Fn.$o={Event:Ct,Ct:No})});var jr=O((ly,As)=>{function Hn(){this.list=[]}Hn.Zo=function(t,i,n){if(t.length==0)for(t=0;t<i.length;)n.push(i[t++]);else if(i.length==0)for(i=0;i<t.length;)n.push(t[i++]);else for(var r=0,e=t.length,s=0,u=i.length;;){var h=t[r],o=i[s];if(h.kt<=o.kt){if(n.push(h),++r,r>=e){for(;s<u;)n.push(i[s++]);break}}else if(n.push(o),++s,s>=u){for(;r<e;)n.push(t[r++]);break}}};Hn.prototype={nu:function(t){for(var i=0,n=t.kt,r=t.L,e=0,s=this.list;e<s.length;){var u=s[e];++e;var h=u.kt;if(h>n)break;if(h==n){if(u=u.L,u>r)break;u==r&&++r}++i}t.L=r,this.list.splice(i,0,t)},zo:function(t){for(var i=0,n=0,r=this.list;n<r.length&&!(r[n++].kt>=t);)++i;this.list.splice(0,i)},xo:function(t,i){for(var n=this.list;0<n.length;)n.pop();Hn.Zo(t.list,i.list,this.list)},bo:function(t){for(var i=0,n=this.list,r=0,e=n.length;r<e;){var s=n[r++];s.Gn!=t&&(n[i]=s,++i)}for(;n.length>i;)n.pop()},Do:function(t){for(var i=0,n=0,r=this.list;n<r.length&&!(r[n++].kt>=t);)++i;return i}};As.xM=Hn});var ki=O((cy,Es)=>{var{Ht:Er,q:_r}=X(),Ms=jr(),ko=ii(),dr=Q();function js(t){this.ru=new Ms,this.Vn=0,this.ti=0,this.tn=new Ms,this.Ci=0,this.nn=0,this.rn=.06,this.eu=16.666666666666668,this.ns=120,this.m=0,this.t=t}js.prototype={_:function(){throw new _r(Er(dr.MissingImplementationError))},en:function(t=0){throw new _r(Er(dr.MissingImplementationError))},lt:function(){throw new _r(Er(dr.MissingImplementationError))},Oh:function(t){for(var i=this.tn.list,n=0,r=i.length,e=0;e<t;){for(++e;n<r;){var s=i[n];if(s.kt!=this.m)break;s.apply(this.t),this.ii!=null&&this.ii(s),this.ti++,++n}this.t.lt(1),this.Vn+=this.ti,this.ti=0,this.m++}for(;n<r&&(t=i[n],!(t.kt!=this.m||t.L!=this.ti));)t.apply(this.t),this.ii!=null&&this.ii(t),this.ti++,++n;i.splice(0,n)},Br:function(t){t.kt==this.m&&t.L<=this.ti?(t.L=this.ti++,t.apply(this.t,this.haxball),this.ii!=null&&this.ii(t)):this.tn.nu(t)},Th:function(t,i){if(0>=t)return this.t;t>this.ns&&(t=this.ns),ko.Li++;var n=this.t.Ui(),r;i!=null?(this.ru.xo(this.tn,i),r=this.ru):r=this.tn,r=r.list;for(var e=0,s=r.length,u=this.m,h=t|0,o=u+h;u<=o;){for(;e<s;){var l=r[e];if(l.kt>u)break;l.tr.ct&&l.apply(n),++e}n.lt(u!=o?1:t-h),++u}for(r=this.ru.list;0<r.length;)r.pop();return n},ao:function(t){this.Ci=this.rn*t|0,this.t.Ir?.(t)}};Es.xM=js});var ds=O((vy,_s)=>{var{E:Oo}=R(),{Ht:To,q:Ro}=X(),{Event:Br,Ct:Po}=d(),Ao=Q(),Mo=V(),{extend:jo,Bn:Eo}=j();function kt(){this.L=0,this.ir="",this.k=0,this.Gr=0,this.Vr=0,this.i=0,this.is=null}kt.create=function(t,i,n,r){var e=new kt;return e.ir=t,e.k=i,e.Gr=n,e.Vr=r,e};kt.prototype=jo(Br.prototype,{apply:function(t){this.i==0&&t.Lr?.(this.ir,this.k,this.Gr,this.Vr)},ht:function(t){t.ci(Eo(this.ir,1e3)),t.G(this.k),t.o(this.Gr),t.o(this.Vr)},ft:function(t){if(this.ir=t.li(),1e3<this.ir.length)throw new Ro(To(Ao.AnnouncementActionMessageTooLongError));this.k=t.M(),this.Gr=t.O(),this.Vr=t.O()},copy:function(){return Po(kt.create(this.ir,this.k,this.Gr,this.Vr),this)},it:kt});Object.defineProperty(kt.prototype,"eventType",{get(){return Mo.SendAnnouncement}});kt.vt=Br.yt({ct:!1,ot:!1,su:{uu:10,hu:900}});Br.qt(kt);Oo(kt,[null,"msg","color","style","sound","byId","targetId"],[]);_s.xM=kt});var Is=O((py,Bs)=>{var{E:_o}=R(),{Event:Ir,Ct:Bo}=d(),Io=V(),{extend:Go}=j();function Ot(){this.L=0,this.value=0,this.id=null,this.nr=null,this.i=0}Ot.create=function(t,i,n){var r=new Ot;return r.value=t,r.id=i,r.nr=n,r};Ot.prototype=Go(Ir.prototype,{apply:function(t){if(this.id!=null){t.Rh&&t.Rh(this.i,this.id,this.nr);return}var i=t.getPlayer(this.i);i!=null&&t.Ur?.(i,this.value)},ht:function(t){t.o(this.value),this.id!=null&&this.nr!=null&&(t.G(this.id),t.o(this.nr))},ft:function(t,i){if(this.value=t.O(),!i)try{this.id=t.M(),this.nr=t.O()}catch{}},copy:function(){return Bo(Ot.create(this.value,this.id,this.nr),this)},it:Ot});Object.defineProperty(Ot.prototype,"eventType",{get(){return Io.SendChatIndicator}});Ot.vt=Ir.yt({ct:!1,ot:!1});Ir.qt(Ot);_o(Ot,[null,"value","id","mode","byId"],[]);Bs.xM=Ot});var Vs=O((wy,Gs)=>{var{E:Vo}=R(),{Event:Gr,Ct:Lo}=d(),Uo=V(),{extend:Fo}=j();function Tt(){this.L=0,this.data=null}Tt.create=function(t){var i=new Tt;return i.data=t,i};Tt.prototype=Fo(Gr.prototype,{apply:function(t){t.tl(this.data)},ht:function(t){t.Ft(this.data.byteLength),t.$e(this.data)},ft:function(t){this.data=t.uh(t.Jt())},copy:function(){var t=null;return this.data&&(t=new ArrayBuffer(this.data.byteLength),new Uint8Array(t).set(new Uint8Array(this.data))),Lo(Tt.create(t),this)},it:Tt});Object.defineProperty(Tt.prototype,"eventType",{get(){return Uo.CheckConsistency}});Tt.vt=Gr.yt({ct:!1,ot:!1});Gr.qt(Tt);Vo(Tt,[null,"data"],[]);Gs.xM=Tt});var Us=O((yy,Ls)=>{var{E:Ho}=R(),{Event:Vr,Ct:Jo}=d(),Ko=V(),{extend:Wo}=j();function Rt(){this.L=0,this.Ot=0,this.i=0}Rt.create=function(t){var i=new Rt;return i.Ot=t,i};Rt.prototype=Wo(Vr.prototype,{apply:function(t){var i=t.getPlayer(this.i);if(i){var n=this.Ot;!(i.Ot&16)&&n&16&&(i.qi=!0),i.Ot=n,t.rr?.(i)}},ht:function(t){t.St(this.Ot)},ft:function(t){this.Ot=t.ut()},copy:function(){return Jo(Rt.create(this.Ot),this)},it:Rt});Object.defineProperty(Rt.prototype,"eventType",{get(){return Ko.SendInput}});Rt.vt=Vr.yt({});Vr.qt(Rt);Ho(Rt,[null,"input","byId"],[]);Ls.xM=Rt});var Hs=O((qy,Fs)=>{var{E:Qo}=R(),{Ht:Xo,q:Yo}=X(),{Event:Lr,Ct:$o}=d(),Zo=V(),zo=Q(),{extend:xo,Bn:bo}=j();function Pt(){this.L=0,this.vi="",this.i=0,this.is=null}Pt.create=function(t){var i=new Pt;return i.vi=t,i};Pt.prototype=xo(Lr.prototype,{kh:function(t){if(t.il!=null){var i=t.getPlayer(this.i);return i==null?!1:t.il(i,this.vi)}return!0},apply:function(t){var i=t.getPlayer(this.i);i!=null&&t.Fr?.(i,this.vi)},ht:function(t){t.ci(bo(this.vi,140))},ft:function(t){if(this.vi=t.li(),140<this.vi.length)throw new Yo(Xo(zo.ChatActionMessageTooLongError))},copy:function(){return $o(Pt.create(this.vi),this)},it:Pt});Object.defineProperty(Pt.prototype,"eventType",{get(){return Zo.SendChat}});Pt.vt=Lr.yt({ct:!1,ot:!1,su:{uu:10,hu:900}});Lr.qt(Pt);Qo(Pt,[null,"text","byId","targetId"],[]);Fs.xM=Pt});var Kn=O((Cy,Js)=>{var{E:Do}=R(),Jn=ht(),ao=ii();function Oi(){this.Li=-1,this.tt=null,this.R=Jn.spec,this.V=null,this.Fi=0,this.Hi=0,this.qi=!1,this.id=0,this.Ot=0,this.name="Player",this.er=0,this.sr=0,this.Tt=null,this.ji=!1,this.Ln=null,this.gt=null,this.gi=0,this.pi=!1,this.kn=null,this.Qt=null,this.sn=!1,this.fu=null}Oi.nl=function(t,i){t.pi=i.pi,t.gi=i.gi,t.gt=i.gt,t.Ln=i.Ln,t.ji=i.ji,t.Tt=i.Tt,t.sr=i.sr,t.er=i.er,t.name=i.name,t.Ot=i.Ot,t.id=i.id,t.qi=i.qi,t.Hi=i.Hi,t.Fi=i.Fi,t.V=i.V==null?null:i.V.Ui(),t.V&&(t.V.d=t.id),t.R=i.R};Oi.prototype={ht:function(t){t.o(this.pi?1:0),t.G(this.gi),t.ui(this.gt),t.ui(this.Ln),t.o(this.ji?1:0),t.ui(this.Tt),t.G(this.sr),t.ui(this.name),t.G(this.Ot),t.Ft(this.id),t.o(this.qi?1:0),t.Xs(this.Hi),t.o(this.Fi),t.o(this.R.id),t.Xs(this.V==null?-1:this.V.mh)},ft:function(t,i){this.pi=t.O()!=0,this.gi=t.M(),this.gt=t.si(),this.Ln=t.si(),this.ji=t.O()!=0,this.Tt=t.si(),this.sr=t.M(),this.name=t.si(),this.Ot=t.M(),this.id=t.Jt(),this.qi=t.O()!=0,this.Hi=t.Ws(),this.Fi=t.O();var n=t.Pr();this.R=n==1?Jn.red:n==2?Jn.blue:Jn.spec,n=t.Ws(),this.V=0>n?null:i[n],this.V&&(this.V.d=this.id)},rl:function(){var t=ao.Li;return t!=this.Li&&(this.tt||(this.tt=new Oi),this.Li=t,Oi.nl(this.tt,this)),this.tt}};Do(Oi,[null,"ext","team","disc","kickRateMinTickCounter","kickRateMaxTickCounter","isKicking","id","input","name","ping",null,"flag","sync","headlessAvatar","avatar","avatarNumber","isAdmin","conn","auth","customClient","identity"],[]);Js.xM=Oi});var Ws=O((gy,Ks)=>{var{E:tl}=R(),{Event:Ur,Ct:il}=d(),nl=V(),rl=Kn(),{extend:el}=j();function At(){this.L=0,this.id=0,this.name="",this.Tt="",this.gt="",this.kn="",this.Qt="",this.i=0}At.create=function(t,i,n,r,e,s){var u=new At;return u.id=t,u.name=i,u.Tt=n,u.gt=r,u.kn=e,u.Qt=s,u};At.prototype=el(Ur.prototype,{apply:function(t,i){if(this.i==0){var n=new rl;n.id=this.id,n.name=this.name,n.Tt=this.Tt,n.gt=this.gt,n.kn=this.kn,n.Qt=this.Qt,t.j.push(n),t.Hr?.(n),i?.room?._onPlayerObjectCreated?.(n)}},ht:function(t){t.G(this.id),t.ui(this.name),t.ui(this.Tt),t.ui(this.gt)},ft:function(t){this.id=t.M(),this.name=t.si(),this.Tt=t.si(),this.gt=t.si()},copy:function(){return il(At.create(this.id,this.name,this.Tt,this.gt,this.kn,this.Qt),this)},it:At});Object.defineProperty(At.prototype,"eventType",{get(){return nl.JoinRoom}});At.vt=Ur.yt({ct:!1,ot:!1});Ur.qt(At);tl(At,[null,"id","name","flag","avatar","conn","auth","byId"],[]);Ks.xM=At});var Xs=O((my,Qs)=>{var{E:sl}=R(),{Ht:ul,q:hl}=X(),{Event:Fr,Ct:fl}=d(),ol=Q(),ll=V(),{D:cl,extend:vl,Bn:pl}=j();function Mt(){this.L=0,this.id=0,this.Ji=null,this.Jr=!1,this.i=0}Mt.create=function(t,i,n){var r=new Mt;return r.id=t,r.Ji=i,r.Jr=n,r};Mt.prototype=vl(Fr.prototype,{apply:function(t){if(this.id!=0&&t.mi(this.i,128)){var i=t.getPlayer(this.id);if(i!=null){var n=t.getPlayer(this.i);cl.remove(t.j,i),t.s!=null&&t.s.c.removeDisc(i.V),t.Kr?.(i,this.Ji,this.Jr,n)}}},ht:function(t){this.Ji!=null&&(this.Ji=pl(this.Ji,100)),t.G(this.id),t.ui(this.Ji),t.o(this.Jr?1:0)},ft:function(t){if(this.id=t.M(),this.Ji=t.si(),this.Jr=t.O()!=0,this.Ji!=null&&100<this.Ji.length)throw new hl(ul(ol.KickBanReasonTooLongError))},copy:function(){return fl(Mt.create(this.id,this.Ji,this.Jr),this)},it:Mt});Object.defineProperty(Mt.prototype,"eventType",{get(){return ll.KickBanPlayer}});Mt.vt=Fr.yt({ct:!1,ot:!1});Fr.qt(Mt);sl(Mt,[null,"id","reason","ban","byId"],[]);Qs.xM=Mt});var $s=O((Sy,Ys)=>{var{E:wl}=R(),{Event:Hr,Ct:yl}=d(),ql=V(),{extend:Cl}=j();function jt(){this.L=0,this.i=0}jt.create=function(){return new jt};jt.prototype=Cl(Hr.prototype,{apply:function(t){t.mi(this.i,32)&&t.el(t.getPlayer(this.i),0)},ht:function(){},ft:function(){},copy:function(){return yl(jt.create(),this)},it:jt});Object.defineProperty(jt.prototype,"eventType",{get(){return ql.StartGame}});jt.vt=Hr.yt({ct:!1,ot:!1});Hr.qt(jt);wl(jt,[null,"byId"],[]);Ys.xM=jt});var zs=O((Ny,Zs)=>{var{E:gl}=R(),{Event:Jr,Ct:ml}=d(),Sl=V(),{extend:Nl}=j();function Et(){this.L=0,this.i=0}Et.create=function(){return new Et};Et.prototype=Nl(Jr.prototype,{apply:function(t){if(t.mi(this.i,32)){var i=t.getPlayer(this.i);if(!t.s)return;t.s=null;for(var n=0,r=t.j;n<r.length;){var e=r[n];++n,e.V&&t.On?.(e),e.V=null,e.gi=0}t.sl?.(),t.ur?.(i)}},ht:function(){},ft:function(){},copy:function(){return ml(Et.create(),this)},it:Et});Object.defineProperty(Et.prototype,"eventType",{get(){return Sl.StopGame}});Et.vt=Jr.yt({ct:!1,ot:!1});Jr.qt(Et);gl(Et,[null,"byId"],[]);Zs.xM=Et});var bs=O((ky,xs)=>{var{E:kl}=R(),{Event:Kr,Ct:Ol}=d(),Tl=V(),{extend:Rl}=j();function _t(){this.L=0,this.Un=!1,this.i=0}_t.create=function(t){var i=new _t;return i.Un=t,i};_t.prototype=Rl(Kr.prototype,{apply:function(t){var i=t.s;if(i!=null&&t.mi(this.i,16)){var n=t.getPlayer(this.i),r=i.xt==120,e=0<i.xt;this.Un?i.xt=120:i.xt==120&&(i.xt=119),this.Un!=r&&t.Wr?.(n,this.Un,e)}},ht:function(t){t.o(this.Un?1:0)},ft:function(t){this.Un=t.O()!=0},copy:function(){return Ol(_t.create(this.Un),this)},it:_t});Object.defineProperty(_t.prototype,"eventType",{get(){return Tl.PauseResumeGame}});_t.vt=Kr.yt({});Kr.qt(_t);kl(_t,[null,"paused","byId"],[]);xs.xM=_t});var as=O((Oy,Ds)=>{var{E:Pl}=R(),{Event:Wr,Ct:Al}=d(),Ml=V(),{extend:jl}=j();function dt(){this.L=0,this.type=0,this.ni=0,this.i=0}dt.create=function(t,i){var n=new dt;return n.type=t,n.ni=i,n};dt.prototype=jl(Wr.prototype,{apply:function(t){if(t.mi(this.i,2)&&t.s==null)switch(this.type){case 0:var i=this.ni;t.Gt=0>i?0:99<i?99:i,t.Qr?.(this.ni,this.i);break;case 1:i=this.ni,t.Mt=0>i?0:99<i?99:i,t.Xr?.(this.ni,this.i)}},ht:function(t){t.G(this.type),t.G(this.ni)},ft:function(t){this.type=t.M(),this.ni=t.M()},copy:function(){return Al(dt.create(this.type,this.ni),this)},it:dt});Object.defineProperty(dt.prototype,"eventType",{get(){return Ml.SetGamePlayLimit}});dt.vt=Wr.yt({ct:!1,ot:!1});Wr.qt(dt);Pl(dt,[null,"type","newValue","byId"],[]);Ds.xM=dt});var iu=O((Ty,tu)=>{var{E:El}=R(),{Point:_l}=gi();function Qr(){this.Cn=0,this.I=15,this.f=0,this.P=new _l(0,0),this.h=.5,this.H=.5,this.Y=.96,this.mn=.1,this.gn=.07,this.Sn=.96,this.qn=5}Qr.prototype={$:function(t){t.g(this.h),t.g(this.H),t.g(this.Y),t.g(this.mn),t.g(this.gn),t.g(this.Sn),t.g(this.qn);var i=this.P;t.g(i.x),t.g(i.y),t.G(this.f),t.g(this.I),t.g(this.Cn)},a:function(t){this.h=t.S(),this.H=t.S(),this.Y=t.S(),this.mn=t.S(),this.gn=t.S(),this.Sn=t.S(),this.qn=t.S();var i=this.P;i.x=t.S(),i.y=t.S(),this.f=t.M(),this.I=t.S(),this.Cn=t.S()}};El(Qr,["kickback","radius","cGroup","gravity","bCoef","invMass","damping","acceleration","kickingAcceleration","kickingDamping","kickStrength"],[]);tu.xM=Qr});var $n=O((Ry,ru)=>{var{JSON5:dl,E:Bl}=R(),{Ht:Xn,Qe:Il,q:si}=X(),{w:Gl,Integer:K,ch:k}=j(),Yn=Q(),{J:Vl,K:Ll}=li(),{Point:Wn,zs:L,ae:$,xs:x,Qo:Qn,ts:ci,bs:Ki}=gi(),nu=iu(),vi=ht(),Ul=t=>{for(var i=0,n=0;n<t.length;n++)i+=t[n],i+=i<<10,i^=i>>>6;return i=(i+=i<<3)^i>>>11,i+=i<<15,i|0};function g(){this.C=[],this.T=[],this.Q=[],this.Pt=[],this.p=[],this.wt=[],this.Dt=[],this.at=[],this.Ti=new nu,this.Yr=255,this.Tn=0,this.Gi=0,this.Fn=!0,this.un=!1,this.name="",this.Mi=0,this.Ki=0,this.Si=0,this.Wi=0,this.Qi=0,this.Xi=0,this.Yi=0,this.$i=0,this.bt=0,this.hn=0}g.ul=Gl.U(1024);g.a=function(t){var i=t.O();return i==255?(i=new g,i.hl(t),i):g.ou()[i]};g.ou=function(){if(g.hi==null){g.hi=[];var t=new g,i;for(t.Rn("Classic",420,200,370,170,64,75),g.hi.push(t),t=new g,t.Rn("Easy",420,200,370,170,90,75),g.hi.push(t),t=new g,t.Rn("Small",420,200,320,130,55,70),g.hi.push(t),t=new g,t.Rn("Big",600,270,550,240,80,80),g.hi.push(t),t=new g,t.Rn("Rounded",420,200,370,170,64,75,75),g.hi.push(t),t=new g,t.Ph("Hockey",420,204,398,182,68,120,75,100),g.hi.push(t),t=new g,t.Ph("Big Hockey",600,270,550,240,90,160,75,150),g.hi.push(t),t=new g,t.Rn("Big Easy",600,270,550,240,95,80),g.hi.push(t),t=new g,t.Rn("Big Rounded",600,270,550,240,80,75,100),g.hi.push(t),t=new g,t.Rn("Huge",750,350,700,320,100,80),g.hi.push(t),t=0,i=g.hi.length;t<i;){var n=t++;g.hi[n].Yr=n}}return g.hi};g.fl=function(t,i){var n=i[t.trait];if(n)for(var r=0,e=Object.keys(n);r<e.length;r++){var s=e[r];t[s]==null&&(t[s]=n[s])}};g.ol=function(t){if(t==63)return["all"];var i=[];return t&2&&i.push("red"),t&4&&i.push("blue"),t&1&&i.push("ball"),t&8&&i.push("redKO"),t&16&&i.push("blueKO"),t&32&&i.push("wall"),t&64&&i.push("kick"),t&128&&i.push("score"),t&268435456&&i.push("c0"),t&536870912&&i.push("c1"),t&1073741824&&i.push("c2"),t&-2147483648&&i.push("c3"),i};g.fn=function(t){t=k(t,Array);for(var i=0,n=0;n<t.length;)switch(t[n++]){case"all":i|=63;break;case"ball":i|=1;break;case"blue":i|=4;break;case"blueKO":i|=16;break;case"c0":i|=268435456;break;case"c1":i|=536870912;break;case"c2":i|=1073741824;break;case"c3":i|=-2147483648;break;case"kick":i|=64;break;case"red":i|=2;break;case"redKO":i|=8;break;case"score":i|=128;break;case"wall":i|=32}return i};g.Ei=function(t,i,n,r){n!=r&&(t[i]=g.ol(n))};g.hr=function(t,i,n){i!=n&&(t.color=g.ll(i))};g.ll=function(t){return t|=0,0>t?"transparent":Vl.Zs(t)};g.rs=function(t){if(t=="transparent")return-1;if(typeof t=="string")return Ll.parseInt("0x"+t);if(t instanceof Array)return((t[0]|0)<<16)+((t[1]|0)<<8)+(t[2]|0);throw new si(Xn(Yn.BadColorError))};g.Ah=function(t){var i={x:t.e.x,y:t.e.y};return g.B(i,"bCoef",t.h,1),g.Ei(i,"cMask",t.u,63),g.Ei(i,"cGroup",t.f,32),i};g.cl=function(t){var i=new L;i.e.x=k(t.x,Number),i.e.y=k(t.y,Number);var n=t.bCoef;return n!=null&&(i.h=k(n,Number)),n=t.cMask,n!=null&&(i.u=g.fn(n)),t=t.cGroup,t!=null&&(i.f=g.fn(t)),i};g.Mh=function(t){var i=new L;i.e.x=k(t.x,Number),i.e.y=k(t.y,Number);var n=t.bCoef;return n!=null&&(i.h=k(n,Number)),n=t.cMask,n!=null&&(i.u=k(n,K)),t=t.cGroup,t!=null&&(i.f=k(t,K)),i};g.vl=function(t,i){var n={v0:t.Z.id,v1:t.z.id};g.B(n,"bias",t.Wt,i.Wt),g.B(n,"bCoef",t.h,i.h);var r=t.getCurveDegrees();return g.B(n,"curve",r,0),r!=0&&(n.curveF=t.jt),g.B(n,"vis",t.Nt,i.Nt),g.Ei(n,"cMask",t.u,i.u),g.Ei(n,"cGroup",t.f,i.f),g.hr(n,t.k,i.k),n};g.pl=function(t,i,n){var[r,e]=t.findVertexIndicesOfSegmentObj(i),s={v0:r,v1:e};g.B(s,"bias",i.Wt,n.Wt),g.B(s,"bCoef",i.h,n.h);var u=i.getCurveDegrees();return g.B(s,"curve",u,0),u!=0&&(s.curveF=i.jt),g.B(s,"vis",i.Nt,n.Nt),g.Ei(s,"cMask",i.u,n.u),g.Ei(s,"cGroup",i.f,n.f),g.hr(s,i.k,n.k),s};g.wl=function(t,i){var n=new $,r=k(t.v1,K);n.Z=i[k(t.v0,K)],n.z=i[r],r=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,o=t.cMask,l=t.cGroup,c=t.color;return r!=null&&(n.Wt=k(r,Number)),e!=null&&(n.h=k(e,Number)),u!=null?n.jt=k(u,Number):s!=null&&n.Ri(k(s,Number)),h!=null&&(n.Nt=k(h,Boolean)),o!=null&&(n.u=g.fn(o)),l!=null&&(n.f=g.fn(l)),c!=null&&(n.k=g.rs(c)),n};g.jh=function(t,i){var n=new $,r=k(t.v1,K);n.Z=i[k(t.v0,K)],n.z=i[r],r=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,o=t.cMask,l=t.cGroup,c=t.color;return r!=null&&(n.Wt=k(r,Number)),e!=null&&(n.h=k(e,Number)),u!=null?n.jt=k(u,Number):s!=null&&n.Ri(k(s,Number)),h!=null&&(n.Nt=k(h,Boolean)),o!=null&&(n.u=k(o,K)),l!=null&&(n.f=k(l,K)),c!=null&&(n.k=k(c,K)),n};g.yl=function(t){var i=new $,n=t.v1;i.Z=t.v0,i.z=n,n=t.bias;var r=t.bCoef,e=t.curve,s=t.curveF,u=t.vis,h=t.cMask,o=t.cGroup,l=t.color;return n!=null&&(i.Wt=k(n,Number)),r!=null&&(i.h=k(r,Number)),s!=null?i.jt=k(s,Number):e!=null&&i.Ri(k(e,Number)),u!=null&&(i.Nt=k(u,Boolean)),h!=null&&(i.u=k(h,K)),o!=null&&(i.f=k(o,K)),l!=null&&(i.k=k(l,K)),i};g.Eh=function(t){var i={d0:t.d0,d1:t.d1,length:t.minLength>=t.maxLength?t.minLength:[t.minLength,t.maxLength]};return g.hr(i,t.color,0),g.B(i,"strength",t.strength,1/0),i};g.ql=function(t,i){var n=new Ki,r=k(t.d0,K),e=k(t.d1,K),s=t.color,u=t.strength,h=t.length;if(r>=i.length||0>r)throw new si(null);if(e>=i.length||0>e)throw new si(null);return n.Zt=r,n.$t=e,h==null?(r=i[r],h=i[e],r==null||h==null?n.Bt=n.It=100:(e=r.e,h=h.e,r=e.x-h.x,e=e.y-h.y,n.Bt=n.It=Math.sqrt(r*r+e*e))):h instanceof Array?(n.It=k(h[0],Number),n.Bt=k(h[1],Number)):n.Bt=n.It=k(h,Number),n.Pi=u==null||u=="rigid"?1/0:k(u,Number),s!=null&&(n.k=g.rs(s)),n};g._h=function(t,i){var n=new Ki,r=k(t.d0,K),e=k(t.d1,K),s=t.color,u=t.strength,h=t.length;if(r>=i.length||0>r)throw new si(null);if(e>=i.length||0>e)throw new si(null);return n.Zt=r,n.$t=e,h==null?(r=i[r],h=i[e],r==null||h==null?n.Bt=n.It=100:(e=r.e,h=h.e,r=e.x-h.x,e=e.y-h.y,n.Bt=n.It=Math.sqrt(r*r+e*e))):h instanceof Array?(n.It=k(h[0],Number),n.Bt=k(h[1],Number)):n.Bt=n.It=k(h,Number),n.Pi=u==null||u=="rigid"?1/0:k(u,Number),s!=null&&(n.k=k(s,K)),n};g.Cl=function(t){var i=new Ki,n=t.d0,r=t.d1,e=t.color,s=t.strength,u=t.length;return i.d0Obj=n,i.d1Obj=r,u==null?(u=r,n==null||u==null?i.Bt=i.It=100:(r=n.e,u=u.e,n=r.x-u.x,r=r.y-u.y,i.Bt=i.It=Math.sqrt(n*n+r*r))):u instanceof Array?(i.It=k(u[0],Number),i.Bt=k(u[1],Number)):i.Bt=i.It=k(u,Number),i.Pi=s==null||s=="rigid"?1/0:k(s,Number),e!=null&&(i.k=k(e,K)),i};g.dh=function(t){var i={normal:[t.b.x,t.b.y],dist:t.st};return g.B(i,"bCoef",t.h,1),g.Ei(i,"cMask",t.u,63),g.Ei(i,"cGroup",t.f,32),i};g.gl=function(t){var i=new x,n=k(t.normal,Array),r=k(n[0],Number);n=k(n[1],Number);var e=i.b,s=Math.sqrt(r*r+n*n);return e.x=r/s,e.y=n/s,i.st=k(t.dist,Number),r=t.bCoef,n=t.cMask,t=t.cGroup,r!=null&&(i.h=k(r,Number)),n!=null&&(i.u=g.fn(n)),t!=null&&(i.f=g.fn(t)),i};g.Bh=function(t){var i=new x,n=k(t.normal,Array),r=k(n[0],Number);n=k(n[1],Number);var e=i.b,s=Math.sqrt(r*r+n*n);return e.x=r/s,e.y=n/s,i.st=k(t.dist,Number),r=t.bCoef,n=t.cMask,t=t.cGroup,r!=null&&(i.h=k(r,Number)),n!=null&&(i.u=k(n,K)),t!=null&&(i.f=k(t,K)),i};g.Ih=function(t){return{p0:[t.ri.x,t.ri.y],p1:[t.ei.x,t.ei.y],team:t.R==vi.red?"red":"blue"}};g.ip=function(t){var i=new Qn,n=k(t.p0,Array),r=k(t.p1,Array),e=i.ri;switch(e.x=n[0],e.y=n[1],n=i.ei,n.x=r[0],n.y=r[1],t.team){case"blue":t=vi.blue;break;case"red":t=vi.red;break;default:throw new si(Xn(Yn.BadTeamError))}return i.R=t,i};g.Gh=function(t){var i={};return g.B(i,"bCoef",t.h,.5),g.B(i,"invMass",t.H,.5),g.B(i,"damping",t.Y,.96),g.B(i,"acceleration",t.mn,.1),g.B(i,"kickingAcceleration",t.gn,.07),g.B(i,"kickingDamping",t.Sn,.96),g.B(i,"kickStrength",t.qn,5),g.Ei(i,"cGroup",t.f,0),(t.P.x!=0||t.P.y!=0)&&(i.gravity=[t.P.x,t.P.y]),g.B(i,"radius",t.I,15),g.B(i,"kickback",t.Cn,0),i};g.ml=function(t){var i=new nu,n=t.bCoef,r=t.invMass,e=t.damping,s=t.acceleration,u=t.kickingAcceleration,h=t.kickingDamping,o=t.kickStrength,l=t.gravity,c=t.cGroup,w=t.radius;return t=t.kickback,n!=null&&(i.h=k(n,Number)),r!=null&&(i.H=k(r,Number)),e!=null&&(i.Y=k(e,Number)),s!=null&&(i.mn=k(s,Number)),u!=null&&(i.gn=k(u,Number)),h!=null&&(i.Sn=k(h,Number)),o!=null&&(i.qn=k(o,Number)),l!=null&&(n=i.P,r=k(l[1],Number),n.x=k(l[0],Number),n.y=r),c!=null&&(i.f=g.fn(c)),w!=null&&(i.I=k(w,Number)),t!=null&&(i.Cn=k(t,Number)),i};g.Vh=function(t,i){var n={};return(t.e.x!=i.e.x||t.e.y!=i.e.y)&&(n.pos=[t.e.x,t.e.y]),(t.A.x!=i.A.x||t.A.y!=i.A.y)&&(n.speed=[t.A.x,t.A.y]),(t.P.x!=i.P.x||t.P.y!=i.P.y)&&(n.gravity=[t.P.x,t.P.y]),g.B(n,"radius",t.I,i.I),g.B(n,"bCoef",t.h,i.h),g.B(n,"invMass",t.H,i.H),g.B(n,"damping",t.Y,i.Y),g.hr(n,t.k,i.k),g.Ei(n,"cMask",t.u,i.u),g.Ei(n,"cGroup",t.f,i.f),n};g.Lh=function(t,i){var n=t.pos,r=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,o=t.damping,l=t.color,c=t.cMask,w=t.cGroup;if(n!=null){var C=i.e;C.x=n[0],C.y=n[1]}return r!=null&&(n=i.A,n.x=r[0],n.y=r[1]),e!=null&&(r=i.P,r.x=e[0],r.y=e[1]),s!=null&&(i.I=k(s,Number)),u!=null&&(i.h=k(u,Number)),h!=null&&(i.H=k(h,Number)),o!=null&&(i.Y=k(o,Number)),l!=null&&(i.k=g.rs(l)),c!=null&&(i.u=g.fn(c)),w!=null&&(i.f=g.fn(w)),i};g.lu=function(t,i){var n=t.pos,r=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,o=t.damping,l=t.color,c=t.cMask,w=t.cGroup;if(n!=null){var C=i.e;C.x=n[0],C.y=n[1]}return r!=null&&(n=i.A,n.x=r[0],n.y=r[1]),e!=null&&(r=i.P,r.x=e[0],r.y=e[1]),s!=null&&(i.I=k(s,Number)),u!=null&&(i.h=k(u,Number)),h!=null&&(i.H=k(h,Number)),o!=null&&(i.Y=k(o,Number)),l!=null&&(i.k=k(l,K)),c!=null&&(i.u=k(c,K)),w!=null&&(i.f=k(w,K)),i};g.B=function(t,i,n,r){n!=r&&(t[i]=n)};g.prototype={es:function(){var t=new ci;return t.k=16777215,t.u=63,t.f=193,t.I=10,t.Y=.99,t.H=1,t.h=.5,t},$:function(t){if(t.o(this.Yr),!this.cu()){t.ui(this.name),t.G(this.Si),t.g(this.Qi),t.g(this.Xi),t.g(this.Yi),t.g(this.$i),t.g(this.hn),t.G(this.Wi),t.g(this.Mi),t.g(this.Ki),t.g(this.bt),this.Ti.$(t),t.Ut(this.Tn),t.o(this.Gi),t.o(this.Fn?1:0),t.o(this.un?1:0),t.o(this.C.length);for(var i=0,n=this.C.length;i<n;){var r=i++,e=this.C[r];e.id=r,e.$(t)}for(t.o(this.T.length),i=0,n=this.T;i<n.length;)n[i++].$(t);for(t.o(this.Q.length),i=0,n=this.Q;i<n.length;)n[i++].$(t);for(t.o(this.Pt.length),i=0,n=this.Pt;i<n.length;)n[i++].$(t);for(t.o(this.p.length),i=0,n=this.p;i<n.length;)n[i++].$(t);for(t.o(this.wt.length),i=0,n=this.wt;i<n.length;)n[i++].$(t);for(t.o(this.Dt.length),i=0,n=this.Dt;i<n.length;)r=n[i],++i,t.g(r.x),t.g(r.y);for(t.o(this.at.length),i=0,n=this.at;i<n.length;)r=n[i],++i,t.g(r.x),t.g(r.y)}},hl:function(t){function i(){for(var s=[],u=t.O(),h=0;h<u;){++h;var o=new Wn(0,0);o.x=t.S(),o.y=t.S(),s.push(o)}return s}this.name=t.si(),this.Si=t.M(),this.Qi=t.S(),this.Xi=t.S(),this.Yi=t.S(),this.$i=t.S(),this.hn=t.S(),this.Wi=t.M(),this.Mi=t.S(),this.Ki=t.S(),this.bt=t.S(),this.Ti.a(t),this.Tn=t.At(),this.Gi=t.O(),this.Fn=t.O()!=0,this.un=t.O()!=0,this.C=[];for(var n=t.O(),r=0;r<n;){var e=new L;e.a(t),e.id=r++,this.C.push(e)}for(this.T=[],n=t.O(),r=0;r<n;)++r,e=new $,e.a(t,this.C),this.T.push(e);for(this.Q=[],n=t.O(),r=0;r<n;)++r,e=new x,e.a(t),this.Q.push(e);for(this.Pt=[],n=t.O(),r=0;r<n;)++r,e=new Qn,e.a(t),this.Pt.push(e);for(this.p=[],n=t.O(),r=0;r<n;)++r,e=new ci,e.a(t),this.p.push(e);for(this.wt=[],n=t.O(),r=0;r<n;)++r,e=new Ki,e.a(t),this.wt.push(e);this.Dt=i(),this.at=i(),this.calculateNormals()},calculateNormals:function(){for(var t=0,i=this.T;t<i.length;)i[t++].calculateNormals()},cu:function(){return this.Yr!=255},fr:function(t,i,n){return t=t[i],t!=null?k(t,Number):n},Sl:function(t,i,n){return t=t[i],t!=null?k(t,Boolean):n},Nl:function(){return JSON.stringify(this.kl())},kl:function(){for(var t={},i=0,n=[],r=0,e=this.C,s,u,h,o,l,c,w,C;r<e.length;)s=e[r],++r,s.id=i++,n.push(g.Ah(s));for(r=new $,i=[],e=0,s=this.T;e<s.length;)i.push(g.vl(s[e++],r));for(r=[],e=0,s=this.Q;e<s.length;)r.push(g.dh(s[e++]));for(e=[],s=0,u=this.Pt;s<u.length;)e.push(g.Ih(u[s++]));for(s=g.Gh(this.Ti),h=new ci,u=[],o=0,l=this.p;o<l.length;)u.push(g.Vh(l[o++],h));for(h=[],o=0,l=this.wt;o<l.length;)h.push(g.Eh(l[o++]));for(o=[],l=0,c=this.Dt;l<c.length;)w=c[l],++l,o.push([w.x,w.y]);for(l=[],c=0,w=this.at;c<w.length;)C=w[c],++c,l.push([C.x,C.y]);switch(n={name:this.name,width:this.Mi,height:this.Ki,bg:t,vertexes:n,segments:i,planes:r,goals:e,discs:u,playerPhysics:s,ballPhysics:"disc0"},g.B(n,"maxViewWidth",this.Tn,0),g.B(n,"cameraFollow",this.Gi==1?"player":"",""),g.B(n,"spawnDistance",this.bt,200),h.length!=0&&(n.joints=h),o.length!=0&&(n.redSpawnPoints=o),l.length!=0&&(n.blueSpawnPoints=l),g.B(n,"kickOffReset",this.un?"full":"partial","partial"),this.Si){case 1:i="grass";break;case 2:i="hockey";break;default:i="none"}return g.B(t,"type",i,"none"),g.B(t,"width",this.Qi,0),g.B(t,"height",this.Xi,0),g.B(t,"kickOffRadius",this.Yi,0),g.B(t,"cornerRadius",this.$i,0),g.hr(t,this.Wi,7441498),g.B(t,"goalLine",this.hn,0),n},Ol:function(t){function i(h){var o=k(h[0],Number);return h=k(h[1],Number),new Wn(o,h)}function n(h,o,l,c){c==null&&(c=!1);var w=e[o];if((!c||w!=null)&&(c=k(w,Array),c!=null))for(w=0;w<c.length;){var C=c[w];++w;try{g.fl(C,u),h.push(l(C))}catch{throw new si(new Il(Xn(Yn.StadiumParseError,o,h.length)))}}}var r=this,e=dl.parse(t);this.C=[],this.T=[],this.Q=[],this.Pt=[],this.p=[],this.wt=[],this.name=k(e.name,String),this.Mi=k(e.width,Number),this.Ki=k(e.height,Number),this.Tn=this.fr(e,"maxViewWidth",0)|0,e.cameraFollow=="player"&&(this.Gi=1),this.bt=200,t=e.spawnDistance,t!=null&&(this.bt=k(t,Number)),t=e.bg;var s;switch(t.type){case"grass":s=1;break;case"hockey":s=2;break;default:s=0}this.Si=s,this.Qi=this.fr(t,"width",0),this.Xi=this.fr(t,"height",0),this.Yi=this.fr(t,"kickOffRadius",0),this.$i=this.fr(t,"cornerRadius",0),this.Wi=7441498,t.color!=null&&(this.Wi=g.rs(t.color)),this.hn=this.fr(t,"goalLine",0),this.Fn=this.Sl(e,"canBeStored",!0),this.un=e.kickOffReset=="full";var u=e.traits||{};if(t=e.ballPhysics,t!="disc0"&&(t!=null?(t=g.Lh(t,this.es()),t.f|=192,this.p.push(t)):this.p.push(this.es())),n(this.C,"vertexes",g.cl),n(this.T,"segments",function(h){return g.wl(h,r.C)}),n(this.Pt,"goals",g.ip),n(this.p,"discs",function(h){return g.Lh(h,new ci)}),n(this.Q,"planes",g.gl),n(this.wt,"joints",function(h){return g.ql(h,r.p)},!0),n(this.Dt,"redSpawnPoints",i,!0),n(this.at,"blueSpawnPoints",i,!0),t=e.playerPhysics,t!=null&&(this.Ti=g.ml(t)),255<this.C.length||255<this.T.length||255<this.Q.length||255<this.Pt.length||1>this.p.length||255<this.p.length)throw new si(Xn(Yn.StadiumLimitsExceededError));this.calculateNormals()},Tl:function(){var t=g.ul;return t.l=0,this.$(t),Ul(t.dt())},Rn:function(t,i,n,r,e,s,u,h){h==null&&(h=0),this.name=t,this.p.push(this.es()),this.Mi=i,this.Ki=n,this.Si=1,this.Wi=7441498,this.Qi=r,this.Xi=e,this.Yi=u,this.$i=h,this.bt=.75*r,400<this.bt&&(this.bt=400),t=new x;var o=t.b,l,c,w,C;o.x=0,o.y=1,t.st=-n,t.h=0,this.Q.push(t),t=new x,o=t.b,o.x=0,o.y=-1,t.st=-n,t.h=0,this.Q.push(t),t=new x,o=t.b,o.x=1,o.y=0,t.st=-i,t.h=0,this.Q.push(t),t=new x,o=t.b,o.x=-1,o.y=0,t.st=-i,t.h=0,this.Q.push(t),this.ss(r,1,s,13421823,vi.blue),this.ss(-r,-1,s,16764108,vi.red),this.Uh(u,n),i=new x,n=i.b,n.x=0,n.y=1,i.st=-e,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=0,n.y=-1,i.st=-e,i.u=1,this.Q.push(i),i=new L,n=i.e,n.x=-r,n.y=-e,i.u=0,n=new L,u=n.e,u.x=r,u.y=-e,n.u=0,u=new L,t=u.e,t.x=r,t.y=-s,u.u=0,t=new L,o=t.e,o.x=r,o.y=s,t.u=0,o=new L,l=o.e,l.x=r,l.y=e,o.u=0,l=new L,c=l.e,c.x=-r,c.y=e,l.u=0,c=new L,w=c.e,w.x=-r,w.y=s,c.u=0,w=new L,C=w.e,C.x=-r,C.y=-s,w.u=0,s=new $,s.Z=n,s.z=u,s.u=1,s.Nt=!1,C=new $,C.Z=t,C.z=o,C.u=1,C.Nt=!1;var m=new $;m.Z=l,m.z=c,m.u=1,m.Nt=!1;var f=new $;f.Z=w,f.z=i,f.u=1,f.Nt=!1,this.C.push(i),this.C.push(n),this.C.push(u),this.C.push(t),this.C.push(o),this.C.push(l),this.C.push(c),this.C.push(w),this.T.push(s),this.T.push(C),this.T.push(m),this.T.push(f),this.Fh(r,e,h),this.calculateNormals()},Ph:function(t,i,n,r,e,s,u,h,o){this.name=t,this.p.push(this.es()),this.Mi=i,this.Ki=n,this.Si=2,this.Qi=r,this.Xi=e,this.Yi=h,this.$i=o,this.hn=u,this.bt=.75*(r-u),400<this.bt&&(this.bt=400),t=new x;var l=t.b;l.x=0,l.y=1,t.st=-n,t.h=0,this.Q.push(t),t=new x,l=t.b,l.x=0,l.y=-1,t.st=-n,t.h=0,this.Q.push(t),t=new x,l=t.b,l.x=1,l.y=0,t.st=-i,t.h=0,this.Q.push(t),t=new x,l=t.b,l.x=-1,l.y=0,t.st=-i,t.h=0,this.Q.push(t),this.ss(r-u,1,s,13421823,vi.blue,63),this.ss(-r+u,-1,s,16764108,vi.red,63),this.Uh(h,n),i=new x,n=i.b,n.x=0,n.y=1,i.st=-e,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=0,n.y=-1,i.st=-e,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=1,n.y=0,i.st=-r,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=-1,n.y=0,i.st=-r,i.u=1,this.Q.push(i),this.Fh(r,e,o),this.calculateNormals()},ss:function(t,i,n,r,e,s,u){u==null&&(u=32),s==null&&(s=1);var h=new L,o=h.e,l,c,w,C,m;for(o.x=t+8*i,o.y=-n,o=new L,l=o.e,l.x=t+8*i,l.y=n,c=new L,l=c.e,l.x=h.e.x+22*i,l.y=h.e.y+22,w=new L,l=w.e,l.x=o.e.x+22*i,l.y=o.e.y-22,l=new $,l.Z=h,l.z=c,l.Ri(90*i),C=new $,C.Z=w,C.z=c,m=new $,m.Z=w,m.z=o,m.Ri(90*i),i=this.C.length,this.C.push(h),this.C.push(o),this.C.push(c),this.C.push(w),h=i,i=this.C.length;h<i;)o=h++,this.C[o].u=s,this.C[o].f=u,this.C[o].h=.1;for(i=this.T.length,this.T.push(l),this.T.push(C),this.T.push(m),h=i,i=this.T.length;h<i;)o=h++,this.T[o].u=s,this.T[o].f=u,this.T[o].h=.1;s=new ci,u=s.e,u.x=t,u.y=-n,s.H=0,s.I=8,s.k=r,this.p.push(s),s=new ci,u=s.e,u.x=t,u.y=n,s.H=0,s.I=8,s.k=r,this.p.push(s),r=new Qn,s=r.ri,s.x=t,s.y=-n,s=r.ei,s.x=t,s.y=n,r.R=e,this.Pt.push(r)},Uh:function(t,i){var n=new L,r=n.e,e,s,u;r.x=0,r.y=-i,n.h=.1,n.f=24,n.u=6,r=new L,e=r.e,e.x=0,e.y=-t,r.h=.1,r.f=24,r.u=6,e=new L,s=e.e,s.x=0,s.y=t,e.h=.1,e.f=24,e.u=6,s=new L,u=s.e,u.x=0,u.y=i,s.h=.1,s.f=24,s.u=6,u=new $,u.Z=n,u.z=r,u.f=24,u.u=6,u.Nt=!1,u.h=.1;var h=new $;h.Z=e,h.z=s,h.f=24,h.u=6,h.Nt=!1,h.h=.1;var o=new $;o.Z=r,o.z=e,o.f=8,o.u=6,o.Nt=!1,o.Ri(180),o.h=.1;var l=new $;l.Z=e,l.z=r,l.f=16,l.u=6,l.Nt=!1,l.Ri(180),l.h=.1,this.C.push(n),this.C.push(r),this.C.push(e),this.C.push(s),this.T.push(u),this.T.push(h),this.T.push(o),this.T.push(l)},Fh:function(t,i,n){if(!(0>=n)){var r=new L,e=r.e,s,u,h,o,l,c,w;e.x=-t+n,e.y=-i,r.u=0,e=new L,s=e.e,s.x=-t,s.y=-i+n,e.u=0,s=new L,u=s.e,u.x=-t+n,u.y=i,s.u=0,u=new L,o=u.e,o.x=-t,o.y=i-n,u.u=0,o=new L,l=o.e,l.x=t-n,l.y=i,o.u=0,l=new L,h=l.e,h.x=t,h.y=i-n,l.u=0,h=new L,c=h.e,c.x=t-n,c.y=-i,h.u=0,c=new L,w=c.e,w.x=t,w.y=-i+n,c.u=0,t=new $,t.Z=r,t.z=e,t.u=1,t.Nt=!1,t.h=1,t.Ri(-90),i=new $,i.Z=s,i.z=u,i.u=1,i.Nt=!1,i.h=1,i.Ri(90),n=new $,n.Z=o,n.z=l,n.u=1,n.Nt=!1,n.h=1,n.Ri(-90),w=new $,w.Z=h,w.z=c,w.u=1,w.Nt=!1,w.h=1,w.Ri(90),this.C.push(r),this.C.push(e),this.C.push(s),this.C.push(u),this.C.push(o),this.C.push(l),this.C.push(h),this.C.push(c),this.T.push(t),this.T.push(i),this.T.push(n),this.T.push(w)}},copy:function(){var t=new g,i=this;t.Yr=i.Yr,t.name=i.name,t.Si=i.Si,t.Qi=i.Qi,t.Xi=i.Xi,t.Yi=i.Yi,t.$i=i.$i,t.hn=i.hn,t.Wi=i.Wi,t.Mi=i.Mi,t.Ki=i.Ki,t.bt=i.bt;var n=t.Ti,r=i.Ti;return n.h=r.h,n.H=r.H,n.Y=r.Y,n.mn=r.mn,n.gn=r.gn,n.Sn=r.Sn,n.qn=r.qn,n.P.x=r.P.x,n.P.y=r.P.y,n.f=r.f,n.I=r.I,n.Cn=r.Cn,t.Tn=i.Tn,t.Gi=i.Gi,t.Fn=i.Fn,t.un=i.un,t.C=i.C.map((e,s)=>{var u=new L;return u.e.x=e.e.x,u.e.y=e.e.y,u.h=e.h,u.u=e.u,u.f=e.f,u.id=s,u}),t.T=i.T.map(e=>{var s=new $,u=e.Z,h=e.z,o=-1,l=-1;return i.C.forEach((c,w)=>{c==u?o=w:c==h&&(l=w)}),s.Z=t.C[o],s.z=t.C[l],s.Wt=e.Wt,s.jt=e.jt,s.k=e.k,s.Nt=e.Nt,s.h=e.h,s.u=e.u,s.f=e.f,s}),t.Q=i.Q.map(e=>{var s=new x;return s.b.x=e.b.x,s.b.y=e.b.y,s.st=e.st,s.h=e.h,s.u=e.u,s.f=e.f,s}),t.Pt=i.Pt.map(e=>{var s=new Qn;return s.ri.x=e.ri.x,s.ri.y=e.ri.y,s.ei.x=e.ei.x,s.ei.y=e.ei.y,s.R=e.R,s}),t.p=i.p.map(e=>{var s=new ci;return s.e.x=e.e.x,s.e.y=e.e.y,s.A.x=e.A.x,s.A.y=e.A.y,s.P.x=e.P.x,s.P.y=e.P.y,s.I=e.I,s.h=e.h,s.H=e.H,s.Y=e.Y,s.k=e.k,s.u=e.u,s.f=e.f,s}),t.wt=i.wt.map(e=>{var s=new Ki;return s.Zt=e.Zt,s.$t=e.$t,s.It=e.It,s.Bt=e.Bt,s.Pi=e.Pi,s.k=e.k,s}),t.Dt=i.Dt.map(e=>new Wn(e.x,e.y)),t.at=i.at.map(e=>new Wn(e.x,e.y)),t.calculateNormals(),t}};Object.defineProperty(g.prototype,"isCustom",{get:function(){return!this.cu()}});Bl(g,["vertices","segments","planes","goals","discs","joints","redSpawnPoints","blueSpawnPoints","playerPhysics","defaultStadiumId","maxViewWidth","cameraFollow","canBeStored","fullKickOffReset","name","width","height","bgType","bgColor","bgWidth","bgHeight","bgKickOffRadius","bgCornerRadius","spawnDistance","bgGoalLine"],[]);ru.xM=g});var uu=O((Py,su)=>{var{pako:eu,E:Fl}=R(),{Event:Xr,Ct:Hl}=d(),Jl=V(),Kl=$n(),{F:Wl,w:Ql,extend:Xl}=j();function Bt(){this.L=0,this.N=null,this.i=0}Bt.create=function(t){var i=new Bt;return i.N=t,i};Bt.prototype=Xl(Xr.prototype,{apply:function(t){if(t.mi(this.i,8)){var i=t.getPlayer(this.i);t.s==null&&(t.N=this.N,t.$r?.(i,this.N))}},ht:function(t){var i=Ql.U();this.N.$(i),i=eu.deflateRaw(i.dt()),t.Ut(i.byteLength),t.Yt(i)},ft:function(t){t=eu.inflateRaw(t.Lt(t.At())),this.N=Kl.a(new Wl(new DataView(t.buffer,t.byteOffset,t.byteLength)))},copy:function(){return Hl(Bt.create(this.N?.copy()),this)},it:Bt});Object.defineProperty(Bt.prototype,"eventType",{get(){return Jl.SetStadium}});Bt.vt=Xr.yt({ct:!1,ot:!1,su:{uu:10,hu:2e3}});Xr.qt(Bt);Fl(Bt,[null,"stadium","byId"],[]);su.xM=Bt});var fu=O((Ay,hu)=>{var{E:Yl}=R(),{Event:$r,Ct:$l}=d(),Zl=V(),{extend:zl}=j(),Yr=ht();function It(){this.L=0,this.d=0,this.R=null,this.i=0}It.create=function(t,i){var n=new It;return n.d=t,n.R=i,n};It.prototype=zl($r.prototype,{apply:function(t){var i=t.getPlayer(this.d);if(i!=null){var n=t.getPlayer(this.i),r=t.mi(this.i,1);(r=r||i==n&&!t.on&&t.s==null)&&i.R!=this.R&&(t.us(n,i,this.R),t.Zr?.(this.d,this.R.id,this.i))}},ht:function(t){t.G(this.d),t.o(this.R.id)},ft:function(t){this.d=t.M(),t=t.Pr(),this.R=t==1?Yr.red:t==2?Yr.blue:Yr.spec},copy:function(){return $l(It.create(this.d,this.R),this)},it:It});Object.defineProperty(It.prototype,"eventType",{get(){return Zl.SetPlayerTeam}});It.vt=$r.yt({ct:!1,ot:!1});$r.qt(It);Yl(It,[null,"playerId","team","byId"],[]);hu.xM=It});var lu=O((My,ou)=>{var{E:xl}=R(),{Event:Zr,Ct:bl}=d(),Dl=V(),{extend:al}=j();function Gt(){this.L=0,this.ni=0,this.i=0}Gt.create=function(t){var i=new Gt;return i.ni=t,i};Gt.prototype=al(Zr.prototype,{apply:function(t){t.mi(this.i,2)&&(t.on=this.ni,t.zr?.(this.ni,this.i))},ht:function(t){t.o(this.ni?1:0)},ft:function(t){this.ni=t.O()!=0},copy:function(){return bl(Gt.create(this.ni),this)},it:Gt});Object.defineProperty(Gt.prototype,"eventType",{get(){return Dl.SetTeamsLock}});Gt.vt=Zr.yt({ct:!1,ot:!1});Zr.qt(Gt);xl(Gt,[null,"newValue","byId"],[]);ou.xM=Gt});var vu=O((jy,cu)=>{var{E:tc}=R(),{Event:zr,Ct:ic}=d(),nc=V(),{extend:rc}=j();function Vt(){this.L=0,this.d=0,this.value=0,this.i=0}Vt.create=function(t,i){var n=new Vt;return n.d=t,n.value=i,n};Vt.prototype=rc(zr.prototype,{apply:function(t){if(t.mi(this.i,4)){var i=t.getPlayer(this.i),n=t.getPlayer(this.d);n!=null&&n.id!=0&&n.pi!=this.value&&(n.pi=this.value,t.xr?.(i,n))}},ht:function(t){t.G(this.d),t.o(this.value?1:0)},ft:function(t){this.d=t.M(),this.value=t.O()!=0},copy:function(){return ic(Vt.create(this.d,this.value),this)},it:Vt});Object.defineProperty(Vt.prototype,"eventType",{get(){return nc.SetPlayerAdmin}});Vt.vt=zr.yt({ct:!1,ot:!1});zr.qt(Vt);tc(Vt,[null,"playerId","value","byId"],[]);cu.xM=Vt});var wu=O((Ey,pu)=>{var{E:ec}=R(),{Event:xr,Ct:sc}=d(),uc=V(),{extend:hc}=j(),bt=ht();function Lt(){this.L=0,this.i=0}Lt.create=function(){return new Lt};Lt.prototype=hc(xr.prototype,{apply:function(t){if(t.mi(this.i,1)){for(var i=t.getPlayer(this.i),n=t.j,r=[],e=0,s=0,u=0;u<n.length;){var h=n[u];++u,h.R==bt.spec&&r.push(h),h.R==bt.red?++e:h.R==bt.blue&&++s}n=r.length;var o;n!=0&&(s==e?2>n||(t.us(i,r[0],bt.red),t.us(i,r[1],bt.blue),t.or?.(r[0].id,bt.red.id,r[1].id,bt.blue.id,this.i)):(o=s>e?bt.red:bt.blue,t.us(i,r[0],o),t.or?.(r[0].id,o.id,null,null,this.i)))}},ht:function(){},ft:function(){},copy:function(){return sc(Lt.create(),this)},it:Lt});Object.defineProperty(Lt.prototype,"eventType",{get(){return uc.AutoTeams}});Lt.vt=xr.yt({ct:!1,ot:!1});xr.qt(Lt);ec(Lt,[null,"byId"],[]);pu.xM=Lt});var qu=O((_y,yu)=>{var{E:fc}=R(),{Event:br,Ct:oc}=d(),lc=V(),{extend:cc}=j();function Ut(){this.L=0,this.value=!1,this.i=0}Ut.create=function(t){var i=new Ut;return i.value=t,i};Ut.prototype=cc(br.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&this.value!=i.ji&&(i.ji=this.value,t.br?.(i))},ht:function(t){t.o(this.value?1:0)},ft:function(t){this.value=t.O()!=0},copy:function(){return oc(Ut.create(this.value),this)},it:Ut});Object.defineProperty(Ut.prototype,"eventType",{get(){return lc.SetPlayerSync}});Ut.vt=br.yt({ct:!1,ot:!1});br.qt(Ut);fc(Ut,[null,"value","byId"],[]);yu.xM=Ut});var gu=O((dy,Cu)=>{var{E:vc}=R(),{Event:Dr,Ct:pc}=d(),wc=V(),{extend:yc}=j();function Ft(){this.L=0,this.values=null,this.i=0}Ft.prototype=yc(Dr.prototype,{apply:function(t){if(this.i==0){var i=t;t=t.j;for(var n=0,r=t.length;n<r;){var e=n++;if(e>=this.values.length)break;t[e].er=this.values[e]}i.Dr?.(this.values)}},ht:function(t){t.Ft(this.values.length);for(var i=0,n=this.values;i<n.length;)t.Ft(n[i++])},ft:function(t){this.values=[];for(var i=t.Jt(),n=0;n<i;)++n,this.values.push(t.Jt())},copy:function(){var t=new Ft,i=this.values;t.values=[];for(var n=i.length,r=0;r<n;r++)t.values.push(i[r]);return pc(t,this)},it:Ft});Ft.create=function(t){for(var i=new Ft,n=t.t.j,r=[],e=0;e<n.length;){var s=t.Hn.get(n[e++].id);r.push(s==null?t.t.Hh&&t.t.Hh():s.er)}return i.values=r,i};Object.defineProperty(Ft.prototype,"eventType",{get(){return wc.Ping}});Ft.vt=Dr.yt({ct:!1,ot:!1});Dr.qt(Ft);vc(Ft,[null,"values","byId"],[]);Cu.xM=Ft});var Su=O((By,mu)=>{var{E:qc}=R(),{Event:ar,Ct:Cc}=d(),gc=V(),{extend:mc,Bn:Sc}=j();function Ht(){this.L=0,this.value=null,this.i=0}Ht.create=function(t){var i=new Ht;return i.value=t,i};Ht.prototype=mc(ar.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&(i.gt=this.value,t.ar?.(this.i,this.value))},ht:function(t){t.ui(this.value)},ft:function(t){this.value=t.si(),this.value!=null&&(this.value=Sc(this.value,2))},copy:function(){return Cc(Ht.create(this.value),this)},it:Ht});Object.defineProperty(Ht.prototype,"eventType",{get(){return gc.SetAvatar}});Ht.vt=ar.yt({ct:!1,ot:!1});ar.qt(Ht);qc(Ht,[null,"value","byId"],[]);mu.xM=Ht});var zn=O((Iy,Nu)=>{var{E:Nc}=R(),kc=Q(),{Ht:Oc,q:Tc}=X();function Zn(){this.te=0,this.vi=16777215,this._i=[]}Zn.prototype={$:function(t){t.o(this.te),t.G(this.vi),t.o(this._i.length),this._i.forEach(i=>{t.G(i)})},a:function(t){this.te=t.O(),this.vi=t.M();var i=t.O();if(i>3)throw new Tc(Oc(kc.TeamColorsReadError));this._i=[];for(var n=0;n<i;n++)this._i.push(t.M())},copy:function(){var t=new Zn;return t.te=this.te,t.vi=this.vi,t._i=this._i.slice(),t}};Nc(Zn,["angle","text","inner"],[]);Nu.xM=Zn});var Tu=O((Gy,Ou)=>{var{E:Rc}=R(),{Event:ie,Ct:Pc}=d(),Ac=Q(),{q:Mc,Ht:jc}=X(),Ec=V(),{extend:_c}=j(),{K:te}=li(),Wi=ht(),ku=zn();function pt(){this.L=0,this.R=null,this.Jn=null,this.i=0}pt.create=function(t,i){var n=new pt;return n.R=t,n.Jn=i,n};pt.prototype=_c(ie.prototype,{apply:function(t){t.mi(this.i,2)&&this.R!=Wi.spec&&(t.di[this.R.id]=this.Jn,t.ie?.(this.R.id,this.Jn,this.i))},ht:function(t){t.o(this.R.id),this.Jn.$(t)},ft:function(t){var i=t.Pr();this.R=i==1?Wi.red:i==2?Wi.blue:Wi.spec,this.Jn=new ku,this.Jn.a(t)},copy:function(){return Pc(pt.create(this.R,this.Jn?.copy()),this)},it:pt});Object.defineProperty(pt.prototype,"eventType",{get(){return Ec.SetTeamColors}});pt.createFromData=function(t,i,...n){var r=new ku,e=Wi.i[t];if(!e)throw new Mc(jc(Ac.ChangeTeamColorsInvalidTeamIdError));r._i=[e.k];var s=pt.create(e,r),u=n.length;if(u<1)return s;if(u>4&&(u=4),r.te=256*te.parseInt(i)/360|0,r.vi=te.parseInt("0x"+n[0]),1<u){r._i=[];for(var h=1,o=u;h<o;)r._i.push(te.parseInt("0x"+n[h++]))}return s};pt.vt=ie.yt({ct:!1,ot:!1});ie.qt(pt);Rc(pt,[null,"team","colors","byId"],[]);Ou.xM=pt});var Pu=O((Vy,Ru)=>{var{E:dc}=R(),{Event:ne,Ct:Bc}=d(),Ic=V(),{extend:Gc}=j();function Jt(){this.L=0,this.Zi=null,this.Kn=!0,this.i=0}Jt.create=function(t,i){for(var n=new Jt,r=new Set,e=0,s,u;e<t.length;)r.add(t[e++]);for(t=[],e=0,r=r.values(),s=r.next();!s.done&&(u=s.value,s=r.next(),t.push(u),++e,!(e>=40)););return n.Zi=t,n.Kn=i,n};Jt.prototype=Gc(ne.prototype,{apply:function(t){if(this.i==0){for(var i=new Map,n=0,r=t.j;n<r.length;){var e=r[n];++n,i.set(e.id,e)}for(n=[],r=0,e=this.Zi;r<e.length;){var s=e[r];++r;var u=i.get(s);u!=null&&(i.delete(s),n.push(u))}for(r=[],i=i.values(),e=i.next();!e.done;)s=e.value,e=i.next(),r.push(s);t.j=this.Kn?n.concat(r):r.concat(n),t.ne?.(this.Zi,this.Kn)}},ht:function(t){t.o(this.Kn?1:0),t.o(this.Zi.length);for(var i=0,n=this.Zi;i<n.length;)t.G(n[i++])},ft:function(t){this.Kn=t.O()!=0;var i=t.O();this.Zi=[];for(var n=0;n<i;)++n,this.Zi.push(t.M())},copy:function(){var t=new Jt;t.Kn=this.Kn;var i=this.Zi;t.Zi=[];for(var n=i.length,r=0;r<n;r++)t.Zi.push(i[r]);return Bc(t,this)},it:Jt});Object.defineProperty(Jt.prototype,"eventType",{get(){return Ic.ReorderPlayers}});Jt.vt=ne.yt({ct:!1,ot:!1});ne.qt(Jt);dc(Jt,[null,"playerIdList","moveToTop","byId"],[]);Ru.xM=Jt});var Mu=O((Ly,Au)=>{var{E:Vc}=R(),{Event:re,Ct:Lc}=d(),Uc=V(),{extend:Fc}=j();function Kt(){this.L=0,this.min=0,this.re=0,this.ee=0,this.i=0}Kt.create=function(t,i,n){var r=new Kt;return r.min=t,r.re=i,r.ee=n,r};Kt.prototype=Fc(re.prototype,{apply:function(t){t.mi(this.i,2)&&t.Rl(t.getPlayer(this.i),this.min,this.re,this.ee)},ht:function(t){t.G(this.min),t.G(this.re),t.G(this.ee)},ft:function(t){this.min=t.M(),this.re=t.M(),this.ee=t.M()},copy:function(){return Lc(Kt.create(this.min,this.re,this.ee),this)},it:Kt});Object.defineProperty(Kt.prototype,"eventType",{get(){return Uc.SetKickRateLimit}});Kt.vt=re.yt({ct:!1,ot:!1});re.qt(Kt);Vc(Kt,[null,"min","rate","burst","byId"],[]);Au.xM=Kt});var _u=O((Uy,Eu)=>{var{E:Hc}=R(),{Event:ee,Ct:Jc}=d(),Kc=V(),{extend:Wc,Bn:ju}=j();function Wt(){this.L=0,this.gt="",this.d=0,this.i=0}Wt.create=function(t,i){var n=new Wt;return n.gt=i!=null?ju(i,2):null,n.d=t,n};Wt.prototype=Wc(ee.prototype,{apply:function(t){t=t.getPlayer(this.d),t!=null&&this.i==0&&(t.Ln=this.gt,t.se?.(this.d,this.gt))},ht:function(t){t.ui(this.gt),t.G(this.d)},ft:function(t){this.gt=t.si(),this.d=t.M(),this.gt!=null&&(this.gt=ju(this.gt,2))},copy:function(){return Jc(Wt.create(this.d,this.gt),this)},it:Wt});Object.defineProperty(Wt.prototype,"eventType",{get(){return Kc.SetHeadlessAvatar}});Wt.vt=ee.yt({ct:!1,ot:!1});ee.qt(Wt);Hc(Wt,[null,"avatar","playerId","byId"],[]);Eu.xM=Wt});var Bu=O((Fy,du)=>{var{E:Qc}=R(),{Event:se,Ct:Xc}=d(),Yc=V(),{extend:$c}=j();function tt(){this.L=0,this.id=0,this.type=!1,this.nt=null,this.Xt=null,this.i=0}tt.create=function(t,i,n){var r=new tt;for(r.id=t,r.type=i,r.nt=[n.x,n.y,n.xspeed,n.yspeed,n.xgravity,n.ygravity,n.radius,n.bCoeff,n.invMass,n.damping],r.Xt=[n.color,n.cMask,n.cGroup],t=0,i=r.nt.length;t<i;){n=t++;var e=r.nt[n];e!=null&&(tt.Jh[0]=e,r.nt[n]=tt.Jh[0])}for(t=0,i=r.Xt.length;t<i;)n=t++,e=r.Xt[n],e!=null&&(tt.Kh[0]=e,r.Xt[n]=tt.Kh[0]);return r};tt.prototype=$c(se.prototype,{apply:function(t){if(this.i==0){var i=t.s,n=t;if(i!=null){if(this.type){if(t=t.getPlayer(this.id),t==null)return;t=t.V}else t=i.c.p[this.id];t!=null&&(this.nt[0]!=null&&(t.e.x=this.nt[0]),this.nt[1]!=null&&(t.e.y=this.nt[1]),this.nt[2]!=null&&(t.A.x=this.nt[2]),this.nt[3]!=null&&(t.A.y=this.nt[3]),this.nt[4]!=null&&(t.P.x=this.nt[4]),this.nt[5]!=null&&(t.P.y=this.nt[5]),this.nt[6]!=null&&(t.I=this.nt[6]),this.nt[7]!=null&&(t.h=this.nt[7]),this.nt[8]!=null&&(t.H=this.nt[8]),this.nt[9]!=null&&(t.Y=this.nt[9]),this.Xt[0]!=null&&(t.k=this.Xt[0]),this.Xt[1]!=null&&(t.u=this.Xt[1]),this.Xt[2]!=null&&(t.f=this.Xt[2]),n.ue?.(this.id,this.type,this.nt,this.Xt))}}},ht:function(t){t.G(this.id),t.o(this.type?1:0);var i=t.l;t.Ut(0);for(var n=0,r=1,e=0,s=this.nt;e<s.length;){var u=s[e];++e,u!=null&&(n|=r,t.Ys(u)),r<<=1}for(e=0,s=this.Xt;e<s.length;)u=s[e],++e,u!=null&&(n|=r,t.G(u)),r<<=1;r=t.l,t.l=i,t.Ut(n),t.l=r},ft:function(t){this.id=t.M(),this.type=t.O()!=0;var i=t.At();this.nt=[];for(var n=0;10>n;){var r=n++;this.nt[r]=null,i&1&&(this.nt[r]=t.Qs()),i>>>=1}for(this.Xt=[],n=0;3>n;)r=n++,this.Xt[r]=null,i&1&&(this.Xt[r]=t.M()),i>>>=1},copy:function(){var t=new tt;t.id=this.id,t.type=this.type;var i=this.nt;t.nt=[];for(var n=i.length,r=0;r<n;r++)t.nt.push(i[r]);for(i=this.Xt,t.Xt=[],n=i.length,r=0;r<n;r++)t.Xt.push(i[r]);return Xc(t,this)},it:tt});Object.defineProperty(tt.prototype,"eventType",{get(){return Yc.SetDiscProperties}});tt.Jh=new Float32Array(1);tt.Kh=new Int32Array(1);tt.vt=se.yt({ct:!1,ot:!1});se.qt(tt);Qc(tt,[null,"id","type","data1","data2","byId"],[]);du.xM=tt});var Gu=O((Hy,Iu)=>{var{E:Zc}=R(),{Event:ue,Ct:zc}=d(),xc=V(),{extend:bc}=j();function Qt(){this.L=0,this.type=0,this.data=null,this.i=0}Qt.create=function(t,i){var n=new Qt;return n.type=t,n.data=i,n};Qt.prototype=bc(ue.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.he?.(this.type,this.data,this.i)},ht:function(t){t.St(this.type),t.ci(JSON.stringify(this.data))},ft:function(t){this.type=t.ut(),this.data=JSON.parse(t.li())},copy:function(){return zc(Qt.create(this.type,JSON.parse(JSON.stringify(this.data))),this)},it:Qt});Object.defineProperty(Qt.prototype,"eventType",{get(){return xc.CustomEvent}});Qt.vt=ue.yt({ct:!1,ot:!1});ue.qt(Qt);Zc(Qt,[null,"type","data","byId"],[]);Iu.xM=Qt});var Uu=O((Jy,Lu)=>{var{pako:Vu,E:Dc}=R(),{Event:he,Ct:ac}=d(),tv=V(),{F:iv,w:nv,extend:rv}=j();function Xt(){this.L=0,this.type=0,this.data=null,this.i=0}Xt.create=function(t,i){var n=new Xt;return n.type=t,n.data=i,n};Xt.prototype=rv(he.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.fe?.(this.type,this.data,this.i)},ht:function(t){var i=nv.U();i.St(this.type),i.Yt(this.data),i=Vu.deflateRaw(i.dt()),t.St(i.byteLength),t.Yt(i)},ft:function(t){t=Vu.inflateRaw(t.Lt(t.ut()));var i=new iv(new DataView(t.buffer,t.byteOffset,t.byteLength));this.type=i.ut(),this.data=i.Lt()},copy:function(){var t=new Uint8Array;return t.set(this.data),ac(Xt.create(this.type,t),this)},it:Xt});Object.defineProperty(Xt.prototype,"eventType",{get(){return tv.BinaryCustomEvent}});Xt.vt=he.yt({ct:!1,ot:!1});he.qt(Xt);Dc(Xt,[null,"type","data","byId"],[]);Lu.xM=Xt});var Hu=O((Ky,Fu)=>{var{E:ev}=R(),{Event:fe,Ct:sv}=d(),uv=V(),{extend:hv}=j();function Yt(){this.L=0,this.id=0,this.data=null,this.i=0}Yt.create=function(t,i){var n=new Yt;return n.id=t,n.data=i,n};Yt.prototype=hv(fe.prototype,{apply:function(t){if(this.i==0){var i=t.getPlayer(this.id);i!=null&&(i.fu=this.data,t.oe?.(this.id,this.data,this.i))}},ht:function(t){t.St(this.id),t.ci(JSON.stringify(this.data))},ft:function(t){this.id=t.ut(),this.data=JSON.parse(t.li())},copy:function(){return sv(Yt.create(this.id,JSON.parse(JSON.stringify(this.data))),this)},it:Yt});Object.defineProperty(Yt.prototype,"eventType",{get(){return uv.SetPlayerIdentity}});Yt.vt=fe.yt({ct:!1,ot:!1});fe.qt(Yt);ev(Yt,[null,"id","data","byId"],[]);Fu.xM=Yt});var ui=O((Wy,xn)=>{xn.xM=xn.Pl||(xn.Pl={vu:ds(),le:Is(),Wh:Vs(),hs:Us(),pu:Hs(),ce:Ws(),ve:Xs(),fs:$s(),os:zs(),ls:bs(),cs:as(),pe:uu(),we:fu(),vs:lu(),wu:vu(),ps:wu(),ws:qu(),yu:gu(),qu:Su(),Cu:Tu(),Qh:Pu(),gu:Mu(),mu:_u(),Su:Bu(),CustomEvent:Gu(),BinaryCustomEvent:Uu(),ys:Hu()})});var Wu=O((Qy,Ku)=>{var{E:fv}=R(),{Point:ov,as:Ju,Ds:lv}=gi(),b=ht(),cv=ii();function et(){this.Ai=-1,this.tt=null,this.xt=0,this.zi=0,this.Ni=0,this.ki=0,this.Pn=b.red,this.t=0,this.Oi=0,this.c=new Ju,this.Mt=0,this.Gt=5,this.N=null,this.mt=null}et.Xh=function(){for(var t=[],i=0;256>i;)++i,t.push(new ov(0,0));return t}();et.Yh=function(){for(var t=[],i=0;256>i;)++i,t.push(0);return t}();et.In=function(t,i){t.mt=i.mt.Ui(),t.Gt=i.Gt,t.Mt=i.Mt,t.c=i.c.Ui(),t.Oi=i.Oi,t.t=i.t,t.ki=i.ki,t.Ni=i.Ni,t.zi=i.zi,t.xt=i.xt,t.N=i.N,t.Pn=i.Pn};et.prototype={Al:function(t){this.mt=t,this.Gt=t.Gt,this.Mt=t.Mt,this.N=t.N,this.c=Ju.Ko(t.N),this.$h()},Zh:function(t){t.R==b.spec?this.c.Sh(t,this.mt.On):this.c.Jo(t,this.N,this.mt.ye)},Ml:function(t,i){for(var n=0,r=this.N.Pt;n<r.length;n++){var e=r[n];if(e.Go(t,i))return e.R}return b.spec},De:function(t){if(0<this.xt)120>this.xt&&this.xt--;else{this.mt.qe?.();for(var i=this.mt.j,n=0;n<i.length;n++){var r=i[n];if(r.V!=null){!(r.Ot&16)&&(r.qi=!1);var e=this.N.Ti;if(0<r.Fi&&r.Fi--,r.Hi<this.mt.An&&r.Hi++,r.qi&&0>=r.Fi&&0<=r.Hi){for(var s=!1,u=0,h=this.c.p;u<h.length;){var o=h[u];++u,o.f&64&&o!=r.V&&this.c.kickBall(r.V,o,e)&&(s=!0)}s&&(this.mt.Ce?.(r),r.qi=!1,r.Fi=this.mt.ln,r.Hi-=this.mt.xi)}this.c.Ho(r,e)}}for(n=0,r=this.c.p,e=0,u=r.length;e<u;)s=e++,h=r[s],h.f&128&&(et.Yh[n]=s,s=et.Xh[n],h=h.e,s.x=h.x,s.y=h.y,++n);switch(this.c.De(t,this.mt),this.t){case 0:{for(t=0;t<i.length;)n=i[t],++t,n.V!=null&&(n.V.u=39|this.Pn.u);this.c.p[0].Lo()&&(this.t=1,this.mt.ge?.());break}case 1:{for(this.zi+=.016666666666666666,t=0;t<i.length;)r=i[t],++t,r.V!=null&&(r.V.u=39);for(r=b.spec,i=this.c.p,t=0;t<n&&r==b.spec;t++)r=this.Ml(i[et.Yh[t]].e,et.Xh[t]);r!=b.spec?(this.t=2,this.Oi=150,this.Pn=r,r==b.red?this.Ni++:this.ki++,this.mt.me?.(r==b.red?b.blue:b.red),this.mt.jl?.(r.id)):0<this.Mt&&this.zi>=60*this.Mt&&this.ki!=this.Ni&&(this.mt.Se?.(),this.zh());break}case 2:{this.Oi--,0>=this.Oi&&(0<this.Gt&&(this.ki>=this.Gt||this.Ni>=this.Gt)||0<this.Mt&&this.zi>=60*this.Mt&&this.ki!=this.Ni?this.zh():(this.$h(),this.mt.Ne?.()));break}case 3:{if(this.Oi--,this.Oi<=0&&(i=this.mt,i.s!=null)){for(i.s=null,t=0,n=i.j;t<n.length;)r=n[t],++t,r.V&&this.mt.On?.(r),r.V=null,r.gi=0;i.ur?.(null)}break}}}},zh:function(){this.Oi=300,this.t=3,this.mt.ke?.(this.ki>this.Ni?b.red:b.blue)},$h:function(){var t=this.mt.j;this.t=0;for(var i=this.N.p,n=this.c.p,r=0,e=this.N.un?i.length:1,s,u,h,o;r<e;)s=r++,i[s].gh(n[s]);for(i=[0,0,0],n=0;n<t.length;)r=t[n],++n,this.Zh(r),e=r.R,e!=b.spec&&(s=r.V.e,u=this.N,h=i[e.id],o=e==b.red?u.Dt:u.at,o.length==0?(o=h+1>>1,!(h&1)&&(o=-o),u=u.bt*e.yh,h=55*o):(h>=o.length&&(h=o.length-1),h=o[h],u=h.x,h=h.y),s.x=u,s.y=h,i[e.id]++,r.gi=i[e.id])},$:function(t){this.c.$(t),t.G(this.Oi),t.G(this.t),t.G(this.ki),t.G(this.Ni),t.g(this.zi),t.G(this.xt),t.o(this.Pn.id)},a:function(t,i){this.c.a(t),this.Oi=t.M(),this.t=t.M(),this.ki=t.M(),this.Ni=t.M(),this.zi=t.S(),this.xt=t.M();var n=t.Pr();this.Pn=n==1?b.red:n==2?b.blue:b.spec,this.mt=i,this.Gt=i.Gt,this.Mt=i.Mt,this.N=i.N,this.c.C=this.N.C,this.c.T=this.N.T,this.c.Q=this.N.Q,this.c.wt=this.N.wt},Ui:function(){var t=cv.Li;return t!=this.Ai&&(this.tt||(this.tt=new et),this.Ai=t,et.In(this.tt,this)),this.tt},copy:function(t){var i=new et;return i.c.p=this.c.p.map(n=>{var r=new lv;return r.e.x=n.e.x,r.e.y=n.e.y,r.A.x=n.A.x,r.A.y=n.A.y,r.P.x=n.P.x,r.P.y=n.P.y,r.I=n.I,r.h=n.h,r.H=n.H,r.Y=n.Y,r.k=n.k,r.u=n.u,r.f=n.f,r.d=n.d,r}),i.Oi=this.Oi,i.t=this.t,i.ki=this.ki,i.Ni=this.Ni,i.zi=this.zi,i.xt=this.xt,i.Pn=this.Pn,i.mt=t||this.mt,i.Gt=i.mt.Gt,i.Mt=i.mt.Mt,i.N=i.mt.N,i.c.C=i.N.C,i.c.T=i.N.T,i.c.Q=i.N.Q,i.c.wt=i.N.wt,i}};et.prototype.advance=et.prototype.De;fv(et,[null,"ext","pauseGameTickCounter","timeElapsed","blueScore","redScore",null,"state","goalTickCounter","physicsState","timeLimit","scoreLimit","stadium",null],[]);Ku.xM=et});var Ti=O((Xy,zu)=>{var{E:vv}=R(),{D:pv,F:wv,w:Qu,Integer:oe,ch:Z}=j(),{Point:yv,ae:qv,ts:bn}=gi(),{ce:Cv,ve:gv,we:Xu}=ui(),_=$n(),hi=ht(),Yu=Kn(),$u=zn(),Zu=Wu(),mv=ii();function pi(){this.Ai=-1,this.tt=null,this.N=_.ou()[0],this.ln=2,this.xi=0,this.An=1,this.Mt=3,this.Gt=3,this.on=!1,this.s=null,this.j=[],this.name="",this.di=[null,new $u,new $u],this.di[1]._i.push(hi.red.k),this.di[2]._i.push(hi.blue.k)}pi.In=function(t,i){if(t.name=i.name,i.j==null)t.j=null;else{t.j==null&&(t.j=[]);for(var n=t.j,r=i.j,e=r.length,s;n.length>e;)n.pop();for(e=0,s=r.length;e<s;){var u=e++;n[u]=r[u].rl()}}t.s=i.s==null?null:i.s.Ui(),t.on=i.on,t.Gt=i.Gt,t.Mt=i.Mt,t.An=i.An,t.xi=i.xi,t.ln=i.ln,t.N=i.N,t.di=i.di};pi.prototype={el:function(t){if(this.s==null){this.s=new Zu;for(var i=0,n=this.j;i<n.length;){var r=n[i];++i,r.V=null,r.gi=0}this.s.Al(this),this.Oe?.(t)}},us:function(t,i,n){if(i.R!=n&&(i.R=n,pv.remove(this.j,i),this.j.push(i),!!this.s)){this.s.c.Sh(i,this.On),this.s.Zh(i);for(var r=0,e=!1,s,u;!e;)for(++r,e=!0,s=0,u=this.j;s<u.length;){var h=u[s];if(++s,h!=i&&h.R==i.R&&h.gi==r){e=!1;break}}i.gi=r}},getPlayer:function(t){for(var i=0,n=this.j;i<n.length;){var r=n[i];if(++i,r.id==t)return r}return null},lt:function(t){this.s!=null&&this.s.De(t)},$:function(t){t.ui(this.name),t.o(this.on?1:0),t.G(this.Gt),t.G(this.Mt),t.Xs(this.An),t.o(this.xi),t.o(this.ln),this.N.$(t),t.o(this.s!=null?1:0),this.s!=null&&this.s.$(t),t.o(this.j.length);for(var i=0,n=this.j;i<n.length;)n[i++].ht(t);this.di[1].$(t),this.di[2].$(t)},a:function(t){this.name=t.si(),this.on=t.O()!=0,this.Gt=t.M(),this.Mt=t.M(),this.An=t.Ws(),this.xi=t.O(),this.ln=t.O(),this.N=_.a(t);var i=t.O()!=0,n,r;for(this.s=null,i&&(this.s=new Zu,this.s.a(t,this)),i=this.s==null?null:this.s.c.p,n=t.O(),r=this.j;r.length>n;)r.pop();for(r=0;r<n;){var e=new Yu;e.ft(t,i),this.j[r++]=e}this.di[1].a(t),this.di[2].a(t)},xh:function(){var t=0,i=Qu.U();for(this.$(i),i=i.To();4<=i.v.byteLength-i.l;)t^=i.M();return t},El:function(){var t=Qu.U(4);return t.G(this.xh()),t.Ye()},tl:function(t){t=new wv(new DataView(t)).M(),this.bh?.(this.xh()!=t)},Dh:function(t){this.jl=t},mi:function(t){return t==0?!0:(t=this.getPlayer(t),!!(t!=null&&t.pi))},Rl:function(t,i,n,r){this.ln=0>i?0:255<i?255:i,this.xi=0>n?0:255<n?255:n,r=0>r?0:100<r?100:r,this.An=this.xi*r,this.Te?.(t,this.ln,this.xi,r)},Ui:function(){var t=mv.Li;return t!=this.Ai&&(this.tt||(this.tt=new pi),this.Ai=t,pi.In(this.tt,this)),this.tt},copy:function(){var t=new pi;return t.name=this.name,t.on=this.on,t.Gt=this.Gt,t.Mt=this.Mt,t.An=this.An,t.xi=this.xi,t.ln=this.ln,t.N=this.N?.copy(),t.s=this.s?.copy(t),t.j=[],this.j.forEach((i,n)=>{var r=new Yu;if(r.pi=i.pi,r.gi=i.gi,r.gt=i.gt,r.Ln=i.Ln,r.ji=i.ji,r.Tt=i.Tt,r.sr=i.sr,r.name=i.name,r.Ot=i.Ot,r.id=i.id,r.qi=i.qi,r.Hi=i.Hi,r.Fi=i.Fi,r.R=i.R,r.Qt=i.Qt,r.kn=i.kn,r.sn=i.sn,t.s&&i.V){var e=i.V.d,s=t.s.c.p.findIndex(u=>u.d==e);s>-1&&(r.V=t.s.c.p[s])}t.j[n]=r}),this.di.forEach((i,n)=>{t.di[n]=i?.copy()}),t},exportStadium:function(){if(this.s){var{N:t,c:i}=this.s,n=new qv,r=new bn,e={},s=t.Dt.map(l=>[l.x,l.y]),u=t.at.map(l=>[l.x,l.y]),h=i.wt.map(_.Eh);_.B(e,"type",t.Si==1?"grass":t.Si==2?"hockey":"none","none"),_.B(e,"width",t.Qi,0),_.B(e,"height",t.Xi,0),_.B(e,"kickOffRadius",t.Yi,0),_.B(e,"cornerRadius",t.$i,0),_.hr(e,t.Wi,7441498),t.Si==2&&_.B(e,"goalLine",t.hn,0);var o={name:t.name,width:t.Mi,height:t.Ki,vertexes:i.C.map((l,c)=>{var w=_.Ah(l);return w.id=c,w}),segments:i.T.map(l=>_.pl(this,l,n)),planes:i.Q.map(_.dh),goals:t.Pt.map(_.Ih),discs:i.p.map(l=>_.Vh(l,r)),bg:e,playerPhysics:_.Gh(t.Ti),ballPhysics:"disc0"};return _.B(o,"maxViewWidth",t.Tn,0),_.B(o,"cameraFollow",t.Gi==1?"player":"",""),_.B(o,"spawnDistance",t.bt,200),h.length>0&&(o.joints=h),s.length>0&&(o.redSpawnPoints=s),u.length>0&&(o.blueSpawnPoints=u),_.B(o,"kickOffReset",t.un?"full":"partial","partial"),!t.Fn&&(o.canBeStored=!1),o}},createVertex:function(t){return _.Mh(t)},createSegment:function(t){var i=_.jh(t,this.s.c.C);return i.calculateNormals(),i},createSegmentFromObj:function(t){var i=_.yl(t,this.s.c.C);return i.calculateNormals(),i},createGoal:function(t){return _.ip(t)},createPlane:function(t){return _.Bh(t)},createDisc:function(t){return _.lu(t,new bn).Fo()},createJoint:function(t){return _._h(t,this.s.c.p)},createJointFromObj:function(t){return _.Cl(t,this.s.c.p)},addVertex:function(t){this.s.c.C.push(this.createVertex(t))},addSegment:function(t){this.s.c.T.push(this.createSegment(t))},addGoal:function(t){this.s.N.Pt.push(this.createGoal(t))},addPlane:function(t){this.s.c.Q.push(this.createPlane(t))},addDisc:function(t){var i=this.createDisc(t),n=this.s.c.p.findIndex(s=>s.d!=null);n<0&&(n=this.s.c.p.length),this.s.c.p.splice(n,0,i);for(var r=this.s.c.wt,e=this.s.c.p.length-2;e>=n;e--)r.forEach(s=>{s.Zt==e&&s.Zt++,s.$t==e&&s.$t++})},addJoint:function(t){this.s.c.wt.push(this.createJoint(t))},addSpawnPoint:function(t){var i;t.team=="red"?i=this.s.N.Dt:t.team=="blue"&&(i=this.s.N.at),i&&i.push(new yv(t.x,t.y))},addPlayer:function(t){var{team:i,id:n,name:r,avatar:e,flag:s}=t,u=i=="spec"?hi.spec:i=="red"?hi.red:i=="blue"?hi.blue:null;if(u){var h=Cv.create(n,r,s,e,"fakeConn","fakeAuth");h.i=0,h.apply(this),i!="spec"&&(h=Xu.create(n,u),h.i=0,h.apply(this),this.updateDiscObj(this.getPlayer(n).V,t))}},findVertexIndicesOfSegmentObj:function(t){var i=t.Z,n=t.z,r=-1,e=-1;return this.s.c.C.forEach((s,u)=>{s==i?r=u:s==n&&(e=u)}),[r,e]},findVertexIndicesOfSegment:function(t){return this.findVertexIndicesOfSegmentObj(this.s.c.T[t])},updateVertex:function(t,i){var n=this.s.c.C[t];if(n){var r=_.Mh(i);i.hasOwnProperty("x")&&(n.e.x=r.e.x),i.hasOwnProperty("y")&&(n.e.y=r.e.y),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f),this.s.c.T.forEach(e=>{(e.z==n||e.Z==n)&&e.calculateNormals()})}},updateSegment:function(t,i){var n=this.s.c.T[t];if(n){var r=_.jh(i,this.s.c.C);(i.hasOwnProperty("v0")||i.hasOwnProperty("curve"))&&(n.Z=r.Z),(i.hasOwnProperty("v1")||i.hasOwnProperty("curve"))&&(n.z=r.z),(i.hasOwnProperty("bias")||i.hasOwnProperty("curve"))&&(n.Wt=r.Wt),(i.hasOwnProperty("curveF")||i.hasOwnProperty("curve"))&&(n.jt=r.jt),i.hasOwnProperty("vis")&&(n.Nt=r.Nt),i.hasOwnProperty("color")&&(n.k=r.k),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f),n.calculateNormals()}},updateGoal:function(t,i){var n=this.s.N.Pt[t];if(n){var r=_.ip(i);i.hasOwnProperty("p0")&&(n.ri=r.ri),i.hasOwnProperty("p1")&&(n.ei=r.ei),i.hasOwnProperty("team")&&(n.R=r.R)}},updatePlane:function(t,i){var n=this.s.c.Q[t];if(n){var r=_.Bh(i);i.hasOwnProperty("normal")&&(n.b=r.b),i.hasOwnProperty("dist")&&(n.st=r.st),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f)}},updateDisc:function(t,i){this.updateDiscObj(this.s.c.p[t],i)},updateDiscObj:function(t,i){if(t){var n=_.lu(i,new bn);i.hasOwnProperty("pos")&&(t.e=n.e),i.hasOwnProperty("speed")&&(t.A=n.A),i.hasOwnProperty("gravity")&&(t.P=n.P),i.hasOwnProperty("radius")&&(t.I=n.I),i.hasOwnProperty("invMass")&&(t.H=n.H),i.hasOwnProperty("damping")&&(t.Y=n.Y),i.hasOwnProperty("color")&&(t.k=n.k),i.hasOwnProperty("bCoef")&&(t.h=n.h),i.hasOwnProperty("cMask")&&(t.u=n.u),i.hasOwnProperty("cGroup")&&(t.f=n.f)}},updateJoint:function(t,i){var n=this.s.c.wt[t];if(n){var r=_._h(i,this.s.c.p);i.hasOwnProperty("d0")&&(n.Zt=r.Zt),i.hasOwnProperty("d1")&&(n.$t=r.$t),i.hasOwnProperty("color")&&(n.k=r.k),i.hasOwnProperty("strength")&&(n.Pi=r.Pi),i.hasOwnProperty("length")&&(n.Bt=r.Bt,n.It=r.It)}},updateSpawnPoint:function(t,i,n){var r,e;if(i=="red"?r=this.s.N.Dt:i=="blue"&&(r=this.s.N.at),n.team=="red"?e=this.s.N.Dt:n.team=="blue"&&(e=this.s.N.at),!(!r||!e)){var s;r==e?s=r[t]:s=r.splice(t,1)[0],s&&(n.hasOwnProperty("x")&&(s.x=n.x),n.hasOwnProperty("y")&&(s.y=n.y),r!=e&&e.push(s))}},updatePlayer:function(t,i){var n=this.getPlayer(t);if(n){var r=null;if(i.hasOwnProperty("team")&&(r=i.team=="spec"?hi.spec:i.team=="red"?hi.red:i.team=="blue"?hi.blue:null),i.hasOwnProperty("name")&&(n.name=i.name),i.hasOwnProperty("flag")&&(n.Tt=i.flag),i.hasOwnProperty("avatar")&&(n.gt=i.avatar),r!=null){var e=Xu.create(t,r);e.i=0,e.apply(this)}n.V!=null&&this.updateDiscObj(n.V,i)}},removeVertex:function(t){var i=this.s.c.C.splice(t,1)[0];if(i){var n=this.s.c.T,r=[];n.forEach((e,s)=>{(e.z==i||e.Z==i)&&r.unshift(s)}),r.forEach(e=>n.splice(e,1))}},removeSegment:function(t){this.s.c.T.splice(t,1)},removeGoal:function(t){this.s.N.Pt.splice(t,1)},removePlane:function(t){this.s.c.Q.splice(t,1)},removeDisc:function(t){this.s.c.p.splice(t,1);var i=this.s.c.wt,n=[];i.forEach((e,s)=>{(e.Zt==t||e.$t==t)&&n.unshift(s)}),n.forEach(e=>i.splice(e,1));for(var r=t+1;r<=this.s.c.p.length;r++)i.forEach(e=>{e.Zt==r&&e.Zt--,e.$t==r&&e.$t--})},removeJoint:function(t){this.s.c.wt.splice(t,1)},removeSpawnPoint:function(t,i){var n;i=="red"?n=this.s.N.Dt:i=="blue"&&(n=this.s.N.at),n&&n.splice(t,1)},removePlayer:function(t){var i=gv.create(t,null,!0);i.i=0,i.apply(this)},updateStadiumPlayerPhysics:function(t){var i=this.s?.N.Ti;if(i){var n=_.lu(t,new bn);t.hasOwnProperty("radius")&&(i.I=n.I),t.hasOwnProperty("gravity")&&(i.P=n.P),t.hasOwnProperty("invMass")&&(i.H=n.H),t.hasOwnProperty("bCoef")&&(i.h=n.h),t.hasOwnProperty("cGroup")&&(i.f=n.f),t.hasOwnProperty("damping")&&(i.Y=n.Y),t.hasOwnProperty("kickingDamping")&&(i.Sn=Z(t.kickingDamping,Number)),t.hasOwnProperty("acceleration")&&(i.mn=Z(t.acceleration,Number)),t.hasOwnProperty("kickingAcceleration")&&(i.gn=Z(t.kickingAcceleration,Number)),t.hasOwnProperty("kickStrength")&&(i.qn=Z(t.kickStrength,Number)),t.hasOwnProperty("kickback")&&(i.Cn=Z(t.kickback,Number))}},updateStadiumBg:function(t){var i=this.s?.N;i&&(t.hasOwnProperty("type")&&(i.Si=Z(t.type,oe)),t.hasOwnProperty("width")&&(i.Qi=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.Xi=Z(t.height,Number)),t.hasOwnProperty("kickOffRadius")&&(i.Yi=Z(t.kickOffRadius,Number)),t.hasOwnProperty("cornerRadius")&&(i.$i=Z(t.cornerRadius,Number)),t.hasOwnProperty("color")&&(i.Wi=Z(t.color,oe)),t.hasOwnProperty("goalLine")&&(i.hn=Z(t.goalLine,Number)))},updateStadiumGeneral:function(t){var i=this.s?.N;i&&(t.hasOwnProperty("name")&&(i.name=Z(t.name,String)),t.hasOwnProperty("width")&&(i.Mi=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.Ki=Z(t.height,Number)),t.hasOwnProperty("maxViewWidth")&&(i.Tn=Z(t.maxViewWidth,Number)),t.hasOwnProperty("cameraFollow")&&(i.Gi=Z(t.cameraFollow,oe)),t.hasOwnProperty("spawnDistance")&&(i.bt=Z(t.spawnDistance,Number)),t.hasOwnProperty("kickOffReset")&&(i.un=Z(t.kickOffReset,Boolean)),t.hasOwnProperty("canBeStored")&&(i.Fn=Z(t.canBeStored,Boolean)))},runSteps:function(t){this.lt(t)}};vv(pi,[null,"ext","stadium","kickRate_min","kickRate_rate","kickRate_max","timeLimit","scoreLimit","teamsLocked","gameState","players","name","teamColors"],[]);zu.xM=pi});var ve=O((Yy,Dn)=>{var{setInterval:Sv,clearInterval:Nv,requestAnimationFrame:kv,cancelAnimationFrame:Ov,performance:Du,pako:an,E:Tv}=R(),{Event:tr}=d(),{Ht:xu,fo:le,q:Qi}=X(),au=ki(),{F:Ri,w:Pi,extend:Rv}=j(),Pv=ii(),th=Ti(),bu=Q();function ih(t,i){if(this.ah=0,this.Et=i,this.tf=t?.m,this.Wn=Pi.U(1e3),this.Re=Pi.U(16384),this.Nu=t,!!t){var n=this,r=t.m;t.t.$(this.Re),t.ii=function(s){var u=t.m;n.Re.Ft(u-r),r=u,n.Re.Ut(s.i),tr.Nn(s,n.Re)},this.Wn.Ut(0);var e=this.tf;t.t.Dh(function(s){var u=t.m;n.Wn.Ft(u-e),n.Wn.o(s),n.ah++,e=u})}}ih.prototype={stop:function(){this.Nu.ii=null,this.Nu.t.Dh(null),this.Wn.v.setUint16(0,this.ah,this.Wn._t),this.Wn.Yt(this.Re.dt());var t=an.deflateRaw(this.Wn.dt()),i=Pi.U(t.byteLength+32);return i.Mr("HBR2"),i.St(this.Et),i.St(this.Nu.m-this.tf),i.Yt(t),i.dt()}};function nh(t,i,n,r){if(this._l=[],this.qs=0,this.lr=-1,this.ku=this.bi=this.Ou=this.nf=0,au.call(this,i),t=new Ri(new DataView(t.buffer),!1),t.ut()!=1212305970)throw new Qi("");if(i=t.ut(),n!=i)throw new Qi(new le(i));this.Cs=t.ut(),n=an.inflateRaw(t.Lt()),this.cn=new Ri(new DataView(n.buffer,n.byteOffset,n.byteLength)),this.dl(this.cn),n=this.cn.Lt(),this.cn=new Ri(new DataView(n.buffer,n.byteOffset,n.byteLength),!1),this.gs(),this.Ou=Du.now(),this.nn=-1,this.callbacks=r,this.ms=null,this.Pe=null}nh.prototype=Rv(au.prototype,{dl:function(t){for(var i=t.At(),n=0,r=0,e;r<i;)++r,n=n+t.Jt(),e=t.O(),this._l.push({Iv:n/this.Cs,kind:e})},rf:function(){var t=this.cn;0<t.v.byteLength-t.l?(t=this.cn.Jt(),this.ku+=t,t=this.cn.At(),this.Ss=tr.ai(this.cn,!0),this.Ss.i=t):this.Ss=null},Gv:function(){return this.m/this.Cs},_:function(){},en:function(t=0){this.lt(),Pv.Li++;var i=this.t.Ui();return i.lt(this.nf),i},lt:function(){var t=Du.now(),i=t-this.Ou;this.Ou=t;var n=!1,r=!1;for(this.lr>=0?(this.bi+=1e4,this.bi>this.lr&&(this.bi=this.lr,this.lr=-1,n=!0)):this.bi+=i*this.qs,t=this.Cs*this.eu,this.bi>t&&(this.bi=t,r=!0),i=this.bi*this.rn,t=i|0,this.nf=i-t;this.m<t;){for(;this.Ss!=null&&this.ku==this.m;)i=this.Ss,i.apply(this.t),this.ii!=null&&this.ii(i),this.rf();this.m++,this.t.lt(1)}n&&(this.ms.assignCallbacks(),this.Pe?.onDestinationTimeReached&&this.Pe.onDestinationTimeReached()),r&&(this.qs=0,this.ms.clearCallbacks(),this.Pe?.onEnd&&this.Pe.onEnd())},ef:function(t){this.ms.clearCallbacks(),this.lr=t,t<this.bi&&this.gs()},gs:function(){this.ku=0,this.bi=this.m=this.cn.l=0,this.t.a(this.cn),this.rf()}});function Av(t,i,n){var r=0,e=n?.requestAnimationFrame||kv,s=n?.cancelAnimationFrame||Ov,u=i?.render,h=u&&function(){0<t.lr||u()},o=function(){r=e(o),t.lt(),u&&h()};r=e(o),this.clearCallbacks=function(){t.t.rr=null,t.t.Hr=null,t.t.Ce=null,t.t.me=null,t.t.ke=null,t.t.Wr=null,t.t.Oe=null,t.t.qe=null,t.t.ge=null,t.t.jr=null,t.t.Er=null,t.t._r=null,t.t.dr=null,t.t.an=null,t.t.or=null,t.t.Xr=null,t.t.Qr=null,t.t.ar=null,t.t.ye=null,t.t.On=null,t.t.se=null,t.t.ne=null,t.t.Zr=null,t.t.ie=null,t.t.zr=null,t.t.he=null,t.t.fe=null,t.t.oe=null,t.t.ue=null,t.t.Dr=null,t.t.Ir=null,t.t.Se=null,t.t.Ne=null,t.t.Fr=null,t.t.Lr=null,t.t.ur=null,t.t.$r=null,t.t.br=null,t.t.xr=null,t.t.Te=null,t.t.Kr=null,t.t.Ur=null},this.assignCallbacks=function(){t.t.rr==null&&(t.t.rr=l=>{i.onPlayerInputChange?.(l.id,l.Ot)},t.t.Hr=l=>{i.onPlayerJoin?.(l)},t.t.Ce=l=>{i.onPlayerBallKick?.(l?.id)},t.t.me=l=>{i.onTeamGoal?.(l?.id)},t.t.ke=l=>{i.onGameEnd?.(l.id)},t.t.Wr=(l,c,w)=>{!w&&i.onGamePauseChange?.(c,l?.id)},t.t.Oe=function(l){i.onGameStart?.(l?.id)},t.t.qe=()=>{i.onGameTick?.()},t.t.ge=()=>{i.onKickOff?.()},t.t.jr=(l,c,w,C)=>{i.onCollisionDiscVsDisc?.(l,c.d,w,C.d)},t.t.Er=(l,c,w)=>{i.onCollisionDiscVsPlane?.(l,c.d,w)},t.t._r=(l,c,w)=>{i.onCollisionDiscVsSegment?.(l,c.d,w)},t.t.dr=(l,c,w,C)=>{i.Bl?.(l,c.d,w,C)},t.t.an=(l,c,w)=>{i.Il?.(l,c,w)},t.t.or=(l,c,w,C,m)=>{i.onAutoTeams?.(l,c,w,C,m)},t.t.Xr=(l,c)=>{i.onTimeLimitChange?.(l,c)},t.t.Qr=(l,c)=>{i.onScoreLimitChange?.(l,c)},t.t.ye=l=>{i.onPlayerDiscCreated?.(l)},t.t.On=l=>{i.onPlayerDiscDestroyed?.(l)},t.t.ar=(l,c)=>{i.onPlayerAvatarChange?.(l,c)},t.t.se=(l,c)=>{i.onPlayerHeadlessAvatarChange?.(l,c)},t.t.ne=(l,c)=>{i.onPlayersOrderChange?.(l,c)},t.t.Zr=(l,c,w)=>{i.onPlayerTeamChange?.(l,c,w)},t.t.ie=(l,c,w)=>{i.onTeamColorsChange?.(l,c,w)},t.t.zr=(l,c)=>{i.onTeamsLockChange?.(l,c)},t.t.he=(l,c,w)=>{i.onCustomEvent?.(l,c,w)},t.t.fe=(l,c,w)=>{i.onBinaryCustomEvent?.(l,c,w)},t.t.oe=(l,c,w)=>{i.onIdentityEvent?.(l,c,w)},t.t.ue=(l,c,w,C)=>{i.onSetDiscProperties?.(l,c,w,C)},t.t.Dr=l=>{i.onPingData?.(l)},t.t.Ir=l=>{i.onHandicapChange?.(l)},t.t.Se=()=>{i.onTimeIsUp?.()},t.t.Ne=()=>{i.onPositionsReset?.()},t.t.Fr=function(l,c){i.onPlayerChat?.(l.id,c)},t.t.Lr=function(l,c,w,C){i.onAnnouncement?.(l,c,w,C)},t.t.ur=function(l){i.onGameStop?.(l?.id)},t.t.$r=function(l,c){i.onStadiumChange?.(c,l?.id)},t.t.br=function(l){i.onPlayerSyncChange?.(l?.id,l?.ji)},t.t.xr=function(l,c){i.onPlayerAdminChange?.(c?.id,c?.pi,l?.id)},t.t.Te=function(l,c,w,C){i.onKickRateLimitChange?.(c,w,C,l?.id)},t.t.Kr=function(l,c,w,C){l.V&&i.onPlayerDiscDestroyed?.(l),i.onPlayerLeave?.(l,c,w,C?.id)},t.t.Ur=function(l,c){i.onPlayerChatIndicatorChange?.(l?.id,!c)})},this.rt=function(){s(r),this.clearCallbacks()},this.gs=()=>{t.gs()}}function Mv(t,i,n){var r,e,s=new th;try{e=new nh(t,s,3,i),r=new Av(e,i,n),e.ms=r}catch(o){var u=o instanceof Qi?o.zt:o;throw u instanceof le?xu(bu.ReplayFileVersionMismatchError):xu(bu.ReplayFileReadError)}var h={state:s,extrapolate:o=>e.en(o),getSpeed:()=>e.qs,setSpeed:o=>{r.assignCallbacks(),e.qs=o},getTime:()=>e.bi,length:()=>e.eu*e.Cs,setTime:o=>{e.ef(o)},getCurrentFrameNo:()=>e.m,setCurrentFrameNo:o=>{e.ef(e.eu*o)},destroy:()=>{r.rt()}};return Object.defineProperty(h,"gameState",{get(){return h.state.s}}),Object.defineProperty(h,"currentPlayerId",{get(){return e.nn}}),e.Pe=h,h}function ce(){this.r=new th,this.Di=[],this.vn=[],this.cr=0,this.Et=3}function jv(t){var i=new ce,n=0,r=new Ri(new DataView(t.buffer),!1);if(r.ut()!=1212305970)throw new Qi("");var e=r.ut();if(e!=3)throw new Qi(new le(e));i.cr=r.ut();var s=an.inflateRaw(r.Lt()),u=new Ri(new DataView(s.buffer,s.byteOffset,s.byteLength)),h=null,o;for(e=u.At(),s=0,o=0;o<e;o++)s+=u.Jt(),i.vn.push({frameNo:s,teamId:u.O()});for(s=u.Lt(),u=new Ri(new DataView(s.buffer,s.byteOffset,s.byteLength),!1),i.r.a(u);u.l<u.v.byteLength;)e=u.Jt(),n+=e,e=u.At(),h=tr.ai(u,!0),h.i=e,h.frameNo=n,i.Di.push(h);return i}function Ev(t,i){if(t){var{r:n,Di:r,cr:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),!(u<s)){for(var h=0,o=0,l=r[0];o<s;){for(;o==l?.frameNo;)l.apply(n),l=r[++h];o++,n.lt(1)}r=r.filter(c=>c.frameNo>=s&&c.frameNo<=u),r.forEach(c=>{c.frameNo-=s}),t.Di=r,t.vn=t.vn.filter(c=>c.frameNo>=s&&c.frameNo<=u),t.vn.forEach(c=>{c.frameNo-=s}),t.cr=u-s+1}}}function _v(t,i){if(!t)return Promise.resolve();var{r:n,Di:r,cr:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),u<s)return Promise.resolve();var h=0,o=0,l=r[0];return new Promise((c,w)=>{var C;C=Sv(()=>{if(o>=s){Nv(C),r=r.filter(m=>m.frameNo>=s&&m.frameNo<=u),r.forEach(m=>{m.frameNo-=s}),t.Di=r,t.vn=t.vn.filter(m=>m.frameNo>=s&&m.frameNo<=u),t.vn.forEach(m=>{m.frameNo-=s}),t.cr=u-s+1,c();return}for(;o==l?.frameNo;)l.apply(n),l=r[++h];o++,n.lt(1)},0)})}function dv(t){var i=Pi.U(16384),n=0;t.r.$(i),t.Di.forEach(h=>{var o=h.frameNo;o<n||(i.Ft(o-n),n=o,i.Ut(h.i),tr.Nn(h,i))});var r=Pi.U(1e3);r.Ut(t.vn.length);var e=0;t.vn.forEach(h=>{r.Ft(h.frameNo-e),r.o(h.teamId),e=h.frameNo}),r.Yt(i.dt());var s=an.deflateRaw(r.dt()),u=Pi.U(s.byteLength+32);return u.Mr("HBR2"),u.St(t.Et),u.St(t.cr),u.Yt(s),u.dt()}Tv(ce,["roomData","events","goalMarkers","totalFrames","version"],[]);Dn.xM=Dn.Gl||(Dn.Gl={ReplayData:ce,read:Mv,readAll:jv,writeAll:dv,trim:Ev,trimAsync:_v,sf:ih})});var pe=O((zy,ir)=>{var{requestAnimationFrame:Bv,cancelAnimationFrame:Iv,performance:hh,E:$y}=R(),rh=Q(),Gv=ht(),{Ht:eh,Qe:Vv,q:Lv}=X(),{extend:Uv}=j(),{vu:Fv,le:Hv,hs:Jv,pu:Kv,ce:Wv,ve:sh,fs:Qv,os:Xv,ls:Yv,cs:uh,pe:$v,we:Zv,vs:zv,wu:xv,ps:bv,ws:Dv,yu:av,qu:t0,gu:i0,Cu:n0,mu:r0,Su:e0,CustomEvent:s0,BinaryCustomEvent:u0,ys:h0}=ui(),fh=ki(),f0=Ti(),Zy=ii();function oh(t){fh.call(this,t),this.Di=[],this.A=1,this.vr=hh.now(),this.frozen=!1}oh.prototype=Uv(fh.prototype,{_:function(){},en:function(t=0){return this.t},lt:function(){var t=this.Di;this.Di=[];for(var i=((hh.now()-this.vr)*this.rn*this.A|0)-this.m,n=0;n<i;n++)this.m+=1,this.frozen||this.t.lt(1);t.forEach(r=>{r.apply(this.t)})},receiveEvent:function(t){this.Di.push(t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.m=this.m*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.lt(t)}});function lh(t,i,n){var r=0,e=n?.requestAnimationFrame||Bv,s=n?.cancelAnimationFrame||Iv,u=i?.render,h=function(){r=e(h),t.lt(),u?.()};function o(){r=e(h),t.t.rr=c=>{i.onPlayerInputChange?.(c.id,c.Ot)},t.t.Hr=c=>{i.onPlayerJoin?.(c)},t.t.Ce=c=>{i.onPlayerBallKick?.(c?.id)},t.t.me=c=>{i.onTeamGoal?.(c?.id)},t.t.ke=c=>{i.onGameEnd?.(c.id)},t.t.Wr=(c,w,C)=>{!C&&i.onGamePauseChange?.(w,c?.id)},t.t.Oe=function(c){i.onGameStart?.(c?.id)},t.t.qe=()=>{i.onGameTick?.()},t.t.ge=()=>{i.onKickOff?.()},t.t.jr=(c,w,C,m)=>{i.onCollisionDiscVsDisc?.(c,w.d,C,m.d)},t.t.Er=(c,w,C)=>{i.onCollisionDiscVsPlane?.(c,w.d,C)},t.t._r=(c,w,C)=>{i.onCollisionDiscVsSegment?.(c,w.d,C)},t.t.dr=(c,w,C,m)=>{i.Bl?.(c,w.d,C,m)},t.t.an=(c,w,C)=>{i.Il?.(c,w,C)},t.t.or=(c,w,C,m,f)=>{i.onAutoTeams?.(c,w,C,m,f)},t.t.Xr=(c,w)=>{i.onTimeLimitChange?.(c,w)},t.t.Qr=(c,w)=>{i.onScoreLimitChange?.(c,w)},t.t.ye=c=>{i.onPlayerDiscCreated?.(c)},t.t.On=c=>{i.onPlayerDiscDestroyed?.(c)},t.t.ar=(c,w)=>{i.onPlayerAvatarChange?.(c,w)},t.t.se=(c,w)=>{i.onPlayerHeadlessAvatarChange?.(c,w)},t.t.ne=(c,w)=>{i.onPlayersOrderChange?.(c,w)},t.t.Zr=(c,w,C)=>{i.onPlayerTeamChange?.(c,w,C)},t.t.ie=(c,w,C)=>{i.onTeamColorsChange?.(c,w,C)},t.t.zr=(c,w)=>{i.onTeamsLockChange?.(c,w)},t.t.he=(c,w,C)=>{i.onCustomEvent?.(c,w,C)},t.t.fe=(c,w,C)=>{i.onBinaryCustomEvent?.(c,w,C)},t.t.oe=(c,w,C)=>{i.onIdentityEvent?.(c,w,C)},t.t.ue=(c,w,C,m)=>{i.onSetDiscProperties?.(c,w,C,m)},t.t.Dr=c=>{i.onPingData?.(c)},t.t.Ir=c=>{i.onHandicapChange?.(c)},t.t.Se=()=>{i.onTimeIsUp?.()},t.t.Ne=()=>{i.onPositionsReset?.()},t.t.Fr=function(c,w){i.onPlayerChat?.(c.id,w)},t.t.Lr=function(c,w,C,m){i.onAnnouncement?.(c,w,C,m)},t.t.ur=function(c){i.onGameStop?.(c?.id)},t.t.$r=function(c,w){i.onStadiumChange?.(w,c?.id)},t.t.br=function(c){i.onPlayerSyncChange?.(c?.id,c?.ji)},t.t.xr=function(c,w){i.onPlayerAdminChange?.(w?.id,w?.pi,c?.id)},t.t.Te=function(c,w,C,m){i.onKickRateLimitChange?.(w,C,m,c?.id)},t.t.Kr=function(c,w,C,m){c.V&&i.onPlayerDiscDestroyed?.(c),i.onPlayerLeave?.(c,w,C,m?.id)},t.t.Ur=function(c,w){i.onPlayerChatIndicatorChange?.(c?.id,!w)}}function l(){s(r),t.t.rr=null,t.t.Hr=null,t.t.Ce=null,t.t.me=null,t.t.ke=null,t.t.Wr=null,t.t.Oe=null,t.t.qe=null,t.t.ge=null,t.t.jr=null,t.t.Er=null,t.t._r=null,t.t.dr=null,t.t.an=null,t.t.or=null,t.t.Xr=null,t.t.Qr=null,t.t.ar=null,t.t.ye=null,t.t.On=null,t.t.se=null,t.t.ne=null,t.t.Zr=null,t.t.ie=null,t.t.zr=null,t.t.he=null,t.t.fe=null,t.t.oe=null,t.t.ue=null,t.t.Dr=null,t.t.Ir=null,t.t.Se=null,t.t.Ne=null,t.t.Fr=null,t.t.Lr=null,t.t.ur=null,t.t.$r=null,t.t.br=null,t.t.xr=null,t.t.Te=null,t.t.Kr=null,t.t.Ur=null}o(),this.rt=function(){l()},this.uf=function(c){l(),t.t=c,o()}}function o0(t,i){var n=new f0,r=new oh(n),e=new lh(r,t,i),s;return s={state:n,extrapolate:u=>r.en(u),takeSnapshot:function(){return n.copy()},useSnapshot:function(u){var h=u.copy();e.uf(h),n=h,s.state=h},playerJoin:function(u,h,o,l,c,w){var C=Wv.create(u,h,o,l,c,w);C.i=0,r.receiveEvent(C)},playerLeave:function(u){var h=r.t.getPlayer(u);if(h){var o=sh.create(u,null,!0);o.i=0,r.receiveEvent(o)}},playerInput:function(u,h){var o=Jv.create(u);o.i=h,r.receiveEvent(o)},playerChat:function(u,h){var o=Kv.create(u);o.i=h,r.receiveEvent(o)},setKeyState:function(u){s.playerInput(u,i?.controlledPlayerId||0)},setPlayerChatIndicator:function(u,h){var o=Hv.create(u);o.i=h,r.receiveEvent(o)},setPlayerAvatar:function(u,h,o){if(u){var l=r0.create(o,h);l.i=0}else{var c=t0.create(h);c.i=o}r.receiveEvent(c)},setCurrentStadium:function(u,h,o){try{var l=$v.create(u);l.i=h,r.receiveEvent(l)}catch(c){l=c instanceof Lv?c.zt:c,l instanceof SyntaxError?o(eh(rh.StadiumParseSyntaxError,l.lineNumber)):l instanceof Vv?o(l.Ks):o(eh(rh.StadiumParseUnknownError,l))}},sendAnnouncement:function(u,h=-1,o=0,l=1,c,w){var C=Fv.create(u,h,o,l);C.i=w,r.receiveEvent(C)},startGame:function(u){var h=Qv.create();h.i=u,r.receiveEvent(h)},stopGame:function(u){var h=Xv.create();h.i=u,r.receiveEvent(h)},setGamePaused:function(u,h){var o=Yv.create(u);o.i=h,r.receiveEvent(o)},setScoreLimit:function(u,h){var o=uh.create(0,u);o.i=h,r.receiveEvent(o)},setTimeLimit:function(u,h){var o=uh.create(1,u);o.i=h,r.receiveEvent(o)},setTeamsLock:function(u,h){var o=zv.create(u);o.i=h,r.receiveEvent(o)},autoTeams:function(u){var h=bv.create();h.i=u,r.receiveEvent(h)},setPlayerTeam:function(u,h,o){var l=Gv.i[h];if(l){var c=Zv.create(u,l);c.i=o,r.receiveEvent(c)}},setKickRateLimit:function(u,h,o,l){var c=i0.create(u,h,o);c.i=l,r.receiveEvent(c)},setTeamColors:function(u,h,o,l){var c=n0.createFromData(u,h,...o);c.i=l,r.receiveEvent(c)},setPlayerAdmin:function(u,h,o){var l=xv.create(u,h);l.i=o,r.receiveEvent(l)},kickPlayer:function(u,h,o,l){var c=sh.create(u,h,o);c.i=l,r.receiveEvent(c)},setPlayerSync:function(u,h){var o=Dv.create(u);o.i=h,r.receiveEvent(o)},sendPingData:function(u,h){for(var o=new av,l=[],c=0;c<r.t.j.length;c++)l.push(u(r.t.j[c]));o.values=l,o.i=h,r.receiveEvent(o)},setDiscProperties:function(u,h,o,l){var c=e0.create(u,h,o);c.i=l,r.receiveEvent(c)},sendCustomEvent:function(u,h,o){var l=s0.create(u,h);l.i=o,r.receiveEvent(l)},sendBinaryCustomEvent:function(u,h,o){var l=u0.create(u,h);l.i=o,r.receiveEvent(l)},setPlayerIdentity:function(u,h,o){var l=h0.create(u,h);l.i=o,r.receiveEvent(l)},executeEvent:function(u){r.receiveEvent(u)},setSimulationSpeed:function(u){r.setSpeed(u)},runSteps:function(u){r.runSteps(u)},destroy:e.rt},Object.defineProperty(s,"gameState",{get(){return n.s}}),Object.defineProperty(s,"currentPlayerId",{get(){return 0}}),Object.defineProperty(s,"currentFrameNo",{get(){return r.m}}),s}ir.xM=ir.Vl||(ir.Vl={Sandbox:lh,createSandbox:o0})});var nr=O((by,ph)=>{var{httpUrl:xy,XMLHttpRequest:l0}=R(),{q:ch}=X();function vh(t,i,n,r,e){return new Promise(function(s,u){var h=new l0;h.open(i,t),h.responseType=n,h.onload=function(){200<=h.status&&300>h.status?h.response!=null?s(h.response):u(null):u("status: "+h.status)},h.onerror=function(o){u(o)},e!=null&&h.setRequestHeader("Content-type",e),h.send(r)})}var we,we={hf:function(t,i){return vh(t,"GET",i,null)},Ll:function(t){return we.hf(t,"json").then(function(i){if(i.error!=null)throw new ch(i.error);return i.data})},Ul:function(t,i,n){return vh(t,"POST","json",i,n).then(function(r){if(r.error!=null)throw new ch(r.error);return r.data})}};ph.xM=we});var qe=O((Dy,rr)=>{var{E:yh}=R(),{Bn:wh}=j();function ye(){this.Et=0,this.name="",this.Tt="",this.Ae=0,this.Me=0,this.fi=!1,this.Tu=0,this.j=0}ye.prototype={ff:function(){this.name=wh(this.name,40),this.Tt=wh(this.Tt,3)},$:function(t){this.ff(),t._t=!0,t.Ut(this.Et),t.fh(this.name),t.fh(this.Tt),t.Ys(this.Ae),t.Ys(this.Me),t.o(this.fi?1:0),t.o(this.Tu),t.o(this.j),t._t=!1},a:function(t){t._t=!0,this.Et=t.At(),this.name=t.hh(),this.Tt=t.hh(),this.Ae=t.Qs(),this.Me=t.Qs(),this.fi=t.O()!=0,this.Tu=t.O(),this.j=t.O(),t._t=!1,this.ff()}};function qh(){this.data=null,this.id="",this.st=1/0}yh(ye,["version","name","flag","lat","lon","password","maxPlayers","players"],[]);yh(qh,["data","id","dist"],[]);rr.xM=rr.Fl||(rr.Fl={RoomDataDetails:ye,RoomData:qh})});var ge=O((ay,mh)=>{var{crypto:Ai}=R(),c0=Q(),{F:Ch,w:v0}=j(),{Ht:p0,q:Mi}=X(),Ce={name:"ECDSA",namedCurve:"P-256"},gh={name:"ECDSA",hash:{name:"SHA-256"}};function w0(t,i,n){try{return Ai.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",d:n,x:t,y:i},Ce,!0,["sign"])}catch(r){return Promise.reject(r instanceof Mi?r.zt:r)}}function y0(t,i){try{return Ai.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",x:t,y:i},Ce,!0,["verify"])}catch(n){return Promise.reject(n instanceof Mi?n.zt:n)}}function wi(){this.x=null,this.y=null,this.Ru=null,this.privateKey=null}wi.Hl=function(){try{return Ai.subtle.generateKey(Ce,!0,["sign","verify"]).then(function(t){var i=t.privateKey;return Ai.subtle.exportKey("jwk",i).then(function(n){var r=new wi;return r.x=n.x,r.y=n.y,r.Ru=n.d,r.privateKey=i,r})})}catch(t){return Promise.reject(t instanceof Mi?t.zt:t)}};wi.Jl=function(t){var i=t.split(".");if(i.length!=4||i[0]!="idkey")return Promise.reject(p0(c0.AuthFromKeyInvalidIdFormatError));var n=i[1],r=i[2],e=i[3];return w0(n,r,e).then(function(s){var u=new wi;return u.x=n,u.y=r,u.Ru=e,u.privateKey=s,u})};wi.Kl=function(t,i){try{var n=new Ch(new DataView(t.buffer,t.byteOffset,t.byteLength),!1);n.O();var r=n.Lt(n.At()),e=n.Lt(),s=new Ch(new DataView(r.buffer,r.byteOffset,r.byteLength),!1),u=s.li(),h=s.li(),o=s.Lt();if(o.byteLength!=i.byteLength)return Promise.reject(null);for(var l=0;l<o.byteLength;l++)if(o[l]!=i[l])return Promise.reject(null);return y0(u,h).then(function(c){return Ai.subtle.verify(gh,c,e,r)}).then(function(c){if(!c)throw new Mi(null);return u})}catch(c){return Promise.reject(c instanceof Mi?c.zt:c)}};wi.prototype={Wl:function(){return"idkey."+this.x+"."+this.y+"."+this.Ru},Ql:function(t){try{var i=v0.U(1024);i.o(1);var n=i.l;i.Ut(0);var r=i.l;i.ci(this.x),i.ci(this.y),i.Yt(t);var e=i.l-r;return i.v.setUint16(n,e,i._t),Ai.subtle.sign(gh,this.privateKey,new Uint8Array(i.v.buffer,i.v.byteOffset+r,e)).then(function(s){return i.$e(s),i.dt()})}catch(s){return Promise.reject(s instanceof Mi?s.zt:s)}}};mh.xM=wi});var Xi=O((t2,er)=>{var{httpUrl:Oh}=R(),Sh=Q(),{Ht:Nh,Qe:q0,q:C0}=X(),{F:kh,vh:g0,Bn:m0}=j(),Th=$n(),Rh=nr(),{RoomDataDetails:S0,RoomData:N0}=qe(),{ph:k0,wh:O0,J:T0}=li(),Ph=ge();function R0(){try{return Ph.Hl().then(t=>[t.Wl(),t])}catch(t){return Promise.reject(t)}}function P0(t){try{return Ph.Jl(t)}catch(i){return Promise.reject(i)}}function A0(t){return"rgba("+[(t&16711680)>>>16,(t&65280)>>>8,t&255].join()+",255)"}function M0(t){var i=t.match(/rgba?[ \t]*\([ \t]*(\d+),[ \t]*(\d+),[ \t]*(\d+)[ \t]*\)/);if(!(i.length<4)){var n=parseInt(i[1]),r=parseInt(i[2]),e=parseInt(i[3]);if(!(n>255||r>255||e>255))return n<<16|r<<8|e}}function j0(t){var i;if(t?.includes(".")){if(i=t.split("."),i.length>4)return;for(;i.length<4;)i.splice(0,0,"");return i.reduce((s,u,h)=>{if(s!=null){var o=parseInt(u.length>0?u:"0");return isNaN(o)||o<0||o>255?null:(s|=o<<24-h*8,s)}},0)}if(t?.includes(":")){i=t.split(":");var n=t.indexOf("::");if(n!=t.lastIndexOf("::"))return;if(n>=0){var r=i.length;if(r>9)return;n=i.findIndex(s=>s.length==0),(n==0||n==r-2&&i[r-1].length==0)&&(i.splice(n,1),r--),i[n]="0";for(var e=0;e<8-r;e++)i.splice(n+1,0,"0")}return i.length!=8?void 0:i.reduce((s,u,h)=>{if(s!=null){var o=parseInt(u,16);if(!(isNaN(o)||o<0||o>65535))return s|=BigInt(o)<<112n-BigInt(h)*16n,s}},0n)}}function E0(t){var i=t?.__proto__.constructor.name,n,r;if(i=="BigInt"){var e={je:-1,o:0},s={je:-1,o:0};for(r=[],n=0;n<8;n++){var u=t&65535n;u==0?(s.o==0&&(s.je=7-n),s.o++,s.o>e.o&&(e.o=s.o,e.je=s.je)):s.o=0,r.splice(0,0,u.toString(16)),t>>=16n}e.o>0&&(n=e.je-e.o+1,r.splice(n,e.o-1),r[n]="");var h=r.join(":");return h.length==0?h="::":h.charAt(h.length-1)==":"?h+=":":h.charAt(0)==":"&&(h=":"+h),h}else if(i=="Number"){for(r=[],n=0;n<4;n++)r.splice(0,0,""+(t&255)),t>>=8;return r.join(".")}}function _0(t){if(t.length==43){for(var i=0n,n=0,r=252;n<43;n++,r-=6){var e=t.charCodeAt(n);if(e==45)e=0;else if(e==95)e=63;else if(e>=48&&e<=57)e-=47;else if(e>=65&&e<=90)e-=54;else if(e>=97&&e<=122)e-=60;else return;i|=BigInt(e)<<BigInt(r)}return i}}function d0(t){var i=t?.__proto__.constructor.name;if(i=="BigInt"){for(var n="",r=0;r<43;r++){if(i=Number(t&63n),i==0)i=45;else if(i==63)i=95;else if(i>=1&&i<=10)i+=47;else if(i>=11&&i<=36)i+=54;else if(i>=37&&i<=62)i+=60;else return;n=String.fromCharCode(i)+n,t>>=6n}return n}}function B0(t,i,n){return!((t^i)&n)}function I0(t){return t.cu()?null:T0.Zs(t.Tl(),8)}function G0(t,i,n){return(n?16:0)|(t>0?8:t<0?4:0)|(i>0?2:i<0?1:0)}function V0(t){return{dirX:((t&8)>0)-((t&4)>0),dirY:((t&2)>0)-((t&1)>0),kick:(t&16)>0}}var L0=()=>Rh.hf(Oh+"api/list","arraybuffer").then(t=>{t=new kh(new DataView(t),!1),t.O();for(var i=[];t.v.byteLength-t.l!=0;){var n=t.Dn(t.At()),r=t.uh(t.At());try{var e=new S0;e.a(new kh(new DataView(r),!1));var s=new N0;s.data=e,s.id=n,i.push(s)}catch{}}return i});function U0(t,i){let n=Math.PI/180;for(var r=t.lat,e=t.lon,s=0;s<i.length;s++){var u=i[s],{Ae:h,Me:o}=u.data,l=Math.cos(n*(h-r)),c=Math.cos(n*(h+r));u.st=6378*Math.acos((l-c+(l+c)*Math.cos(n*(o-e)))/2),isFinite(u.st)||(u.st=22e3)}}var F0=()=>Rh.Ll(Oh+"api/geo").then(t=>({lat:t.lat,lon:t.lon,flag:t.code.toLowerCase()})),H0=(t,i,n=!0)=>!t&&n?null:(typeof t=="string"&&(t=JSON.parse(t)),{lat:t?.lat||i?.lat||40,lon:t?.lon||i?.lon||40,flag:t?.flag||i?.flag||"tr"});function J0(){return Th.ou()}function K0(t,i){try{var n=new Th;return n.Ol(t),n}catch(e){var r=e instanceof C0?e.zt:e;r instanceof SyntaxError?i(Nh(Sh.StadiumParseSyntaxError,r.lineNumber)):r instanceof q0?i(r.Ks):i(Nh(Sh.StadiumParseUnknownError,r))}}function W0(t){return t.Nl()}function Ah(t,i=1){if(i<=0){t();return}Promise.resolve().then(()=>{Ah(t,i-1)})}er.xM=er.Xl||(er.Xl={generateAuth:R0,authFromKey:P0,getRoomList:L0,calculateAllRoomDistances:U0,numberToColor:A0,colorToNumber:M0,ipToNumber:j0,numberToIp:E0,authToNumber:_0,numberToAuth:d0,compareBits:B0,keyState:G0,reverseKeyState:V0,runAfterGameTick:Ah,getGeo:F0,parseGeo:H0,stadiumChecksum:I0,parseStadium:K0,exportStadium:W0,getDefaultStadiums:J0,promiseWithTimeout:g0,trimStringIfLonger:m0,hexStrToNumber:k0,byteArrayToIp:O0})});var dh=O((i2,sr)=>{var{Event:Mh}=d(),{vu:Q0,le:X0,Wh:Y0,hs:$0,pu:Z0,ce:z0,ve:x0,fs:b0,os:D0,ls:a0,cs:jh,pe:t1,we:i1,vs:n1,wu:r1,ps:e1,ws:s1,yu:u1,qu:h1,Cu:f1,Qh:o1,gu:l1,mu:c1,Su:Eh,CustomEvent:v1,BinaryCustomEvent:p1,ys:w1}=ui(),_h=ht();sr.xM=sr.Yl||(sr.Yl={create:t=>{var i=Mh.iu.get(t);if(i){var n=Object.create(i.prototype);return n.L=0,n}},createFromStream:t=>Mh.ai(t,!0),checkConsistency:t=>Y0.create(t),sendAnnouncement:(t,i=-1,n=0,r=1)=>Q0.create(t,i,n,r),sendChatIndicator:t=>X0.create(t?0:1),sendInput:t=>$0.create(t),sendChat:t=>Z0.create(t),joinRoom:(t,i,n,r,e,s)=>z0.create(t,i,n,r,e,s),setHeadlessAvatar:(t,i)=>c1.create(t,i),kickBanPlayer:(t,i,n)=>x0.create(t,i,n),reorderPlayers:(t,i)=>o1.create(t,i),startGame:()=>b0.create(),stopGame:()=>D0.create(),pauseResumeGame:t=>a0.create(t),setScoreLimit:t=>jh.create(0,t),setTimeLimit:t=>jh.create(1,t),setStadium:t=>t1.create(t),setPlayerTeam:(t,i)=>{var n=_h.i[i];if(n)return i1.create(t,n)},setTeamsLock:t=>n1.create(t),setPlayerAdmin:(t,i)=>r1.create(t,i),autoTeams:()=>e1.create(),setPlayerSync:t=>s1.create(t),ping:t=>u1.create(t),setAvatar:t=>h1.create(t),setTeamColors:(t,i)=>{var n=_h.i[t];if(n)return f1.create(n,i)},setKickRateLimit:(t,i,n)=>l1.create(t,i,n),setDiscProperties:(t,i)=>Eh.create(t,!1,i),setPlayerDiscProperties:(t,i)=>Eh.create(t,!0,i),customEvent:(t,i)=>v1.create(t,i),binaryCustomEvent:(t,i)=>p1.create(t,i),setPlayerIdentity:(t,i)=>w1.create(t,i)})});var Oe=O((n2,Kh)=>{var{setTimeout:Bh,pako:Ih}=R(),ji=Q(),{Event:Gh}=d(),{Ht:Ei,Qe:y1,q:q1}=X(),{w:me}=j(),Yi=ht(),{tu:C1}=Mr(),{vu:g1,le:Vh,hs:m1,pu:Se,ce:S1,ve:Ne,fs:N1,os:k1,ls:O1,cs:Lh,pe:T1,we:R1,vs:P1,wu:Uh,ps:A1,ws:M1,qu:ke,Qh:j1,gu:Fh,Cu:Hh,mu:E1,Su:Jh,CustomEvent:_1,BinaryCustomEvent:d1,ys:B1}=ui();function I1(t,i,n,r,e){var s=i.renderer,u=r;if(Object.defineProperty(this,"config",{get(){return u}}),Object.defineProperty(this,"sdp",{get(){return i.isHost?null:i.n?.r.et.Rt.remoteDescription.sdp}}),Object.defineProperty(this,"isHost",{get(){return i.isHost}}),Object.defineProperty(this,"currentPlayerId",{get(){return i.n?.r.nn}}),Object.defineProperty(this,"currentPlayer",{get(){var f=i.n?.r.nn;return i.n?.r.t.j.filter(v=>v.id==f)[0]}}),Object.defineProperty(this,"state",{get(){return i.n?.r?.t}}),Object.defineProperty(this,"stateExt",{get(){return i.n?.r?.t?.tt}}),Object.defineProperty(this,"gameState",{get(){return i.roomState?.s}}),Object.defineProperty(this,"gameStateExt",{get(){return i.roomState?.s?.tt}}),Object.defineProperty(this,"currentFrameNo",{get(){return i.n?.r?.m}}),Object.defineProperty(this,"banList",{get(){return i.n?.r?.Vt?.banList?.getList()}}),Object.defineProperty(this,"token",{get(){return i.n?.r?.Vt?.Ee},set(f){var v=i.n?.r?.Vt;v&&(v.Ee=f,v.Ns(),i.n.pr=null,v.Pu=Bh(()=>{v.ks(),this._onRoomTokenChange?.(v.Ee)},2*v.of))}}),Object.defineProperty(this,"requireRecaptcha",{get(){return i.n?.r?.Vt?.Au},set(f){i.n?.r?.Vt?.Mu(f)}}),Object.defineProperty(this,"name",{get:function(){return i.n?.r?.t.name}}),Object.defineProperty(this,"password",{get:function(){return i.n?.r?.fi}}),Object.defineProperty(this,"geo",{get:function(){return i.n?.r?._e}}),Object.defineProperty(this,"maxPlayerCount",{get:function(){var f=i.n?.r?.wr;return f==null?null:f+1}}),Object.defineProperty(this,"fakePassword",{get:function(){return i.n?.r?.yr}}),Object.defineProperty(this,"fixedPlayerCount",{get:function(){return i.n?.r?.de}}),Object.defineProperty(this,"showInRoomList",{get:function(){return i.n?.r?.Os}}),Object.defineProperty(this,"unlimitedPlayerCount",{get:function(){return i.n?.r?.qr}}),Object.defineProperty(this,"link",{get:function(){return i.n?.pr}}),Object.defineProperty(this,"timeLimit",{get:function(){return i.n?.r.t.Mt}}),Object.defineProperty(this,"scoreLimit",{get:function(){return i.n?.r.t.Gt}}),Object.defineProperty(this,"redScore",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.ki}}),Object.defineProperty(this,"blueScore",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.Ni}}),Object.defineProperty(this,"timeElapsed",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.zi}}),Object.defineProperty(this,"stadium",{get:function(){return i.n?.r.t.N}}),Object.defineProperty(this,"players",{get:function(){return i.n?.r.t.j}}),this.Mn=-1,this.libraries=n||[],this.librariesMap=this.libraries.reduce((f,v)=>(f[v.name]=v,f),{}),this.renderer=s,i.lf){let f=function(p,q,S){for(var N=0,T=0;N<p.length&&T<q.length;){for(;N<p.length&&T<q.length&&p[N]==q[T]&&p[N]!=S;)N++,T++;if(p[N]==S)break;for(;N<p.length&&T<q.length&&p[N]!=q[T]&&p[N]!=S;)N++;if(p[N]==S)break}q[T]!=S&&q.splice(T,0,S)},v=function(p){Object.defineProperty(h,p,{get(){return u[p]},set(q){u[p]=q}})},y=function(p){v(p+"Before"),v(p),v(p+"After")};var w=f,C=v,m=y;this.plugins=e||[],this.pluginsMap=this.plugins.reduce((p,q)=>(p[q.name]=q,p),{}),this.activePlugins=this.plugins.filter(p=>p.active);var h=this;this.setConfig=function(p){var q=u;q.finalize?.(),q.room=null,p=p||{},p.room=h,p.initialize?.(),h.client.config=p,u=p,h._onConfigUpdate?.(q,p)},this.mixConfig=function(p){Object.keys(p).forEach(q=>{var S=p[q];if(typeof S=="function"){var N=u[q];N?typeof N=="function"&&(u[q]=function(...T){N(...T),S(...T)}):u[q]=S}})},this.setRenderer=function(p){s&&(s.finalize?.(),s.room=null),p&&(p.room=h,p.initialize?.());var q=s;h.renderer=p,h.client.renderer=p,i.renderer=p,s=p,h._onRendererUpdate?.(q,p)},this.setPluginActive=function(p,q){var S=h.plugins.filter(T=>T.name==p)[0],N;if(!(!S||S.active==q))if(q){if(N=h.activePlugins.findIndex(T=>T.name==p),N>=0)return;f(h.plugins,h.activePlugins,S),S.active=q,h._onPluginActiveChange?.(S)}else{if(N=h.activePlugins.findIndex(T=>T.name==p),N<0)return;S.active=q,h._onPluginActiveChange?.(S),h.activePlugins.splice(N,1)}},this._modifyPlayerData=function(p,q,S,N,T,M){var A=[q,S,N],z;return u.modifyPlayerDataBefore&&([A,z]=u.modifyPlayerDataBefore(p,A[0],A[1],A[2],T,M)),z!==!1&&(h.activePlugins.forEach(a=>{a.modifyPlayerData&&A&&(A=a.modifyPlayerData(p,A[0],A[1],A[2],T,M,z))}),u.modifyPlayerData&&A&&(A=u.modifyPlayerData(p,A[0],A[1],A[2],T,M,z)),u.modifyPlayerDataAfter&&A&&(A=u.modifyPlayerDataAfter(p,A[0],A[1],A[2],T,M,z))),A},y("modifyPlayerData"),this._modifyPlayerPing=function(p,q){var S;return u.modifyPlayerPingBefore&&([q,S]=u.modifyPlayerPingBefore(p,q)),S!==!1&&(h.activePlugins.forEach(N=>{N.modifyPlayerPing&&(q=N.modifyPlayerPing(p,q,S))}),u.modifyPlayerPing&&(q=u.modifyPlayerPing(p,q,S)),u.modifyPlayerPingAfter&&(q=u.modifyPlayerPingAfter(p,q,S))),q},y("modifyPlayerPing"),this._modifyClientPing=function(p){var q;return u.modifyClientPingBefore&&([p,q]=u.modifyClientPingBefore(p)),q!==!1&&(h.activePlugins.forEach(S=>{S.modifyClientPing&&(p=S.modifyClientPing(p,q))}),u.modifyClientPing&&(p=u.modifyClientPing(p,q)),u.modifyClientPingAfter&&(p=u.modifyClientPingAfter(p,q))),p},y("modifyClientPing"),this._modifyFrameNo=function(p){var q;return u.modifyFrameNoBefore&&([p,q]=u.modifyFrameNoBefore(p)),q!==!1&&(h.activePlugins.forEach(S=>{S.modifyFrameNo&&(p=S.modifyFrameNo(p,q))}),u.modifyFrameNo&&(p=u.modifyFrameNo(p,q)),u.modifyFrameNoAfter&&(p=u.modifyFrameNoAfter(p,q))),p},y("modifyFrameNo"),this._onOperationReceived=function(p,q,S,N){var T=u.onBeforeOperationReceived&&u.onBeforeOperationReceived(p,q,S,N),M=T!==!1;return h.activePlugins.forEach(A=>{M&&A.onOperationReceived&&!A.onOperationReceived(p,q,S,N,T)&&(M=!1)}),M&&u.onOperationReceived&&!u.onOperationReceived(p,q,S,N,T)&&(M=!1),M&&u.onAfterOperationReceived&&!u.onAfterOperationReceived(p,q,S,N,T)&&(M=!1),M},v("onBeforeOperationReceived"),v("onOperationReceived"),v("onAfterOperationReceived");var o=function(p,q){h["_on"+p]=function(...S){var N=u["onBefore"+p],T=N&&N(...S);T!==!1&&(h.activePlugins.forEach(M=>{N=M["on"+p],N&&N(...S,T)}),N=u["on"+p],N&&N(...S,T),N=s&&s["on"+p],N&&N(...S,T),N=u["onAfter"+p],N&&N(...S,T))},v("onBefore"+p),v("on"+p),v("onAfter"+p)};C1.forEach(({name:p,metadata:q})=>{o(p,q)})}this.setProperties=function(f){i.isHost&&i.n?.$l?.(f)},this.setKickRateLimit=function(f,v,y){var p=Fh.create(f,v,y);i.W(p)!=!1&&i.n?.r._(p)},this.executeEvent=function(f,v){i.W(f,void 0,v)!=!1&&i.n?.r?._(f)},this.clearEvents=function(){var f=i.n?.r?.tn;f&&(f.list.length=0)},this.sendCustomEvent=function(f,v,y){var p=i.n?.r;if(!(!p?.t||y!=null&&!p.t.getPlayer(y)?.sn)){var q=_1.create(f,v);i.W(q,y)!=!1&&(this.isHost?y!=null?i.Cr.then(function(){p.gr(q,y)}):p.Ts(q,0,!0):p.ju&&p._(q))}},this.sendBinaryCustomEvent=function(f,v,y){var p=i.n?.r;if(!(!p?.t||y!=null&&!p.t.getPlayer(y)?.sn)){var q=d1.create(f,v);i.W(q,y)!=!1&&(this.isHost?y!=null?i.Cr.then(function(){p.gr(q,y)}):p.Ts(q,0,!0):p.ju&&p._(q))}},this.setPlayerIdentity=function(f,v,y){var p=i.n?.r;if(!(!p?.t||y!=null&&!p.t.getPlayer(y)?.sn)){var q=B1.create(f,v);i.W(q,y)!=!1&&(this.isHost?y!=null?i.Cr.then(function(){p.gr(q,y)}):p.Ts(q,0,!0):p.ju&&p._(q))}},this.setHandicap=function(f){i.n?.r.ao(f)},this.clearBan=function(f){i.isHost&&i.n?.r.Zl(f)},this.clearBans=function(){i.isHost&&i.n?.r.zl()},this.addPlayerBan=function(f){if(i.isHost){var v=i.n?.r.t.j.filter(y=>y.id==f)[0];if(v)return i.n?.r.xl(v)}},this.addIpBan=function(...f){if(i.isHost)return i.n?.r.bl(...f)},this.addAuthBan=function(...f){if(i.isHost)return i.n?.r.Dl(...f)},this.removeBan=function(f){if(i.isHost)return i.n?.r.al(f)},this.setAvatar=function(f){f=f?.substr(0,2)||"",h.client.pt.Bi.setValue("avatar",f);var v=ke.create(f);i.W(v)!=!1&&i.n?.r._(v)},this.setPlayerAvatar=function(f,v,y){if(!(!i.isHost&&(y||f!=i.n.r.nn))){var p=y?E1.create(f,v):ke.create(v);i.W(p,void 0,y?0:f)!=!1&&i.n?.r._(p)}},this.reorderPlayers=function(f,v){var y=j1.create(f,v);i.W(y)!=!1&&i.n?.r._(y)},this.setChatIndicatorActive=function(f){var v=Vh.create(f?0:1);i.W(v)!=!1&&i.n?.r._(v)},this.setTeamColors=function(f,v,...y){var p=Hh.createFromData(f,v,...y);i.W(p)!=!1&&i.n?.r._(p)},this.setUnlimitedPlayerCount=function(f){i.n?.tc?.(f)},this.setFakePassword=function(f){i.n?.ic?.(f)};var l=function(f,v){var y=i.n?.r;if(y){var p=Se.create(f);i.W(p,v)!=!1&&(v!=null?i.Cr.then(function(){y.gr(p,v)}):y._(p))}};this.sendChat=function(f,v){if(i.isHost)l(f,v);else{var y=i.n?.r;if(!y)return;var p=Se.create(f);i.W(p)!=!1&&y._(p)}},this.sendChatIndicator=function(f){i.n?.nc(f)},this.sendAnnouncement=function(f,v,y,p,q){if(i.isHost){var S=i.n?.r;if(S){p={bold:1,italic:2,small:3,"small-bold":4,"small-italic":5}[p],p==null&&(p=0),y==null&&(y=-1),q==null&&(q=1);var N=g1.create(f,y,p,q);i.W(N,v)!=!1&&(v!=null?i.Cr.then(function(){S.gr(N,v)}):S._(N))}}},this.setDiscProperties=function(f,v){if(i.isHost){var y=i.n?.r;if(y){var p=Jh.create(f,!1,v);i.W(p)!=!1&&y._(p)}}},this.setPlayerDiscProperties=function(f,v){if(i.isHost){var y=i.n?.r;if(y){var p=Jh.create(f,!0,v);i.W(p)!=!1&&y._(p)}}},this.getKeyState=function(){return i.keyState},this.setKeyState=function(f){h.Mn<0?i.keyState=f:(f&16)>0&&(i.keyState&16)>0&&!h.currentPlayer?.qi?(i.keyState=f&-17,Bh(()=>{i.keyState=f},h.Mn)):i.keyState=f},this.extrapolate=function(f){return i.n?.r?.en(f)},this.startGame=function(){i.n?.rc()},this.stopGame=function(){i.n?.ec()},this.pauseGame=function(){i.n?.sc()},this.autoTeams=function(){i.n?.uc()},this.lockTeams=function(){i.n?.hc(!i.roomState?.on)},this.isGamePaused=function(){return i.roomState?.s?.xt==120},this.resetTeams=function(){Yi.i.forEach((f,v)=>v>0&&i.n?.cf(f))},this.startRecording=function(){return i.n?.vf(!0)},this.stopRecording=function(){return i.n?.vf(!1)},this.isRecording=function(){return i.n?.Qn!=null},this.randTeams=function(){i.n?.fc()},this.setSync=function(f){i.n?.r?.t.bh(f)},this.leave=function(){i.n?.Eu()},this.setCurrentStadium=function(f,v){try{i.n?.oc(f)}catch(p){var y=p instanceof q1?p.zt:p;y instanceof SyntaxError?v(Ei(ji.StadiumParseSyntaxError,y.lineNumber)):y instanceof y1?v(y.Ks):v(Ei(ji.StadiumParseUnknownError,y))}},this.setTimeLimit=function(f){i.n?.lc(f)},this.setScoreLimit=function(f){i.n?.cc(f)},this.changeTeam=function(f){i.n?.pf(i.n?.r.nn,Yi.i[f])},this.resetTeam=function(f){i.n?.cf(Yi.i[f])},this.setPlayerTeam=function(f,v){i.n?.pf(f,Yi.i[v])},this.setPlayerAdmin=function(f,v){var y=Uh.create(f,v);i.W(y)!=!1&&i.n?.r?._(y)},this.kickPlayer=function(f,v,y){var p=Ne.create(f,v||"",y);i.W(p)!=!1&&i.n?.r?._(p)},this.fakePlayerJoin=function(f,v,y,p,q,S){var N=S1.create(f,v,y,p,q,S);i.W(N)!=!1&&i.n?.r?._(N)},this.fakePlayerLeave=function(f){var v=i.n?.r.t.getPlayer(f);if(v){var y=Ne.create(f,null,!0);return i.W(y)!=!1&&i.n?.r?._(y),{id:v.id,name:v.name,flag:v.Tt,avatar:v.gt,conn:v.kn,auth:v.Qt}}};function c(f,v){i.W(v,void 0,f)!=!1&&i.n?.r?._(v)}this.fakeSendPlayerInput=function(f,v){c(v,m1.create(f))},this.fakeSendPlayerChat=function(f,v){c(v,Se.create(f))},this.fakeSetPlayerChatIndicator=function(f,v){c(v,Vh.create(f?0:1))},this.fakeSetPlayerAvatar=function(f,v){c(v,ke.create(f))},this.fakeSetStadium=function(f,v){c(v,T1.create(f))},this.fakeStartGame=function(f){c(f,N1.create())},this.fakeStopGame=function(f){c(f,k1.create())},this.fakeSetGamePaused=function(f,v){c(v,O1.create(f))},this.fakeSetScoreLimit=function(f,v){c(v,Lh.create(0,f))},this.fakeSetTimeLimit=function(f,v){c(v,Lh.create(1,f))},this.fakeSetTeamsLock=function(f,v){c(v,P1.create(f))},this.fakeAutoTeams=function(f){c(f,A1.create())},this.fakeSetPlayerTeam=function(f,v,y){var p=Yi.i[v];p&&c(y,R1.create(f,p))},this.fakeSetKickRateLimit=function(f,v,y,p){c(p,Fh.create(f,v,y))},this.fakeSetTeamColors=function(f,v,y,p){c(p,Hh.createFromData(f,v,...y))},this.fakeSetPlayerAdmin=function(f,v,y){c(y,Uh.create(f,v))},this.fakeKickPlayer=function(f,v,y,p){c(p,Ne.create(f,v,y))},this.fakeSetPlayerSync=function(f,v){c(v,M1.create(f))},this.getPlayer=function(f){return i.n?.r.t.j.filter(v=>v.id==f)[0]},this.getBall=function(f=!0){var v=i.roomState?.s;return(f?v?.tt:v)?.c.p[0]},this.getDiscs=function(f=!0){var v=i.roomState?.s;return(f?v?.tt:v)?.c.p},this.getDisc=function(f,v=!0){var y=i.roomState?.s;return(v?y?.tt:y)?.c.p[f]},this.getPlayerDisc=function(f,v=!0){var y=i.roomState?.s,p=(v?y?.tt:y)?.c.p,q=i.roomState?.N.p;if(!(!p||!q)){for(var S=q.length;S<p.length;S++)if(p[S].d==f)return p[S]}},this.getPlayerDisc_exp=function(f){return i.roomState?.j.filter(v=>v.id==f)[0]?.V},this.takeSnapshot=function(){var f=i.n?.r?.t;if(f)return f.copy()},this.exportStadium=function(){var f=i.n?.r?.t;if(f)return f.exportStadium()},this.createVertex=function(f){var v=i.n?.r?.t;if(v)return v.createVertex(f)},this.createSegment=function(f){var v=i.n?.r?.t;if(v)return v.createSegment(f)},this.createSegmentFromObj=function(f){var v=i.n?.r?.t;if(v)return v.createSegmentFromObj(f)},this.createGoal=function(f){var v=i.n?.r?.t;if(v)return v.createGoal(f)},this.createPlane=function(f){var v=i.n?.r?.t;if(v)return v.createPlane(f)},this.createDisc=function(f){var v=i.n?.r?.t;if(v)return v.createDisc(f)},this.createJoint=function(f){var v=i.n?.r?.t;if(v)return v.createJoint(f)},this.createJointFromObj=function(f){var v=i.n?.r?.t;if(v)return v.createJointFromObj(f)},this.addVertex=function(f){var v=i.n?.r?.t;if(v)return v.addVertex(f)},this.addSegment=function(f){var v=i.n?.r?.t;if(v)return v.addSegment(f)},this.addGoal=function(f){var v=i.n?.r?.t;if(v)return v.addGoal(f)},this.addPlane=function(f){var v=i.n?.r?.t;if(v)return v.addPlane(f)},this.addDisc=function(f){var v=i.n?.r?.t;if(v)return v.addDisc(f)},this.addJoint=function(f){var v=i.n?.r?.t;if(v)return v.addJoint(f)},this.addSpawnPoint=function(f){var v=i.n?.r?.t;if(v)return v.addSpawnPoint(f)},this.addPlayer=function(f){var v=i.n?.r?.t;if(v)return v.addPlayer(f)},this.findVertexIndicesOfSegmentObj=function(f){var v=i.n?.r?.t;if(v)return v.findVertexIndicesOfSegmentObj(f)},this.findVertexIndicesOfSegment=function(f){var v=i.n?.r?.t;if(v)return v.findVertexIndicesOfSegment(f)},this.updateVertex=function(f,v){var y=i.n?.r?.t;if(y)return y.updateVertex(f,v)},this.updateSegment=function(f,v){var y=i.n?.r?.t;if(y)return y.updateSegment(f,v)},this.updateGoal=function(f,v){var y=i.n?.r?.t;if(y)return y.updateGoal(f,v)},this.updatePlane=function(f,v){var y=i.n?.r?.t;if(y)return y.updatePlane(f,v)},this.updateDisc=function(f,v){var y=i.n?.r?.t;if(y)return y.updateDisc(f,v)},this.updateDiscObj=function(f,v){var y=i.n?.r?.t;if(y)return y.updateDiscObj(f,v)},this.updateJoint=function(f,v){var y=i.n?.r?.t;if(y)return y.updateJoint(f,v)},this.updateSpawnPoint=function(f,v,y){var p=i.n?.r?.t;if(p)return p.updateSpawnPoint(f,v,y)},this.updatePlayer=function(f,v){var y=i.n?.r?.t;if(y)return y.updatePlayer(f,v)},this.removeVertex=function(f){var v=i.n?.r?.t;if(v)return v.removeVertex(f)},this.removeSegment=function(f){var v=i.n?.r?.t;if(v)return v.removeSegment(f)},this.removeGoal=function(f){var v=i.n?.r?.t;if(v)return v.removeGoal(f)},this.removePlane=function(f){var v=i.n?.r?.t;if(v)return v.removePlane(f)},this.removeDisc=function(f){var v=i.n?.r?.t;if(v)return v.removeDisc(f)},this.removeJoint=function(f){var v=i.n?.r?.t;if(v)return v.removeJoint(f)},this.removeSpawnPoint=function(f,v){var y=i.n?.r?.t;if(y)return y.removeSpawnPoint(f,v)},this.removePlayer=function(f){var v=i.n?.r?.t;if(v)return v.removePlayer(f)},this.updateStadiumPlayerPhysics=function(f){var v=i.n?.r?.t;if(v)return v.updateStadiumPlayerPhysics(f)},this.updateStadiumBg=function(f){var v=i.n?.r?.t;if(v)return v.updateStadiumBg(f)},this.updateStadiumGeneral=function(f){var v=i.n?.r?.t;if(v)return v.updateStadiumGeneral(f)},this.updatePlugin=function(f,v){var y=h.plugins[f];if(!y)throw Ei(ji.PluginNotFoundError,f);var{name:p,active:q}=y;if(p!=v.name)throw Ei(ji.PluginNameChangeNotAllowedError);q&&h.setPluginActive(p,!1),y.finalize?.(),y.room=null,h.plugins[f]=v,h.pluginsMap[p]=v,v.room=h,v.initialize?.(),h._onPluginUpdate?.(y,v),q&&(v.active=!1,h.setPluginActive(p,!0))},this.updateLibrary=function(f,v){var y=h.libraries[f];if(!y)throw Ei(ji.LibraryNotFoundError,f);var{name:p}=y;if(p!=v.name)throw Ei(ji.LibraryNameChangeNotAllowedError);y.finalize?.(),y.room=null,h.libraries[f]=v,h.librariesMap[p]=v,v.room=h,v.initialize?.(),h._onLibraryUpdate?.(y,v)},t?.(this),i.lf&&(this.libraries.forEach(f=>{f.room=h,f.initialize?.()}),u.room=h,u.initialize?.(),s&&(s.room=h,s.initialize?.()),this.plugins.forEach(f=>{f.room=h,f.initialize?.()}),this.activePlugins.forEach(f=>{h._onPluginActiveChange?.(f)})),this.startStreaming=({immediate:f=!0,onClientCount:v,emitData:y})=>{var p=i.n?.r;if(!(!i.isHost||h.isRecording()||!p||p.ii)){var q=new Map,S=me.U(16384),N=0;return{onSuccess:()=>{p.ii=function(T){if(f){S.o(2),S.St(p.m),S.Ut(T.i),Gh.Nn(T,S),y?.(S.dt()),S.l=0;return}var M=q.get(p.m);M||(M=[],q.set(p.m,M)),M.push(T)}},onDataReceived:T=>{T=new DataView(T.buffer,T.byteOffset,T.byteLength);var M=T.getUint8(0),A=T.getUint16(1);switch(M){case 0:{N=A,v?.(A);break}case 1:{M=me.U(),M.o(1),M.Ut(A),A=me.U(),i.n.r.vc(A),M.Yt(Ih.deflateRaw(A.dt())),y?.(M.dt());break}}},interval:()=>{for(var T=q.keys(),M=T.next(),A=p.m;!M.done;){var z=M.value,a=q.get(z);S.Ut(A-z),S.Ut(a.length),a.forEach(it=>{S.Ut(it.i),Gh.Nn(it,S)}),M=T.next()}q.clear();var ut=S.dt();if(S.l=0,N!=0){ut=Ih.deflateRaw(ut);var J=new Uint8Array(ut.byteLength+5),B=new DataView(J.buffer,J.byteOffset,J.byteLength);B.setUint8(0,0),B.setUint32(1,A),J.set(ut,5),y?.(J)}}}}},this.stopStreaming=()=>{var f=i.n?.r;!i.isHost||h.isRecording()||!f?.ii||(f.ii=null)}}Kh.xM=I1});var Te=O((r2,ur)=>{var{backend:Wh,yi:G1,yn:V1,Hs:L1,E:U1}=R(),{parseGeo:F1}=Xi();function H1(t,i){return(Wh.secure?"https":"http")+"://"+Wh.hostname+"/play?c="+t+(i?"&p=1":"")}function J1(t){var i=t?.Bi;!i&&(i=t.Bi={}),i.setValue=(s,u)=>{i[s]=u,i.onValueSet?.(s,u)};var n=i.crappy_router||!1;n!=i.crappy_router&&i.setValue("crappy_router",n),n=i.player_name||"abc",n!=i.player_name&&i.setValue("player_name",n),n=i.avatar||null,n!=i.avatar&&i.setValue("avatar",n);var r={lat:40,lon:40,flag:"tr"};if(!i.geo)i.setValue("geo",r);else{var e=i.geo;n=F1(e,r),(e.lat!=n.lat||e.lon!=n.lon||e.flag!=n.flag)&&i.setValue("geo",n)}}function K1(t){var i=t.pt={customClientIds:new Set,n:null,roomState:null,Vv:null,isHost:!1,createRoom:null,Cr:Promise.resolve(),keyState:0,renderer:t.renderer,Bi:t.Bi,lf:!t.wf,onOperationReceived:function(n,r,e){var s=t.room._onOperationReceived;if(!s)return!0;var u=n.eventType;return u==null?!0:s(u,n,r,e)},W:function(n,r,e){if(i.isHost)return n.i=e||0,n.is=r,i.onOperationReceived(n,i.n?.r.m,null)}};return t.pt=i,i}function Qh(){this.Et=9,this.yi=null,this.yn=null,this.wf=!1,this.Mn=-1,this.renderer=null,this.config={},this.libraries=[],this.plugins=[],this._u=null,this.du=null,this.Bu=null,this.Iu=null,this.yf=null,this.qf=null,this.Rs=null,this.mr=null,this.Be=null,this.Bi=null}function W1(t){var i=new Qh;return i.Et=t.version==null?L1:t.version,i.yi=t.proxyAgent||G1,i.yn=t.identityToken||V1,i.wf=t.noPluginMechanism,i.Mn=t.kickTimeout||-1,i.renderer=t.renderer,i.config=t.config||{},i.libraries=t.libraries||[],i.plugins=t.plugins||[],i._u=t.preInit,i.du=t.onSuccess,i.Bu=t.onFailure,i.Iu=t.onLeave,i.yf=t.onConnectionStateChange,i.qf=t.onReverseConnection,i.Rs=t.onRequestRecaptcha,i.mr=t.cancel,i.Be=t.useRecaptchaToken,i.Bi=t.storage,J1(i),i}U1(Qh,["version","proxyAgent","identityToken","noPluginMechanism","kickTimeout","renderer","config","libraries","plugins","preInit","onSuccess","onFailure","onLeave","onConnectionStateChange","onReverseConnection","onRequestRecaptcha","cancel","useRecaptchaToken","storage"],[]);ur.xM=ur.pc||(ur.pc={roomLink:H1,Cf:K1,gf:W1})});var Ae=O((e2,hr)=>{var{setTimeout:Q1,clearTimeout:$h,console:Re,performance:Pe}=R(),{q:X1}=X(),Xh=Q(),{sh:Yh}=qi(),Y1=t=>(Re.warn(Yh(Xh.NoProxyIdentityProblem)||"NoProxyIdentityProblem"),t=Yh(Xh.NoProxyIdentitySolution),t&&Re.warn(t));function Zh(t){this.wc=1e4,this.Xn=!0;var i=this;t.mf(),this.Rt=t.Rt,this.jn=t.jn,this.Ie=t.Ie,this.Yn=t.Yn,this.Sf=Pe.now();var n=null;n=function(){var s=i.wc-i.yc();0>=s?i.rt():($h(i.Nf),s=Q1(n,s+1e3),i.Nf=s)},n(),this.Rt.oniceconnectionstatechange=function(){var s=i.Rt.iceConnectionState;s!="closed"&&s!="failed"||i.rt()},t=0;for(var r=this.jn;t<r.length;){var e=r[t];++t,e.onmessage=function(s){i.Xn&&(i.Sf=Pe.now(),i.Ps!=null&&i.Ps(s.data))},e.onclose=function(){i.rt()}}}Zh.prototype={yc:function(){return Pe.now()-this.Sf},oi:function(t,i){if(this.Xn){var n=this.jn[t];if(n.readyState=="open"){var r=i.Ye();try{n.send(r)}catch(e){Re.log(e instanceof X1?e.zt:e)}}}},rt:function(){$h(this.Nf),this.Xn&&(this.Xn=!1,this.Rt.close(),this.Ge!=null&&this.Ge())}};hr.xM=hr.qc||(hr.qc={kf:[{name:"ro",reliable:!0,Gu:!0},{name:"ru",reliable:!0,Gu:!1},{name:"uu",reliable:!1,Gu:!1}],Of:Y1,Tf:Zh})});var Me=O((s2,bh)=>{var{setTimeout:zh,clearTimeout:xh,console:$1,RTCPeerConnection:Z1,E:z1}=R(),{vh:x1}=j();function $i(t,i,n){this.Sr=null,this.Yn=null,this.Ie=[],this.Rf=0,this.Pf=!1,this.As=[],this.jn=[],this.Rt=i&&new Z1({iceServers:i},$i.Cc);var r=this;if(this.Vu=new Promise(function(e){r.gc=e}),this.id=t,i)for(this.Rt.onicecandidate=function(e){e.candidate==null?r.gc(r.As):(e=e.candidate,e.candidate!=null&&e.candidate!=""&&(r.Ms!=null&&r.Ms(e),r.As.push(e)))},i=0;i<n.length;)this.mc(n[i++])}$i.Cc={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};$i.prototype={Lu:function(t){t==null&&(t=1e4),xh(this.Sr),this.Sr=zh(this.Sc.bind(this),t)},Nc:function(t,i){var n=this;this.Af(this.Rt.setRemoteDescription(t).then(function(){return n.Rt.createAnswer()}),i,500)},kc:function(){this.Af(this.Rt.createOffer(),[],1e3)},Af:function(t,i,n){var r=this;t.then(function(e){return r.Rt.setLocalDescription(e).then(function(){return e})}).then(function(e){function s(){return e}for(var u=0;u<i.length;)r.Mf(i[u++]);return x1(r.Vu,n).then(s,s)}).then(function(e){r.Uu(e)}).catch(function(e){$1.log(e),r.js()})},mc:function(t){var i=this,n={id:this.jn.length,negotiated:!0,ordered:t.Gu};t.reliable||(n.maxRetransmits=0),t=this.Rt.createDataChannel(t.name,n),t.binaryType="arraybuffer",t.onopen=function(){for(var r=0,e=i.jn;r<e.length;)if(e[r++].readyState!="open")return;i.$n!=null&&i.$n()},t.onclose=function(){i.js()},t.onmessage=function(){i.js()},this.jn.push(t)},Mf:function(t){var i=this;zh(function(){return i.Rt.addIceCandidate(t)},this.Rf)},Sc:function(){this.js()},js:function(){this.En!=null&&this.En(),this.rt()},rt:function(){this.mf(),this.Rt.close()},mf:function(){xh(this.Sr),this.Uu=this.$n=this.Ms=this.En=null,this.Rt.onicecandidate=null,this.Rt.ondatachannel=null,this.Rt.onsignalingstatechange=null,this.Rt.oniceconnectionstatechange=null;for(var t=0,i=this.jn;t<i.length;){var n=i[t];++t,n.onopen=null,n.onclose=null,n.onmessage=null}}};z1($i,[null,null,null,null,null,null,null,null,null,"id"],[]);bh.xM=$i});var ah=O((u2,Dh)=>{var{E:je}=R(),{ph:b1}=li(),lt=gr(),{ipToNumber:gt,numberToIp:D1,compareBits:a1}=Xi(),fr=340282366920938463463374607431768211455n;function Zi(){this.ipv6=!1,this.value=null,this.mask=null}Zi.create=function(t,i){if(t==null)return;let n=new Zi,r=t.__proto__.constructor.name;return n.ipv6=r=="BigInt",n.value=t,n.mask=r!=i?.__proto__.constructor.name?n.ipv6?fr:-1:i,n};function fi(){this.id=null,this.type=null,this.value=null}fi.create=function(t,i,n){var r=new fi;return r.id=t,r.type=i,r.value=n,r};fi.prototype={Es:function(){var t=new fi;return t.id=this.id,t.type=this.type,t.value=this.value.Es?this.value.Es():this.value,t}};function _i(){this.Ve=null,this.Fu=null,this.ips=null,this.Qt=null}_i.create=function(t,i,n,r){var e=new _i;return e.Ve=t,e.Fu=i,e.ips=n,e.Qt=r,e};_i.prototype={Es:function(){var t=new _i;return t.Ve=this.Ve,t.Fu=this.Fu,t.ips=this.ips,t.Qt=this.Qt,t}};function tp(t){var i=[],n=1,r=new Set,e=[];this.addPlayer=h=>{var o=t.Hn.get(h?.id)?.et;if(!(!o||i.findIndex(c=>c.type==lt.Player&&c.value.Ve==h.id)>-1)){var l=[];return o.Yn&&l.push(b1(o.Yn)),o.Ie.forEach(c=>{l.includes(c)||l.push(c)}),l.forEach(c=>{var w=gt(c);w&&e.push(Zi.create(w))}),r.add(h.Qt),i.push(fi.create(n,lt.Player,_i.create(h.id,h.name,l,h.Qt))),n++}},this.addIp=(...h)=>h.map(o=>{var l=typeof o;if(l=="string")o={ip:o};else if(l!="object")return;var c=gt(o.ip);if(c==null)return;let w=c.__proto__.constructor.name=="BigInt";var C=gt(o.mask);c.__proto__.constructor.name!=C?.__proto__.constructor.name&&(C=w?fr:-1,o.mask=D1(C));for(var m=0;m<i.length;m++){let f=i[m];if(f.type==lt.IP&&c==gt(f.value.ip)&&C==gt(f.value.mask))return}return e.push(Zi.create(c,C)),i.push(fi.create(n,lt.IP,o)),n++}),this.addAuth=(...h)=>h.map(o=>{if(!r.has(o))return i.push(fi.create(n,lt.Auth,o)),r.add(o),n++}),this.checkIp=h=>{let o=gt(h);if(o==null)return!1;let l=o.__proto__.constructor.name=="BigInt";for(var c=0;c<e.length;c++){let w=e[c];if(l==w.ipv6&&a1(o,w.value,w.mask))return!0}return!1},this.checkAuth=h=>r.has(h);let s=(h,o)=>{let l=gt(h);if(l==null)return;let c=l.__proto__.constructor.name=="BigInt";var w=gt(o);w==null&&(w=c?fr:-1);let C=w==(c?fr:-1);for(var m=[],f=0;f<e.length;f++){let v=e[f];c==v.ipv6&&l==v.value&&w==v.mask&&m.push(f)}for(;m.length>0;)e.splice(m.pop(),1);for(m.length=0,i.forEach((v,y)=>{C&&v.type==lt.Player&&v.value.ips.findIndex(p=>gt(p)==l)>-1?(v.type=lt.Auth,v.value=v.value.Qt):v.type==lt.IP&&l==gt(v.value.ip)&&w==gt(v.value.mask)&&m.push(y)});m.length>0;)i.splice(m.pop(),1)},u=h=>{r.delete(h);var o=[],l=[];for(i.forEach((c,w)=>{c.type==lt.Player&&h==c.value.Qt?(l.splice(l.length,0,...c.value.ips),o.push(w)):c.type==lt.Auth&&h==c.value&&o.push(w)});o.length>0;)i.splice(o.pop(),1);this.addIp(...l)};this.remove=h=>{var o=i.findIndex(w=>w.id==h);if(o<0)return!1;var{type:l,value:c}=i.splice(o,1)[0];switch(l){case lt.Player:c.ips.forEach(w=>{s(w)}),u(c.Qt);break;case lt.IP:s(c.ip,c.mask);break;case lt.Auth:u(c);break}return!0},this.removePlayer=h=>{var o=i.findIndex(c=>c.type==0&&c.value?.Ve==h);if(o<0)return!1;var{value:l}=i.splice(o,1)[0];return l.ips.forEach(c=>{s(c)}),u(l.Qt),!0},this.clear=()=>{r.clear(),e.length=0,i.length=0},this.getList=()=>i.map(h=>h.Es())}je(Zi,["ipv6","value","mask"],[]);je(fi,["id","type","value"],[]);je(_i,["pId","pName","ips","auth"],[]);Dh.xM=tp});var cf=O((f2,lf)=>{var uf=Q(),{proxy:zi,backend:tf,yn:h2,setTimeout:xi,clearTimeout:or,setInterval:ip,clearInterval:nf,console:np,WebSocket:rf,performance:cr,pako:vr,RTCIceCandidate:ef,RTCSessionDescription:rp,E:Ee}=R(),{Event:lr}=d(),{Ht:hf,q:st}=X(),{wh:ep,J:sp}=li(),{kf:up,Of:hp,Tf:fp}=Ae(),op=Me(),ff=ki(),lp=ah(),{D:sf,F:di,w:D,St:of,extend:cp}=j(),vp=nr(),pp=ge(),{Wh:wp,pe:yp,CustomEvent:qp,BinaryCustomEvent:Cp,ys:gp}=ui();function Bi(t,i,n,r,e){this.haxball=t,this.Au=!1,this.Nr=!1,this._s=!1,this.pn=null,this.id="",this.Oc=5e4,this.of=1e4,this.Zn=new Map,this.Tc=i,this.Rc=n,this.Pc=r,this.Ee=e||"",i&&this.ks()}Bi.jf=function(t){try{if(t=t.candidate.split(" "),t[6]!="typ")throw new st(null);if(t[7]=="srflx")return t[4]}catch{}return null};Bi.prototype={rt:function(){if(or(this.Pu),or(this.kr),this.kr=null,nf(this.Ef),this.X!=null)try{this.X.onmessage=null,this.X.onerror=null,this.X.onclose=null,this.X.onopen=null,this.X.close(),this.X=null}catch{}this._f()},Hu:function(t){var i=this;if(this.pn!=null||t!=null){if(this.pn!=null&&t!=null&&this.pn.byteLength==t.byteLength){for(var n=new Uint8Array(this.pn),r=new Uint8Array(t),e=!1,s=0,u=this.pn.byteLength;s<u;){var h=s++;if(n[h]!=r[h]){e=!0;break}}if(!e)return}this.pn=t.slice(0),this._s=!0,this.X!=null&&this.X.readyState==1&&this.kr==null&&(this.Ju(),this.kr=xi(function(){i.kr=null,i.X.readyState==1&&i._s&&i.Ju()},1e4))}},Mu:function(t){function i(){n.X!=null&&n.X.readyState==1&&n.Nr!=n.Au&&n.df(),n.Bf=null}var n=this;this.Nr=t,this.Bf==null&&(i(),this.Bf=xi(i,1e3))},ks:function(t){function i(e){if(e=e.sitekey,e==null)throw new st(null);if(r.haxball.Be=s=>{r.haxball.Be=null,r.ks(s)},!r.haxball.Rs)throw hf(uf.MissingRecaptchaCallbackError);r.haxball.Rs(e)}function n(e){var s=e.url;if(s==null)throw new st(null);if(e=e.token,e==null)throw new st(null);zi?.WebSocketUrl&&(s=zi?.WebSocketUrl),!s.endsWith("host")&&(!s.endsWith("/")&&(s+="/"),s+="host");var u=r.haxball.yn;!zi&&u&&(hp(),u=null);var h=u?[u]:[];if(r.haxball.yi||zi?.WebSocketChangeOriginAllowed){var o={};r.haxball.yi&&(o.agent=r.haxball.yi),zi.WebSocketChangeOriginAllowed&&(o.headers={Origin:(tf.secure?"https":"http")+"://"+tf.hostname}),r.X=new rf(s+"?token="+e,h,o)}else r.X=new rf(s+"?token="+e,h);r.X.binaryType="arraybuffer",r.X.onopen=function(){r.Ac()},r.X.onclose=function(l){r.Ns(l.code!=4001)},r.X.onerror=function(){r.Ns(!0)},r.X.onmessage=r.Ku.bind(r)}var r=this;vp.Ul(this.Tc,"token="+(t||this.Ee)+"&rcr=","application/x-www-form-urlencoded").then(function(e){switch(e.action){case"connect":r.haxball.Be=null,n(e);break;case"recaptcha":i(e)}}).catch(function(e){np.log(e instanceof st?e.zt:e),r.haxball.Be=null,r.Ns(!0)})},Ac:function(){var t=this;this.pn!=null&&this.Ju(),this.Nr!=0&&this.df(),this.Ef=ip(function(){t.Wu()},4e4)},Ku:function(t){switch(t=new di(new DataView(t.data),!1),t.O()){case 1:this.Qu(t);break;case 4:this.Xu(t);break;case 5:this.Mc(t);break;case 6:this.jc(t);break;case 111:this.Ec(t);break}},Ec:function(t,i){xi(()=>{try{this.haxball.room?.setPlayerIdentity?.(t.ut(),t.Ar())}catch{i&&this.Or(i,4111)}},3e3)},Qu:function(t){var i=t.ut(),n=ep(t.Lt(t.O())),r,e,s;try{t=new di(new DataView(vr.inflateRaw(t.Lt()).buffer),!1),r=t.O()!=0,e=t.li();for(var u=t.Ar(),h=[],o=0;o<u.length;)h.push(new ef(u[o++]));s=h}catch{this.Or(i,0);return}this._c(i,n,e,s,t,r)},_c:function(t,i,n,r,e,s){var u=this;if(16<=this.Zn.size)this.Or(t,4104);else if(this.banList.checkIp(i))this.Or(t,4102);else{for(var h=[],o=0;o<r.length;){var l=Bi.jf(r[o++]);if(l!=null){if(this.banList.checkIp(l)){this.Or(t,4102);return}h.push(l)}}if(this.If!=null&&(o=new di(e.v),o.l=e.l,e=this.If(o),e!=null)){this.Or(t,e);return}var c=new op(t,this.Rc,this.Pc);for(s&&(c.Rf=2500),c.Ie=h,c.Yn="",o=0;o<i.length;o++)c.Yn+=sp.Zs(i.charCodeAt(o));this.Zn.set(t,c),c.En=function(){u.wn(0,c,null),u.Zn.delete(c.id)},c.$n=function(){u.Zn.delete(c.id),u.wn(0,c,null),u.Gf!=null&&u.Gf(new fp(c))},c.Uu=function(w){u.Yu(c,w,c.As,null),c.Vu.then(function(){u.wn(0,c,null)}),c.Ms=function(C){u.$u(c,C)}},c.Lu(),c.Nc(new rp({sdp:n,type:"offer"}),r)}},Xu:function(t){var i=t.ut(),n;try{t=new di(new DataView(vr.inflateRaw(t.Lt()).buffer),!1),n=new ef(t.Ar())}catch{return}this.dc(i,n)},dc:function(t,i){var n=this.Zn.get(t);if(n!=null){var r=Bi.jf(i);if(r!=null&&(n.Ie.push(r),this.banList.checkIp(r)))return;n.Mf(i)}},Mc:function(t){this.id=t.Dn(t.O()),this.ds!=null&&this.ds(this.id)},jc:function(t){this.Ee=t.Dn(t.v.byteLength-t.l)},wn:function(t,i,n){if(!i.Pf){t==0&&(i.Pf=!0),i=i.id;var r=D.U(32,!1);r.o(t),r.St(i),n!=null&&r.Yt(vr.deflateRaw(n.dt())),this.X.send(r._n())}},Or:function(t,i){var n=D.U(16,!1);n.o(0),n.St(t),n.Ut(i),this.X.send(n._n())},Wu:function(){var t=D.U(1,!1);t.o(8),this.X.send(t._n())},Ju:function(){this._s=!1;var t=D.U(256,!1);t.o(7),this.pn!=null&&t.$e(this.pn),this.X.send(t._n())},df:function(){var t=D.U(2,!1);t.o(this.haxball.Et),t.o(this.Nr?1:0),this.X.send(t._n()),this.Au=this.Nr,this.haxball.room._onRoomRecaptchaModeChange?.(this.Nr)},Yu:function(t,i,n,r){var e=D.U(32,!1);e.ci(i.sdp),e.Ze(n),r!=null&&e.Yt(r.dt()),this.wn(1,t,e)},$u:function(t,i){var n=D.U(32,!1);n.Ze(i),this.wn(4,t,n)},_f:function(){for(var t=this.Zn.values(),i=t.next(),n;!i.done;)n=i.value,i=t.next(),n.rt();this.Zn.clear()},Ns:function(t){var i=this;this._f(),or(this.kr),this.kr=null,this._s=!1,nf(this.Ef),or(this.Pu),t&&(this.Pu=xi(function(){i.ks()},this.of+Math.random()*this.Oc|0))}};function _e(t){this.Vf=new Map,this.Bc=new of(100,16),this.Le=!1,this.er=0,this.et=t,t=D.U(8),t.g(Math.random()),this.Ue=t.dt()}_e.prototype={oi:function(t,i){i==null&&(i=0),this.et.oi(i,t)}};function de(t,i){if(this.haxball=t,this.fi=null,this.wr=32,this.Hn=new Map,this.wi=[],this.Bs=4,this.Ic=600,ff.call(this,i?.t),this.Et=i?.Et,this.Gc=1,this.Lf=0,this.qr=!1,this.Os=!0,this.de=null,this.yr=null,this.vr=cr.now(),this.Vt=i&&new Bi(t,i.backendUrl,i.Zu,up,i.zu),!!i){this.Vt.banList=new lp(this),this.Vt.If=this.Vc.bind(this);var n=this;this.Vt.Gf=function(r){n.Lc(r)},this.Vt.ds=function(r){n.ds?.(r)}}}de.prototype=cp(ff.prototype,{rt:function(){this.Vt.rt();for(var t=0,i=this.wi;t<i.length;){var n=i[t++].et;n.Ge=null,n.Ps=null,n.rt()}},Uc:function(t,i,n,r){var e=this.Hn.get(t.id);e!=null&&(r&&this.Vt.banList.addPlayer(t),t=D.U(),t.o(5),t.o(r?1:0),t.ci(i),n==null&&(n=""),t.ci(n),e.oi(t),e.et.rt())},zl:function(){this.Vt.banList.clear()&&this.haxball.room._onBansClear?.()},Zl:function(t){this.Vt.banList.removePlayer(t)&&this.haxball.room._onBanClear?.(t)},xl:function(t){return this.Vt.banList.addPlayer(t)},bl:function(...t){return this.Vt.banList.addIp(...t)},Dl:function(...t){return this.Vt.banList.addAuth(...t)},al:function(t){return this.Vt.banList.remove(t)},Hu:function(t){this.Vt.Hu(t)},Mu:function(t){this.Vt.Mu(t)},_:function(t){var i=this.m+this.Bs+this.Ci;t.tr.ot||(i=this.m),t.kt=i,this.Br(t),this.Is(),0<this.wi.length&&this.Fe(this.Gs(t),1)},Ts:function(t,i,n){t.i=i;var r;n?(t.apply(this.t),this.Fc(t,1)):0<this.wi.length&&(r=this.m+this.Bs+this.Ci,t.tr.ot||(r=this.m),t.kt=r,this.Br(t),this.Is(),this.Fe(this.Gs(t),1))},gr:function(t,i,n){if(i==0){t.apply(this.t);return}var r=this.Hn.get(i);if(r!=null){!n&&(t.i=0);var e=D.U();e.o(6),lr.Nn(t,e),r.oi(e,0)}},lt:function(){var t=((cr.now()-this.vr)*this.rn|0)-this.m;t>0&&this.Oh(t),this.m-this.Uf>=7&&this.Is(),this.m-this.Lf>=this.Ic&&(this.Is(),this.Hc())},en:function(t=0){return this.Ci<0&&(this.Ci=0),this.Th((cr.now()-this.vr+t)*this.rn-this.m+this.Bs+this.Ci)},Vc:function(t){if(!this.qr&&this.wi.length>=this.wr)return 4100;try{if(t.At()!=this.Et)throw new st(null)}catch{return 4103}try{var i=t.si();if(this.fi!=null&&i!=this.fi)throw new st(null)}catch{return 4101}},Lc:function(t){var i=this;if(!this.qr&&this.wi.length>=this.wr)t.rt();else{var n=new _e(t);this.wi.push(n),t.Ps=function(r){r=new di(new DataView(r)),i.Jc(r,n)},t.Ge=function(){sf.remove(i.wi,n),i.Hn.delete(n.id),i.Kc?.(n.id)},t=D.U(1+n.Ue.byteLength),t.o(0),t.Ft(n.Ue.byteLength),t.Yt(n.Ue),n.oi(t)}},Gs:function(t){var i=D.U();return i.o(2),this.xu(t,i),i},xu:function(t,i){i.St(t.kt),i.Ft(t.L),i.Ut(t.i),i.St(t.Gn),lr.Nn(t,i)},Is:function(){if(!(0>=this.m-this.Uf)&&this.wi.length!=0){var t=D.U();t.o(3),t.St(this.m),t.St(this.Vn),this.Fe(t,2),this.Uf=this.m}},Fe:function(t,i){i==null&&(i=0);for(var n=0,r=this.wi;n<r.length;){var e=r[n];++n,e.Le&&e.oi(t,i)}},Fc:function(t,i){i==null&&(i=0);var n=D.U();n.o(6),lr.Nn(t,n);for(var r=0,e=this.wi;r<e.length;){var s=e[r];++r,s.Le&&this.haxball.pt.customClientIds.has(s.id)&&s.oi(n,0)}},Wc:function(t){var i=D.U();i.o(1);var n=D.U();n.Ut(t.id),n.St(this.m),n.St(this.Vn),n.Ft(this.ti),this.t.$(n);for(var r=this.tn.list,e=0,s=r.length;e<s;)this.xu(r[e++],n);i.Yt(vr.deflateRaw(n.dt())),t.oi(i)},vc:function(t){t.St(this.m),t.St(this.Vn),t.Ft(this.ti),this.t.$(t);var i=this;this.tn.list.forEach(n=>{i.xu(n,t)})},Qc:function(t){xi(()=>{this.t.j.forEach(i=>{i.fu&&this.haxball.room?.setPlayerIdentity(i.id,i.fu,t.id)})},3e3)},Hc:function(){if(this.Lf=this.m,this.wi.length!=0){var t=wp.create(this.t.El());t.kt=this.m,t.L=this.ti++,t.i=0,this.Fe(this.Gs(t))}},Xc:function(t,i){var n=this,r=t.Lt(t.Jt()),e=t.Lt(t.Jt()),s=i.Ue;i.Ue=null,pp.Kl(r,s).catch(function(){return null}).then(function(u){try{if(n.Vt.banList.checkAuth(u))throw new st(hf(uf.AuthBannedError,u));if(n.wi.indexOf(i)!=-1){i.Lv=u;var h=n.Gc++;i.id=h,n.Hn.set(h,i),n.Yc?.(h,new di(new DataView(e.buffer,e.byteOffset,e.byteLength),!1),i.et.Yn,u),i.Le=!0,n.Wc(i),n.Qc(i)}}catch(o){n.Ff(i,o instanceof st?o.zt:o)}})},Jc:function(t,i){this.lt();try{if(!i.Bc.lh())throw new st(1);var n=t.O();if(i.Le)switch(n){case 1:this.$c(t,i);break;case 2:this.Zc(t,i);break;default:throw new st(0)}else if(n==0)this.Xc(t,i);else throw new st(0);if(0<t.v.byteLength-t.l)throw new st(2)}catch(r){this.Ff(i,r instanceof st?r.zt:r)}},Ff:function(t,i){this.haxball.onHostError?.(i,t.id),this.Hn.delete(t.id),sf.remove(this.wi,t),t.Le&&this.Hf!=null&&this.Hf(t.id),t.et.rt()},Zc:function(t,i){var n=t.S(),r=this.haxball.room._modifyPlayerPing;r&&(i.er=r(i.id,t.Jt()));var e=D.U();e.o(4),e.g((cr.now()-this.vr)*this.rn+this.Bs),e.g(n),i.oi(e,2)},$c:function(t,i){var n=t.ut(),r=t.ut(),e=lr.ai(t),s=e.tr.su;if(s!=null){var u=i.Vf.get(s);if(u==null&&(u=new of(s.uu,s.hu),i.Vf.set(s,u)),!u.lh())throw new st(3)}if(e.i=i.id,s=this.m,u=this.m+120,e.Gn=r,e.kt=n<s?s:n>u?u:n,!(e.__proto__.it==yp&&e.N.p.length==0)&&this.haxball.pt.onOperationReceived(e,this.m,n)){if(e.__proto__.it==qp||e.__proto__.it==Cp||e.__proto__.it==gp){this.Ts(e,e.i,!0);return}e.kh(this.t)&&(this.Br(e),this.Fe(this.Gs(e),1))}}});Ee(de,[null,"password",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[]);Ee(Bi,[null,null,null,null,null,"id",null,null,null,null,null,null,null],[]);Ee(_e,[null,null,null,"ping",null,null],[]);lf.xM=de});var Be=O((c2,Cf)=>{var{clearTimeout:mp,setInterval:Sp,clearInterval:Np,requestAnimationFrame:wf,cancelAnimationFrame:kp,performance:o2,E:l2}=R(),$t=ht(),{le:yf,hs:vf,fs:Op,os:Tp,ls:Rp,cs:pf,pe:Pp,we:Ii,vs:Ap,ps:Mp,ws:jp}=ui(),{sf:Ep}=ve();function qf(t){this.Vs=0,this.zc=0,this.internalData=t?.pt}qf.prototype={lt:function(){var t=this.internalData.keyState;this.Ls!=null&&t!=this.Vs&&(this.Vs=t,this.Ls(vf.create(t)))},xc:function(){this.Ls!=null&&this.Vs!=0&&(this.Vs=this.zc=0,this.Ls(vf.create(0)))}};function pr(t,i){if(this.haxball=t,this.bc=null,this.Jf=!1,this.Qn=null,this.bu=0,this.Ot=new qf(t),this.pr=null,this.Kf=!1,this.r=i,!!i){var n=this;i.t.rr=r=>{t.room._onPlayerInputChange?.(r.id,r.Ot)},i.t.Hr=r=>{t.room._onPlayerJoin?.(r)},i.t.Ce=r=>{t.room._onPlayerBallKick?.(r?.id)},i.t.me=r=>{t.room._onTeamGoal?.(r?.id)},i.t.ke=r=>{t.room._onGameEnd?.(r.id)},i.t.Wr=(r,e,s)=>{!s&&t.room._onGamePauseChange?.(e,r?.id)},i.t.Oe=function(r){t.room._onGameStart?.(r?.id)},i.t.qe=()=>{t.room._onGameTick?.()},i.t.ge=()=>{t.room._onKickOff?.()},i.t.jr=(r,e,s,u)=>{t.room._onCollisionDiscVsDisc?.(r,e.d,s,u.d)},i.t.Er=(r,e,s)=>{t.room._onCollisionDiscVsPlane?.(r,e.d,s)},i.t._r=(r,e,s)=>{t.room._onCollisionDiscVsSegment?.(r,e.d,s)},i.t.dr=(r,e,s,u)=>{t.room._onCollisionDiscVsVertex?.(r,e.d,s,u)},i.t.an=(r,e,s)=>{t.room._onModifyJoint?.(r,e,s)},i.t.or=(r,e,s,u,h)=>{t.room._onAutoTeams?.(r,e,s,u,h)},i.t.Xr=(r,e)=>{t.room._onTimeLimitChange?.(r,e)},i.t.Qr=(r,e)=>{t.room._onScoreLimitChange?.(r,e)},i.t.ye=r=>{t.room._onPlayerDiscCreated?.(r)},i.t.On=r=>{t.room._onPlayerDiscDestroyed?.(r)},i.t.ar=(r,e)=>{t.room._onPlayerAvatarChange?.(r,e)},i.t.se=(r,e)=>{t.room._onPlayerHeadlessAvatarChange?.(r,e)},i.t.ne=(r,e)=>{t.room._onPlayersOrderChange?.(r,e)},i.t.Zr=(r,e,s)=>{t.room._onPlayerTeamChange?.(r,e,s)},i.t.ie=(r,e,s)=>{t.room._onTeamColorsChange?.(r,e,s)},i.t.zr=(r,e)=>{t.room._onTeamsLockChange?.(r,e)},i.t.Rh=(r,e,s)=>{t.pt.isHost?(r=i.t.getPlayer(r),r&&s==1&&(r.sn=!0,t.pt.customClientIds.add(r.id))):s==0&&(t.pt.customClientIds.add(r),r=i.t.getPlayer(r),r&&(r.sn=!0),i.ju=!0,r=i.t.getPlayer(e),r&&(r.sn=!0),t.pt.customClientIds.add(e),i._(yf.create(1,e,1),0,!0))},i.t.he=(r,e,s)=>{t.room._onCustomEvent?.(r,e,s)},i.t.fe=(r,e,s)=>{t.room._onBinaryCustomEvent?.(r,e,s)},i.t.oe=(r,e,s)=>{t.room._onIdentityEvent?.(r,e,s)},i.t.ue=(r,e,s,u)=>{t.room._onSetDiscProperties?.(r,e,s,u)},i.t.Dr=r=>{t.room._onPingData?.(r)},i.t.Hh=()=>t?.room?.hostPing||0,i.t.sl=()=>{n.Ot.xc()},i.t.Ir=r=>{t.room._onHandicapChange?.(r)},i.t.Se=()=>{t.room._onTimeIsUp?.()},i.t.Ne=()=>{t.room._onPositionsReset?.()},i.t.bh=function(r){n.Kf!=r&&(n.Kf=r,r=jp.create(r),t.pt.W(r)!=!1&&i._(r))},i.t.Fr=function(r,e){t.room._onPlayerChat?.(r.id,e)},i.t.Lr=function(r,e,s,u){t.room._onAnnouncement?.(r,e,s,u)},i.t.ur=function(r){t.room._onGameStop?.(r?.id)},i.t.$r=function(r,e){t.room._onStadiumChange?.(e,r?.id)},i.t.br=function(r){t.room._onPlayerSyncChange?.(r?.id,r?.ji)},i.t.xr=function(r,e){t.room._onPlayerAdminChange?.(e?.id,e?.pi,r?.id)},i.t.Te=function(r,e,s,u){t.room._onKickRateLimitChange?.(e,s,u,r?.id)},i.t.Kr=function(r,e,s,u){r.V&&t.room._onPlayerDiscDestroyed?.(r),n.Dc?.(r.id),e!=null&&n.ac?.(r,e,u!=null?u.name:null,s),t.room._onPlayerLeave?.(r,e,s,u?.id),t.pt.customClientIds.delete(r.id)},i.t.Ur=function(r,e){t.room._onPlayerChatIndicatorChange?.(r?.id,!e)},this.Ot.Ls=function(r){t.pt.W(r)!=!1&&i._(r)},this.lc=function(r){r=pf.create(1,r),t.pt.W(r)!=!1&&i._(r)},this.cc=function(r){r=pf.create(0,r),t.pt.W(r)!=!1&&i._(r)},this.oc=function(r){r=Pp.create(r),t.pt.W(r)!=!1&&i._(r)},this.rc=function(){var r=Op.create();t.pt.W(r)!=!1&&i._(r)},this.ec=function(){var r=Tp.create();t.pt.W(r)!=!1&&i._(r)},this.sc=function(){n.tv()},this.pf=function(r,e){if(e){var s=Ii.create(r,e);t.pt.W(s)!=!1&&i._(s)}},this.cf=this.iv.bind(this),this.uc=function(){var r=Mp.create();t.pt.W(r)!=!1&&i._(r)},this.fc=function(){pr.nv(t,i)},this.hc=function(r){r=Ap.create(r),t.pt.W(r)!=!1&&i._(r)},this.vf=function(r){if(r)return n.Qn!=null?!1:(n.rv(),t.room._onRoomRecordingChange?.(!0),!0);if(n.Qn==null)return null;var e=n.Qn.stop();return n.Qn=null,t.room._onRoomRecordingChange?.(e),e},this.Wf=this.ev.bind(this),this.bu=wf(this.Wf),this.sv=Sp(function(){i.lt()},50)}}pr.nv=function(t,i){for(var n=i.t.j,r=[],e=0,s=0,u=0;u<n.length;){var h=n[u];++u,h.R==$t.spec&&r.push(h.id),h.R==$t.red?++e:h.R==$t.blue&&++s}u=r.length;var o;u!=0&&(n=function(){return r.splice(Math.random()*r.length|0,1)[0]},u==1?(o=Ii.create(n(),Math.random()<.5?$t.red:$t.blue),t.pt.W(o)!=!1&&i._(o)):s==e?(o=Ii.create(n(),$t.red),t.pt.W(o)!=!1&&i._(o),o=Ii.create(n(),$t.blue),t.pt.W(o)!=!1&&i._(o)):(e=s>e?$t.red:$t.blue,o=Ii.create(n(),e),t.pt.W(o)!=!1&&i._(o)))};pr.prototype={rv:function(){this.Qn=new Ep(this.r,3)},rt:function(){kp(this.bu),Np(this.sv),mp(this.bc)},iv:function(t){for(var i=[],n=0,r=this.r.t.j;n<r.length;){var e=r[n];++n,e.R==t&&i.push(Ii.create(e.id,$t.spec))}for(t=0;t<i.length;){var s=i[t++];this.haxball.pt.W(s)!=!1&&this.r._(s)}},ev:function(){this.bu=wf(this.Wf),this.Ot.lt(),this.r.lt(),this.haxball.pt.renderer?.render?.()},nc:function(t){var i;t!=this.Jf&&(i=yf.create(t?0:1),this.haxball.pt.W(i)!=!1&&(this.r._(i),this.Jf=t))},tv:function(){if(this.r.t.s!=null){var t=Rp.create(this.r.t.s.xt!=120);this.haxball.pt.W(t)!=!1&&this.r._(t)}}};Cf.xM=pr});var Of=O((p2,kf)=>{var{stunServers:_p,httpUrl:dp,Hs:v2,setInterval:Bp,clearInterval:Ip,console:gf}=R(),Gi=Q(),{Ht:Vi,q:bi}=X(),{parseGeo:mf}=Xi(),{w:Gp}=j(),{addRoomToList:Vp,removeRoomFromList:Lp}=qi(),Up=Oe(),{roomLink:Sf,Cf:Fp,gf:Hp}=Te(),{RoomDataDetails:Jp}=qe(),Kp=Kn(),{le:Wp,ce:Qp,ve:Nf,yu:Xp}=ui(),Yp=Ti(),$p=cf(),Zp=Be();function zp(t,i){var n=Hp(i);n.onHostError=t.onError;var r=Fp(n),e=function(){gf.log("internal event: LeaveRoom"),Lp(n.room),e=null,s=null,n.plugins&&n.plugins.forEach(f=>{f.finalize?.(),f.room=null}),n.renderer&&(n.renderer.finalize?.(),n.renderer.room=null),n.config.finalize?.(),n.config.room=null,n.libraries.forEach(f=>{f.finalize?.(),f.room=null}),e=null,r.n=null,r.roomState=null,r=null,n.room=null,n.Iu?.()},s=function(){gf.log("internal event: CreateRoomSucceeded"),s=null,n.room=new Up(n._u,r,n.libraries,n.config,n.plugins),Vp(n.room),n.room.client=n,n.room.Mn=n.Mn,n.room.hostPing=0,n.du?.(n.room);var f=n.room._onPlayerObjectCreated;f&&r.n?.r.t.j.forEach(f)},u=n.Bi,h=null,o=new Yp;o.name=t.name;var l=new $p(n,{Zu:_p,backendUrl:dp+"api/host",t:o,Et:n.Et,zu:t.token});l._e=mf(t.geo,u.geo,!1),l.uv=!!t.noPlayer;function c(){if(l.Os){var f=new Jp;f.Et=n.Et,f.name=o.name,f.j=l.de!=null?l.de:o.j.length,f.Tu=l.wr+1,f.Tt=l._e.flag,f.fi=l.yr==null?l.fi!=null:l.yr,f.Ae=l._e.Ae,f.Me=l._e.Me;var v=Gp.U(16);f.$(v),f=v.Ye(),l.Hu(f)}}var w;l.uv||(w=new Kp,w.name=u.player_name,w.pi=!0,w.Tt=l._e.flag,w.gt=u.avatar,w.sn=!0,o.j.push(w)),l.qr=!!t.unlimitedPlayerCount,l.Os=!!t.showInRoomList,l.de=t.playerCount,l.yr=t.fakePassword==null?null:!!t.fakePassword,l.wr=(t.maxPlayerCount|0)-1,l.fi=t.password==""?null:t.password,c();var C=new Zp(n,l),m=Bp(function(){var f=Xp.create(l);r.W(f)!=!1&&l._(f)},3e3);return l.Hf=function(f){o.getPlayer(f)!=null&&(f=Nf.create(f,Vi(Gi.BadActorError).toString(),!1),r.W(f)!=!1&&l._(f))},l.Yc=function(f,v,y,p){var q=v.li();if(25<q.length)throw new bi(Vi(Gi.PlayerNameTooLongError,y,p,q));var S=v.li();if(3<S.length)throw new bi(Vi(Gi.PlayerCountryTooLongError,y,p,q,S));var N=v.si();if(N!=null&&2<N.length)throw new bi(Vi(Gi.PlayerAvatarTooLongError,y,p,q,S,N));var T=n.room._modifyPlayerData;if(T){var M=T(f,q,S,N,y,p);if(!M)throw new bi(Vi(Gi.PlayerJoinBlockedByMPDError,y,p,q,S,N));[q,S,N]=M}if(q=Qp.create(f,q,S,N,y,p),r.W(q)==!1)throw new bi(Vi(Gi.PlayerJoinBlockedByORError,q));l._(q),c(),r.Cr.then(()=>{r.n?.r.gr(Wp.create(0,f,0),f,!0)})},l.Kc=function(f){o.getPlayer(f)!=null&&(f=Nf.create(f,null,!1),r.W(f)!=!1&&l._(f))},l.ds=function(f){h=f,C.pr=Sf(f,l.fi!=null),n.room._onRoomLink?.(C.pr)},C.ac=function(f,v,y,p){l.Uc(f,v,y,p)},C.Dc=function(){c()},C.Eu=function(){l.rt(),C.rt(),Ip(m),e()},n.mr=C.Eu,C.$l=function(f){if(f){var v={};if(f.hasOwnProperty("name")&&(v.name=o.name=f.name||""),f.hasOwnProperty("password")&&(v.password=l.fi=f.password),f.hasOwnProperty("fakePassword")&&(v.fakePassword=l.yr=f.fakePassword),f.hasOwnProperty("geo")){v.geo=f.geo;var y=mf(f.geo,u.geo,!1);w&&(w.Tt=y.flag)}f.hasOwnProperty("unlimitedPlayerCount")&&(v.unlimitedPlayerCount=l.qr=!!f.unlimitedPlayerCount),f.hasOwnProperty("showInRoomList")&&(v.showInRoomList=l.Os=!!f.showInRoomList),f.hasOwnProperty("playerCount")&&(v.playerCount=l.de=f.playerCount),f.hasOwnProperty("maxPlayerCount")&&(v.maxPlayerCount=l.wr=f.maxPlayerCount==null?null:f.maxPlayerCount-1),c(),f.hasOwnProperty("password")&&h!=null&&(C.pr=Sf(h,l.fi!=null)),n.room._onRoomPropertiesChange?.(v)}},C.tc=function(f){l.qr=f},C.ic=function(f){l.yr=f,c()},r.isHost=!0,r.n=C,r.roomState=o,s(),n}kf.xM=zp});var Bf=O((w2,df)=>{var{proxy:Di,backend:Tf,setTimeout:xp,clearTimeout:Rf,WebSocket:Pf,performance:ai,pako:Ge,RTCIceCandidate:Af,RTCSessionDescription:bp}=R(),tn=Q(),{Event:Ie}=d(),{Ht:nn,At:rn}=X(),{kf:Dp,Of:ap,Tf:tw}=Ae(),iw=Me(),jf=ki(),{F:wr,w:yi,jo:Mf,extend:nw}=j(),rw=jr();function Ef(t,i,n,r,e,s,u,h){this.Du=!1,this.au=!1,this.yi=u,this.yn=h,!Di&&h&&(ap(),h=null);var o=this;this.et=new iw(0,i,r),this.et.En=function(){o.He(rn.eo())},this.et.$n=function(){o.$n!=null&&o.$n(new tw(o.et)),o.et=null,o.Qf()},this.et.Uu=function(l){o.Xf=l,Di?.WebSocketUrl&&(t=Di.WebSocketUrl),!t.endsWith("client")&&(!t.endsWith("/")&&(t+="/"),t+="client");var c=h?[h]:[];if(o.yi||Di?.WebSocketChangeOriginAllowed){var w={};o.yi&&(w.agent=o.yi),Di.WebSocketChangeOriginAllowed&&(w.headers={Origin:(Tf.secure?"https":"http")+"://"+Tf.hostname}),o.X=new Pf(t+"?id="+n+(s==null?"":"&token="+s),c,w)}else o.X=new Pf(t+"?id="+n+(s==null?"":"&token="+s),c);o.X.binaryType="arraybuffer",o.X.onclose=function(C){o.Du||o.He(rn.uo(C.code))},o.X.onerror=function(){o.Du||o.He(rn.Error())},o.X.onmessage=o.Ku.bind(o),o.X.onopen=function(){o.Yf!=null&&o.Yf(),o.et.Lu(),o.Yu(o.Xf,o.et.As,e),o.et.Ms=o.$u.bind(o),o.et.Vu.then(function(){o.wn(0,null)})}},this.et.kc()}Ef.prototype={hv:function(){this.He(rn.so())},Qf:function(){try{this.X!=null&&(this.X.onclose=null,this.X.onmessage=null,this.X.onerror=null,this.X.onopen=null,this.X.close(),this.X=null)}catch{}this.et!=null&&(this.et.rt(),this.et=null)},He:function(t){this.En!=null&&this.En(t),this.Qf()},Ku:function(t){t=new wr(new DataView(t.data));var i=t.O(),n,r,e;switch(0<t.v.byteLength-t.l&&(t=new wr(new DataView(Ge.inflateRaw(t.Lt()).buffer),!1)),i){case 1:for(i=t.li(),n=t.Ar(),r=[],e=0;e<n.length;)r.push(new Af(n[e++]));this.Qu(i,r,t);break;case 4:this.Xu(new Af(t.Ar()))}},Qu:function(t,i){var n=this;this.et.Lu(this.au?1e4:4e3),this.Du=!0,this.$f!=null&&this.$f(),this.et.Rt.setRemoteDescription(new bp({sdp:t,type:"answer"}),function(){for(var r=0;r<i.length;)n.et.Rt.addIceCandidate(i[r++])},function(){n.He(rn.Error())})},Xu:function(t){this.et.Rt.addIceCandidate(t)},wn:function(t,i){if(this.X!=null){var n=yi.U(32,!1);n.o(t),i!=null&&n.Yt(Ge.deflateRaw(i.dt())),this.X.send(n._n())}},Yu:function(t,i,n){var r=yi.U(32,!1);r.o(this.au?1:0),r.ci(t.sdp),r.Ze(i),n!=null&&r.Yt(n.dt()),this.wn(1,r)},$u:function(t){var i=yi.U(32,!1);i.Ze(t),this.wn(4,i)}};function _f(t,i,n){this.haxball=t,this.th=[],this.ih=[],this.Us=new rw,this.fv=1,this.Zf=0,this.zn=0,this.nh=new Mf(50),this.Fs=new Mf(50),this.ov=1e3,this.rh=nn(tn.Empty);var r=this;jf.call(this,n.t),this.eh=n.lv,this.zf=n.cv;var e=null;e=function(s){r.Je(0);var u=yi.U();u.Ut(n.Et),u.ui(n.fi),r.Ii=new Ef(n.backendUrl,n.Zu,i,Dp,u,n.zu,r.haxball.yi,r.haxball.yn),r.Ii.au=s,r.Ii.$n=function(o){r.Ii=null,r.et=o,o.Ps=function(l){l=new wr(new DataView(l)),r.vv(l)},o.Ge=function(){r.zn!=3&&r.Ke?.(nn(tn.ConnectionClosed)),r.rt()},o=xp(function(){r.Ke?.(nn(tn.GameStateTimeout)),r.rt()},1e4),r.Sr=o,r.Je(2,r.et.Rt.remoteDescription.sdp)},r.Ii.Yf=function(){r.Je(1,r.Ii.Xf.sdp)};var h=!1;r.Ii.$f=function(){return h=!0},r.Ii.En=function(o){!s&&r.zn==1&&h?(r.pv?.(),e(!0)):(r.Ke?.(o[0]),r.rt(o[1]||o[0]))}},e(n.xf!=null&&n.xf)}_f.prototype=nw(jf.prototype,{rt:function(t){this.Ii!=null&&(this.Ii.En=null,this.Ii.hv(),this.Ii=null),Rf(this.Sr),this.et!=null&&(this.et.Ge=null,this.et.rt(),this.et=null),this.rh=t??nn(tn.ConnectionClosed),this.Je(4),this.haxball._onRoomLeave?.(this.rh)},Je:function(t,i){this.zn!=t&&(this.zn=t,this.haxball._onConnectionStateChange?.(t,i),this.xn!=null&&this.xn(t))},Xn:function(){return this.zn==3},lt:function(){this.Xn()&&ai.now()-this.Zf>this.ov&&this.Wu(),this.bn=ai.now()*this.rn+this.nh.xe(.5)-this.m,this.bf()},en:function(t=0){return this.Xn()?(0>this.Ci&&(this.Ci=0),this.Th((ai.now()+t)*this.rn+this.nh.xe(.5)-this.m+this.Ci,this.Us)):this.t},bf:function(){0>this.bn&&(this.bn=0),this.bn>this.ns&&(this.bn=this.ns)},vv:function(t){switch(t.O()){case 0:this.wv(t);break;case 1:this.yv(t);break;case 2:this.qv(t);break;case 3:this.Cv(t);break;case 4:this.gv(t);break;case 5:this.mv(t);break;case 6:this.Sv(t)}},wv:function(t){var i=this;t=t.Lt(t.Jt());var n=Promise.resolve(null);this.zf!=null&&(n=this.zf.Ql(t)),n.catch(function(){return null}).then(function(r){i.Nv(r)})},yv:function(t){for(t=Ge.inflateRaw(t.Lt()),t=new wr(new DataView(t.buffer,t.byteOffset,t.byteLength)),this.nn=t.At(),this.m=t.ut(),this.Vn=t.ut(),this.ti=t.Jt(),this.bn=10,this.t.a(t);0<t.v.byteLength-t.l;)this.Br(this.Df(t));Rf(this.Sr),this.Je(3)},Nv:function(t){var i=yi.U();i.o(0),t!=null?(i.Ft(t.byteLength),i.Yt(t)):i.Ft(0),i.Ft(this.eh.byteLength),i.$e(this.eh),this.oi(i),this.eh=null},oi:function(t,i){i==null&&(i=0),this.et.oi(i,t)},Df:function(t){var i=t.ut(),n=t.Jt(),r=t.At(),e=t.ut();return t=Ie.ai(t),t.i=r,t.Gn=e,t.kt=i,t.L=n,t},qv:function(t){t=this.Df(t),this.Br(t),t.i==this.nn&&this.Us.bo(t.Gn),this.af()},Sv:function(t){t=Ie.ai(t),t.i=0,t.Gn=0,t.apply(this.t),this.ii!=null&&this.ii(t)},Cv:function(t){var i=t.ut();t=t.ut(),this.ih.push({frame:i,kv:t}),this.af()},af:function(){if(this.zn==3){for(var t=0,i=this.ih,n,r;t<i.length;)n=i[t],++t,n.frame<=this.m||n.kv==this.Vn+this.ti+this.tn.Do(n.frame)&&this.Ov(n.frame-this.m);for(t=0,i=this.ih,n=0,r=i.length;n<r;){var e=i[n++];e.frame>this.m&&(i[t]=e,++t)}for(;i.length>t;)i.pop();this.Us.zo(this.m)}},mv:function(t){var i=t.O()!=0,n=t.li(),r="";0<t.v.byteLength-t.l&&(r=t.li()),this.rt(nn(tn.KickedNow,n,i,r))},gv:function(t){var i=t.S();t=t.S();var n=ai.now()-t;this.nh.add(i-t*this.rn),this.Fs.add(n);for(var r=i=0,e=this.th;r<e.length;){var s=e[r];if(++r,s>t)break;this.Tv?.(s<t?-1:n),++i}this.th.splice(0,i)},Wu:function(){var t=ai.now();this.Zf=t,this.th.push(t);var i=this.Fs.xe(.5)|0,n=yi.U(),r=this.haxball.room?._modifyClientPing;r&&(i=r(i)),n.o(2),n.g(t),n.Ft(i),this.oi(n,2)},Ov:function(t){this.Oh(t),this.bn-=t,this.bf()},_:function(t){if(this.zn==3){var i=this.fv++,n=0;0>this.Ci&&(this.Ci=0),t.tr.ot&&(n=this.m+(this.bn|0)+this.Ci);var r=yi.U(),e=this.haxball.room?._modifyFrameNo;r.o(1),e&&(n=e(n)),r.St(n),r.St(i),Ie.Nn(t,r),this.oi(r),t.tr.ct&&(t.Gn=i,t.i=this.nn,t.kt=n,this.Us.nu(t))}}});df.xM=_f});var Uf=O((y2,Lf)=>{var{stunServers:ew,backendUrl:sw,console:oi}=R(),If=Q(),{Ht:Gf,q:Vf}=X(),{w:uw}=j(),hw=Oe(),{addRoomToList:fw,removeRoomFromList:Ve}=qi(),{roomLink:ow,Cf:lw,gf:cw}=Te(),vw=Ti(),pw=Bf(),ww=Be();function yw(t,i){var n=t.id,r=t.password,e=t.token,s=t.authObj;if(!n||!s)throw Gf(If.JoinRoomNullIdAuthError);var u=cw(i);r==""&&(r=null);var h=lw(u),o=function(y){oi.log("internal event: LeaveRoom",y.toString()),Ve(u.room),u._onConnectionStateChange=null,o=null,u.plugins&&u.plugins.forEach(p=>{p.finalize?.(),p.room=null}),u.renderer&&(u.renderer.finalize?.(),u.renderer.room=null),u.config.finalize?.(),u.config.room=null,u.libraries.forEach(p=>{p.finalize?.(),p.room=null}),u._onRoomLeave=null,h.n=null,h.roomState=null,h=null,u.room=null,u.Iu?.(y)},l=function(){oi.log("internal event: JoinRoomSucceeded"),u._onConnectionStateChange=null,l=null,u.room=new hw(u._u,h,u.libraries,u.config,u.plugins),fw(u.room),u.room.client=u,u.room.Mn=u.Mn,u.du?.(u.room);var y=u.room?._onPlayerObjectCreated;y&&h.n?.r.t.j.forEach(y);var p=u.room?._onPlayerDiscCreated;p&&h.n?.r.t.j.filter(q=>q.V!=null).forEach(p)};u._onConnectionStateChange=function(y,p){oi.log("internal event: ConnectionStateChange"),u.yf?.(y,p),y==4&&(u._onConnectionStateChange=null,l=null,u.room=null)},u._onRoomLeave=o;try{var c=u.Bi.crappy_router,w=new vw,C=uw.U();C.ci(u.Bi.player_name),C.ci(u.Bi.geo.flag),C.ui(u.Bi.avatar);var m=new pw(u,n,{Zu:ew,backendUrl:sw,t:w,Et:u.Et,lv:C.Ye(),fi:r,xf:c,zu:e,cv:s});oi.log("Connecting to master..."),u.mr=function(){m.xn=null,m.Ke=null,m.rt()};var f=function(y){Ve(u.room),u.mr=null,u.Bu?.(y)},v=function(){u.mr=null;var y=new ww(u,m);y.pr=ow(n,!1),m.Tv=function(p){u.room._onPingChange?.(p,m.Fs.xe(.5),m.Fs.max())},y.Eu=function(){m.xn=null,m.rt(),y.rt()},m.xn=function(){m.xn=null,y.rt(),y.Qn?.stop(),f(m.rh)},h.isHost=!1,h.n=y,h.roomState=w,l?.()};m.Ke=function(y){m.Ke=null,m.xn=null,y.code==1&&y.params[0]==4004&&u.Rs?.(),f(y)},m.xn=function(y){switch(y){case 1:oi.log("Connecting to peer...");break;case 2:oi.log("Awaiting state...");break;case 3:v()}},m.pv=function(){oi.log("Trying reverse connection..."),u.qf?.()}}catch(y){oi.log(y instanceof Vf?y.zt:y),Ve(u.room),u.mr=null,u.Bu?.(Gf(If.Unknown,y instanceof Vf?y.zt:y))}return u}Lf.xM=yw});var Wf=O((C2,Kf)=>{var{performance:qw,pako:Cw,E:q2}=R(),gw=Ti(),Hf=ki(),{Event:Le}=d(),{F:Ff,extend:mw}=j(),{Sandbox:Sw}=pe();function Jf(t){Hf.call(this,t),this.A=1,this.vr=qw.now(),this.frozen=!1,this.Rv=[],this.newEvents=[],this.maxFrameNo=0}Jf.prototype=mw(Hf.prototype,{_:function(){},en:function(t=0){return this.t},lt:function(){var t=this.maxFrameNo;if(!(this.m>=t))do{var i=0,n=this.newEvents[0];if(!n||this.m>n.kt)break;for(;n?.kt==this.m;)n.apply(this.t),this.Rv.push(n),n=this.newEvents[++i];this.t.lt(1),this.m++,this.newEvents.splice(0,i)}while(this.m<t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.m=this.m*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.lt(t)}});function Nw(t,i={},n){var r=new gw,e=new Jf(r),s=new Sw(e,i,n),u;function h(l){var c=l.ut(),w=l.Jt(),C=l.At(),m=l.ut();return l=Le.ai(l),l.i=C,l.Gn=m,l.kt=c,l.L=w,l}function o(l){l.kt==e.m&&l.L<=e.ti?(l.L=e.ti++,e.receiveEvent(l)):e.tn.nu(l)}for(t=new Ff(new DataView(t.buffer,t.byteOffset,t.byteLength)),e.m=t.ut(),e.Vn=t.ut(),e.ti=t.Jt(),r.a(t);t.l<t.v.byteLength;)o(h(t));return t=null,u={state:r,extrapolate:l=>e.en(l),readStream:l=>{if(e.maxFrameNo=l.ut(),l.v.byteLength!=l.v.byteOffset+l.l){var c=Cw.inflateRaw(new Uint8Array(l.v.buffer,l.l)),w,C,m,f,v;for(l=new Ff(new DataView(c.buffer,c.byteOffset,c.byteLength));l.l<c.byteLength;)for(f=e.maxFrameNo-l.At(),w=l.At(),v=0;v<w;v++)C=l.At(),m=Le.ai(l,!0),m.i=C,m.kt=f,e.newEvents.push(m)}},readImmediateStream:l=>{var c=e.maxFrameNo=l.ut(),w=l.At(),C=Le.ai(l,!0);C.i=w,C.kt=c,e.newEvents.push(C)},takeSnapshot:function(){return r.copy()},useSnapshot:function(l){var c=l.copy();s.uf(c),r=c,u.state=c},setSimulationSpeed:function(l){e.setSpeed(l)},runSteps:function(l){e.runSteps(l)},destroy:s.rt},Object.defineProperty(u,"gameState",{get(){return u.state.s}}),Object.defineProperty(u,"currentPlayerId",{get(){return 0}}),Object.defineProperty(u,"currentFrameNo",{get(){return e.m}}),Object.defineProperty(u,"maxFrameNo",{get(){return e.maxFrameNo}}),u}Kf.xM=Nw});var Xf=O((g2,Qf)=>{var kw=Ci(),{noVariableValueChangeEvent:Ow,E:Tw}=R();function Li(t,i=null){this.name=t,this.defineMetadata(i)}Li.prototype.defineMetadata=function(t){};Li.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Ow?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};Li.prototype.setVariableGUIProps=function(t,...i){};Li.addonType=kw.Library;Tw(Li,["name"],[]);Qf.xM=Li});var $f=O((m2,Yf)=>{var Rw=Ci(),{noVariableValueChangeEvent:Pw}=R();function en(t=null){this.defineMetadata(t)}en.prototype.defineMetadata=function(t){};en.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Pw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};en.prototype.setVariableGUIProps=function(t,...i){};en.addonType=Rw.RoomConfig;Yf.xM=en});var zf=O((S2,Zf)=>{var Aw=mr(),Mw=Ci(),{noVariableValueChangeEvent:jw,E:Ew}=R();function Ui(t,i=!1,n=null){this.name=t,this.defineMetadata(n),this.defineVariable({name:"active",description:"Whether this plugin is active or not.",type:Aw.Boolean,value:i})}Ui.prototype.defineMetadata=function(t){};Ui.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;jw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};Ui.prototype.setVariableGUIProps=function(t,...i){};Ui.addonType=Mw.Plugin;Ew(Ui,["name"],[]);Zf.xM=Ui});var bf=O((N2,xf)=>{var _w=Ci(),{noVariableValueChangeEvent:dw}=R();function sn(t=null){this.defineMetadata(t)}sn.prototype.defineMetadata=function(t){};sn.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;dw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};sn.prototype.setVariableGUIProps=function(t,...i){};sn.addonType=_w.Renderer;xf.xM=sn});var Vw=O((k2,af)=>{var Bw=We(),Iw=xe(),Gw=qi(),Df=X();af.xM=(t,i)=>{var{ErrorCodes:n,...r}=hs();Bw(t,i);var{D:e,F:s,w:u}=j(),{J:h,K:o}=li(),{Point:l}=gi(),c=Mr(),{sf:w,...C}=ve(),{createSandbox:m}=pe();return{version:"1.4.0",...r,Callback:{add:c.Xo,remove:c.Yo},Utils:Xi(),EventFactory:dh(),Room:{create:Of(),join:Uf(),sandbox:m,streamWatcher:Wf()},Replay:C,Query:Iw,Library:Xf(),RoomConfig:$f(),Plugin:zf(),Renderer:bf(),Language:Gw.Language,Errors:{HBError:Df.HBError,ErrorCodes:n},Impl:{Core:{Point:l,TeamColors:zn(),Team:ht()},Stream:{F:s,w:u},Utils:{D:e,J:h,K:o,M:nr(),q:Df.q}}}}});return Vw();})();if (typeof exports !== 'undefined') { if (typeof module !== 'undefined' && module.exports) exports = module.exports = Jq; exports.abcHaxballAPI = Jq; } else if (typeof root !== 'undefined') root['abcHaxballAPI'] = Jq; else window['abcHaxballAPI'] = Jq;