var Py=(()=>{var O=(t,i)=>()=>(i||t((i={y_:{}}).y_,i),i.y_);var R=O((Kw,un)=>{un.y_=un.no||(un.no={proxy:null,backend:{hostname:"www.haxball.com",hostnameWs:"p2p.haxball.com",secure:!0},qi:null,Hs:9,noVariableValueChangeEvent:!1,noWebRTC:!1,fixNames:!0,wn:null,stunServers:[{urls:"stun:stun.l.google.com:19302"}],backendUrl:"wss://www.haxball.com/",httpUrl:"https://p2p.haxball.com/rs/",setTimeout:null,clearTimeout:null,setInterval:null,clearInterval:null,console:null,requestAnimationFrame:null,cancelAnimationFrame:null,crypto:null,WebSocket:null,XMLHttpRequest:null,performance:null,JSON5:null,pako:null,RTCPeerConnection:null,RTCIceCandidate:null,RTCSessionDescription:null,E:(t,i,n)=>{var r=new t,e=Object.keys(r),s=Object.keys(r.__proto__),u=e.concat(s);i.forEach((h,o)=>{if(!(!h||u.includes(h))){var v=e[o];v&&(u.push(h),Object.defineProperty(t.prototype,h,{get:function(){return this[v]},set:function(c){this[v]=c}}))}}),n.forEach((h,o)=>{if(!(!h||u.includes(h))){var v=s[o];v&&(u.push(h),t.prototype[h]=t.prototype[v])}})}})});var Ye=O((Hw,Xe)=>{var E=R();Xe.y_=(t,i)=>{var{setTimeout:n,clearTimeout:r,setInterval:e,clearInterval:s,console:u,requestAnimationFrame:h,cancelAnimationFrame:o,crypto:v,WebSocket:c,XMLHttpRequest:p,performance:C,JSON5:N,pako:f}=t,l=i?.backend;l&&(l.hostname!=null&&(E.backend.hostname=l.hostname),l.hostnameWs!=null&&(E.backend.hostnameWs=l.hostnameWs),l.secure!=null&&(E.backend.secure=l.secure)),l=i?.proxy,l&&(E.proxy={},l.HttpUrl!=null&&(E.proxy.HttpUrl=l.HttpUrl),l.WebSocketUrl!=null&&(E.proxy.WebSocketUrl=l.WebSocketUrl),l.WebSocketChangeOriginAllowed!=null&&(E.proxy.WebSocketChangeOriginAllowed=l.WebSocketChangeOriginAllowed)),i?.version!=null&&(E.Hs=i.version),E.backendUrl=(E.backend.secure?"wss":"ws")+"://"+E.backend.hostnameWs+"/",E.httpUrl=i?.proxy?.HttpUrl||(E.backend.secure?"https":"http")+"://"+E.backend.hostname+"/rs/",i?.stunServer!=null&&(E.stunServers=[{urls:i.stunServer}]),i?.noWebRTC!=null&&(E.noWebRTC=i.noWebRTC),i?.fixNames!=null&&(E.fixNames=i.fixNames),E.setTimeout=n,E.clearTimeout=r,E.setInterval=e,E.clearInterval=s,E.console=u,E.requestAnimationFrame=h,E.cancelAnimationFrame=o,E.crypto=v,E.WebSocket=c,E.XMLHttpRequest=p,E.performance=C,E.JSON5=N,E.pako=f,E.qi=i?.proxyAgent,E.wn=i?.identityToken,String.fromCodePoint||(String.fromCodePoint=A=>A<65536?String.fromCharCode(A):String.fromCharCode((A>>10)+55232)+String.fromCharCode((A&1023)+56320)),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(A,z){var a=new Uint8Array(this,A,z==null?null:z-A),ut=new Uint8Array(a.byteLength);return ut.set(a),ut.buffer});var y=t.webkitRTCPeerConnection||t.mozRTCPeerConnection||t.RTCPeerConnection,w=t.webkitRTCIceCandidate||t.mozRTCIceCandidate||t.RTCIceCandidate,q=t.webkitRTCSessionDescription||t.mozRTCSessionDescription||t.RTCSessionDescription;if(!E.noWebRTC){var m=new y({iceServers:[]});try{m.createAnswer().catch(function(A){m.close()})}catch{var S=S.RTCPeerConnection.prototype,T=S.createOffer,M=S.createAnswer;S.createOffer=function(z){var a=this;return new Promise(function(ut,H){T.call(a,ut,H,z)})},S.createAnswer=function(z){var a=this;return new Promise(function(ut,H){M.call(a,ut,H,z)})}}}E.RTCPeerConnection=y,E.RTCIceCandidate=w,E.RTCSessionDescription=q}});var ae=O((Jw,hn)=>{function $e(t,{x:i,y:n},r){return t.s?.v.C.findIndex(e=>{var s=e.e.x-i,u=e.e.y-n;return s*s+u*u<=r*r})}function Ze(t,{x:i,y:n},r){return t.s?.v.T.findIndex(e=>{var s,u,h,o,v,c,p;if(0*e.jt==0){if(u=i-e.Qe.x,h=n-e.Qe.y,(e.Tr.x*u+e.Tr.y*h>0&&e.Rr.x*u+e.Rr.y*h>0)==e.jt<=0)return!1;s=Math.sqrt(u*u+h*h)-e.Js}else{if(o=e.Z.e,v=e.z.e,u=v.x-o.x,h=v.y-o.y,c=i-v.x,p=n-v.y,(i-o.x)*u+(n-o.y)*h<=0||c*u+p*h>=0)return!1;s=e.b.x*c+e.b.y*p}return Math.abs(s)<r})}function ze(t,{x:i,y:n},r){return t.S.Pt.findIndex(e=>{var s=e.ei,u=e.si,h=u.x-s.x,o=u.y-s.y,v=i-u.x,c=n-u.y;if((i-s.x)*h+(n-s.y)*o<=0||v*h+c*o>=0)return!1;var p=Math.sqrt(o*o+h*h);return Math.abs(v*o/p-c*h/p)<r})}function xe(t,{x:i,y:n},r){return t.s?.v.Q.findIndex(e=>Math.abs(e.ut-(e.b.x*i+e.b.y*n))<r)}function be(t,{x:i,y:n},r){var e=t.s?.v;if(!e)return-1;var s=e.p;return e.wt.findIndex(u=>{var h=s[u.$t];if(!h)return!1;var o=s[u.Zt];if(!o)return!1;var v=h.e,c=o.e,p=c.x-v.x,C=c.y-v.y,N=i-c.x,f=n-c.y;if((i-v.x)*p+(n-v.y)*C<=0||N*p+f*C>=0)return!1;var l=Math.sqrt(C*C+p*p);return Math.abs(N*C/l-f*p/l)<r})}function De(t,{x:i,y:n}){return t.s?.v.p.findIndex(r=>{var e=r.e.x-i,s=r.e.y-n;return e*e+s*s<=r.G*r.G})}function no(t,{x:i,y:n},r){r||(r=t.s?.S.Ri.G);var e=r*r,s=t.s?.S.at.findIndex(u=>{var h=u.x-i,o=u.y-n;return h*h+o*o<=e});return s>=0?[s,1]:(s=t.s?.S.ti.findIndex(u=>{var h=u.x-i,o=u.y-n;return h*h+o*o<=e}),s>=0?[s,2]:[-1,-1])}function ro(t,i,n){return t.s?.v.C[$e(t,i,n)]}function eo(t,i,n){return t.s?.v.T[Ze(t,i,n)]}function so(t,i,n){return t.S.Pt[ze(t,i,n)]}function uo(t,i,n){return t.s?.v.Q[xe(t,i,n)]}function ho(t,i,n){return t.s?.v.wt[be(t,i,n)]}function fo(t,i){return t.s?.v.p[De(t,i)]}hn.y_=hn.ro||(hn.ro={getVertexIndexAtMapCoord:$e,getVertexAtMapCoord:ro,getSegmentIndexAtMapCoord:Ze,getSegmentAtMapCoord:eo,getGoalIndexAtMapCoord:ze,getGoalAtMapCoord:so,getPlaneIndexAtMapCoord:xe,getPlaneAtMapCoord:uo,getJointIndexAtMapCoord:be,getJointAtMapCoord:ho,getDiscIndexAtMapCoord:De,getDiscAtMapCoord:fo,getSpawnPointIndexAtMapCoord:no})});var qi=O((Ww,fn)=>{var Cr=null,on=[];function oo(t){t&&on.push(t)}function lo(t){if(t){var i=on.indexOf(t);i<0||on.splice(i,1)}}function Ki(t,i=null){this.abbr=t,this.api={errors:{}},this.defineMetadata(i)}Object.defineProperty(Ki,"current",{get:function(){return Cr},set:function(t){Cr=t,on.forEach(i=>{i._onLanguageChange?.(t?.abbr)})}});Ki.prototype.defineMetadata=function(t){};Ki.resolveText=function(t,i){if(t){for(var n=/\$([\d]+)\?\("([^"]*)":"([^"]*)"\)/gm,r=/\$([\d]+)/gm,e,s="",u=0;(e=n.exec(t))!=null;)s+=t.substring(u,e.index)+(i[e[1]-1]?e[2]:e[3]),u=e.index+e[0].length;for(s+=t.substring(u),t="",u=0;(e=r.exec(s))!=null;)t+=s.substring(u,e.index)+i[e[1]-1],u=e.index+e[0].length;return t+=s.substring(u),t}};fn.y_=fn.eo||(fn.eo={Language:Ki,addRoomToList:oo,removeRoomFromList:lo,hh:(t,i)=>Ki.resolveText(Cr?.api?.errors?.[t],i||[])})});var Q=O((Qw,ln)=>{ln.y_=ln.so||(ln.so={Empty:0,ConnectionClosed:1,GameStateTimeout:2,RoomClosed:3,RoomFull:4,WrongPassword:5,BannedBefore:6,IncompatibleVersion:7,FailedHost:8,Unknown:9,Cancelled:10,FailedPeer:11,KickedNow:12,Failed:13,MasterConnectionError:14,StadiumParseError:15,StadiumParseSyntaxError:16,StadiumParseUnknownError:17,ObjectCastError:18,TeamColorsReadError:19,UTF8CharacterDecodeError:20,ReadTooMuchError:21,ReadWrongStringLengthError:22,EncodeUTF8CharNegativeError:23,EncodeUTF8CharTooLargeError:24,CalculateLengthOfUTF8CharNegativeError:25,CalculateLengthOfUTF8CharTooLargeError:26,BufferResizeParameterTooSmallError:27,BadColorError:28,BadTeamError:29,StadiumLimitsExceededError:30,MissingActionConfigError:31,UnregisteredActionError:32,MissingImplementationError:33,AnnouncementActionMessageTooLongError:34,ChatActionMessageTooLongError:35,KickBanReasonTooLongError:36,ChangeTeamColorsInvalidTeamIdError:37,MissingRecaptchaCallbackError:38,ReplayFileVersionMismatchError:39,ReplayFileReadError:40,JoinRoomNullIdAuthError:41,PlayerNameTooLongError:42,PlayerCountryTooLongError:43,PlayerAvatarTooLongError:44,PlayerJoinBlockedByMPDError:45,PlayerJoinBlockedByORError:46,PluginNotFoundError:47,PluginNameChangeNotAllowedError:48,LibraryNotFoundError:49,LibraryNameChangeNotAllowedError:50,AuthFromKeyInvalidIdFormatError:51,BadActorError:55,AuthBannedError:56,NoProxyIdentityProblem:57,NoProxyIdentitySolution:58})});var X=O((Xw,vn)=>{var{E:ts}=R(),ft=Q(),{hh:vo}=qi();function cn(){this.code=ft.Empty,this.params=null}cn.prototype={toString:function(){return vo(this.code,this.params)}};function ot(t,...i){var n=new cn;return n.code=t,n.params=i,n}function co(t){this.Ws=t}function is(t){this.Ft=t}function pn(t){this.zt=t,Error.captureStackTrace?.(this,pn)}pn.prototype=Error.prototype;Object.defineProperty(pn.prototype,"message",{get:function(){return String(this.zt)}});function po(t){switch(t){case 4001:return ot(ft.RoomClosed);case 4100:return ot(ft.RoomFull);case 4101:return ot(ft.WrongPassword);case 4102:return ot(ft.BannedBefore);case 4103:return ot(ft.IncompatibleVersion)}return ot(ft.ConnectionClosed,t)}var wo={Error:()=>[ot(ft.MasterConnectionError),ot(ft.MasterConnectionError)],uo:()=>[ot(ft.FailedHost),ot(ft.Failed)],ho:()=>[ot(ft.Cancelled),ot(ft.Empty)],fo:t=>[po(t)]};ts(cn,["code","params"],[]);ts(is,["version"],[]);vn.y_=vn.oo||(vn.oo={Kt:ot,HBError:cn,Xe:co,lo:is,q:pn,At:wo})});var Ci=O((Yw,wn)=>{wn.y_=wn.vo||(wn.vo={RoomConfig:0,Plugin:1,Renderer:2,Library:3})});var ns=O(($w,yn)=>{yn.y_=yn.allowFlags||(yn.allowFlags={JoinRoom:1,CreateRoom:2})});var rs=O((Zw,qn)=>{qn.y_=qn.co||(qn.co={None:0,Grass:1,Hockey:2})});var gr=O((zw,Cn)=>{Cn.y_=Cn.po||(Cn.po={Player:0,IP:1,Auth:2})});var es=O((xw,gn)=>{gn.y_=gn.Li||(gn.Li={None:0,Player:1})});var ss=O((bw,mn)=>{mn.y_=mn.wo||(mn.wo={ball:0,red:1,blue:2,redKO:3,blueKO:4,wall:5,kick:6,score:7,free1:8,free2:9,free3:10,free4:11,free5:12,free6:13,free7:14,free8:15,free9:16,free10:17,free11:18,free12:19,free13:20,free14:21,free15:22,free16:23,free17:24,free18:25,free19:26,free20:27,c0:28,c1:29,c2:30,c3:31})});var us=O((Dw,Nn)=>{Nn.y_=Nn.yo||(Nn.yo={ConnectingToMaster:0,ConnectingToPeer:1,AwaitingState:2,Active:3,ConnectionFailed:4})});var hs=O((aw,Sn)=>{Sn.y_=Sn.qo||(Sn.qo={Backward:-1,Still:0,Forward:1})});var fs=O((ty,kn)=>{kn.y_=kn.Co||(kn.Co={BeforeKickOff:0,Playing:1,AfterGoal:2,Ending:3})});var V=O((iy,On)=>{On.y_=On.go||(On.go={SendAnnouncement:0,SendChatIndicator:1,CheckConsistency:2,SendInput:3,SendChat:4,JoinRoom:5,KickBanPlayer:6,StartGame:7,StopGame:8,PauseResumeGame:9,SetGamePlayLimit:10,SetStadium:11,SetPlayerTeam:12,SetTeamsLock:13,SetPlayerAdmin:14,AutoTeams:15,SetPlayerSync:16,Ping:17,SetAvatar:18,SetTeamColors:19,ReorderPlayers:20,SetKickRateLimit:21,SetHeadlessAvatar:22,SetDiscProperties:23,CustomEvent:24,BinaryCustomEvent:25,SetPlayerIdentity:26})});var os=O((ny,Tn)=>{Tn.y_=Tn.mo||(Tn.mo={None:0,GK:1,SW:2,WBL:3,DL:4,DC:5,DR:6,WBR:7,DML:8,DMC:9,DMR:10,ML:11,MC:12,MR:13,AML:14,AMC:15,AMR:16,FL:17,FC:18,FR:19,ST:20})});var mr=O((ry,Rn)=>{Rn.y_=Rn.No||(Rn.No={Void:0,Boolean:1,Integer:2,Number:3,String:4,Color:5,CollisionFlags:6,Coordinate:7,Team:8,TeamWithSpec:9,BgType:10,CameraFollow:11,KickOffReset:12,Flag:13,File:14,PlayerId:15,Keys:16,Progress:17,PlayerPositionInGame:18})});var ls=O((ey,Pn)=>{Pn.y_=Pn.So||(Pn.So={AddonType:Ci(),AllowFlags:ns(),BackgroundType:rs(),BanEntryType:gr(),CameraFollow:es(),CollisionFlags:ss(),ConnectionState:us(),Direction:hs(),ErrorCodes:Q(),GamePlayState:fs(),OperationType:V(),PlayerPositionInGame:os(),VariableType:mr()})});var j=O((sy,An)=>{var{setTimeout:ps,clearTimeout:vs,performance:Nr}=R(),zt=Q(),{Kt:xt,q:Nt}=X();function ws(t,i){var n=t.charCodeAt(i);if(n==n)return n}function Mn(){}Mn.substr=function(t,i,n){if(n==null)n=t.length;else if(0>n)if(i==0)n=t.length+n;else return"";return t.substr(i,n)};Mn.remove=function(t,i){var n=t.indexOf(i);return n==-1?!1:(t.splice(n,1),!0)};function Hi(t,i){i==null&&(i=!1),this.c=t,this.Et=i,this.l=0}Hi.ko=function(t,i){var n=t.getUint8(i),r,e,s,u,h,o=i;if(!(n&128))++i;else if((n&224)==192)r=t.getUint8(i+1),n=(n&31)<<6|r&63,i+=2;else if((n&240)==224)r=t.getUint8(i+1),e=t.getUint8(i+2),n=(n&15)<<12|(r&63)<<6|e&63,i+=3;else if((n&248)==240)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),n=(n&7)<<18|(r&63)<<12|(e&63)<<6|s&63,i+=4;else if((n&252)==248)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),n=(n&3)<<24|(r&63)<<18|(e&63)<<12|(s&63)<<6|u&63,i+=5;else if((n&254)==252)r=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),h=t.getUint8(i+5),n=(n&1)<<30|(r&63)<<24|(e&63)<<18|(s&63)<<12|(u&63)<<6|h&63,i+=6;else throw new Nt(xt(zt.UTF8CharacterDecodeError,i,n));return{char:n,length:i-o}};Hi.prototype={Vt:function(t){if(t==null&&(t=this.c.byteLength-this.l),this.l+t>this.c.byteLength)throw new Nt(xt(zt.ReadTooMuchError));var i=new Uint8Array(this.c.buffer,this.c.byteOffset+this.l,t);return this.l+=t,i},fh:function(t){var i=this.Vt(t);return t=new ArrayBuffer(t),new Uint8Array(t).set(i),t},Pr:function(){return this.c.getInt8(this.l++)},O:function(){return this.c.getUint8(this.l++)},Qs:function(){var t=this.c.getInt16(this.l,this.Et);return this.l+=2,t},At:function(){var t=this.c.getUint16(this.l,this.Et);return this.l+=2,t},M:function(){var t=this.c.getInt32(this.l,this.Et);return this.l+=4,t},ht:function(){var t=this.c.getUint32(this.l,this.Et);return this.l+=4,t},Xs:function(){var t=this.c.getFloat32(this.l,this.Et);return this.l+=4,t},N:function(){var t=this.c.getFloat64(this.l,this.Et);return this.l+=8,t},Ht:function(){for(var t=this.l,i=0,n,r=0;n=this.c.getUint8(t+i),5>i&&(r|=(n&127)<<7*i>>>0),++i,(n&128)!=0;);return this.l+=i,r|0},an:function(t){var i=this.l,n,r="";for(t=i+t;i<t;)n=Hi.ko(this.c,i),i+=n.length,r+=String.fromCodePoint(n.char);if(i!=t)throw new Nt(xt(zt.ReadWrongStringLengthError,i-t));return this.l=i,r},ui:function(){var t=this.Ht();return 0>=t?null:this.an(t-1)},ci:function(){return this.an(this.Ht())},oh:function(){return this.an(this.O())},Ar:function(){var t=this.ci();return JSON.parse(t)}};function rt(t,i){i==null&&(i=!1),this.c=t,this.Et=i,this.l=0}rt.U=function(t,i){return i==null&&(i=!1),t==null&&(t=16),new rt(new DataView(new ArrayBuffer(t)),i)};rt.Oo=function(t,i,n){var r=n;if(0>t)throw new Nt(xt(zt.EncodeUTF8CharNegativeError,t));if(128>t)i.setUint8(n,t&127),++n;else if(2048>t)i.setUint8(n,t>>6&31|192),i.setUint8(n+1,t&63|128),n+=2;else if(65536>t)i.setUint8(n,t>>12&15|224),i.setUint8(n+1,t>>6&63|128),i.setUint8(n+2,t&63|128),n+=3;else if(2097152>t)i.setUint8(n,t>>18&7|240),i.setUint8(n+1,t>>12&63|128),i.setUint8(n+2,t>>6&63|128),i.setUint8(n+3,t&63|128),n+=4;else if(67108864>t)i.setUint8(n,t>>24&3|248),i.setUint8(n+1,t>>18&63|128),i.setUint8(n+2,t>>12&63|128),i.setUint8(n+3,t>>6&63|128),i.setUint8(n+4,t&63|128),n+=5;else if(-2147483648>t)i.setUint8(n,t>>30&1|252),i.setUint8(n+1,t>>24&63|128),i.setUint8(n+2,t>>18&63|128),i.setUint8(n+3,t>>12&63|128),i.setUint8(n+4,t>>6&63|128),i.setUint8(n+5,t&63|128),n+=6;else throw new Nt(xt(zt.EncodeUTF8CharTooLargeError,t));return n-r};rt.To=function(t){if(0>t)throw new Nt(xt(zt.CalculateLengthOfUTF8CharNegativeError,t));if(128>t)return 1;if(2048>t)return 2;if(65536>t)return 3;if(2097152>t)return 4;if(67108864>t)return 5;if(-2147483648>t)return 6;throw new Nt(xt(zt.CalculateLengthOfUTF8CharTooLargeError,t))};rt.Ye=function(t){for(var i=0,n=t.length,r=0;r<n;)i+=rt.To(ws(t,r++));return i};rt.Ro=function(t){return t>>>=0,128>t?1:16384>t?2:2097152>t?3:268435456>t?4:5};rt.prototype={$e:function(){var t=new ArrayBuffer(this.l),i=new Uint8Array(this.c.buffer,this.c.byteOffset,this.l);return new Uint8Array(t).set(i),t},_t:function(){return new Uint8Array(this.c.buffer,this.c.byteOffset,this.l)},_n:function(){return new DataView(this.c.buffer,this.c.byteOffset,this.l)},Po:function(){return new Hi(this._n(),this.Et)},Ui:function(t){this.c.byteLength<t&&this.Ao(2*this.c.byteLength>=t?2*this.c.byteLength:t)},Ao:function(t){if(1>t)throw new Nt(xt(zt.BufferResizeParameterTooSmallError));if(this.c.byteLength<t){var i=new Uint8Array(this.c.buffer);t=new ArrayBuffer(t),new Uint8Array(t).set(i),this.c=new DataView(t)}},o:function(t){var i=this.l++;this.Ui(this.l),this.c.setUint8(i,t)},Ys:function(t){var i=this.l;this.l+=2,this.Ui(this.l),this.c.setInt16(i,t,this.Et)},Lt:function(t){var i=this.l;this.l+=2,this.Ui(this.l),this.c.setUint16(i,t,this.Et)},V:function(t){var i=this.l;this.l+=4,this.Ui(this.l),this.c.setInt32(i,t,this.Et)},Nt:function(t){var i=this.l;this.l+=4,this.Ui(this.l),this.c.setUint32(i,t,this.Et)},$s:function(t){var i=this.l;this.l+=4,this.Ui(this.l),this.c.setFloat32(i,t,this.Et)},g:function(t){var i=this.l;this.l+=8,this.Ui(this.l),this.c.setFloat64(i,t,this.Et)},Yt:function(t){var i=this.l;this.l+=t.byteLength,this.Ui(this.l),new Uint8Array(this.c.buffer,this.c.byteOffset,this.c.byteLength).set(t,i)},Ze:function(t){this.Yt(new Uint8Array(t))},pi:function(t){this.Ut(rt.Ye(t)),this.Mr(t)},hi:function(t){t==null?this.Ut(0):(this.Ut(rt.Ye(t)+1),this.Mr(t))},lh:function(t){var i=rt.Ye(t);if(255<i)throw new Nt(null);this.o(i),this.Mr(t)},ze:function(t){this.pi(JSON.stringify(t))},Mr:function(t){var i=this.l;this.Ui(i+rt.Ye(t));for(var n=t.length,r=0;r<n;)i+=rt.Oo(ws(t,r++),this.c,i);this.l=i},Ut:function(t){var i=this.l;t>>>=0,this.Ui(i+rt.Ro(t)),this.c.setUint8(i,t|128),128<=t?(this.c.setUint8(i+1,t>>7|128),16384<=t?(this.c.setUint8(i+2,t>>14|128),2097152<=t?(this.c.setUint8(i+3,t>>21|128),268435456<=t?(this.c.setUint8(i+4,t>>28&127),t=5):(this.c.setUint8(i+3,this.c.getUint8(i+3)&127),t=4)):(this.c.setUint8(i+2,this.c.getUint8(i+2)&127),t=3)):(this.c.setUint8(i+1,this.c.getUint8(i+1)&127),t=2)):(this.c.setUint8(i,this.c.getUint8(i)&127),t=1),this.l+=t}};function ys(t){this.Mo=t,this.Jt=[]}ys.prototype={add:function(t){for(var i=this.Jt.length,n=0,r=this.xe=0;r<i;){var e=r++,s=this.Jt[e];s.index++,s.weight*=.97,this.Jt[n].index<s.index&&(n=e),this.xe+=s.weight}for(i>=this.Mo?(i=this.Jt[n],this.xe-=i.weight,this.Jt.splice(n,1)):i={},i.value=t,i.weight=1,i.index=0,this.xe+=i.weight,t=0;t<this.Jt.length&&this.Jt[t].value<=i.value;)++t;this.Jt.splice(t,0,i)},be:function(t){if(this.Jt.length==0)return 0;if(this.Jt.length==1)return this.Jt[0].value;t*=this.xe;for(var i=this.Jt[0].weight,n=0;n<this.Jt.length-1&&!(i>=t);)++n,i+=this.Jt[n].weight;return this.Jt[n].value},max:function(){return this.Jt.length==0?0:this.Jt[this.Jt.length-1].value}};function qs(t,i){this.vh=t,this.Zs=i,this.dn=t,this.De=Nr.now()}qs.prototype={ch:function(t){return t==null&&(t=1),this.vt(),t<=this.dn?(this.dn-=t,!0):!1},jo:function(t){return this.vt(),t-=this.dn,0>=t?0:this.De+t*this.Zs-Nr.now()},_c:function(t,i){var n=this.jo(t);this.dn-=t,ps(i,n|0)},vt:function(){var t=Nr.now(),i=Math.floor((t-this.De)/this.Zs);this.De+=i*this.Zs,this.dn+=i,this.dn>=this.vh&&(this.dn=this.vh,this.De=t)}};var cs={};An.y_=An.Eo||(An.Eo={D:Mn,F:Hi,w:rt,_o:ys,Nt:qs,Integer:cs,ph:(t,i)=>{var n=i!=null;if(n){switch(i){case Array:n=t instanceof Array;break;case Boolean:n=typeof t=="boolean";break;case Number:n=typeof t=="number";break;case cs:n=typeof t=="number"&&(t|0)===t;break;case String:n=typeof t=="string";break;default:n=!1}if(n)return t}throw new Nt(xt(zt.ObjectCastError,JSON.stringify(t),JSON.stringify(i)))},wh:(t,i)=>new Promise((n,r)=>{var e=ps(()=>{r("Timed out")},i);t.then(s=>{vs(e),n(s)},s=>{vs(e),r(s)})}),Bn:(t,i)=>t.length<=i?t:Mn.substr(t,0,i),extend:(t,i)=>{var n=Object.create(t),r;for(r in i)n[r]=i[r];return i.toString!==Object.prototype.toString&&(n.toString=i.toString),n}})});var li=O((uy,jn)=>{var{D:yo}=j(),Sr="0123456789ABCDEF";function Cs(){}Cs.parseInt=function(t){return t=parseInt(t,!t||t[0]!="0"||t[1]!="x"&&t[1]!="X"?10:16),isNaN(t)?null:t};function En(){}En.startsWith=function(t,i){return t.length>=i.length?yo.substr(t,0,i.length)==i:!1};En.replace=function(t,i,n){return t.split(i).join(n)};En.zs=function(t,i){var n="";do n=Sr.charAt(t&15)+n,t>>>=4;while(t>0);if(i!=null)for(;n.length<i;)n="0"+n;return n};var qo=t=>{for(var i="",n=0;n<t.length;)i+=String.fromCharCode(Sr.indexOf(t.charAt(n++))<<4|Sr.indexOf(t.charAt(n++)));return i},Co=t=>{for(var i="",n=0,r=t.byteLength;n<r;)i+=String.fromCharCode(t[n++]);return i};jn.y_=jn.Bo||(jn.Bo={yh:qo,qh:Co,K:Cs,J:En})});var ht=O((hy,gs)=>{var{E:go}=R();function ct(t,i,n,r,e){this.id=t,this.k=i,this.Ch=n,this.u=r,this.f=e}ct.spec=new ct(0,16777215,0,-1,0);ct.red=new ct(1,15035990,-1,8,2);ct.blue=new ct(2,5671397,1,16,4);ct.i=[ct.spec,ct.red,ct.blue];go(ct,["id","color","defenseDir","cMask","cGroup"],[]);gs.y_=ct});var ii=O((fy,_n)=>{_n.y_=_n.Io||(_n.Io={Fi:0})});var ms=O((Bn,In)=>{var dn=(()=>{var t=(c,p)=>()=>(p||c((p={y_:{}}).y_,p),p.y_),i=t((c,p)=>{function C(N,f){this.x=N,this.y=f}C.prototype={gh:function(){this.x=-this.x,this.y=-this.y}},p.y_=C}),n=t((c,p)=>{var C=i();p.y_=function(N){var{f=32,u:l=63,h:y=1,Go:w=0,Vo:q=0}=N||{};this.f=f,this.u=l,this.h=y,this.e=new C(w,q)}}),r=t((c,p)=>{function C(f){var{f:l=32,u:y=63,h:w=1,Wt:q=0,Z:m=null,z:S=null}=f||{};this.Tr=this.Rr=this.b=null,this.Js=0,this.Qe=null,this.Z=m,this.z=S,this.Wt=q,this.h=w,this.u=y,this.f=l,this.jt=1/0}var N=i();C.prototype={Pi:function(f){if(f*=.017453292519943295,0>f){f=-f;var l=this.Z;this.Z=this.z,this.z=l,this.Wt=-this.Wt}.17435839227423353<f&&5.934119456780721>f&&(this.jt=1/Math.tan(f/2))},getCurveDegrees:function(){return isFinite(this.jt)?114.59155902616465*Math.atan(1/this.jt):0},calculateNormals:function(){var{jt:f,z:{e:l},Z:{e:y}}=this,w,q,m,S;isFinite(f)?(m=.5*(l.x-y.x),S=.5*(l.y-y.y),w=y.x+m-S*f,q=y.y+S+m*f,m=y.x-w,S=y.y-q,this.Js=Math.sqrt(m*m+S*S),this.Tr=new N(q-y.y,y.x-w),this.Rr=new N(l.y-q,w-l.x),0>=f&&(this.Tr.gh(),this.Rr.gh()),this.Qe=new N(w,q)):(m=y.x-l.x,S=y.y-l.y,q=Math.sqrt(S*S+m*m),this.b=new N(-S/q,m/q))}},p.y_=C}),e=t((c,p)=>{var C=i();p.y_=function(N){var{f=32,u:l=63,h:y=1,ut:w=0,dc:q=0,Bc:m=0}=N||{};this.f=f,this.u=l,this.h=y,this.ut=w,this.b=new C(q,m)}}),s=t((c,p)=>{function C(f){var{Ic:l=0,Gc:y=0,Vc:w=0,Lc:q=0}=f||{};this.si=new N(w,q),this.ei=new N(l,y)}var N=i();C.prototype={Lo:function({x:f,y:l},{x:y,y:w}){var{ei:{x:q,y:m},si:{x:S,y:T}}=this,M=y-f,A=w-l;return 0<A*(q-f)-M*(m-l)==0<A*(S-f)-M*(T-l)?!1:(M=S-q,A=T-m,0<A*(f-q)-M*(l-m)!=0<A*(y-q)-M*(w-m))}},p.y_=C}),u=t((c,p)=>{var C=i();p.y_=function(N){var{f=63,u:l=63,Y:y=.99,H:w=1,h:q=.5,G:m=10,xgravity:S=0,ygravity:T=0,xspeed:M=0,yspeed:A=0,Go:z=0,Vo:a=0}=N||{};this.f=f,this.u=l,this.Y=y,this.H=w,this.h=q,this.G=m,this.P=new C(S,T),this.A=new C(M,A),this.e=new C(z,a)}}),h=t((c,p)=>{p.y_=function(C){var{Ai:N=1/0,dt:f=100,Bt:l=100,$t:y=0,Zt:w=0}=C||{};this.Ai=N,this.dt=f,this.Bt=l,this.$t=y,this.Zt=w}}),o=t((c,p)=>{function C(f){N.apply(this,[f])}var N=u();C.prototype={mh:function(f,l,y){var{A:w,H:q}=this;w.x+=f*l*q,w.y+=f*y*q},Uo:function(f,l){var{A:y}=this;y.x+=f,y.y+=l},Fo:function(){var{x:f,y:l}=this.A;return 0<f*f+l*l}},p.y_=C}),v=t((c,p)=>{function C(){this.p=[],this.C=[],this.Q=[],this.T=[],this.wt=[]}C.prototype={ae:function(N,f){var l,y,w,q,m,S,{p:T,Q:M,T:A,C:z,wt:a}=this;T.forEach(({e:H,A:B,P:it,Y:nt})=>{var{x:wt,y:mt}=B;H.x+=N*wt,H.y+=N*mt,B.x=nt*(wt+it.x),B.y=nt*(mt+it.y)}),T.forEach((H,B)=>{var{h:it,G:nt,u:wt,f:mt,H:Dt,e:W,A:Y}=H;for(l=B+1;l<T.length;l++)if(w=T[l],w.u&mt&&w.f&wt){var{e:Zt,A:yt}=w,vt=W.x-Zt.x,at=W.y-Zt.y,qt=vt*vt+at*at,I=w.G+nt;if(0<qt&&qt<=I*I){qt=Math.sqrt(qt),vt/=qt,at/=qt;var ti=Dt/(Dt+w.H);I-=qt,qt=I*ti,W.x+=vt*qt,W.y+=at*qt,I-=qt,Zt.x-=vt*I,Zt.y-=at*I,I=vt*(Y.x-yt.x)+at*(Y.y-yt.y),0>I&&(I*=it*w.h+1,ti*=I,Y.x-=vt*ti,Y.y-=at*ti,ti=I-ti,yt.x+=vt*ti,yt.y+=at*ti,f?.jr?.(B,H,l,w))}}if(Dt!=0){M.forEach((F,Fi)=>{if(F.u&mt&&F.f&wt){var{b:{x:U,y:G}}=F;q=F.ut-(U*W.x+G*W.y)+nt,0<q&&(W.x+=U*q,W.y+=G*q,q=Y.x*U+Y.y*G,0>q&&(q*=it*F.h+1,Y.x-=q*U,Y.y-=q*G,f?.Er?.(B,H,Fi)))}}),A.forEach((F,Fi)=>{if(F.u&mt&&F.f&wt){var U,G,K,{x:yr,y:qr}=W;if(isFinite(F.jt)){if(G=F.Qe,U=yr-G.x,G=qr-G.y,K=F.Tr,I=F.Rr,(0<K.x*U+K.y*G&&0<I.x*U+I.y*G)==0>=F.jt||(I=Math.sqrt(U*U+G*G),I==0))return;K=I-F.Js,U/=I,G/=I}else{var{x:He,y:Je}=F.Z.e,{x:We,y:Qe}=F.z.e;if(G=We-He,U=Qe-Je,K=yr-We,I=qr-Qe,0>=(yr-He)*G+(qr-Je)*U||0<=K*G+I*U)return;G=F.b,U=G.x,G=G.y,K=U*K+G*I}if(I=F.Wt,I==0)0>K&&(K=-K,U=-U,G=-G);else if(0>I&&(I=-I,K=-K,U=-U,G=-G),K<-I)return;K>=nt||(K=nt-K,W.x+=U*K,W.y+=G*K,K=U*Y.x+G*Y.y,0>K&&(K*=it*F.h+1,Y.x-=U*K,Y.y-=G*K,f?._r?.(B,H,Fi)))}});var io=nt*nt;z.forEach((F,Fi)=>{if(F.u&mt&&F.f&wt&&(q=W.x-F.e.x,m=W.y-F.e.y,S=q*q+m*m,0<S&&S<=io)){S=Math.sqrt(S),q/=S,m/=S,S=nt-S,W.x+=q*S,W.y+=m*S,S=q*Y.x+m*Y.y;var U=0>S;U&&(S*=it*F.h+1,Y.x-=q*S,Y.y-=m*S),f?.dr?.(B,H,Fi,U)}})}});for(var ut=0;2>ut;ut++)a.forEach(({Zt:H,$t:B,Ai:it,Bt:nt,dt:wt},mt)=>{if(H=T[H],B=T[B],H&&B){var{e:Dt,A:W,H:Y}=H,{e:Zt,A:yt,H:vt}=B;if(y=Dt.x-Zt.x,B=Dt.y-Zt.y,w=Math.sqrt(y*y+B*B),!(0>=w)){if(y/=w,B/=w,l=Y/(Y+vt),l!=l&&(l=.5),nt>=wt)q=nt,m=0;else if(w<=nt)q=nt,m=1;else if(w>=wt)q=wt,m=-1;else return;w=q-w,isFinite(it)?(l=it*w*.5,y*=l,B*=l,W.x+=y*Y,W.y+=B*Y,yt.x-=y*vt,yt.y-=B*vt,f?.tr?.(mt,!1,!0)):(q=w*l,Dt.x+=y*q*.5,Dt.y+=B*q*.5,w-=q,Zt.x-=y*w*.5,Zt.y-=B*w*.5,w=y*(W.x-yt.x)+B*(W.y-yt.y),(it=0>=m*w)&&(l*=w,W.x-=y*l,W.y-=B*l,l=w-l,yt.x+=y*l,yt.y+=B*l),f?.tr?.(mt,!0,it))}}})},addDisc:function(N){this.p.push(N)},removeDisc:function(N){N=this.p.indexOf(N),0>N||this.p.splice(N,1)}},p.y_=C});return t((c,p)=>{p.y_={Point:i(),xs:n(),ts:r(),bs:e(),Ko:s(),is:u(),Ds:h(),as:o(),tu:v()}})()})();typeof Bn<"u"?(typeof In<"u"&&In.y_&&(Bn=In.y_=dn),Bn.Uc=dn):typeof root<"u"?root.nago=dn:window.nago=dn});var gi=O((oy,Gn)=>{var{E:ri}=R(),{extend:ei}=j(),Vn=ht(),Ss=ii(),{Point:mo,xs:ks,ts:Os,bs:Ts,Ko:Rs,is:Ps,Ds:As,as:Ms,tu:js}=ms(),Ns=1/Math.SQRT2;function kr(){ks.call(this),this.id=0}kr.prototype=ei(ks.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),t.g(this.h),t.V(this.u),t.V(this.f)},a:function(t){var i=this.e;i.x=t.N(),i.y=t.N(),this.h=t.N(),this.u=t.M(),this.f=t.M()}});function Or(){Os.call(this),this.St=!0,this.k=0}Or.prototype=ei(Os.prototype,{$:function(t){var i=0,n=t.l;t.o(0),t.o(this.Z.id),t.o(this.z.id),this.Wt!=0&&(i=1,t.g(this.Wt)),this.jt!=1/0&&(i|=2,t.g(this.jt)),this.k!=0&&(i|=4,t.V(this.k)),this.St&&(i|=8),t.c.setUint8(n,i),t.g(this.h),t.V(this.u),t.V(this.f)},a:function(t,i){var n=t.O();this.Z=i[t.O()],this.z=i[t.O()],this.Wt=n&1?t.N():0,this.jt=n&2?t.N():1/0,this.k=n&4?t.M():0,this.St=(n&8)!=0,this.h=t.N(),this.u=t.M(),this.f=t.M()}});function Tr(){Ts.call(this)}Tr.prototype=ei(Ts.prototype,{$:function(t){var i=this.b;t.g(i.x),t.g(i.y),t.g(this.ut),t.g(this.h),t.V(this.u),t.V(this.f)},a:function(t){var i=this.b;i.x=t.N(),i.y=t.N(),this.ut=t.N(),this.h=t.N(),this.u=t.M(),this.f=t.M()}});function Rr(){Rs.call(this),this.R=Vn.spec}Rr.prototype=ei(Rs.prototype,{$:function(t){var i=this.ei;t.g(i.x),t.g(i.y),i=this.si,t.g(i.x),t.g(i.y),t.o(this.R.id)},a:function(t){var i=this.ei;i.x=t.N(),i.y=t.N(),i=this.si,i.x=t.N(),i.y=t.N(),this.R=Vn.i[t.Pr()]||Vn.spec}});function Pr(){Ps.call(this),this.k=16777215}Pr.prototype=ei(Ps.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),i=this.A,t.g(i.x),t.g(i.y),i=this.P,t.g(i.x),t.g(i.y),t.g(this.G),t.g(this.h),t.g(this.H),t.g(this.Y),t.Nt(this.k),t.V(this.u),t.V(this.f)},a:function(t){var i=this.e;i.x=t.N(),i.y=t.N(),i=this.A,i.x=t.N(),i.y=t.N(),i=this.P,i.x=t.N(),i.y=t.N(),this.G=t.N(),this.h=t.N(),this.H=t.N(),this.Y=t.N(),this.k=t.ht(),this.u=t.M(),this.f=t.M()},Ho:function(){var t=new St;return this.Nh(t),t},Nh:function(t){var i=t.e,n=this.e;i.x=n.x,i.y=n.y,i=t.A,n=this.A,i.x=n.x,i.y=n.y,i=t.P,n=this.P,i.x=n.x,i.y=n.y,t.G=this.G,t.h=this.h,t.H=this.H,t.Y=this.Y,t.k=this.k,t.u=this.u,t.f=this.f}});function Ar(){As.call(this),this.k=0}Ar.prototype=ei(As.prototype,{$:function(t){t.o(this.Zt),t.o(this.$t),t.g(this.Bt),t.g(this.dt),t.g(this.Ai),t.V(this.k)},a:function(t){this.Zt=t.O(),this.$t=t.O(),this.Bt=t.N(),this.dt=t.N(),this.Ai=t.N(),this.k=t.M()}});function St(){Ms.call(this),this.B=null,this.Mi=-1,this.tt=null,this.Sh=0,this.k=16777215}St.In=function(t,i){t.G=i.G,t.h=i.h,t.H=i.H,t.Y=i.Y,t.k=i.k,t.u=i.u,t.f=i.f;var n=t.e,r=i.e;n.x=r.x,n.y=r.y,n=t.A,r=i.A,n.x=r.x,n.y=r.y,n=t.P,r=i.P,n.x=r.x,n.y=r.y};St.prototype=ei(Ms.prototype,{$:function(t){var i=this.e;t.g(i.x),t.g(i.y),i=this.A,t.g(i.x),t.g(i.y),i=this.P,t.g(i.x),t.g(i.y),t.g(this.G),t.g(this.h),t.g(this.H),t.g(this.Y),t.Nt(this.k),t.V(this.u),t.V(this.f)},a:function(t){var i=this.e;i.x=t.N(),i.y=t.N(),i=this.A,i.x=t.N(),i.y=t.N(),i=this.P,i.x=t.N(),i.y=t.N(),this.G=t.N(),this.h=t.N(),this.H=t.N(),this.Y=t.N(),this.k=t.ht(),this.u=t.M(),this.f=t.M()},ji:function(){var t=Ss.Fi;return t!=this.Mi&&(this.tt||(this.tt=new St),this.Mi=t,St.In(this.tt,this)),this.tt}});function ni(){js.call(this),this.Pt=[],this.Mi=-1,this.tt=null}ni.In=function(t,i){if(i.p==null)t.p=null;else{t.p==null&&(t.p=[]);for(var n=t.p,r=i.p,e=r.length,s;n.length>e;)n.pop();for(e=0,s=r.length;e<s;){var u=e++;n[u]=r[u].ji()}}t.C=i.C,t.T=i.T,t.Q=i.Q,t.wt=i.wt};ni.prototype=ei(js.prototype,{$:function(t){t.o(this.p.length);for(var i=0,n=this.p.length;i<n;){var r=i++,e=this.p[r];e.Sh=r,e.$(t)}},a:function(t){this.p=[];for(var i=t.O(),n=0;n<i;){++n;var r=new St;r.a(t),this.addDisc(r)}},ji:function(){var t=Ss.Fi;return t!=this.Mi&&(this.tt||(this.tt=new ni),this.Mi=t,ni.In(this.tt,this)),this.tt},kickBall:function(t,i,n){var e=i.e,s=t.e,r=e.x-s.x,e=e.y-s.y,s=Math.sqrt(r*r+e*e);if(!(s-i.G-t.G>=4)){var u=r/s,h=e/s;return i.mh(n.yn,u,h),t.mh(-n.qn,u,h),!0}},Jo:function(t,i){var n=t.Ot,r=((n&8)>0)-((n&4)>0),e=r==0,s=((n&2)>0)-((n&1)>0),u=s==0;!e&&!u&&(r*=Ns,s*=Ns),n=t.Ci,(!e||!u)&&(u=n?i.Cn:i.gn,t.d.Uo(r*u,s*u)),t.d.Y=n?i.mn:i.Y},kh:function(t,i){t.d&&(this.removeDisc(t.d),i?.(t),t.d=null)},Wo:function(t,i,n){t.Ot=0;var r=t.d;r==null&&(r=new St,r.B=t.id,t.d=r,this.addDisc(r),n?.(t));var e=i.Ri;r.k=0,r.G=e.G,r.H=e.H,r.Y=e.Y,r.h=e.h,r.u=39,r.f=t.R.f|e.f;var s=t.R==Vn.red?i.at:i.ti;s.length==0?(r.e.x=t.R.Ch*i.Ei,r.e.y=0):(t=r.e,s=s[s.length-1],t.x=s.x,t.y=s.y),s=r.A,s.x=0,s.y=0,r=r.P,e=e.P,r.x=e.x,r.y=e.y}});ni.Qo=t=>{var i=new ni;return i.C=t.C,i.T=t.T,i.Pt=t.Pt,i.Q=t.Q,i.wt=t.wt,t.p.forEach(n=>{var r=new St;return r.e.x=n.e.x,r.e.y=n.e.y,r.A.x=n.A.x,r.A.y=n.A.y,r.P.x=n.P.x,r.P.y=n.P.y,r.G=n.G,r.h=n.h,r.H=n.H,r.Y=n.Y,r.k=n.k,r.u=n.u,r.f=n.f,i.addDisc(r),r}),i};ri(kr,["cGroup","cMask","bCoef","pos","id"],[]);ri(Or,["normal","v1Normal","v0Normal","arcRadius","arcCenter","v0","v1","bias","bCoef","cMask","cGroup","curveF","vis","color"],[]);ri(Tr,["cGroup","cMask","bCoef","dist","normal"],[]);ri(Rr,["p1","p0","team"],[]);ri(Pr,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","color"],[]);ri(Ar,["strength","maxLength","minLength","d1","d0","color"],[]);ri(St,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","playerId",null,"ext",null,"color"],[]);ri(ni,["discs","vertices","planes","segments","joints","goals",null,"ext"],[]);Gn.y_=Gn.Xo||(Gn.Xo={Point:mo,xs:kr,ts:Or,bs:Tr,Yo:Rr,is:Pr,Ds:Ar,as:St,tu:ni})});var Mr=O((ly,Ln)=>{var{noVariableValueChangeEvent:No}=R(),Un=[];function P(t,i){Un.push({name:t})}function So(t){var i=Un.findIndex(n=>n.name==t);i<0||Un.splice(i,1)}P("PlayerObjectCreated");P("PlayerDiscCreated");P("PlayerDiscDestroyed");P("RoomLink");P("PlayerBallKick");P("TeamGoal");P("GameEnd");P("GameTick");P("PlayerSyncChange");P("Announcement");P("KickOff");P("AutoTeams");P("ScoreLimitChange");P("TimeLimitChange");P("PlayerAdminChange");P("PlayerAvatarChange");P("PlayerHeadlessAvatarChange");P("PlayersOrderChange");P("PlayerTeamChange");P("StadiumChange");P("TeamColorsChange");P("TeamsLockChange");P("PlayerJoin");P("GamePauseChange");P("PlayerChat");P("PlayerInputChange");P("PlayerChatIndicatorChange");P("PlayerLeave");P("SetDiscProperties");P("KickRateLimitChange");P("GameStart");P("GameStop");P("PingData");P("PingChange");P("CollisionDiscVsDisc");P("CollisionDiscVsSegment");P("CollisionDiscVsPlane");P("CollisionDiscVsVertex");P("ModifyJoint");P("TimeIsUp");P("PositionsReset");P("BansClear");P("BanClear");P("ExtrapolationChange");P("HandicapChange");P("RoomRecaptchaModeChange");P("RoomTokenChange");P("RoomRecordingChange");P("RoomPropertiesChange");P("CustomEvent");P("BinaryCustomEvent");P("IdentityEvent");P("PluginActiveChange");P("ConfigUpdate");P("RendererUpdate");P("PluginUpdate");P("LibraryUpdate");P("LanguageChange");No||P("VariableValueChange");Ln.y_=Ln.iu||(Ln.iu={iu:Un,$o:P,Zo:So})});var d=O((vy,Fn)=>{var mi=Q(),{Kt:Ni,q:Si}=X();function Ct(){this.L=0}Ct.nu=new Map;Ct.yt=function(t){return t.lt==null&&(t.lt=!0),t.ct==null&&(t.ct=!0),t};Ct.qt=function(t){if(t.Oh=t.prototype.eventType,t.pt==null)throw new Si(Ni(mi.MissingActionConfigError));t.prototype.ir=t.pt,Ct.nu.set(t.Oh,t)};Ct.Nn=function(t,i){var n=t?.it?.Oh;if(n==null)throw new Si(Ni(mi.UnregisteredActionError));i.o(n),t.ft(i)};Ct.nn=function(t,i){var n=Object.create(Ct.nu.get(t.O()).prototype);return n.L=0,n.kt=0,n.ot(t,i),n};Ct.prototype={Th:function(){return!0},apply:function(){throw new Si(Ni(mi.MissingImplementationError))},ot:function(){throw new Si(Ni(mi.MissingImplementationError))},ft:function(){throw new Si(Ni(mi.MissingImplementationError))},copy:function(){throw new Si(Ni(mi.MissingImplementationError))},it:Ct};Object.defineProperty(Ct.prototype,"eventType",{get(){return null}});function ko(t,i){return t.L=i.L,t.kt=i.kt,t.i=i.i,t.ns=i.ns,t}Fn.y_=Fn.zo||(Fn.zo={Event:Ct,Ct:ko})});var jr=O((cy,Es)=>{function Kn(){this.list=[]}Kn.xo=function(t,i,n){if(t.length==0)for(t=0;t<i.length;)n.push(i[t++]);else if(i.length==0)for(i=0;i<t.length;)n.push(t[i++]);else for(var r=0,e=t.length,s=0,u=i.length;;){var h=t[r],o=i[s];if(h.kt<=o.kt){if(n.push(h),++r,r>=e){for(;s<u;)n.push(i[s++]);break}}else if(n.push(o),++s,s>=u){for(;r<e;)n.push(t[r++]);break}}};Kn.prototype={ru:function(t){for(var i=0,n=t.kt,r=t.L,e=0,s=this.list;e<s.length;){var u=s[e];++e;var h=u.kt;if(h>n)break;if(h==n){if(u=u.L,u>r)break;u==r&&++r}++i}t.L=r,this.list.splice(i,0,t)},bo:function(t){for(var i=0,n=0,r=this.list;n<r.length&&!(r[n++].kt>=t);)++i;this.list.splice(0,i)},Do:function(t,i){for(var n=this.list;0<n.length;)n.pop();Kn.xo(t.list,i.list,this.list)},ao:function(t){for(var i=0,n=this.list,r=0,e=n.length;r<e;){var s=n[r++];s.Gn!=t&&(n[i]=s,++i)}for(;n.length>i;)n.pop()},tl:function(t){for(var i=0,n=0,r=this.list;n<r.length&&!(r[n++].kt>=t);)++i;return i}};Es.y_=Kn});var ki=O((py,Bs)=>{var{Kt:Er,q:_r}=X(),_s=jr(),Oo=ii(),dr=Q();function ds(t){this.eu=new _s,this.Vn=0,this.ii=0,this.rn=new _s,this.su=0,this.gi=0,this._i=0,this.Ki=.06,this.uu=16.666666666666668,this.rs=120,this.m=0,this.t=t}ds.prototype={_:function(){throw new _r(Er(dr.MissingImplementationError))},Sn:function(){throw new _r(Er(dr.MissingImplementationError))},vt:function(){throw new _r(Er(dr.MissingImplementationError))},Rh:function(t){for(var i=this.rn.list,n=0,r=i.length,e=0;e<t;){for(++e;n<r;){var s=i[n];if(s.kt!=this.m)break;s.apply(this.t),this.ni!=null&&this.ni(s),this.ii++,++n}this.t.vt(1),this.Vn+=this.ii,this.ii=0,this.m++}for(;n<r&&(t=i[n],!(t.kt!=this.m||t.L!=this.ii));)t.apply(this.t),this.ni!=null&&this.ni(t),this.ii++,++n;i.splice(0,n)},Br:function(t){t.kt==this.m&&t.L<=this.ii?(t.L=this.ii++,t.apply(this.t,this.haxball),this.ni!=null&&this.ni(t)):this.rn.ru(t)},Ph:function(t,i){if(0>=t)return this.t;t>this.rs&&(t=this.rs),Oo.Fi++;var n=this.t.ji(),r;i!=null?(this.eu.Do(this.rn,i),r=this.eu):r=this.rn,r=r.list;for(var e=0,s=r.length,u=this.m,h=t|0,o=u+h;u<=o;){for(;e<s;){var v=r[e];if(v.kt>u)break;v.ir.ct&&v.apply(n),++e}n.vt(u!=o?1:t-h),++u}for(r=this.eu.list;0<r.length;)r.pop();return n},il:function(t){this.gi=this.Ki*t|0,this.t.Ir?.(t)},Ah:function(t){this.su=this.Ki*t,this.t.Gr?.(t)}};Bs.y_=ds});var Gs=O((wy,Is)=>{var{E:To}=R(),{Kt:Ro,q:Po}=X(),{Event:Br,Ct:Ao}=d(),Mo=Q(),jo=V(),{extend:Eo,Bn:_o}=j();function kt(){this.L=0,this.nr="",this.k=0,this.Vr=0,this.Lr=0,this.i=0,this.ns=null}kt.create=function(t,i,n,r){var e=new kt;return e.nr=t,e.k=i,e.Vr=n,e.Lr=r,e};kt.prototype=Eo(Br.prototype,{apply:function(t){this.i==0&&t.Ur?.(this.nr,this.k,this.Vr,this.Lr)},ft:function(t){t.pi(_o(this.nr,1e3)),t.V(this.k),t.o(this.Vr),t.o(this.Lr)},ot:function(t){if(this.nr=t.ci(),1e3<this.nr.length)throw new Po(Ro(Mo.AnnouncementActionMessageTooLongError));this.k=t.M(),this.Vr=t.O(),this.Lr=t.O()},copy:function(){return Ao(kt.create(this.nr,this.k,this.Vr,this.Lr),this)},it:kt});Object.defineProperty(kt.prototype,"eventType",{get(){return jo.SendAnnouncement}});kt.pt=Br.yt({ct:!1,lt:!1,hu:{fu:10,ou:900}});Br.qt(kt);To(kt,[null,"msg","color","style","sound","byId","targetId"],[]);Is.y_=kt});var Ls=O((yy,Vs)=>{var{E:Bo}=R(),{Event:Ir,Ct:Io}=d(),Go=V(),{extend:Vo}=j();function Ot(){this.L=0,this.value=0,this.id=null,this.rr=null,this.i=0}Ot.create=function(t,i,n){var r=new Ot;return r.value=t,r.id=i,r.rr=n,r};Ot.prototype=Vo(Ir.prototype,{apply:function(t){if(this.id!=null){t.Mh&&t.Mh(this.i,this.id,this.rr);return}var i=t.getPlayer(this.i);i!=null&&t.Fr?.(i,this.value)},ft:function(t){t.o(this.value),this.id!=null&&this.rr!=null&&(t.V(this.id),t.o(this.rr))},ot:function(t,i){if(this.value=t.O(),!i)try{this.id=t.M(),this.rr=t.O()}catch{}},copy:function(){return Io(Ot.create(this.value,this.id,this.rr),this)},it:Ot});Object.defineProperty(Ot.prototype,"eventType",{get(){return Go.SendChatIndicator}});Ot.pt=Ir.yt({ct:!1,lt:!1});Ir.qt(Ot);Bo(Ot,[null,"value","id","mode","byId"],[]);Vs.y_=Ot});var Fs=O((qy,Us)=>{var{E:Lo}=R(),{Event:Gr,Ct:Uo}=d(),Fo=V(),{extend:Ko}=j();function Tt(){this.L=0,this.data=null}Tt.create=function(t){var i=new Tt;return i.data=t,i};Tt.prototype=Ko(Gr.prototype,{apply:function(t){t.nl(this.data)},ft:function(t){t.Ut(this.data.byteLength),t.Ze(this.data)},ot:function(t){this.data=t.fh(t.Ht())},copy:function(){var t=null;return this.data&&(t=new ArrayBuffer(this.data.byteLength),new Uint8Array(t).set(new Uint8Array(this.data))),Uo(Tt.create(t),this)},it:Tt});Object.defineProperty(Tt.prototype,"eventType",{get(){return Fo.CheckConsistency}});Tt.pt=Gr.yt({ct:!1,lt:!1});Gr.qt(Tt);Lo(Tt,[null,"data"],[]);Us.y_=Tt});var Hs=O((Cy,Ks)=>{var{E:Ho}=R(),{Event:Vr,Ct:Jo}=d(),Wo=V(),{extend:Qo}=j();function Rt(){this.L=0,this.Ot=0,this.i=0}Rt.create=function(t){var i=new Rt;return i.Ot=t,i};Rt.prototype=Qo(Vr.prototype,{apply:function(t){var i=t.getPlayer(this.i);if(i){var n=this.Ot;!(i.Ot&16)&&n&16&&(i.Ci=!0),i.Ot=n,t.er?.(i)}},ft:function(t){t.Nt(this.Ot)},ot:function(t){this.Ot=t.ht()},copy:function(){return Jo(Rt.create(this.Ot),this)},it:Rt});Object.defineProperty(Rt.prototype,"eventType",{get(){return Wo.SendInput}});Rt.pt=Vr.yt({});Vr.qt(Rt);Ho(Rt,[null,"input","byId"],[]);Ks.y_=Rt});var Ws=O((gy,Js)=>{var{E:Xo}=R(),{Kt:Yo,q:$o}=X(),{Event:Lr,Ct:Zo}=d(),zo=V(),xo=Q(),{extend:bo,Bn:Do}=j();function Pt(){this.L=0,this.wi="",this.i=0,this.ns=null}Pt.create=function(t){var i=new Pt;return i.wi=t,i};Pt.prototype=bo(Lr.prototype,{Th:function(t){if(t.rl!=null){var i=t.getPlayer(this.i);return i==null?!1:t.rl(i,this.wi)}return!0},apply:function(t){var i=t.getPlayer(this.i);i!=null&&t.Kr?.(i,this.wi)},ft:function(t){t.pi(Do(this.wi,140))},ot:function(t){if(this.wi=t.ci(),140<this.wi.length)throw new $o(Yo(xo.ChatActionMessageTooLongError))},copy:function(){return Zo(Pt.create(this.wi),this)},it:Pt});Object.defineProperty(Pt.prototype,"eventType",{get(){return zo.SendChat}});Pt.pt=Lr.yt({ct:!1,lt:!1,hu:{fu:10,ou:900}});Lr.qt(Pt);Xo(Pt,[null,"text","byId","targetId"],[]);Js.y_=Pt});var Jn=O((my,Qs)=>{var{E:ao}=R(),Hn=ht(),tl=ii();function Oi(){this.Fi=-1,this.tt=null,this.R=Hn.spec,this.d=null,this.Hi=0,this.Ji=0,this.Ci=!1,this.id=0,this.Ot=0,this.name="Player",this.sr=0,this.ur=0,this.Tt=null,this.di=!1,this.Ln=null,this.gt=null,this.mi=0,this.yi=!1,this.kn=null,this.Qt=null,this.en=!1,this.lu=null}Oi.el=function(t,i){if(t.yi=i.yi,t.mi=i.mi,t.gt=i.gt,t.Ln=i.Ln,t.di=i.di,t.Tt=i.Tt,t.ur=i.ur,t.sr=i.sr,t.name=i.name,t.Ot=i.Ot,t.id=i.id,t.Ci=i.Ci,t.Ji=i.Ji,t.Hi=i.Hi,i.d&&!i.d.ji)debugger;t.d=i.d==null?null:i.d.ji(),t.d&&(t.d.B=t.id),t.R=i.R};Oi.prototype={ft:function(t){t.o(this.yi?1:0),t.V(this.mi),t.hi(this.gt),t.hi(this.Ln),t.o(this.di?1:0),t.hi(this.Tt),t.V(this.ur),t.hi(this.name),t.V(this.Ot),t.Ut(this.id),t.o(this.Ci?1:0),t.Ys(this.Ji),t.o(this.Hi),t.o(this.R.id),t.Ys(this.d==null?-1:this.d.Sh)},ot:function(t,i){this.yi=t.O()!=0,this.mi=t.M(),this.gt=t.ui(),this.Ln=t.ui(),this.di=t.O()!=0,this.Tt=t.ui(),this.ur=t.M(),this.name=t.ui(),this.Ot=t.M(),this.id=t.Ht(),this.Ci=t.O()!=0,this.Ji=t.Qs(),this.Hi=t.O();var n=t.Pr();this.R=n==1?Hn.red:n==2?Hn.blue:Hn.spec,n=t.Qs(),this.d=0>n?null:i[n],this.d&&(this.d.B=this.id)},sl:function(){var t=tl.Fi;return t!=this.Fi&&(this.tt||(this.tt=new Oi),this.Fi=t,Oi.el(this.tt,this)),this.tt}};ao(Oi,[null,"ext","team","disc","kickRateMinTickCounter","kickRateMaxTickCounter","isKicking","id","input","name","ping",null,"flag","sync","headlessAvatar","avatar","avatarNumber","isAdmin","conn","auth","customClient","identity"],[]);Qs.y_=Oi});var Ys=O((Ny,Xs)=>{var{E:il}=R(),{Event:Ur,Ct:nl}=d(),rl=V(),el=Jn(),{extend:sl}=j();function At(){this.L=0,this.id=0,this.name="",this.Tt="",this.gt="",this.kn="",this.Qt="",this.i=0}At.create=function(t,i,n,r,e,s){var u=new At;return u.id=t,u.name=i,u.Tt=n,u.gt=r,u.kn=e,u.Qt=s,u};At.prototype=sl(Ur.prototype,{apply:function(t,i){if(this.i==0){var n=new el;n.id=this.id,n.name=this.name,n.Tt=this.Tt,n.gt=this.gt,n.kn=this.kn,n.Qt=this.Qt,t.j.push(n),t.Hr?.(n),i?.room?._onPlayerObjectCreated?.(n)}},ft:function(t){t.V(this.id),t.hi(this.name),t.hi(this.Tt),t.hi(this.gt)},ot:function(t){this.id=t.M(),this.name=t.ui(),this.Tt=t.ui(),this.gt=t.ui()},copy:function(){return nl(At.create(this.id,this.name,this.Tt,this.gt,this.kn,this.Qt),this)},it:At});Object.defineProperty(At.prototype,"eventType",{get(){return rl.JoinRoom}});At.pt=Ur.yt({ct:!1,lt:!1});Ur.qt(At);il(At,[null,"id","name","flag","avatar","conn","auth","byId"],[]);Xs.y_=At});var Zs=O((Sy,$s)=>{var{E:ul}=R(),{Kt:hl,q:fl}=X(),{Event:Fr,Ct:ol}=d(),ll=Q(),vl=V(),{D:cl,extend:pl,Bn:wl}=j();function Mt(){this.L=0,this.id=0,this.Wi=null,this.Jr=!1,this.i=0}Mt.create=function(t,i,n){var r=new Mt;return r.id=t,r.Wi=i,r.Jr=n,r};Mt.prototype=pl(Fr.prototype,{apply:function(t){if(this.id!=0&&t.Ni(this.i,128)){var i=t.getPlayer(this.id);if(i!=null){var n=t.getPlayer(this.i);cl.remove(t.j,i),t.s!=null&&t.s.v.removeDisc(i.d),t.Wr?.(i,this.Wi,this.Jr,n)}}},ft:function(t){this.Wi!=null&&(this.Wi=wl(this.Wi,100)),t.V(this.id),t.hi(this.Wi),t.o(this.Jr?1:0)},ot:function(t){if(this.id=t.M(),this.Wi=t.ui(),this.Jr=t.O()!=0,this.Wi!=null&&100<this.Wi.length)throw new fl(hl(ll.KickBanReasonTooLongError))},copy:function(){return ol(Mt.create(this.id,this.Wi,this.Jr),this)},it:Mt});Object.defineProperty(Mt.prototype,"eventType",{get(){return vl.KickBanPlayer}});Mt.pt=Fr.yt({ct:!1,lt:!1});Fr.qt(Mt);ul(Mt,[null,"id","reason","ban","byId"],[]);$s.y_=Mt});var xs=O((ky,zs)=>{var{E:yl}=R(),{Event:Kr,Ct:ql}=d(),Cl=V(),{extend:gl}=j();function jt(){this.L=0,this.i=0}jt.create=function(){return new jt};jt.prototype=gl(Kr.prototype,{apply:function(t){t.Ni(this.i,32)&&t.ul(t.getPlayer(this.i),0)},ft:function(){},ot:function(){},copy:function(){return ql(jt.create(),this)},it:jt});Object.defineProperty(jt.prototype,"eventType",{get(){return Cl.StartGame}});jt.pt=Kr.yt({ct:!1,lt:!1});Kr.qt(jt);yl(jt,[null,"byId"],[]);zs.y_=jt});var Ds=O((Oy,bs)=>{var{E:ml}=R(),{Event:Hr,Ct:Nl}=d(),Sl=V(),{extend:kl}=j();function Et(){this.L=0,this.i=0}Et.create=function(){return new Et};Et.prototype=kl(Hr.prototype,{apply:function(t){if(t.Ni(this.i,32)){var i=t.getPlayer(this.i);if(!t.s)return;t.s=null;for(var n=0,r=t.j;n<r.length;){var e=r[n];++n,e.d&&t.On?.(e),e.d=null,e.mi=0}t.hl?.(),t.hr?.(i)}},ft:function(){},ot:function(){},copy:function(){return Nl(Et.create(),this)},it:Et});Object.defineProperty(Et.prototype,"eventType",{get(){return Sl.StopGame}});Et.pt=Hr.yt({ct:!1,lt:!1});Hr.qt(Et);ml(Et,[null,"byId"],[]);bs.y_=Et});var tu=O((Ty,as)=>{var{E:Ol}=R(),{Event:Jr,Ct:Tl}=d(),Rl=V(),{extend:Pl}=j();function _t(){this.L=0,this.Un=!1,this.i=0}_t.create=function(t){var i=new _t;return i.Un=t,i};_t.prototype=Pl(Jr.prototype,{apply:function(t){var i=t.s;if(i!=null&&t.Ni(this.i,16)){var n=t.getPlayer(this.i),r=i.xt==120,e=0<i.xt;this.Un?i.xt=120:i.xt==120&&(i.xt=119),this.Un!=r&&t.Qr?.(n,this.Un,e)}},ft:function(t){t.o(this.Un?1:0)},ot:function(t){this.Un=t.O()!=0},copy:function(){return Tl(_t.create(this.Un),this)},it:_t});Object.defineProperty(_t.prototype,"eventType",{get(){return Rl.PauseResumeGame}});_t.pt=Jr.yt({});Jr.qt(_t);Ol(_t,[null,"paused","byId"],[]);as.y_=_t});var nu=O((Ry,iu)=>{var{E:Al}=R(),{Event:Wr,Ct:Ml}=d(),jl=V(),{extend:El}=j();function dt(){this.L=0,this.type=0,this.ri=0,this.i=0}dt.create=function(t,i){var n=new dt;return n.type=t,n.ri=i,n};dt.prototype=El(Wr.prototype,{apply:function(t){if(t.Ni(this.i,2)&&t.s==null)switch(this.type){case 0:var i=this.ri;t.It=0>i?0:99<i?99:i,t.Xr?.(this.ri,this.i);break;case 1:i=this.ri,t.Mt=0>i?0:99<i?99:i,t.Yr?.(this.ri,this.i)}},ft:function(t){t.V(this.type),t.V(this.ri)},ot:function(t){this.type=t.M(),this.ri=t.M()},copy:function(){return Ml(dt.create(this.type,this.ri),this)},it:dt});Object.defineProperty(dt.prototype,"eventType",{get(){return jl.SetGamePlayLimit}});dt.pt=Wr.yt({ct:!1,lt:!1});Wr.qt(dt);Al(dt,[null,"type","newValue","byId"],[]);iu.y_=dt});var eu=O((Py,ru)=>{var{E:_l}=R(),{Point:dl}=gi();function Qr(){this.qn=0,this.G=15,this.f=0,this.P=new dl(0,0),this.h=.5,this.H=.5,this.Y=.96,this.gn=.1,this.Cn=.07,this.mn=.96,this.yn=5}Qr.prototype={$:function(t){t.g(this.h),t.g(this.H),t.g(this.Y),t.g(this.gn),t.g(this.Cn),t.g(this.mn),t.g(this.yn);var i=this.P;t.g(i.x),t.g(i.y),t.V(this.f),t.g(this.G),t.g(this.qn)},a:function(t){this.h=t.N(),this.H=t.N(),this.Y=t.N(),this.gn=t.N(),this.Cn=t.N(),this.mn=t.N(),this.yn=t.N();var i=this.P;i.x=t.N(),i.y=t.N(),this.f=t.M(),this.G=t.N(),this.qn=t.N()}};_l(Qr,["kickback","radius","cGroup","gravity","bCoef","invMass","damping","acceleration","kickingAcceleration","kickingDamping","kickStrength"],[]);ru.y_=Qr});var $n=O((Ay,uu)=>{var{JSON5:Bl,E:Il}=R(),{Kt:Xn,Xe:Gl,q:si}=X(),{w:Vl,Integer:J,ph:k}=j(),Yn=Q(),{J:Ll,K:Ul}=li(),{Point:Wn,xs:L,ts:$,bs:x,Yo:Qn,is:vi,Ds:Ji}=gi(),su=eu(),ci=ht(),Fl=t=>{for(var i=0,n=0;n<t.length;n++)i+=t[n],i+=i<<10,i^=i>>>6;return i=(i+=i<<3)^i>>>11,i+=i<<15,i|0};function g(){this.C=[],this.T=[],this.Q=[],this.Pt=[],this.p=[],this.wt=[],this.at=[],this.ti=[],this.Ri=new su,this.$r=255,this.Tn=0,this.Li=0,this.Fn=!0,this.sn=!1,this.name="",this.Ei=0,this.Qi=0,this.Si=0,this.Xi=0,this.Yi=0,this.$i=0,this.Zi=0,this.zi=0,this.bt=0,this.un=0}g.fl=Vl.U(1024);g.a=function(t){var i=t.O();return i==255?(i=new g,i.ol(t),i):g.vu()[i]};g.vu=function(){if(g.fi==null){g.fi=[];var t=new g,i;for(t.Rn("Classic",420,200,370,170,64,75),g.fi.push(t),t=new g,t.Rn("Easy",420,200,370,170,90,75),g.fi.push(t),t=new g,t.Rn("Small",420,200,320,130,55,70),g.fi.push(t),t=new g,t.Rn("Big",600,270,550,240,80,80),g.fi.push(t),t=new g,t.Rn("Rounded",420,200,370,170,64,75,75),g.fi.push(t),t=new g,t.jh("Hockey",420,204,398,182,68,120,75,100),g.fi.push(t),t=new g,t.jh("Big Hockey",600,270,550,240,90,160,75,150),g.fi.push(t),t=new g,t.Rn("Big Easy",600,270,550,240,95,80),g.fi.push(t),t=new g,t.Rn("Big Rounded",600,270,550,240,80,75,100),g.fi.push(t),t=new g,t.Rn("Huge",750,350,700,320,100,80),g.fi.push(t),t=0,i=g.fi.length;t<i;){var n=t++;g.fi[n].$r=n}}return g.fi};g.ll=function(t,i){var n=i[t.trait];if(n)for(var r=0,e=Object.keys(n);r<e.length;r++){var s=e[r];t[s]==null&&(t[s]=n[s])}};g.vl=function(t){if(t==63)return["all"];var i=[];return t&2&&i.push("red"),t&4&&i.push("blue"),t&1&&i.push("ball"),t&8&&i.push("redKO"),t&16&&i.push("blueKO"),t&32&&i.push("wall"),t&64&&i.push("kick"),t&128&&i.push("score"),t&268435456&&i.push("c0"),t&536870912&&i.push("c1"),t&1073741824&&i.push("c2"),t&-2147483648&&i.push("c3"),i};g.hn=function(t){t=k(t,Array);for(var i=0,n=0;n<t.length;)switch(t[n++]){case"all":i|=63;break;case"ball":i|=1;break;case"blue":i|=4;break;case"blueKO":i|=16;break;case"c0":i|=268435456;break;case"c1":i|=536870912;break;case"c2":i|=1073741824;break;case"c3":i|=-2147483648;break;case"kick":i|=64;break;case"red":i|=2;break;case"redKO":i|=8;break;case"score":i|=128;break;case"wall":i|=32}return i};g.Bi=function(t,i,n,r){n!=r&&(t[i]=g.vl(n))};g.fr=function(t,i,n){i!=n&&(t.color=g.cl(i))};g.cl=function(t){return t|=0,0>t?"transparent":Ll.zs(t)};g.es=function(t){if(t=="transparent")return-1;if(typeof t=="string")return Ul.parseInt("0x"+t);if(t instanceof Array)return((t[0]|0)<<16)+((t[1]|0)<<8)+(t[2]|0);throw new si(Xn(Yn.BadColorError))};g.Eh=function(t){var i={x:t.e.x,y:t.e.y};return g.I(i,"bCoef",t.h,1),g.Bi(i,"cMask",t.u,63),g.Bi(i,"cGroup",t.f,32),i};g.pl=function(t){var i=new L;i.e.x=k(t.x,Number),i.e.y=k(t.y,Number);var n=t.bCoef;return n!=null&&(i.h=k(n,Number)),n=t.cMask,n!=null&&(i.u=g.hn(n)),t=t.cGroup,t!=null&&(i.f=g.hn(t)),i};g._h=function(t){var i=new L;i.e.x=k(t.x,Number),i.e.y=k(t.y,Number);var n=t.bCoef;return n!=null&&(i.h=k(n,Number)),n=t.cMask,n!=null&&(i.u=k(n,J)),t=t.cGroup,t!=null&&(i.f=k(t,J)),i};g.wl=function(t,i){var n={v0:t.Z.id,v1:t.z.id};g.I(n,"bias",t.Wt,i.Wt),g.I(n,"bCoef",t.h,i.h);var r=t.getCurveDegrees();return g.I(n,"curve",r,0),r!=0&&(n.curveF=t.jt),g.I(n,"vis",t.St,i.St),g.Bi(n,"cMask",t.u,i.u),g.Bi(n,"cGroup",t.f,i.f),g.fr(n,t.k,i.k),n};g.yl=function(t,i,n){var[r,e]=t.findVertexIndicesOfSegmentObj(i),s={v0:r,v1:e};g.I(s,"bias",i.Wt,n.Wt),g.I(s,"bCoef",i.h,n.h);var u=i.getCurveDegrees();return g.I(s,"curve",u,0),u!=0&&(s.curveF=i.jt),g.I(s,"vis",i.St,n.St),g.Bi(s,"cMask",i.u,n.u),g.Bi(s,"cGroup",i.f,n.f),g.fr(s,i.k,n.k),s};g.ql=function(t,i){var n=new $,r=k(t.v1,J);n.Z=i[k(t.v0,J)],n.z=i[r],r=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,o=t.cMask,v=t.cGroup,c=t.color;return r!=null&&(n.Wt=k(r,Number)),e!=null&&(n.h=k(e,Number)),u!=null?n.jt=k(u,Number):s!=null&&n.Pi(k(s,Number)),h!=null&&(n.St=k(h,Boolean)),o!=null&&(n.u=g.hn(o)),v!=null&&(n.f=g.hn(v)),c!=null&&(n.k=g.es(c)),n};g.dh=function(t,i){var n=new $,r=k(t.v1,J);n.Z=i[k(t.v0,J)],n.z=i[r],r=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,o=t.cMask,v=t.cGroup,c=t.color;return r!=null&&(n.Wt=k(r,Number)),e!=null&&(n.h=k(e,Number)),u!=null?n.jt=k(u,Number):s!=null&&n.Pi(k(s,Number)),h!=null&&(n.St=k(h,Boolean)),o!=null&&(n.u=k(o,J)),v!=null&&(n.f=k(v,J)),c!=null&&(n.k=k(c,J)),n};g.Cl=function(t){var i=new $,n=t.v1;i.Z=t.v0,i.z=n,n=t.bias;var r=t.bCoef,e=t.curve,s=t.curveF,u=t.vis,h=t.cMask,o=t.cGroup,v=t.color;return n!=null&&(i.Wt=k(n,Number)),r!=null&&(i.h=k(r,Number)),s!=null?i.jt=k(s,Number):e!=null&&i.Pi(k(e,Number)),u!=null&&(i.St=k(u,Boolean)),h!=null&&(i.u=k(h,J)),o!=null&&(i.f=k(o,J)),v!=null&&(i.k=k(v,J)),i};g.Bh=function(t){var i={d0:t.d0,d1:t.d1,length:t.minLength>=t.maxLength?t.minLength:[t.minLength,t.maxLength]};return g.fr(i,t.color,0),g.I(i,"strength",t.strength,1/0),i};g.gl=function(t,i){var n=new Ji,r=k(t.d0,J),e=k(t.d1,J),s=t.color,u=t.strength,h=t.length;if(r>=i.length||0>r)throw new si(null);if(e>=i.length||0>e)throw new si(null);return n.Zt=r,n.$t=e,h==null?(r=i[r],h=i[e],r==null||h==null?n.dt=n.Bt=100:(e=r.e,h=h.e,r=e.x-h.x,e=e.y-h.y,n.dt=n.Bt=Math.sqrt(r*r+e*e))):h instanceof Array?(n.Bt=k(h[0],Number),n.dt=k(h[1],Number)):n.dt=n.Bt=k(h,Number),n.Ai=u==null||u=="rigid"?1/0:k(u,Number),s!=null&&(n.k=g.es(s)),n};g.Ih=function(t,i){var n=new Ji,r=k(t.d0,J),e=k(t.d1,J),s=t.color,u=t.strength,h=t.length;if(r>=i.length||0>r)throw new si(null);if(e>=i.length||0>e)throw new si(null);return n.Zt=r,n.$t=e,h==null?(r=i[r],h=i[e],r==null||h==null?n.dt=n.Bt=100:(e=r.e,h=h.e,r=e.x-h.x,e=e.y-h.y,n.dt=n.Bt=Math.sqrt(r*r+e*e))):h instanceof Array?(n.Bt=k(h[0],Number),n.dt=k(h[1],Number)):n.dt=n.Bt=k(h,Number),n.Ai=u==null||u=="rigid"?1/0:k(u,Number),s!=null&&(n.k=k(s,J)),n};g.ml=function(t){var i=new Ji,n=t.d0,r=t.d1,e=t.color,s=t.strength,u=t.length;return i.d0Obj=n,i.d1Obj=r,u==null?(u=r,n==null||u==null?i.dt=i.Bt=100:(r=n.e,u=u.e,n=r.x-u.x,r=r.y-u.y,i.dt=i.Bt=Math.sqrt(n*n+r*r))):u instanceof Array?(i.Bt=k(u[0],Number),i.dt=k(u[1],Number)):i.dt=i.Bt=k(u,Number),i.Ai=s==null||s=="rigid"?1/0:k(s,Number),e!=null&&(i.k=k(e,J)),i};g.Gh=function(t){var i={normal:[t.b.x,t.b.y],dist:t.ut};return g.I(i,"bCoef",t.h,1),g.Bi(i,"cMask",t.u,63),g.Bi(i,"cGroup",t.f,32),i};g.Nl=function(t){var i=new x,n=k(t.normal,Array),r=k(n[0],Number);n=k(n[1],Number);var e=i.b,s=Math.sqrt(r*r+n*n);return e.x=r/s,e.y=n/s,i.ut=k(t.dist,Number),r=t.bCoef,n=t.cMask,t=t.cGroup,r!=null&&(i.h=k(r,Number)),n!=null&&(i.u=g.hn(n)),t!=null&&(i.f=g.hn(t)),i};g.Vh=function(t){var i=new x,n=k(t.normal,Array),r=k(n[0],Number);n=k(n[1],Number);var e=i.b,s=Math.sqrt(r*r+n*n);return e.x=r/s,e.y=n/s,i.ut=k(t.dist,Number),r=t.bCoef,n=t.cMask,t=t.cGroup,r!=null&&(i.h=k(r,Number)),n!=null&&(i.u=k(n,J)),t!=null&&(i.f=k(t,J)),i};g.Lh=function(t){return{p0:[t.ei.x,t.ei.y],p1:[t.si.x,t.si.y],team:t.R==ci.red?"red":"blue"}};g.ip=function(t){var i=new Qn,n=k(t.p0,Array),r=k(t.p1,Array),e=i.ei;switch(e.x=n[0],e.y=n[1],n=i.si,n.x=r[0],n.y=r[1],t.team){case"blue":t=ci.blue;break;case"red":t=ci.red;break;default:throw new si(Xn(Yn.BadTeamError))}return i.R=t,i};g.Uh=function(t){var i={};return g.I(i,"bCoef",t.h,.5),g.I(i,"invMass",t.H,.5),g.I(i,"damping",t.Y,.96),g.I(i,"acceleration",t.gn,.1),g.I(i,"kickingAcceleration",t.Cn,.07),g.I(i,"kickingDamping",t.mn,.96),g.I(i,"kickStrength",t.yn,5),g.Bi(i,"cGroup",t.f,0),(t.P.x!=0||t.P.y!=0)&&(i.gravity=[t.P.x,t.P.y]),g.I(i,"radius",t.G,15),g.I(i,"kickback",t.qn,0),i};g.Sl=function(t){var i=new su,n=t.bCoef,r=t.invMass,e=t.damping,s=t.acceleration,u=t.kickingAcceleration,h=t.kickingDamping,o=t.kickStrength,v=t.gravity,c=t.cGroup,p=t.radius;return t=t.kickback,n!=null&&(i.h=k(n,Number)),r!=null&&(i.H=k(r,Number)),e!=null&&(i.Y=k(e,Number)),s!=null&&(i.gn=k(s,Number)),u!=null&&(i.Cn=k(u,Number)),h!=null&&(i.mn=k(h,Number)),o!=null&&(i.yn=k(o,Number)),v!=null&&(n=i.P,r=k(v[1],Number),n.x=k(v[0],Number),n.y=r),c!=null&&(i.f=g.hn(c)),p!=null&&(i.G=k(p,Number)),t!=null&&(i.qn=k(t,Number)),i};g.Fh=function(t,i){var n={};return(t.e.x!=i.e.x||t.e.y!=i.e.y)&&(n.pos=[t.e.x,t.e.y]),(t.A.x!=i.A.x||t.A.y!=i.A.y)&&(n.speed=[t.A.x,t.A.y]),(t.P.x!=i.P.x||t.P.y!=i.P.y)&&(n.gravity=[t.P.x,t.P.y]),g.I(n,"radius",t.G,i.G),g.I(n,"bCoef",t.h,i.h),g.I(n,"invMass",t.H,i.H),g.I(n,"damping",t.Y,i.Y),g.fr(n,t.k,i.k),g.Bi(n,"cMask",t.u,i.u),g.Bi(n,"cGroup",t.f,i.f),n};g.Kh=function(t,i){var n=t.pos,r=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,o=t.damping,v=t.color,c=t.cMask,p=t.cGroup;if(n!=null){var C=i.e;C.x=n[0],C.y=n[1]}return r!=null&&(n=i.A,n.x=r[0],n.y=r[1]),e!=null&&(r=i.P,r.x=e[0],r.y=e[1]),s!=null&&(i.G=k(s,Number)),u!=null&&(i.h=k(u,Number)),h!=null&&(i.H=k(h,Number)),o!=null&&(i.Y=k(o,Number)),v!=null&&(i.k=g.es(v)),c!=null&&(i.u=g.hn(c)),p!=null&&(i.f=g.hn(p)),i};g.cu=function(t,i){var n=t.pos,r=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,o=t.damping,v=t.color,c=t.cMask,p=t.cGroup;if(n!=null){var C=i.e;C.x=n[0],C.y=n[1]}return r!=null&&(n=i.A,n.x=r[0],n.y=r[1]),e!=null&&(r=i.P,r.x=e[0],r.y=e[1]),s!=null&&(i.G=k(s,Number)),u!=null&&(i.h=k(u,Number)),h!=null&&(i.H=k(h,Number)),o!=null&&(i.Y=k(o,Number)),v!=null&&(i.k=k(v,J)),c!=null&&(i.u=k(c,J)),p!=null&&(i.f=k(p,J)),i};g.I=function(t,i,n,r){n!=r&&(t[i]=n)};g.prototype={ss:function(){var t=new vi;return t.k=16777215,t.u=63,t.f=193,t.G=10,t.Y=.99,t.H=1,t.h=.5,t},$:function(t){if(t.o(this.$r),!this.pu()){t.hi(this.name),t.V(this.Si),t.g(this.Yi),t.g(this.$i),t.g(this.Zi),t.g(this.zi),t.g(this.un),t.V(this.Xi),t.g(this.Ei),t.g(this.Qi),t.g(this.bt),this.Ri.$(t),t.Lt(this.Tn),t.o(this.Li),t.o(this.Fn?1:0),t.o(this.sn?1:0),t.o(this.C.length);for(var i=0,n=this.C.length;i<n;){var r=i++,e=this.C[r];e.id=r,e.$(t)}for(t.o(this.T.length),i=0,n=this.T;i<n.length;)n[i++].$(t);for(t.o(this.Q.length),i=0,n=this.Q;i<n.length;)n[i++].$(t);for(t.o(this.Pt.length),i=0,n=this.Pt;i<n.length;)n[i++].$(t);for(t.o(this.p.length),i=0,n=this.p;i<n.length;)n[i++].$(t);for(t.o(this.wt.length),i=0,n=this.wt;i<n.length;)n[i++].$(t);for(t.o(this.at.length),i=0,n=this.at;i<n.length;)r=n[i],++i,t.g(r.x),t.g(r.y);for(t.o(this.ti.length),i=0,n=this.ti;i<n.length;)r=n[i],++i,t.g(r.x),t.g(r.y)}},ol:function(t){function i(){for(var s=[],u=t.O(),h=0;h<u;){++h;var o=new Wn(0,0);o.x=t.N(),o.y=t.N(),s.push(o)}return s}this.name=t.ui(),this.Si=t.M(),this.Yi=t.N(),this.$i=t.N(),this.Zi=t.N(),this.zi=t.N(),this.un=t.N(),this.Xi=t.M(),this.Ei=t.N(),this.Qi=t.N(),this.bt=t.N(),this.Ri.a(t),this.Tn=t.At(),this.Li=t.O(),this.Fn=t.O()!=0,this.sn=t.O()!=0,this.C=[];for(var n=t.O(),r=0;r<n;){var e=new L;e.a(t),e.id=r++,this.C.push(e)}for(this.T=[],n=t.O(),r=0;r<n;)++r,e=new $,e.a(t,this.C),this.T.push(e);for(this.Q=[],n=t.O(),r=0;r<n;)++r,e=new x,e.a(t),this.Q.push(e);for(this.Pt=[],n=t.O(),r=0;r<n;)++r,e=new Qn,e.a(t),this.Pt.push(e);for(this.p=[],n=t.O(),r=0;r<n;)++r,e=new vi,e.a(t),this.p.push(e);for(this.wt=[],n=t.O(),r=0;r<n;)++r,e=new Ji,e.a(t),this.wt.push(e);this.at=i(),this.ti=i(),this.calculateNormals()},calculateNormals:function(){for(var t=0,i=this.T;t<i.length;)i[t++].calculateNormals()},pu:function(){return this.$r!=255},or:function(t,i,n){return t=t[i],t!=null?k(t,Number):n},kl:function(t,i,n){return t=t[i],t!=null?k(t,Boolean):n},Ol:function(){return JSON.stringify(this.Tl())},Tl:function(){for(var t={},i=0,n=[],r=0,e=this.C,s,u,h,o,v,c,p,C;r<e.length;)s=e[r],++r,s.id=i++,n.push(g.Eh(s));for(r=new $,i=[],e=0,s=this.T;e<s.length;)i.push(g.wl(s[e++],r));for(r=[],e=0,s=this.Q;e<s.length;)r.push(g.Gh(s[e++]));for(e=[],s=0,u=this.Pt;s<u.length;)e.push(g.Lh(u[s++]));for(s=g.Uh(this.Ri),h=new vi,u=[],o=0,v=this.p;o<v.length;)u.push(g.Fh(v[o++],h));for(h=[],o=0,v=this.wt;o<v.length;)h.push(g.Bh(v[o++]));for(o=[],v=0,c=this.at;v<c.length;)p=c[v],++v,o.push([p.x,p.y]);for(v=[],c=0,p=this.ti;c<p.length;)C=p[c],++c,v.push([C.x,C.y]);switch(n={name:this.name,width:this.Ei,height:this.Qi,bg:t,vertexes:n,segments:i,planes:r,goals:e,discs:u,playerPhysics:s,ballPhysics:"disc0"},g.I(n,"maxViewWidth",this.Tn,0),g.I(n,"cameraFollow",this.Li==1?"player":"",""),g.I(n,"spawnDistance",this.bt,200),h.length!=0&&(n.joints=h),o.length!=0&&(n.redSpawnPoints=o),v.length!=0&&(n.blueSpawnPoints=v),g.I(n,"kickOffReset",this.sn?"full":"partial","partial"),this.Si){case 1:i="grass";break;case 2:i="hockey";break;default:i="none"}return g.I(t,"type",i,"none"),g.I(t,"width",this.Yi,0),g.I(t,"height",this.$i,0),g.I(t,"kickOffRadius",this.Zi,0),g.I(t,"cornerRadius",this.zi,0),g.fr(t,this.Xi,7441498),g.I(t,"goalLine",this.un,0),n},Rl:function(t){function i(h){var o=k(h[0],Number);return h=k(h[1],Number),new Wn(o,h)}function n(h,o,v,c){c==null&&(c=!1);var p=e[o];if((!c||p!=null)&&(c=k(p,Array),c!=null))for(p=0;p<c.length;){var C=c[p];++p;try{g.ll(C,u),h.push(v(C))}catch{throw new si(new Gl(Xn(Yn.StadiumParseError,o,h.length)))}}}var r=this,e=Bl.parse(t);this.C=[],this.T=[],this.Q=[],this.Pt=[],this.p=[],this.wt=[],this.name=k(e.name,String),this.Ei=k(e.width,Number),this.Qi=k(e.height,Number),this.Tn=this.or(e,"maxViewWidth",0)|0,e.cameraFollow=="player"&&(this.Li=1),this.bt=200,t=e.spawnDistance,t!=null&&(this.bt=k(t,Number)),t=e.bg;var s;switch(t.type){case"grass":s=1;break;case"hockey":s=2;break;default:s=0}this.Si=s,this.Yi=this.or(t,"width",0),this.$i=this.or(t,"height",0),this.Zi=this.or(t,"kickOffRadius",0),this.zi=this.or(t,"cornerRadius",0),this.Xi=7441498,t.color!=null&&(this.Xi=g.es(t.color)),this.un=this.or(t,"goalLine",0),this.Fn=this.kl(e,"canBeStored",!0),this.sn=e.kickOffReset=="full";var u=e.traits||{};if(t=e.ballPhysics,t!="disc0"&&(t!=null?(t=g.Kh(t,this.ss()),t.f|=192,this.p.push(t)):this.p.push(this.ss())),n(this.C,"vertexes",g.pl),n(this.T,"segments",function(h){return g.ql(h,r.C)}),n(this.Pt,"goals",g.ip),n(this.p,"discs",function(h){return g.Kh(h,new vi)}),n(this.Q,"planes",g.Nl),n(this.wt,"joints",function(h){return g.gl(h,r.p)},!0),n(this.at,"redSpawnPoints",i,!0),n(this.ti,"blueSpawnPoints",i,!0),t=e.playerPhysics,t!=null&&(this.Ri=g.Sl(t)),255<this.C.length||255<this.T.length||255<this.Q.length||255<this.Pt.length||1>this.p.length||255<this.p.length)throw new si(Xn(Yn.StadiumLimitsExceededError));this.calculateNormals()},Pl:function(){var t=g.fl;return t.l=0,this.$(t),Fl(t._t())},Rn:function(t,i,n,r,e,s,u,h){h==null&&(h=0),this.name=t,this.p.push(this.ss()),this.Ei=i,this.Qi=n,this.Si=1,this.Xi=7441498,this.Yi=r,this.$i=e,this.Zi=u,this.zi=h,this.bt=.75*r,400<this.bt&&(this.bt=400),t=new x;var o=t.b,v,c,p,C;o.x=0,o.y=1,t.ut=-n,t.h=0,this.Q.push(t),t=new x,o=t.b,o.x=0,o.y=-1,t.ut=-n,t.h=0,this.Q.push(t),t=new x,o=t.b,o.x=1,o.y=0,t.ut=-i,t.h=0,this.Q.push(t),t=new x,o=t.b,o.x=-1,o.y=0,t.ut=-i,t.h=0,this.Q.push(t),this.us(r,1,s,13421823,ci.blue),this.us(-r,-1,s,16764108,ci.red),this.Hh(u,n),i=new x,n=i.b,n.x=0,n.y=1,i.ut=-e,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=0,n.y=-1,i.ut=-e,i.u=1,this.Q.push(i),i=new L,n=i.e,n.x=-r,n.y=-e,i.u=0,n=new L,u=n.e,u.x=r,u.y=-e,n.u=0,u=new L,t=u.e,t.x=r,t.y=-s,u.u=0,t=new L,o=t.e,o.x=r,o.y=s,t.u=0,o=new L,v=o.e,v.x=r,v.y=e,o.u=0,v=new L,c=v.e,c.x=-r,c.y=e,v.u=0,c=new L,p=c.e,p.x=-r,p.y=s,c.u=0,p=new L,C=p.e,C.x=-r,C.y=-s,p.u=0,s=new $,s.Z=n,s.z=u,s.u=1,s.St=!1,C=new $,C.Z=t,C.z=o,C.u=1,C.St=!1;var N=new $;N.Z=v,N.z=c,N.u=1,N.St=!1;var f=new $;f.Z=p,f.z=i,f.u=1,f.St=!1,this.C.push(i),this.C.push(n),this.C.push(u),this.C.push(t),this.C.push(o),this.C.push(v),this.C.push(c),this.C.push(p),this.T.push(s),this.T.push(C),this.T.push(N),this.T.push(f),this.Jh(r,e,h),this.calculateNormals()},jh:function(t,i,n,r,e,s,u,h,o){this.name=t,this.p.push(this.ss()),this.Ei=i,this.Qi=n,this.Si=2,this.Yi=r,this.$i=e,this.Zi=h,this.zi=o,this.un=u,this.bt=.75*(r-u),400<this.bt&&(this.bt=400),t=new x;var v=t.b;v.x=0,v.y=1,t.ut=-n,t.h=0,this.Q.push(t),t=new x,v=t.b,v.x=0,v.y=-1,t.ut=-n,t.h=0,this.Q.push(t),t=new x,v=t.b,v.x=1,v.y=0,t.ut=-i,t.h=0,this.Q.push(t),t=new x,v=t.b,v.x=-1,v.y=0,t.ut=-i,t.h=0,this.Q.push(t),this.us(r-u,1,s,13421823,ci.blue,63),this.us(-r+u,-1,s,16764108,ci.red,63),this.Hh(h,n),i=new x,n=i.b,n.x=0,n.y=1,i.ut=-e,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=0,n.y=-1,i.ut=-e,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=1,n.y=0,i.ut=-r,i.u=1,this.Q.push(i),i=new x,n=i.b,n.x=-1,n.y=0,i.ut=-r,i.u=1,this.Q.push(i),this.Jh(r,e,o),this.calculateNormals()},us:function(t,i,n,r,e,s,u){u==null&&(u=32),s==null&&(s=1);var h=new L,o=h.e,v,c,p,C,N;for(o.x=t+8*i,o.y=-n,o=new L,v=o.e,v.x=t+8*i,v.y=n,c=new L,v=c.e,v.x=h.e.x+22*i,v.y=h.e.y+22,p=new L,v=p.e,v.x=o.e.x+22*i,v.y=o.e.y-22,v=new $,v.Z=h,v.z=c,v.Pi(90*i),C=new $,C.Z=p,C.z=c,N=new $,N.Z=p,N.z=o,N.Pi(90*i),i=this.C.length,this.C.push(h),this.C.push(o),this.C.push(c),this.C.push(p),h=i,i=this.C.length;h<i;)o=h++,this.C[o].u=s,this.C[o].f=u,this.C[o].h=.1;for(i=this.T.length,this.T.push(v),this.T.push(C),this.T.push(N),h=i,i=this.T.length;h<i;)o=h++,this.T[o].u=s,this.T[o].f=u,this.T[o].h=.1;s=new vi,u=s.e,u.x=t,u.y=-n,s.H=0,s.G=8,s.k=r,this.p.push(s),s=new vi,u=s.e,u.x=t,u.y=n,s.H=0,s.G=8,s.k=r,this.p.push(s),r=new Qn,s=r.ei,s.x=t,s.y=-n,s=r.si,s.x=t,s.y=n,r.R=e,this.Pt.push(r)},Hh:function(t,i){var n=new L,r=n.e,e,s,u;r.x=0,r.y=-i,n.h=.1,n.f=24,n.u=6,r=new L,e=r.e,e.x=0,e.y=-t,r.h=.1,r.f=24,r.u=6,e=new L,s=e.e,s.x=0,s.y=t,e.h=.1,e.f=24,e.u=6,s=new L,u=s.e,u.x=0,u.y=i,s.h=.1,s.f=24,s.u=6,u=new $,u.Z=n,u.z=r,u.f=24,u.u=6,u.St=!1,u.h=.1;var h=new $;h.Z=e,h.z=s,h.f=24,h.u=6,h.St=!1,h.h=.1;var o=new $;o.Z=r,o.z=e,o.f=8,o.u=6,o.St=!1,o.Pi(180),o.h=.1;var v=new $;v.Z=e,v.z=r,v.f=16,v.u=6,v.St=!1,v.Pi(180),v.h=.1,this.C.push(n),this.C.push(r),this.C.push(e),this.C.push(s),this.T.push(u),this.T.push(h),this.T.push(o),this.T.push(v)},Jh:function(t,i,n){if(!(0>=n)){var r=new L,e=r.e,s,u,h,o,v,c,p;e.x=-t+n,e.y=-i,r.u=0,e=new L,s=e.e,s.x=-t,s.y=-i+n,e.u=0,s=new L,u=s.e,u.x=-t+n,u.y=i,s.u=0,u=new L,o=u.e,o.x=-t,o.y=i-n,u.u=0,o=new L,v=o.e,v.x=t-n,v.y=i,o.u=0,v=new L,h=v.e,h.x=t,h.y=i-n,v.u=0,h=new L,c=h.e,c.x=t-n,c.y=-i,h.u=0,c=new L,p=c.e,p.x=t,p.y=-i+n,c.u=0,t=new $,t.Z=r,t.z=e,t.u=1,t.St=!1,t.h=1,t.Pi(-90),i=new $,i.Z=s,i.z=u,i.u=1,i.St=!1,i.h=1,i.Pi(90),n=new $,n.Z=o,n.z=v,n.u=1,n.St=!1,n.h=1,n.Pi(-90),p=new $,p.Z=h,p.z=c,p.u=1,p.St=!1,p.h=1,p.Pi(90),this.C.push(r),this.C.push(e),this.C.push(s),this.C.push(u),this.C.push(o),this.C.push(v),this.C.push(h),this.C.push(c),this.T.push(t),this.T.push(i),this.T.push(n),this.T.push(p)}},copy:function(){var t=new g,i=this;t.$r=i.$r,t.name=i.name,t.Si=i.Si,t.Yi=i.Yi,t.$i=i.$i,t.Zi=i.Zi,t.zi=i.zi,t.un=i.un,t.Xi=i.Xi,t.Ei=i.Ei,t.Qi=i.Qi,t.bt=i.bt;var n=t.Ri,r=i.Ri;return n.h=r.h,n.H=r.H,n.Y=r.Y,n.gn=r.gn,n.Cn=r.Cn,n.mn=r.mn,n.yn=r.yn,n.P.x=r.P.x,n.P.y=r.P.y,n.f=r.f,n.G=r.G,n.qn=r.qn,t.Tn=i.Tn,t.Li=i.Li,t.Fn=i.Fn,t.sn=i.sn,t.C=i.C.map((e,s)=>{var u=new L;return u.e.x=e.e.x,u.e.y=e.e.y,u.h=e.h,u.u=e.u,u.f=e.f,u.id=s,u}),t.T=i.T.map(e=>{var s=new $,u=e.Z,h=e.z,o=-1,v=-1;return i.C.forEach((c,p)=>{c==u?o=p:c==h&&(v=p)}),s.Z=t.C[o],s.z=t.C[v],s.Wt=e.Wt,s.jt=e.jt,s.k=e.k,s.St=e.St,s.h=e.h,s.u=e.u,s.f=e.f,s}),t.Q=i.Q.map(e=>{var s=new x;return s.b.x=e.b.x,s.b.y=e.b.y,s.ut=e.ut,s.h=e.h,s.u=e.u,s.f=e.f,s}),t.Pt=i.Pt.map(e=>{var s=new Qn;return s.ei.x=e.ei.x,s.ei.y=e.ei.y,s.si.x=e.si.x,s.si.y=e.si.y,s.R=e.R,s}),t.p=i.p.map(e=>{var s=new vi;return s.e.x=e.e.x,s.e.y=e.e.y,s.A.x=e.A.x,s.A.y=e.A.y,s.P.x=e.P.x,s.P.y=e.P.y,s.G=e.G,s.h=e.h,s.H=e.H,s.Y=e.Y,s.k=e.k,s.u=e.u,s.f=e.f,s}),t.wt=i.wt.map(e=>{var s=new Ji;return s.Zt=e.Zt,s.$t=e.$t,s.Bt=e.Bt,s.dt=e.dt,s.Ai=e.Ai,s.k=e.k,s}),t.at=i.at.map(e=>new Wn(e.x,e.y)),t.ti=i.ti.map(e=>new Wn(e.x,e.y)),t.calculateNormals(),t}};Object.defineProperty(g.prototype,"isCustom",{get:function(){return!this.pu()}});Il(g,["vertices","segments","planes","goals","discs","joints","redSpawnPoints","blueSpawnPoints","playerPhysics","defaultStadiumId","maxViewWidth","cameraFollow","canBeStored","fullKickOffReset","name","width","height","bgType","bgColor","bgWidth","bgHeight","bgKickOffRadius","bgCornerRadius","spawnDistance","bgGoalLine"],[]);uu.y_=g});var ou=O((My,fu)=>{var{pako:hu,E:Kl}=R(),{Event:Xr,Ct:Hl}=d(),Jl=V(),Wl=$n(),{F:Ql,w:Xl,extend:Yl}=j();function Bt(){this.L=0,this.S=null,this.i=0}Bt.create=function(t){var i=new Bt;return i.S=t,i};Bt.prototype=Yl(Xr.prototype,{apply:function(t){if(t.Ni(this.i,8)){var i=t.getPlayer(this.i);t.s==null&&(t.S=this.S,t.Zr?.(i,this.S))}},ft:function(t){var i=Xl.U();this.S.$(i),i=hu.deflateRaw(i._t()),t.Lt(i.byteLength),t.Yt(i)},ot:function(t){t=hu.inflateRaw(t.Vt(t.At())),this.S=Wl.a(new Ql(new DataView(t.buffer,t.byteOffset,t.byteLength)))},copy:function(){return Hl(Bt.create(this.S?.copy()),this)},it:Bt});Object.defineProperty(Bt.prototype,"eventType",{get(){return Jl.SetStadium}});Bt.pt=Xr.yt({ct:!1,lt:!1,hu:{fu:10,ou:2e3}});Xr.qt(Bt);Kl(Bt,[null,"stadium","byId"],[]);fu.y_=Bt});var vu=O((jy,lu)=>{var{E:$l}=R(),{Event:$r,Ct:Zl}=d(),zl=V(),{extend:xl}=j(),Yr=ht();function It(){this.L=0,this.B=0,this.R=null,this.i=0}It.create=function(t,i){var n=new It;return n.B=t,n.R=i,n};It.prototype=xl($r.prototype,{apply:function(t){var i=t.getPlayer(this.B);if(i!=null){var n=t.getPlayer(this.i),r=t.Ni(this.i,1);(r=r||i==n&&!t.fn&&t.s==null)&&i.R!=this.R&&(t.hs(n,i,this.R),t.zr?.(this.B,this.R.id,this.i))}},ft:function(t){t.V(this.B),t.o(this.R.id)},ot:function(t){this.B=t.M(),t=t.Pr(),this.R=t==1?Yr.red:t==2?Yr.blue:Yr.spec},copy:function(){return Zl(It.create(this.B,this.R),this)},it:It});Object.defineProperty(It.prototype,"eventType",{get(){return zl.SetPlayerTeam}});It.pt=$r.yt({ct:!1,lt:!1});$r.qt(It);$l(It,[null,"playerId","team","byId"],[]);lu.y_=It});var pu=O((Ey,cu)=>{var{E:bl}=R(),{Event:Zr,Ct:Dl}=d(),al=V(),{extend:tv}=j();function Gt(){this.L=0,this.ri=0,this.i=0}Gt.create=function(t){var i=new Gt;return i.ri=t,i};Gt.prototype=tv(Zr.prototype,{apply:function(t){t.Ni(this.i,2)&&(t.fn=this.ri,t.xr?.(this.ri,this.i))},ft:function(t){t.o(this.ri?1:0)},ot:function(t){this.ri=t.O()!=0},copy:function(){return Dl(Gt.create(this.ri),this)},it:Gt});Object.defineProperty(Gt.prototype,"eventType",{get(){return al.SetTeamsLock}});Gt.pt=Zr.yt({ct:!1,lt:!1});Zr.qt(Gt);bl(Gt,[null,"newValue","byId"],[]);cu.y_=Gt});var yu=O((_y,wu)=>{var{E:iv}=R(),{Event:zr,Ct:nv}=d(),rv=V(),{extend:ev}=j();function Vt(){this.L=0,this.B=0,this.value=0,this.i=0}Vt.create=function(t,i){var n=new Vt;return n.B=t,n.value=i,n};Vt.prototype=ev(zr.prototype,{apply:function(t){if(t.Ni(this.i,4)){var i=t.getPlayer(this.i),n=t.getPlayer(this.B);n!=null&&n.id!=0&&n.yi!=this.value&&(n.yi=this.value,t.br?.(i,n))}},ft:function(t){t.V(this.B),t.o(this.value?1:0)},ot:function(t){this.B=t.M(),this.value=t.O()!=0},copy:function(){return nv(Vt.create(this.B,this.value),this)},it:Vt});Object.defineProperty(Vt.prototype,"eventType",{get(){return rv.SetPlayerAdmin}});Vt.pt=zr.yt({ct:!1,lt:!1});zr.qt(Vt);iv(Vt,[null,"playerId","value","byId"],[]);wu.y_=Vt});var Cu=O((dy,qu)=>{var{E:sv}=R(),{Event:xr,Ct:uv}=d(),hv=V(),{extend:fv}=j(),bt=ht();function Lt(){this.L=0,this.i=0}Lt.create=function(){return new Lt};Lt.prototype=fv(xr.prototype,{apply:function(t){if(t.Ni(this.i,1)){for(var i=t.getPlayer(this.i),n=t.j,r=[],e=0,s=0,u=0;u<n.length;){var h=n[u];++u,h.R==bt.spec&&r.push(h),h.R==bt.red?++e:h.R==bt.blue&&++s}n=r.length;var o;n!=0&&(s==e?2>n||(t.hs(i,r[0],bt.red),t.hs(i,r[1],bt.blue),t.lr?.(r[0].id,bt.red.id,r[1].id,bt.blue.id,this.i)):(o=s>e?bt.red:bt.blue,t.hs(i,r[0],o),t.lr?.(r[0].id,o.id,null,null,this.i)))}},ft:function(){},ot:function(){},copy:function(){return uv(Lt.create(),this)},it:Lt});Object.defineProperty(Lt.prototype,"eventType",{get(){return hv.AutoTeams}});Lt.pt=xr.yt({ct:!1,lt:!1});xr.qt(Lt);sv(Lt,[null,"byId"],[]);qu.y_=Lt});var mu=O((By,gu)=>{var{E:ov}=R(),{Event:br,Ct:lv}=d(),vv=V(),{extend:cv}=j();function Ut(){this.L=0,this.value=!1,this.i=0}Ut.create=function(t){var i=new Ut;return i.value=t,i};Ut.prototype=cv(br.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&this.value!=i.di&&(i.di=this.value,t.Dr?.(i))},ft:function(t){t.o(this.value?1:0)},ot:function(t){this.value=t.O()!=0},copy:function(){return lv(Ut.create(this.value),this)},it:Ut});Object.defineProperty(Ut.prototype,"eventType",{get(){return vv.SetPlayerSync}});Ut.pt=br.yt({ct:!1,lt:!1});br.qt(Ut);ov(Ut,[null,"value","byId"],[]);gu.y_=Ut});var Su=O((Iy,Nu)=>{var{E:pv}=R(),{Event:Dr,Ct:wv}=d(),yv=V(),{extend:qv}=j();function Ft(){this.L=0,this.values=null,this.i=0}Ft.prototype=qv(Dr.prototype,{apply:function(t){if(this.i==0){var i=t;t=t.j;for(var n=0,r=t.length;n<r;){var e=n++;if(e>=this.values.length)break;t[e].sr=this.values[e]}i.ar?.(this.values)}},ft:function(t){t.Ut(this.values.length);for(var i=0,n=this.values;i<n.length;)t.Ut(n[i++])},ot:function(t){this.values=[];for(var i=t.Ht(),n=0;n<i;)++n,this.values.push(t.Ht())},copy:function(){var t=new Ft,i=this.values;t.values=[];for(var n=i.length,r=0;r<n;r++)t.values.push(i[r]);return wv(t,this)},it:Ft});Ft.create=function(t){for(var i=new Ft,n=t.t.j,r=[],e=0;e<n.length;){var s=t.Kn.get(n[e++].id);r.push(s==null?t.t.Wh&&t.t.Wh():s.sr)}return i.values=r,i};Object.defineProperty(Ft.prototype,"eventType",{get(){return yv.Ping}});Ft.pt=Dr.yt({ct:!1,lt:!1});Dr.qt(Ft);pv(Ft,[null,"values","byId"],[]);Nu.y_=Ft});var Ou=O((Gy,ku)=>{var{E:Cv}=R(),{Event:ar,Ct:gv}=d(),mv=V(),{extend:Nv,Bn:Sv}=j();function Kt(){this.L=0,this.value=null,this.i=0}Kt.create=function(t){var i=new Kt;return i.value=t,i};Kt.prototype=Nv(ar.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&(i.gt=this.value,t.te?.(this.i,this.value))},ft:function(t){t.hi(this.value)},ot:function(t){this.value=t.ui(),this.value!=null&&(this.value=Sv(this.value,2))},copy:function(){return gv(Kt.create(this.value),this)},it:Kt});Object.defineProperty(Kt.prototype,"eventType",{get(){return mv.SetAvatar}});Kt.pt=ar.yt({ct:!1,lt:!1});ar.qt(Kt);Cv(Kt,[null,"value","byId"],[]);ku.y_=Kt});var zn=O((Vy,Tu)=>{var{E:kv}=R(),Ov=Q(),{Kt:Tv,q:Rv}=X();function Zn(){this.ie=0,this.wi=16777215,this.Ii=[]}Zn.prototype={$:function(t){t.o(this.ie),t.V(this.wi),t.o(this.Ii.length);for(var i=0,n=this.Ii;i<n.length;)t.V(n[i++])},a:function(t){this.ie=t.O(),this.wi=t.M();var i=t.O();if(3<i)throw new Rv(Tv(Ov.TeamColorsReadError));this.Ii=[];for(var n=0;n<i;)++n,this.Ii.push(t.M())},copy:function(){var t=new Zn;return t.ie=this.ie,t.wi=this.wi,t.Ii=this.Ii.slice(),t}};kv(Zn,["angle","text","inner"],[]);Tu.y_=Zn});var Au=O((Ly,Pu)=>{var{E:Pv}=R(),{Event:ie,Ct:Av}=d(),Mv=Q(),{q:jv,Kt:Ev}=X(),_v=V(),{extend:dv}=j(),{K:te}=li(),Wi=ht(),Ru=zn();function pt(){this.L=0,this.R=null,this.Hn=null,this.i=0}pt.create=function(t,i){var n=new pt;return n.R=t,n.Hn=i,n};pt.prototype=dv(ie.prototype,{apply:function(t){t.Ni(this.i,2)&&this.R!=Wi.spec&&(t.Gi[this.R.id]=this.Hn,t.ne?.(this.R.id,this.Hn,this.i))},ft:function(t){t.o(this.R.id),this.Hn.$(t)},ot:function(t){var i=t.Pr();this.R=i==1?Wi.red:i==2?Wi.blue:Wi.spec,this.Hn=new Ru,this.Hn.a(t)},copy:function(){return Av(pt.create(this.R,this.Hn?.copy()),this)},it:pt});Object.defineProperty(pt.prototype,"eventType",{get(){return _v.SetTeamColors}});pt.createFromData=function(t,i,...n){var r=new Ru,e=Wi.i[t];if(!e)throw new jv(Ev(Mv.ChangeTeamColorsInvalidTeamIdError));r.Ii=[e.k];var s=pt.create(e,r),u=n.length;if(u<1)return s;if(u>4&&(u=4),r.ie=256*te.parseInt(i)/360|0,r.wi=te.parseInt("0x"+n[0]),1<u){r.Ii=[];for(var h=1,o=u;h<o;)r.Ii.push(te.parseInt("0x"+n[h++]))}return s};pt.pt=ie.yt({ct:!1,lt:!1});ie.qt(pt);Pv(pt,[null,"team","colors","byId"],[]);Pu.y_=pt});var ju=O((Uy,Mu)=>{var{E:Bv}=R(),{Event:ne,Ct:Iv}=d(),Gv=V(),{extend:Vv}=j();function Ht(){this.L=0,this.xi=null,this.Jn=!0,this.i=0}Ht.create=function(t,i){for(var n=new Ht,r=new Set,e=0,s,u;e<t.length;)r.add(t[e++]);for(t=[],e=0,r=r.values(),s=r.next();!s.done&&(u=s.value,s=r.next(),t.push(u),++e,!(e>=40)););return n.xi=t,n.Jn=i,n};Ht.prototype=Vv(ne.prototype,{apply:function(t){if(this.i==0){for(var i=new Map,n=0,r=t.j;n<r.length;){var e=r[n];++n,i.set(e.id,e)}for(n=[],r=0,e=this.xi;r<e.length;){var s=e[r];++r;var u=i.get(s);u!=null&&(i.delete(s),n.push(u))}for(r=[],i=i.values(),e=i.next();!e.done;)s=e.value,e=i.next(),r.push(s);t.j=this.Jn?n.concat(r):r.concat(n),t.re?.(this.xi,this.Jn)}},ft:function(t){t.o(this.Jn?1:0),t.o(this.xi.length);for(var i=0,n=this.xi;i<n.length;)t.V(n[i++])},ot:function(t){this.Jn=t.O()!=0;var i=t.O();this.xi=[];for(var n=0;n<i;)++n,this.xi.push(t.M())},copy:function(){var t=new Ht;t.Jn=this.Jn;var i=this.xi;t.xi=[];for(var n=i.length,r=0;r<n;r++)t.xi.push(i[r]);return Iv(t,this)},it:Ht});Object.defineProperty(Ht.prototype,"eventType",{get(){return Gv.ReorderPlayers}});Ht.pt=ne.yt({ct:!1,lt:!1});ne.qt(Ht);Bv(Ht,[null,"playerIdList","moveToTop","byId"],[]);Mu.y_=Ht});var _u=O((Fy,Eu)=>{var{E:Lv}=R(),{Event:re,Ct:Uv}=d(),Fv=V(),{extend:Kv}=j();function Jt(){this.L=0,this.min=0,this.ee=0,this.se=0,this.i=0}Jt.create=function(t,i,n){var r=new Jt;return r.min=t,r.ee=i,r.se=n,r};Jt.prototype=Kv(re.prototype,{apply:function(t){t.Ni(this.i,2)&&t.Al(t.getPlayer(this.i),this.min,this.ee,this.se)},ft:function(t){t.V(this.min),t.V(this.ee),t.V(this.se)},ot:function(t){this.min=t.M(),this.ee=t.M(),this.se=t.M()},copy:function(){return Uv(Jt.create(this.min,this.ee,this.se),this)},it:Jt});Object.defineProperty(Jt.prototype,"eventType",{get(){return Fv.SetKickRateLimit}});Jt.pt=re.yt({ct:!1,lt:!1});re.qt(Jt);Lv(Jt,[null,"min","rate","burst","byId"],[]);Eu.y_=Jt});var Iu=O((Ky,Bu)=>{var{E:Hv}=R(),{Event:ee,Ct:Jv}=d(),Wv=V(),{extend:Qv,Bn:du}=j();function Wt(){this.L=0,this.gt="",this.B=0,this.i=0}Wt.create=function(t,i){var n=new Wt;return n.gt=i!=null?du(i,2):null,n.B=t,n};Wt.prototype=Qv(ee.prototype,{apply:function(t){t=t.getPlayer(this.B),t!=null&&this.i==0&&(t.Ln=this.gt,t.ue?.(this.B,this.gt))},ft:function(t){t.hi(this.gt),t.V(this.B)},ot:function(t){this.gt=t.ui(),this.B=t.M(),this.gt!=null&&(this.gt=du(this.gt,2))},copy:function(){return Jv(Wt.create(this.B,this.gt),this)},it:Wt});Object.defineProperty(Wt.prototype,"eventType",{get(){return Wv.SetHeadlessAvatar}});Wt.pt=ee.yt({ct:!1,lt:!1});ee.qt(Wt);Hv(Wt,[null,"avatar","playerId","byId"],[]);Bu.y_=Wt});var Vu=O((Hy,Gu)=>{var{E:Xv}=R(),{Event:se,Ct:Yv}=d(),$v=V(),{extend:Zv}=j();function tt(){this.L=0,this.id=0,this.type=!1,this.nt=null,this.Xt=null,this.i=0}tt.create=function(t,i,n){var r=new tt;for(r.id=t,r.type=i,r.nt=[n.x,n.y,n.xspeed,n.yspeed,n.xgravity,n.ygravity,n.radius,n.bCoeff,n.invMass,n.damping],r.Xt=[n.color,n.cMask,n.cGroup],t=0,i=r.nt.length;t<i;){n=t++;var e=r.nt[n];e!=null&&(tt.Qh[0]=e,r.nt[n]=tt.Qh[0])}for(t=0,i=r.Xt.length;t<i;)n=t++,e=r.Xt[n],e!=null&&(tt.Xh[0]=e,r.Xt[n]=tt.Xh[0]);return r};tt.prototype=Zv(se.prototype,{apply:function(t){if(this.i==0){var i=t.s,n=t;if(i!=null){if(this.type){if(t=t.getPlayer(this.id),t==null)return;t=t.d}else t=i.v.p[this.id];t!=null&&(this.nt[0]!=null&&(t.e.x=this.nt[0]),this.nt[1]!=null&&(t.e.y=this.nt[1]),this.nt[2]!=null&&(t.A.x=this.nt[2]),this.nt[3]!=null&&(t.A.y=this.nt[3]),this.nt[4]!=null&&(t.P.x=this.nt[4]),this.nt[5]!=null&&(t.P.y=this.nt[5]),this.nt[6]!=null&&(t.G=this.nt[6]),this.nt[7]!=null&&(t.h=this.nt[7]),this.nt[8]!=null&&(t.H=this.nt[8]),this.nt[9]!=null&&(t.Y=this.nt[9]),this.Xt[0]!=null&&(t.k=this.Xt[0]),this.Xt[1]!=null&&(t.u=this.Xt[1]),this.Xt[2]!=null&&(t.f=this.Xt[2]),n.he?.(this.id,this.type,this.nt,this.Xt))}}},ft:function(t){t.V(this.id),t.o(this.type?1:0);var i=t.l;t.Lt(0);for(var n=0,r=1,e=0,s=this.nt;e<s.length;){var u=s[e];++e,u!=null&&(n|=r,t.$s(u)),r<<=1}for(e=0,s=this.Xt;e<s.length;)u=s[e],++e,u!=null&&(n|=r,t.V(u)),r<<=1;r=t.l,t.l=i,t.Lt(n),t.l=r},ot:function(t){this.id=t.M(),this.type=t.O()!=0;var i=t.At();this.nt=[];for(var n=0;10>n;){var r=n++;this.nt[r]=null,i&1&&(this.nt[r]=t.Xs()),i>>>=1}for(this.Xt=[],n=0;3>n;)r=n++,this.Xt[r]=null,i&1&&(this.Xt[r]=t.M()),i>>>=1},copy:function(){var t=new tt;t.id=this.id,t.type=this.type;var i=this.nt;t.nt=[];for(var n=i.length,r=0;r<n;r++)t.nt.push(i[r]);for(i=this.Xt,t.Xt=[],n=i.length,r=0;r<n;r++)t.Xt.push(i[r]);return Yv(t,this)},it:tt});Object.defineProperty(tt.prototype,"eventType",{get(){return $v.SetDiscProperties}});tt.Qh=new Float32Array(1);tt.Xh=new Int32Array(1);tt.pt=se.yt({ct:!1,lt:!1});se.qt(tt);Xv(tt,[null,"id","type","data1","data2","byId"],[]);Gu.y_=tt});var Uu=O((Jy,Lu)=>{var{E:zv}=R(),{Event:ue,Ct:xv}=d(),bv=V(),{extend:Dv}=j();function Qt(){this.L=0,this.type=0,this.data=null,this.i=0}Qt.create=function(t,i){var n=new Qt;return n.type=t,n.data=i,n};Qt.prototype=Dv(ue.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.fe?.(this.type,this.data,this.i)},ft:function(t){t.Nt(this.type),t.pi(JSON.stringify(this.data))},ot:function(t){this.type=t.ht(),this.data=JSON.parse(t.ci())},copy:function(){return xv(Qt.create(this.type,JSON.parse(JSON.stringify(this.data))),this)},it:Qt});Object.defineProperty(Qt.prototype,"eventType",{get(){return bv.CustomEvent}});Qt.pt=ue.yt({ct:!1,lt:!1});ue.qt(Qt);zv(Qt,[null,"type","data","byId"],[]);Lu.y_=Qt});var Hu=O((Wy,Ku)=>{var{pako:Fu,E:av}=R(),{Event:he,Ct:tc}=d(),ic=V(),{F:nc,w:rc,extend:ec}=j();function Xt(){this.L=0,this.type=0,this.data=null,this.i=0}Xt.create=function(t,i){var n=new Xt;return n.type=t,n.data=i,n};Xt.prototype=ec(he.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.oe?.(this.type,this.data,this.i)},ft:function(t){var i=rc.U();i.Nt(this.type),i.Yt(this.data),i=Fu.deflateRaw(i._t()),t.Nt(i.byteLength),t.Yt(i)},ot:function(t){t=Fu.inflateRaw(t.Vt(t.ht()));var i=new nc(new DataView(t.buffer,t.byteOffset,t.byteLength));this.type=i.ht(),this.data=i.Vt()},copy:function(){var t=new Uint8Array;return t.set(this.data),tc(Xt.create(this.type,t),this)},it:Xt});Object.defineProperty(Xt.prototype,"eventType",{get(){return ic.BinaryCustomEvent}});Xt.pt=he.yt({ct:!1,lt:!1});he.qt(Xt);av(Xt,[null,"type","data","byId"],[]);Ku.y_=Xt});var Wu=O((Qy,Ju)=>{var{E:sc}=R(),{Event:fe,Ct:uc}=d(),hc=V(),{extend:fc}=j();function Yt(){this.L=0,this.id=0,this.data=null,this.i=0}Yt.create=function(t,i){var n=new Yt;return n.id=t,n.data=i,n};Yt.prototype=fc(fe.prototype,{apply:function(t){if(this.i==0){var i=t.getPlayer(this.id);i!=null&&(i.lu=this.data,t.le?.(this.id,this.data,this.i))}},ft:function(t){t.Nt(this.id),t.pi(JSON.stringify(this.data))},ot:function(t){this.id=t.ht(),this.data=JSON.parse(t.ci())},copy:function(){return uc(Yt.create(this.id,JSON.parse(JSON.stringify(this.data))),this)},it:Yt});Object.defineProperty(Yt.prototype,"eventType",{get(){return hc.SetPlayerIdentity}});Yt.pt=fe.yt({ct:!1,lt:!1});fe.qt(Yt);sc(Yt,[null,"id","data","byId"],[]);Ju.y_=Yt});var ui=O((Xy,xn)=>{xn.y_=xn.Ml||(xn.Ml={wu:Gs(),ve:Ls(),Yh:Fs(),fs:Hs(),yu:Ws(),ce:Ys(),pe:Zs(),os:xs(),ls:Ds(),vs:tu(),cs:nu(),we:ou(),ye:vu(),ps:pu(),qu:yu(),ws:Cu(),ys:mu(),Cu:Su(),gu:Ou(),mu:Au(),$h:ju(),Nu:_u(),Su:Iu(),ku:Vu(),CustomEvent:Uu(),BinaryCustomEvent:Hu(),qs:Wu()})});var Yu=O((Yy,Xu)=>{var{E:oc}=R(),{Point:lc,tu:Qu,as:vc}=gi(),b=ht(),cc=ii();function et(){this.Mi=-1,this.tt=null,this.xt=0,this.bi=0,this.ki=0,this.Oi=0,this.Pn=b.red,this.t=0,this.Ti=0,this.v=new Qu,this.Mt=0,this.It=5,this.S=null,this.mt=null}et.Zh=function(){for(var t=[],i=0;256>i;)++i,t.push(new lc(0,0));return t}();et.zh=function(){for(var t=[],i=0;256>i;)++i,t.push(0);return t}();et.In=function(t,i){t.mt=i.mt.ji(),t.It=i.It,t.Mt=i.Mt,t.v=i.v.ji(),t.Ti=i.Ti,t.t=i.t,t.Oi=i.Oi,t.ki=i.ki,t.bi=i.bi,t.xt=i.xt,t.S=i.S,t.Pn=i.Pn};et.prototype={jl:function(t){this.mt=t,this.It=t.It,this.Mt=t.Mt,this.S=t.S,this.v=Qu.Qo(t.S),this.xh()},bh:function(t){t.R==b.spec?this.v.kh(t,this.mt.On):this.v.Wo(t,this.S,this.mt.qe)},El:function(t,i){for(var n=0,r=this.S.Pt;n<r.length;n++){var e=r[n];if(e.Lo(t,i))return e.R}return b.spec},ae:function(t){if(0<this.xt)120>this.xt&&this.xt--;else{this.mt.Ce?.();for(var i=this.mt.j,n=0;n<i.length;n++){var r=i[n];if(r.d!=null){!(r.Ot&16)&&(r.Ci=!1);var e=this.S.Ri;if(0<r.Hi&&r.Hi--,r.Ji<this.mt.An&&r.Ji++,r.Ci&&0>=r.Hi&&0<=r.Ji){for(var s=!1,u=0,h=this.v.p;u<h.length;){var o=h[u];++u,o.f&64&&o!=r.d&&this.v.kickBall(r.d,o,e)&&(s=!0)}s&&(this.mt.ge?.(r),r.Ci=!1,r.Hi=this.mt.on,r.Ji-=this.mt.Di)}this.v.Jo(r,e)}}for(n=0,r=this.v.p,e=0,u=r.length;e<u;)s=e++,h=r[s],h.f&128&&(et.zh[n]=s,s=et.Zh[n],h=h.e,s.x=h.x,s.y=h.y,++n);switch(this.v.ae(t,this.mt),this.t){case 0:{for(t=0;t<i.length;)n=i[t],++t,n.d!=null&&(n.d.u=39|this.Pn.u);this.v.p[0].Fo()&&(this.t=1,this.mt.me?.());break}case 1:{for(this.bi+=.016666666666666666,t=0;t<i.length;)r=i[t],++t,r.d!=null&&(r.d.u=39);for(r=b.spec,i=this.v.p,t=0;t<n&&r==b.spec;t++)r=this.El(i[et.zh[t]].e,et.Zh[t]);r!=b.spec?(this.t=2,this.Ti=150,this.Pn=r,r==b.red?this.ki++:this.Oi++,this.mt.Ne?.(r==b.red?b.blue:b.red),this.mt._l?.(r.id)):0<this.Mt&&this.bi>=60*this.Mt&&this.Oi!=this.ki&&(this.mt.Se?.(),this.Dh());break}case 2:{this.Ti--,0>=this.Ti&&(0<this.It&&(this.Oi>=this.It||this.ki>=this.It)||0<this.Mt&&this.bi>=60*this.Mt&&this.Oi!=this.ki?this.Dh():(this.xh(),this.mt.ke?.()));break}case 3:{if(this.Ti--,this.Ti<=0&&(i=this.mt,i.s!=null)){for(i.s=null,t=0,n=i.j;t<n.length;)r=n[t],++t,r.d&&this.mt.On?.(r),r.d=null,r.mi=0;i.hr?.(null)}break}}}},Dh:function(){this.Ti=300,this.t=3,this.mt.Oe?.(this.Oi>this.ki?b.red:b.blue)},xh:function(){var t=this.mt.j;this.t=0;for(var i=this.S.p,n=this.v.p,r=0,e=this.S.sn?i.length:1,s,u,h,o;r<e;)s=r++,i[s].Nh(n[s]);for(i=[0,0,0],n=0;n<t.length;)r=t[n],++n,this.bh(r),e=r.R,e!=b.spec&&(s=r.d.e,u=this.S,h=i[e.id],o=e==b.red?u.at:u.ti,o.length==0?(o=h+1>>1,!(h&1)&&(o=-o),u=u.bt*e.Ch,h=55*o):(h>=o.length&&(h=o.length-1),h=o[h],u=h.x,h=h.y),s.x=u,s.y=h,i[e.id]++,r.mi=i[e.id])},$:function(t){this.v.$(t),t.V(this.Ti),t.V(this.t),t.V(this.Oi),t.V(this.ki),t.g(this.bi),t.V(this.xt),t.o(this.Pn.id)},a:function(t,i){this.v.a(t),this.Ti=t.M(),this.t=t.M(),this.Oi=t.M(),this.ki=t.M(),this.bi=t.N(),this.xt=t.M();var n=t.Pr();this.Pn=n==1?b.red:n==2?b.blue:b.spec,this.mt=i,this.It=i.It,this.Mt=i.Mt,this.S=i.S,this.v.C=this.S.C,this.v.T=this.S.T,this.v.Q=this.S.Q,this.v.wt=this.S.wt},ji:function(){var t=cc.Fi;return t!=this.Mi&&(this.tt||(this.tt=new et),this.Mi=t,et.In(this.tt,this)),this.tt},copy:function(t){var i=new et;return i.v.p=this.v.p.map(n=>{var r=new vc;return r.e.x=n.e.x,r.e.y=n.e.y,r.A.x=n.A.x,r.A.y=n.A.y,r.P.x=n.P.x,r.P.y=n.P.y,r.G=n.G,r.h=n.h,r.H=n.H,r.Y=n.Y,r.k=n.k,r.u=n.u,r.f=n.f,r.B=n.B,r}),i.Ti=this.Ti,i.t=this.t,i.Oi=this.Oi,i.ki=this.ki,i.bi=this.bi,i.xt=this.xt,i.Pn=this.Pn,i.mt=t||this.mt,i.It=i.mt.It,i.Mt=i.mt.Mt,i.S=i.mt.S,i.v.C=i.S.C,i.v.T=i.S.T,i.v.Q=i.S.Q,i.v.wt=i.S.wt,i}};et.prototype.advance=et.prototype.ae;oc(et,[null,"ext","pauseGameTickCounter","timeElapsed","blueScore","redScore",null,"state","goalTickCounter","physicsState","timeLimit","scoreLimit","stadium",null],[]);Xu.y_=et});var Ti=O(($y,Du)=>{var{E:pc}=R(),{D:wc,F:yc,w:$u,Integer:oe,ph:Z}=j(),{Point:qc,ts:Cc,is:bn}=gi(),{ce:gc,pe:mc,ye:Zu}=ui(),_=$n(),hi=ht(),zu=Jn(),xu=zn(),bu=Yu(),Nc=ii();function pi(){this.Mi=-1,this.tt=null,this.S=_.vu()[0],this.on=2,this.Di=0,this.An=1,this.Mt=3,this.It=3,this.fn=!1,this.s=null,this.j=[],this.name="",this.Gi=[null,new xu,new xu],this.Gi[1].Ii.push(hi.red.k),this.Gi[2].Ii.push(hi.blue.k)}pi.In=function(t,i){if(t.name=i.name,i.j==null)t.j=null;else{t.j==null&&(t.j=[]);for(var n=t.j,r=i.j,e=r.length,s;n.length>e;)n.pop();for(e=0,s=r.length;e<s;){var u=e++;n[u]=r[u].sl()}}t.s=i.s==null?null:i.s.ji(),t.fn=i.fn,t.It=i.It,t.Mt=i.Mt,t.An=i.An,t.Di=i.Di,t.on=i.on,t.S=i.S,t.Gi=i.Gi};pi.prototype={ul:function(t){if(this.s==null){this.s=new bu;for(var i=0,n=this.j;i<n.length;){var r=n[i];++i,r.d=null,r.mi=0}this.s.jl(this),this.Te?.(t)}},hs:function(t,i,n){if(i.R!=n&&(i.R=n,wc.remove(this.j,i),this.j.push(i),!!this.s)){this.s.v.kh(i,this.On),this.s.bh(i);for(var r=0,e=!1,s,u;!e;)for(++r,e=!0,s=0,u=this.j;s<u.length;){var h=u[s];if(++s,h!=i&&h.R==i.R&&h.mi==r){e=!1;break}}i.mi=r}},getPlayer:function(t){for(var i=0,n=this.j;i<n.length;){var r=n[i];if(++i,r.id==t)return r}return null},vt:function(t){this.s!=null&&this.s.ae(t)},$:function(t){t.hi(this.name),t.o(this.fn?1:0),t.V(this.It),t.V(this.Mt),t.Ys(this.An),t.o(this.Di),t.o(this.on),this.S.$(t),t.o(this.s!=null?1:0),this.s!=null&&this.s.$(t),t.o(this.j.length);for(var i=0,n=this.j;i<n.length;)n[i++].ft(t);this.Gi[1].$(t),this.Gi[2].$(t)},a:function(t){this.name=t.ui(),this.fn=t.O()!=0,this.It=t.M(),this.Mt=t.M(),this.An=t.Qs(),this.Di=t.O(),this.on=t.O(),this.S=_.a(t);var i=t.O()!=0,n,r;for(this.s=null,i&&(this.s=new bu,this.s.a(t,this)),i=this.s==null?null:this.s.v.p,n=t.O(),r=this.j;r.length>n;)r.pop();for(r=0;r<n;){var e=new zu;e.ot(t,i),this.j[r++]=e}this.Gi[1].a(t),this.Gi[2].a(t)},ah:function(){var t=0,i=$u.U();for(this.$(i),i=i.Po();4<=i.c.byteLength-i.l;)t^=i.M();return t},dl:function(){var t=$u.U(4);return t.V(this.ah()),t.$e()},nl:function(t){t=new yc(new DataView(t)).M(),this.tf?.(this.ah()!=t)},nf:function(t){this._l=t},Ni:function(t){return t==0?!0:(t=this.getPlayer(t),!!(t!=null&&t.yi))},Al:function(t,i,n,r){this.on=0>i?0:255<i?255:i,this.Di=0>n?0:255<n?255:n,r=0>r?0:100<r?100:r,this.An=this.Di*r,this.Re?.(t,this.on,this.Di,r)},ji:function(){var t=Nc.Fi;return t!=this.Mi&&(this.tt||(this.tt=new pi),this.Mi=t,pi.In(this.tt,this)),this.tt},copy:function(){var t=new pi;return t.name=this.name,t.fn=this.fn,t.It=this.It,t.Mt=this.Mt,t.An=this.An,t.Di=this.Di,t.on=this.on,t.S=this.S?.copy(),t.s=this.s?.copy(t),t.j=[],this.j.forEach((i,n)=>{var r=new zu;if(r.yi=i.yi,r.mi=i.mi,r.gt=i.gt,r.Ln=i.Ln,r.di=i.di,r.Tt=i.Tt,r.ur=i.ur,r.name=i.name,r.Ot=i.Ot,r.id=i.id,r.Ci=i.Ci,r.Ji=i.Ji,r.Hi=i.Hi,r.R=i.R,r.Qt=i.Qt,r.kn=i.kn,r.en=i.en,t.s&&i.d){var e=i.d.B,s=t.s.v.p.findIndex(u=>u.B==e);s>-1&&(r.d=t.s.v.p[s])}t.j[n]=r}),this.Gi.forEach((i,n)=>{t.Gi[n]=i?.copy()}),t},exportStadium:function(){if(this.s){var{S:t,v:i}=this.s,n=new Cc,r=new bn,e={},s=t.at.map(v=>[v.x,v.y]),u=t.ti.map(v=>[v.x,v.y]),h=i.wt.map(_.Bh);_.I(e,"type",t.Si==1?"grass":t.Si==2?"hockey":"none","none"),_.I(e,"width",t.Yi,0),_.I(e,"height",t.$i,0),_.I(e,"kickOffRadius",t.Zi,0),_.I(e,"cornerRadius",t.zi,0),_.fr(e,t.Xi,7441498),t.Si==2&&_.I(e,"goalLine",t.un,0);var o={name:t.name,width:t.Ei,height:t.Qi,vertexes:i.C.map((v,c)=>{var p=_.Eh(v);return p.id=c,p}),segments:i.T.map(v=>_.yl(this,v,n)),planes:i.Q.map(_.Gh),goals:t.Pt.map(_.Lh),discs:i.p.map(v=>_.Fh(v,r)),bg:e,playerPhysics:_.Uh(t.Ri),ballPhysics:"disc0"};return _.I(o,"maxViewWidth",t.Tn,0),_.I(o,"cameraFollow",t.Li==1?"player":"",""),_.I(o,"spawnDistance",t.bt,200),h.length>0&&(o.joints=h),s.length>0&&(o.redSpawnPoints=s),u.length>0&&(o.blueSpawnPoints=u),_.I(o,"kickOffReset",t.sn?"full":"partial","partial"),!t.Fn&&(o.canBeStored=!1),o}},createVertex:function(t){return _._h(t)},createSegment:function(t){var i=_.dh(t,this.s.v.C);return i.calculateNormals(),i},createSegmentFromObj:function(t){var i=_.Cl(t,this.s.v.C);return i.calculateNormals(),i},createGoal:function(t){return _.ip(t)},createPlane:function(t){return _.Vh(t)},createDisc:function(t){return _.cu(t,new bn).Ho()},createJoint:function(t){return _.Ih(t,this.s.v.p)},createJointFromObj:function(t){return _.ml(t,this.s.v.p)},addVertex:function(t){this.s.v.C.push(this.createVertex(t))},addSegment:function(t){this.s.v.T.push(this.createSegment(t))},addGoal:function(t){this.s.S.Pt.push(this.createGoal(t))},addPlane:function(t){this.s.v.Q.push(this.createPlane(t))},addDisc:function(t){var i=this.createDisc(t),n=this.s.v.p.findIndex(s=>s.B!=null);n<0&&(n=this.s.v.p.length),this.s.v.p.splice(n,0,i);for(var r=this.s.v.wt,e=this.s.v.p.length-2;e>=n;e--)r.forEach(s=>{s.Zt==e&&s.Zt++,s.$t==e&&s.$t++})},addJoint:function(t){this.s.v.wt.push(this.createJoint(t))},addSpawnPoint:function(t){var i;t.team=="red"?i=this.s.S.at:t.team=="blue"&&(i=this.s.S.ti),i&&i.push(new qc(t.x,t.y))},addPlayer:function(t){var{team:i,id:n,name:r,avatar:e,flag:s}=t,u=i=="spec"?hi.spec:i=="red"?hi.red:i=="blue"?hi.blue:null;if(u){var h=gc.create(n,r,s,e,"fakeConn","fakeAuth");h.i=0,h.apply(this),i!="spec"&&(h=Zu.create(n,u),h.i=0,h.apply(this),this.updateDiscObj(this.getPlayer(n).d,t))}},findVertexIndicesOfSegmentObj:function(t){var i=t.Z,n=t.z,r=-1,e=-1;return this.s.v.C.forEach((s,u)=>{s==i?r=u:s==n&&(e=u)}),[r,e]},findVertexIndicesOfSegment:function(t){return this.findVertexIndicesOfSegmentObj(this.s.v.T[t])},updateVertex:function(t,i){var n=this.s.v.C[t];if(n){var r=_._h(i);i.hasOwnProperty("x")&&(n.e.x=r.e.x),i.hasOwnProperty("y")&&(n.e.y=r.e.y),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f),this.s.v.T.forEach(e=>{(e.z==n||e.Z==n)&&e.calculateNormals()})}},updateSegment:function(t,i){var n=this.s.v.T[t];if(n){var r=_.dh(i,this.s.v.C);(i.hasOwnProperty("v0")||i.hasOwnProperty("curve"))&&(n.Z=r.Z),(i.hasOwnProperty("v1")||i.hasOwnProperty("curve"))&&(n.z=r.z),(i.hasOwnProperty("bias")||i.hasOwnProperty("curve"))&&(n.Wt=r.Wt),(i.hasOwnProperty("curveF")||i.hasOwnProperty("curve"))&&(n.jt=r.jt),i.hasOwnProperty("vis")&&(n.St=r.St),i.hasOwnProperty("color")&&(n.k=r.k),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f),n.calculateNormals()}},updateGoal:function(t,i){var n=this.s.S.Pt[t];if(n){var r=_.ip(i);i.hasOwnProperty("p0")&&(n.ei=r.ei),i.hasOwnProperty("p1")&&(n.si=r.si),i.hasOwnProperty("team")&&(n.R=r.R)}},updatePlane:function(t,i){var n=this.s.v.Q[t];if(n){var r=_.Vh(i);i.hasOwnProperty("normal")&&(n.b=r.b),i.hasOwnProperty("dist")&&(n.ut=r.ut),i.hasOwnProperty("bCoef")&&(n.h=r.h),i.hasOwnProperty("cMask")&&(n.u=r.u),i.hasOwnProperty("cGroup")&&(n.f=r.f)}},updateDisc:function(t,i){this.updateDiscObj(this.s.v.p[t],i)},updateDiscObj:function(t,i){if(t){var n=_.cu(i,new bn);i.hasOwnProperty("pos")&&(t.e=n.e),i.hasOwnProperty("speed")&&(t.A=n.A),i.hasOwnProperty("gravity")&&(t.P=n.P),i.hasOwnProperty("radius")&&(t.G=n.G),i.hasOwnProperty("invMass")&&(t.H=n.H),i.hasOwnProperty("damping")&&(t.Y=n.Y),i.hasOwnProperty("color")&&(t.k=n.k),i.hasOwnProperty("bCoef")&&(t.h=n.h),i.hasOwnProperty("cMask")&&(t.u=n.u),i.hasOwnProperty("cGroup")&&(t.f=n.f)}},updateJoint:function(t,i){var n=this.s.v.wt[t];if(n){var r=_.Ih(i,this.s.v.p);i.hasOwnProperty("d0")&&(n.Zt=r.Zt),i.hasOwnProperty("d1")&&(n.$t=r.$t),i.hasOwnProperty("color")&&(n.k=r.k),i.hasOwnProperty("strength")&&(n.Ai=r.Ai),i.hasOwnProperty("length")&&(n.dt=r.dt,n.Bt=r.Bt)}},updateSpawnPoint:function(t,i,n){var r,e;if(i=="red"?r=this.s.S.at:i=="blue"&&(r=this.s.S.ti),n.team=="red"?e=this.s.S.at:n.team=="blue"&&(e=this.s.S.ti),!(!r||!e)){var s;r==e?s=r[t]:s=r.splice(t,1)[0],s&&(n.hasOwnProperty("x")&&(s.x=n.x),n.hasOwnProperty("y")&&(s.y=n.y),r!=e&&e.push(s))}},updatePlayer:function(t,i){var n=this.getPlayer(t);if(n){var r=null;if(i.hasOwnProperty("team")&&(r=i.team=="spec"?hi.spec:i.team=="red"?hi.red:i.team=="blue"?hi.blue:null),i.hasOwnProperty("name")&&(n.name=i.name),i.hasOwnProperty("flag")&&(n.Tt=i.flag),i.hasOwnProperty("avatar")&&(n.gt=i.avatar),r!=null){var e=Zu.create(t,r);e.i=0,e.apply(this)}n.d!=null&&this.updateDiscObj(n.d,i)}},removeVertex:function(t){var i=this.s.v.C.splice(t,1)[0];if(i){var n=this.s.v.T,r=[];n.forEach((e,s)=>{(e.z==i||e.Z==i)&&r.unshift(s)}),r.forEach(e=>n.splice(e,1))}},removeSegment:function(t){this.s.v.T.splice(t,1)},removeGoal:function(t){this.s.S.Pt.splice(t,1)},removePlane:function(t){this.s.v.Q.splice(t,1)},removeDisc:function(t){this.s.v.p.splice(t,1);var i=this.s.v.wt,n=[];i.forEach((e,s)=>{(e.Zt==t||e.$t==t)&&n.unshift(s)}),n.forEach(e=>i.splice(e,1));for(var r=t+1;r<=this.s.v.p.length;r++)i.forEach(e=>{e.Zt==r&&e.Zt--,e.$t==r&&e.$t--})},removeJoint:function(t){this.s.v.wt.splice(t,1)},removeSpawnPoint:function(t,i){var n;i=="red"?n=this.s.S.at:i=="blue"&&(n=this.s.S.ti),n&&n.splice(t,1)},removePlayer:function(t){var i=mc.create(t,null,!0);i.i=0,i.apply(this)},updateStadiumPlayerPhysics:function(t){var i=this.s?.S.Ri;if(i){var n=_.cu(t,new bn);t.hasOwnProperty("radius")&&(i.G=n.G),t.hasOwnProperty("gravity")&&(i.P=n.P),t.hasOwnProperty("invMass")&&(i.H=n.H),t.hasOwnProperty("bCoef")&&(i.h=n.h),t.hasOwnProperty("cGroup")&&(i.f=n.f),t.hasOwnProperty("damping")&&(i.Y=n.Y),t.hasOwnProperty("kickingDamping")&&(i.mn=Z(t.kickingDamping,Number)),t.hasOwnProperty("acceleration")&&(i.gn=Z(t.acceleration,Number)),t.hasOwnProperty("kickingAcceleration")&&(i.Cn=Z(t.kickingAcceleration,Number)),t.hasOwnProperty("kickStrength")&&(i.yn=Z(t.kickStrength,Number)),t.hasOwnProperty("kickback")&&(i.qn=Z(t.kickback,Number))}},updateStadiumBg:function(t){var i=this.s?.S;i&&(t.hasOwnProperty("type")&&(i.Si=Z(t.type,oe)),t.hasOwnProperty("width")&&(i.Yi=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.$i=Z(t.height,Number)),t.hasOwnProperty("kickOffRadius")&&(i.Zi=Z(t.kickOffRadius,Number)),t.hasOwnProperty("cornerRadius")&&(i.zi=Z(t.cornerRadius,Number)),t.hasOwnProperty("color")&&(i.Xi=Z(t.color,oe)),t.hasOwnProperty("goalLine")&&(i.un=Z(t.goalLine,Number)))},updateStadiumGeneral:function(t){var i=this.s?.S;i&&(t.hasOwnProperty("name")&&(i.name=Z(t.name,String)),t.hasOwnProperty("width")&&(i.Ei=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.Qi=Z(t.height,Number)),t.hasOwnProperty("maxViewWidth")&&(i.Tn=Z(t.maxViewWidth,Number)),t.hasOwnProperty("cameraFollow")&&(i.Li=Z(t.cameraFollow,oe)),t.hasOwnProperty("spawnDistance")&&(i.bt=Z(t.spawnDistance,Number)),t.hasOwnProperty("kickOffReset")&&(i.sn=Z(t.kickOffReset,Boolean)),t.hasOwnProperty("canBeStored")&&(i.Fn=Z(t.canBeStored,Boolean)))},runSteps:function(t){this.vt(t)}};pc(pi,[null,"ext","stadium","kickRate_min","kickRate_rate","kickRate_max","timeLimit","scoreLimit","teamsLocked","gameState","players","name","teamColors"],[]);Du.y_=pi});var pe=O((Zy,Dn)=>{var{setInterval:Sc,clearInterval:kc,requestAnimationFrame:Oc,cancelAnimationFrame:Tc,performance:ih,pako:an,E:nh}=R(),{Event:tr}=d(),{Kt:au,lo:le,q:Qi}=X(),rh=ki(),{F:Ri,w:Pi,extend:Rc}=j(),Pc=ii(),eh=Ti(),th=Q();function ve(t,i){if(this.rf=0,this.Ft=i,this.ef=t?.m,this.Wn=Pi.U(1e3),this.Pe=Pi.U(16384),this.Ou=t,!!t){var n=this,r=t.m;t.t.$(this.Pe),t.ni=function(s){var u=t.m;n.Pe.Ut(u-r),r=u,n.Pe.Lt(s.i),tr.Nn(s,n.Pe)},this.Wn.Lt(0);var e=this.ef;t.t.nf(function(s){var u=t.m;n.Wn.Ut(u-e),n.Wn.o(s),n.rf++,e=u})}}ve.prototype={stop:function(){this.Ou.ni=null,this.Ou.t.nf(null),this.Wn.c.setUint16(0,this.rf,this.Wn.Et),this.Wn.Yt(this.Pe._t());var t=an.deflateRaw(this.Wn._t()),i=Pi.U(t.byteLength+32);return i.Mr("HBR2"),i.Nt(this.Ft),i.Nt(this.Ou.m-this.ef),i.Yt(t),i._t()}};function sh(t,i,n,r){if(this.Bl=[],this.Cs=0,this.vr=-1,this.Tu=this.ai=this.Ru=this.sf=0,rh.call(this,i),t=new Ri(new DataView(t.buffer),!1),t.ht()!=1212305970)throw new Qi("");if(i=t.ht(),n!=i)throw new Qi(new le(i));this.gs=t.ht(),n=an.inflateRaw(t.Vt()),this.ln=new Ri(new DataView(n.buffer,n.byteOffset,n.byteLength)),this.Il(this.ln),n=this.ln.Vt(),this.ln=new Ri(new DataView(n.buffer,n.byteOffset,n.byteLength),!1),this.ms(),this.Ru=ih.now(),this._i=-1,this.callbacks=r,this.Ns=null,this.Ae=null}sh.prototype=Rc(rh.prototype,{Il:function(t){for(var i=t.At(),n=0,r=0,e;r<i;)++r,n=n+t.Ht(),e=t.O(),this.Bl.push({Fc:n/this.gs,kind:e})},uf:function(){var t=this.ln;0<t.c.byteLength-t.l?(t=this.ln.Ht(),this.Tu+=t,t=this.ln.At(),this.Ss=tr.nn(this.ln,!0),this.Ss.i=t):this.Ss=null},Kc:function(){return this.m/this.gs},_:function(){},Sn:function(){this.vt(),Pc.Fi++;var t=this.t.ji();return t.vt(this.sf),t},vt:function(){var t=ih.now(),i=t-this.Ru;this.Ru=t;var n=!1,r=!1;for(this.vr>=0?(this.ai+=1e4,this.ai>this.vr&&(this.ai=this.vr,this.vr=-1,n=!0)):this.ai+=i*this.Cs,t=this.gs*this.uu,this.ai>t&&(this.ai=t,r=!0),i=this.ai*this.Ki,t=i|0,this.sf=i-t;this.m<t;){for(;this.Ss!=null&&this.Tu==this.m;)i=this.Ss,i.apply(this.t),this.ni!=null&&this.ni(i),this.uf();this.m++,this.t.vt(1)}n&&(this.Ns.assignCallbacks(),this.Ae?.onDestinationTimeReached&&this.Ae.onDestinationTimeReached()),r&&(this.Cs=0,this.Ns.clearCallbacks(),this.Ae?.onEnd&&this.Ae.onEnd())},hf:function(t){this.Ns.clearCallbacks(),this.vr=t,t<this.ai&&this.ms()},ms:function(){this.Tu=0,this.ai=this.m=this.ln.l=0,this.t.a(this.ln),this.uf()}});function Ac(t,i,n){var r=0,e=n?.requestAnimationFrame||Oc,s=n?.cancelAnimationFrame||Tc,u=i?.render,h=u&&function(){0<t.vr||u(t.Sn())},o=function(){r=e(o),t.vt(),u&&h()};r=e(o),this.clearCallbacks=function(){t.t.er=null,t.t.Hr=null,t.t.ge=null,t.t.Ne=null,t.t.Oe=null,t.t.Qr=null,t.t.Te=null,t.t.Ce=null,t.t.me=null,t.t.jr=null,t.t.Er=null,t.t._r=null,t.t.dr=null,t.t.tr=null,t.t.lr=null,t.t.Yr=null,t.t.Xr=null,t.t.te=null,t.t.qe=null,t.t.On=null,t.t.ue=null,t.t.re=null,t.t.zr=null,t.t.ne=null,t.t.xr=null,t.t.fe=null,t.t.oe=null,t.t.le=null,t.t.he=null,t.t.ar=null,t.t.Ir=null,t.t.Gr=null,t.t.Se=null,t.t.ke=null,t.t.Kr=null,t.t.Ur=null,t.t.hr=null,t.t.Zr=null,t.t.Dr=null,t.t.br=null,t.t.Re=null,t.t.Wr=null,t.t.Fr=null},this.assignCallbacks=function(){t.t.er==null&&(t.t.er=v=>{i.onPlayerInputChange?.(v.id,v.Ot)},t.t.Hr=v=>{i.onPlayerJoin?.(v)},t.t.ge=v=>{i.onPlayerBallKick?.(v?.id)},t.t.Ne=v=>{i.onTeamGoal?.(v?.id)},t.t.Oe=v=>{i.onGameEnd?.(v.id)},t.t.Qr=(v,c,p)=>{!p&&i.onGamePauseChange?.(c,v?.id)},t.t.Te=function(v){i.onGameStart?.(v?.id)},t.t.Ce=()=>{i.onGameTick?.()},t.t.me=()=>{i.onKickOff?.()},t.t.jr=(v,c,p,C)=>{i.onCollisionDiscVsDisc?.(v,c.B,p,C.B)},t.t.Er=(v,c,p)=>{i.onCollisionDiscVsPlane?.(v,c.B,p)},t.t._r=(v,c,p)=>{i.onCollisionDiscVsSegment?.(v,c.B,p)},t.t.dr=(v,c,p,C)=>{i.Gl?.(v,c.B,p,C)},t.t.tr=(v,c,p)=>{i.Vl?.(v,c,p)},t.t.lr=(v,c,p,C,N)=>{i.onAutoTeams?.(v,c,p,C,N)},t.t.Yr=(v,c)=>{i.onTimeLimitChange?.(v,c)},t.t.Xr=(v,c)=>{i.onScoreLimitChange?.(v,c)},t.t.qe=v=>{i.onPlayerDiscCreated?.(v)},t.t.On=v=>{i.onPlayerDiscDestroyed?.(v)},t.t.te=(v,c)=>{i.onPlayerAvatarChange?.(v,c)},t.t.ue=(v,c)=>{i.onPlayerHeadlessAvatarChange?.(v,c)},t.t.re=(v,c)=>{i.onPlayersOrderChange?.(v,c)},t.t.zr=(v,c,p)=>{i.onPlayerTeamChange?.(v,c,p)},t.t.ne=(v,c,p)=>{i.onTeamColorsChange?.(v,c,p)},t.t.xr=(v,c)=>{i.onTeamsLockChange?.(v,c)},t.t.fe=(v,c,p)=>{i.onCustomEvent?.(v,c,p)},t.t.oe=(v,c,p)=>{i.onBinaryCustomEvent?.(v,c,p)},t.t.le=(v,c,p)=>{i.onIdentityEvent?.(v,c,p)},t.t.he=(v,c,p,C)=>{i.onSetDiscProperties?.(v,c,p,C)},t.t.ar=v=>{i.onPingData?.(v)},t.t.Ir=v=>{i.onHandicapChange?.(v)},t.t.Gr=v=>{i.onExtrapolationChange?.(v)},t.t.Se=()=>{i.onTimeIsUp?.()},t.t.ke=()=>{i.onPositionsReset?.()},t.t.Kr=function(v,c){i.onPlayerChat?.(v.id,c)},t.t.Ur=function(v,c,p,C){i.onAnnouncement?.(v,c,p,C)},t.t.hr=function(v){i.onGameStop?.(v?.id)},t.t.Zr=function(v,c){i.onStadiumChange?.(c,v?.id)},t.t.Dr=function(v){i.onPlayerSyncChange?.(v?.id,v?.di)},t.t.br=function(v,c){i.onPlayerAdminChange?.(c?.id,c?.yi,v?.id)},t.t.Re=function(v,c,p,C){i.onKickRateLimitChange?.(c,p,C,v?.id)},t.t.Wr=function(v,c,p,C){v.d&&i.onPlayerDiscDestroyed?.(v),i.onPlayerLeave?.(v,c,p,C?.id)},t.t.Fr=function(v,c){i.onPlayerChatIndicatorChange?.(v?.id,!c)})},this.rt=function(){s(r),this.clearCallbacks()},this.ms=()=>{t.ms()}}function Mc(t,i,n){var r,e,s=new eh;try{e=new sh(t,s,3,i),r=new Ac(e,i,n),e.Ns=r}catch(o){var u=o instanceof Qi?o.zt:o;throw u instanceof le?au(th.ReplayFileVersionMismatchError):au(th.ReplayFileReadError)}var h={state:s,getSpeed:()=>e.Cs,setSpeed:o=>{r.assignCallbacks(),e.Cs=o},getTime:()=>e.ai,length:()=>e.uu*e.gs,setTime:o=>{e.hf(o)},getCurrentFrameNo:()=>e.m,setCurrentFrameNo:o=>{e.hf(e.uu*o)},destroy:()=>{r.rt()}};return Object.defineProperty(h,"gameState",{get(){return h.state.s}}),Object.defineProperty(h,"currentPlayerId",{get(){return e._i}}),e.Ae=h,h}function ce(){this.r=new eh,this.tn=[],this.vn=[],this.cr=0,this.Ft=3}function jc(t){var i=new ce,n=0,r=new Ri(new DataView(t.buffer),!1);if(r.ht()!=1212305970)throw new Qi("");var e=r.ht();if(e!=3)throw new Qi(new le(e));i.cr=r.ht();var s=an.inflateRaw(r.Vt()),u=new Ri(new DataView(s.buffer,s.byteOffset,s.byteLength)),h=null,o;for(e=u.At(),s=0,o=0;o<e;o++)s+=u.Ht(),i.vn.push({frameNo:s,teamId:u.O()});for(s=u.Vt(),u=new Ri(new DataView(s.buffer,s.byteOffset,s.byteLength),!1),i.r.a(u);u.l<u.c.byteLength;)e=u.Ht(),n+=e,e=u.At(),h=tr.nn(u,!0),h.i=e,h.frameNo=n,i.tn.push(h);return i}function Ec(t,i){if(t){var{r:n,tn:r,cr:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),!(u<s)){for(var h=0,o=0,v=r[0];o<s;){for(;o==v?.frameNo;)v.apply(n),v=r[++h];o++,n.vt(1)}r=r.filter(c=>c.frameNo>=s&&c.frameNo<=u),r.forEach(c=>{c.frameNo-=s}),t.tn=r,t.vn=t.vn.filter(c=>c.frameNo>=s&&c.frameNo<=u),t.vn.forEach(c=>{c.frameNo-=s}),t.cr=u-s+1}}}function _c(t,i){if(!t)return Promise.resolve();var{r:n,tn:r,cr:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),u<s)return Promise.resolve();var h=0,o=0,v=r[0];return new Promise((c,p)=>{var C;C=Sc(()=>{if(o>=s){kc(C),r=r.filter(N=>N.frameNo>=s&&N.frameNo<=u),r.forEach(N=>{N.frameNo-=s}),t.tn=r,t.vn=t.vn.filter(N=>N.frameNo>=s&&N.frameNo<=u),t.vn.forEach(N=>{N.frameNo-=s}),t.cr=u-s+1,c();return}for(;o==v?.frameNo;)v.apply(n),v=r[++h];o++,n.vt(1)},0)})}function dc(t){var i=Pi.U(16384),n=0;t.r.$(i),t.tn.forEach(h=>{var o=h.frameNo;o<n||(i.Ut(o-n),n=o,i.Lt(h.i),tr.Nn(h,i))});var r=Pi.U(1e3);r.Lt(t.vn.length);var e=0;t.vn.forEach(h=>{r.Ut(h.frameNo-e),r.o(h.teamId),e=h.frameNo}),r.Yt(i._t());var s=an.deflateRaw(r._t()),u=Pi.U(s.byteLength+32);return u.Mr("HBR2"),u.Nt(t.Ft),u.Nt(t.cr),u.Yt(s),u._t()}nh(ve,[null,"version",null,null,null,null],[]);nh(ce,["roomData","events","goalMarkers","totalFrames","version"],[]);Dn.y_=Dn.Ll||(Dn.Ll={ReplayData:ce,read:Mc,readAll:jc,writeAll:dc,trim:Ec,trimAsync:_c,Dt:ve})});var ye=O((xy,ir)=>{var{requestAnimationFrame:Bc,cancelAnimationFrame:Ic,performance:lh,E:Gc}=R(),uh=Q(),Vc=ht(),{Kt:hh,Xe:Lc,q:Uc}=X(),{extend:Fc}=j(),{wu:Kc,ve:Hc,fs:Jc,yu:Wc,ce:Qc,pe:fh,os:Xc,ls:Yc,vs:$c,cs:oh,we:Zc,ye:zc,ps:xc,qu:bc,ws:Dc,ys:ac,Cu:t0,gu:i0,Nu:n0,mu:r0,Su:e0,ku:s0,CustomEvent:u0,BinaryCustomEvent:h0,qs:f0}=ui(),vh=ki(),o0=Ti(),zy=ii();function we(t){vh.call(this,t),this.tn=[],this.A=1,this.Qn=lh.now(),this.frozen=!1}we.prototype=Fc(vh.prototype,{_:function(){},Sn:function(){return this.t},vt:function(){var t=this.tn;this.tn=[];for(var i=((lh.now()-this.Qn)*this.Ki*this.A|0)-this.m,n=0;n<i;n++)this.m+=1,this.frozen||this.t.vt(1);t.forEach(r=>{r.apply(this.t)})},receiveEvent:function(t){this.tn.push(t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.m=this.m*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.vt(t)}});function ch(t,i,n){var r=0,e=n?.requestAnimationFrame||Bc,s=n?.cancelAnimationFrame||Ic,u=i?.render,h=u&&function(){u(t.Sn())},o=function(){r=e(o),t.vt(),u&&h()};function v(){r=e(o),t.t.er=p=>{i.onPlayerInputChange?.(p.id,p.Ot)},t.t.Hr=p=>{i.onPlayerJoin?.(p)},t.t.ge=p=>{i.onPlayerBallKick?.(p?.id)},t.t.Ne=p=>{i.onTeamGoal?.(p?.id)},t.t.Oe=p=>{i.onGameEnd?.(p.id)},t.t.Qr=(p,C,N)=>{!N&&i.onGamePauseChange?.(C,p?.id)},t.t.Te=function(p){i.onGameStart?.(p?.id)},t.t.Ce=()=>{i.onGameTick?.()},t.t.me=()=>{i.onKickOff?.()},t.t.jr=(p,C,N,f)=>{i.onCollisionDiscVsDisc?.(p,C.B,N,f.B)},t.t.Er=(p,C,N)=>{i.onCollisionDiscVsPlane?.(p,C.B,N)},t.t._r=(p,C,N)=>{i.onCollisionDiscVsSegment?.(p,C.B,N)},t.t.dr=(p,C,N,f)=>{i.Gl?.(p,C.B,N,f)},t.t.tr=(p,C,N)=>{i.Vl?.(p,C,N)},t.t.lr=(p,C,N,f,l)=>{i.onAutoTeams?.(p,C,N,f,l)},t.t.Yr=(p,C)=>{i.onTimeLimitChange?.(p,C)},t.t.Xr=(p,C)=>{i.onScoreLimitChange?.(p,C)},t.t.qe=p=>{i.onPlayerDiscCreated?.(p)},t.t.On=p=>{i.onPlayerDiscDestroyed?.(p)},t.t.te=(p,C)=>{i.onPlayerAvatarChange?.(p,C)},t.t.ue=(p,C)=>{i.onPlayerHeadlessAvatarChange?.(p,C)},t.t.re=(p,C)=>{i.onPlayersOrderChange?.(p,C)},t.t.zr=(p,C,N)=>{i.onPlayerTeamChange?.(p,C,N)},t.t.ne=(p,C,N)=>{i.onTeamColorsChange?.(p,C,N)},t.t.xr=(p,C)=>{i.onTeamsLockChange?.(p,C)},t.t.fe=(p,C,N)=>{i.onCustomEvent?.(p,C,N)},t.t.oe=(p,C,N)=>{i.onBinaryCustomEvent?.(p,C,N)},t.t.le=(p,C,N)=>{i.onIdentityEvent?.(p,C,N)},t.t.he=(p,C,N,f)=>{i.onSetDiscProperties?.(p,C,N,f)},t.t.ar=p=>{i.onPingData?.(p)},t.t.Ir=p=>{i.onHandicapChange?.(p)},t.t.Gr=p=>{i.onExtrapolationChange?.(p)},t.t.Se=()=>{i.onTimeIsUp?.()},t.t.ke=()=>{i.onPositionsReset?.()},t.t.Kr=function(p,C){i.onPlayerChat?.(p.id,C)},t.t.Ur=function(p,C,N,f){i.onAnnouncement?.(p,C,N,f)},t.t.hr=function(p){i.onGameStop?.(p?.id)},t.t.Zr=function(p,C){i.onStadiumChange?.(C,p?.id)},t.t.Dr=function(p){i.onPlayerSyncChange?.(p?.id,p?.di)},t.t.br=function(p,C){i.onPlayerAdminChange?.(C?.id,C?.yi,p?.id)},t.t.Re=function(p,C,N,f){i.onKickRateLimitChange?.(C,N,f,p?.id)},t.t.Wr=function(p,C,N,f){p.d&&i.onPlayerDiscDestroyed?.(p),i.onPlayerLeave?.(p,C,N,f?.id)},t.t.Fr=function(p,C){i.onPlayerChatIndicatorChange?.(p?.id,!C)}}function c(){s(r),t.t.er=null,t.t.Hr=null,t.t.ge=null,t.t.Ne=null,t.t.Oe=null,t.t.Qr=null,t.t.Te=null,t.t.Ce=null,t.t.me=null,t.t.jr=null,t.t.Er=null,t.t._r=null,t.t.dr=null,t.t.tr=null,t.t.lr=null,t.t.Yr=null,t.t.Xr=null,t.t.te=null,t.t.qe=null,t.t.On=null,t.t.ue=null,t.t.re=null,t.t.zr=null,t.t.ne=null,t.t.xr=null,t.t.fe=null,t.t.oe=null,t.t.le=null,t.t.he=null,t.t.ar=null,t.t.Ir=null,t.t.Gr=null,t.t.Se=null,t.t.ke=null,t.t.Kr=null,t.t.Ur=null,t.t.hr=null,t.t.Zr=null,t.t.Dr=null,t.t.br=null,t.t.Re=null,t.t.Wr=null,t.t.Fr=null}v(),this.rt=function(){c()},this.ff=function(p){c(),t.t=p,v()}}function l0(t,i){var n=new o0,r=new we(n),e=new ch(r,t,i),s;return s={state:n,takeSnapshot:function(){return n.copy()},useSnapshot:function(u){var h=u.copy();e.ff(h),n=h,s.state=h},playerJoin:function(u,h,o,v,c,p){var C=Qc.create(u,h,o,v,c,p);C.i=0,r.receiveEvent(C)},playerLeave:function(u){var h=r.t.getPlayer(u);if(h){var o=fh.create(u,null,!0);o.i=0,r.receiveEvent(o)}},playerInput:function(u,h){var o=Jc.create(u);o.i=h,r.receiveEvent(o)},playerChat:function(u,h){var o=Wc.create(u);o.i=h,r.receiveEvent(o)},setKeyState:function(u){s.playerInput(u,i?.controlledPlayerId||0)},setPlayerChatIndicator:function(u,h){var o=Hc.create(u);o.i=h,r.receiveEvent(o)},setPlayerAvatar:function(u,h,o){if(u){var v=e0.create(o,h);v.i=0}else{var c=i0.create(h);c.i=o}r.receiveEvent(c)},setCurrentStadium:function(u,h,o){try{var v=Zc.create(u);v.i=h,r.receiveEvent(v)}catch(c){v=c instanceof Uc?c.zt:c,v instanceof SyntaxError?o(hh(uh.StadiumParseSyntaxError,v.lineNumber)):v instanceof Lc?o(v.Ws):o(hh(uh.StadiumParseUnknownError,v))}},sendAnnouncement:function(u,h=-1,o=0,v=1,c,p){var C=Kc.create(u,h,o,v);C.i=p,r.receiveEvent(C)},startGame:function(u){var h=Xc.create();h.i=u,r.receiveEvent(h)},stopGame:function(u){var h=Yc.create();h.i=u,r.receiveEvent(h)},setGamePaused:function(u,h){var o=$c.create(u);o.i=h,r.receiveEvent(o)},setScoreLimit:function(u,h){var o=oh.create(0,u);o.i=h,r.receiveEvent(o)},setTimeLimit:function(u,h){var o=oh.create(1,u);o.i=h,r.receiveEvent(o)},setTeamsLock:function(u,h){var o=xc.create(u);o.i=h,r.receiveEvent(o)},autoTeams:function(u){var h=Dc.create();h.i=u,r.receiveEvent(h)},setPlayerTeam:function(u,h,o){var v=Vc.i[h];if(v){var c=zc.create(u,v);c.i=o,r.receiveEvent(c)}},setKickRateLimit:function(u,h,o,v){var c=n0.create(u,h,o);c.i=v,r.receiveEvent(c)},setTeamColors:function(u,h,o,v){var c=r0.createFromData(u,h,...o);c.i=v,r.receiveEvent(c)},setPlayerAdmin:function(u,h,o){var v=bc.create(u,h);v.i=o,r.receiveEvent(v)},kickPlayer:function(u,h,o,v){var c=fh.create(u,h,o);c.i=v,r.receiveEvent(c)},setPlayerSync:function(u,h){var o=ac.create(u);o.i=h,r.receiveEvent(o)},sendPingData:function(u,h){for(var o=new t0,v=[],c=0;c<r.t.j.length;c++)v.push(u(r.t.j[c]));o.values=v,o.i=h,r.receiveEvent(o)},setDiscProperties:function(u,h,o,v){var c=s0.create(u,h,o);c.i=v,r.receiveEvent(c)},sendCustomEvent:function(u,h,o){var v=u0.create(u,h);v.i=o,r.receiveEvent(v)},sendBinaryCustomEvent:function(u,h,o){var v=h0.create(u,h);v.i=o,r.receiveEvent(v)},setPlayerIdentity:function(u,h,o){var v=f0.create(u,h);v.i=o,r.receiveEvent(v)},executeEvent:function(u){r.receiveEvent(u)},setSimulationSpeed:function(u){r.setSpeed(u)},runSteps:function(u){r.runSteps(u)},destroy:e.rt},Object.defineProperty(s,"gameState",{get(){return s.state.s}}),Object.defineProperty(s,"currentPlayerId",{get(){return 0}}),Object.defineProperty(s,"currentFrameNo",{get(){return r.m}}),s}Gc(we,[null,null,null,null,null,null,null,null,null,null,null,null,"events","speed",null,null],[]);ir.y_=ir.Ul||(ir.Ul={Sandbox:ch,createSandbox:l0})});var nr=O((Dy,yh)=>{var{httpUrl:by,XMLHttpRequest:v0}=R(),{q:ph}=X();function wh(t,i,n,r,e){return new Promise(function(s,u){var h=new v0;h.open(i,t),h.responseType=n,h.onload=function(){200<=h.status&&300>h.status?h.response!=null?s(h.response):u(null):u("status: "+h.status)},h.onerror=function(o){u(o)},e!=null&&h.setRequestHeader("Content-type",e),h.send(r)})}var qe,qe={of:function(t,i){return wh(t,"GET",i,null)},Fl:function(t){return qe.of(t,"json").then(function(i){if(i.error!=null)throw new ph(i.error);return i.data})},Kl:function(t,i,n){return wh(t,"POST","json",i,n).then(function(r){if(r.error!=null)throw new ph(r.error);return r.data})}};yh.y_=qe});var ge=O((ay,rr)=>{var{E:Ch}=R(),{Bn:qh}=j();function Ce(){this.Ft=0,this.name="",this.Tt="",this.Me=0,this.je=0,this.oi=!1,this.Pu=0,this.j=0}Ce.prototype={lf:function(){this.name=qh(this.name,40),this.Tt=qh(this.Tt,3)},$:function(t){this.lf(),t.Et=!0,t.Lt(this.Ft),t.lh(this.name),t.lh(this.Tt),t.$s(this.Me),t.$s(this.je),t.o(this.oi?1:0),t.o(this.Pu),t.o(this.j),t.Et=!1},a:function(t){t.Et=!0,this.Ft=t.At(),this.name=t.oh(),this.Tt=t.oh(),this.Me=t.Xs(),this.je=t.Xs(),this.oi=t.O()!=0,this.Pu=t.O(),this.j=t.O(),t.Et=!1,this.lf()}};function gh(){this.data=null,this.id="",this.ut=1/0}Ch(Ce,["version","name","flag","lat","lon","password","maxPlayers","players"],[]);Ch(gh,["data","id","dist"],[]);rr.y_=rr.Hl||(rr.Hl={RoomDataDetails:Ce,RoomData:gh})});var Ne=O((t2,Sh)=>{var{crypto:Ai}=R(),c0=Q(),{F:mh,w:p0}=j(),{Kt:w0,q:Mi}=X(),me={name:"ECDSA",namedCurve:"P-256"},Nh={name:"ECDSA",hash:{name:"SHA-256"}};function y0(t,i,n){try{return Ai.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",d:n,x:t,y:i},me,!0,["sign"])}catch(r){return Promise.reject(r instanceof Mi?r.zt:r)}}function q0(t,i){try{return Ai.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",x:t,y:i},me,!0,["verify"])}catch(n){return Promise.reject(n instanceof Mi?n.zt:n)}}function wi(){this.x=null,this.y=null,this.Au=null,this.privateKey=null}wi.Jl=function(){try{return Ai.subtle.generateKey(me,!0,["sign","verify"]).then(function(t){var i=t.privateKey;return Ai.subtle.exportKey("jwk",i).then(function(n){var r=new wi;return r.x=n.x,r.y=n.y,r.Au=n.d,r.privateKey=i,r})})}catch(t){return Promise.reject(t instanceof Mi?t.zt:t)}};wi.Wl=function(t){var i=t.split(".");if(i.length!=4||i[0]!="idkey")return Promise.reject(w0(c0.AuthFromKeyInvalidIdFormatError));var n=i[1],r=i[2],e=i[3];return y0(n,r,e).then(function(s){var u=new wi;return u.x=n,u.y=r,u.Au=e,u.privateKey=s,u})};wi.Ql=function(t,i){try{var n=new mh(new DataView(t.buffer,t.byteOffset,t.byteLength),!1);n.O();var r=n.Vt(n.At()),e=n.Vt(),s=new mh(new DataView(r.buffer,r.byteOffset,r.byteLength),!1),u=s.ci(),h=s.ci(),o=s.Vt();if(o.byteLength!=i.byteLength)return Promise.reject(null);for(var v=0;v<o.byteLength;v++)if(o[v]!=i[v])return Promise.reject(null);return q0(u,h).then(function(c){return Ai.subtle.verify(Nh,c,e,r)}).then(function(c){if(!c)throw new Mi(null);return u})}catch(c){return Promise.reject(c instanceof Mi?c.zt:c)}};wi.prototype={Xl:function(){return"idkey."+this.x+"."+this.y+"."+this.Au},Yl:function(t){try{var i=p0.U(1024);i.o(1);var n=i.l;i.Lt(0);var r=i.l;i.pi(this.x),i.pi(this.y),i.Yt(t);var e=i.l-r;return i.c.setUint16(n,e,i.Et),Ai.subtle.sign(Nh,this.privateKey,new Uint8Array(i.c.buffer,i.c.byteOffset+r,e)).then(function(s){return i.Ze(s),i._t()})}catch(s){return Promise.reject(s instanceof Mi?s.zt:s)}}};Sh.y_=wi});var Xi=O((i2,er)=>{var{httpUrl:Rh}=R(),kh=Q(),{Kt:Oh,Xe:C0,q:g0}=X(),{F:Th,wh:m0,Bn:N0}=j(),Ph=$n(),Ah=nr(),{RoomDataDetails:S0,RoomData:k0}=ge(),{yh:O0,qh:T0,J:R0}=li(),Mh=Ne();function P0(){try{return Mh.Jl().then(t=>[t.Xl(),t])}catch(t){return Promise.reject(t)}}function A0(t){try{return Mh.Wl(t)}catch(i){return Promise.reject(i)}}function M0(t){return"rgba("+[(t&16711680)>>>16,(t&65280)>>>8,t&255].join()+",255)"}function j0(t){var i=t.match(/rgba?[ \t]*\([ \t]*(\d+),[ \t]*(\d+),[ \t]*(\d+)[ \t]*\)/);if(!(i.length<4)){var n=parseInt(i[1]),r=parseInt(i[2]),e=parseInt(i[3]);if(!(n>255||r>255||e>255))return n<<16|r<<8|e}}function E0(t){var i;if(t?.includes(".")){if(i=t.split("."),i.length>4)return;for(;i.length<4;)i.splice(0,0,"");return i.reduce((s,u,h)=>{if(s!=null){var o=parseInt(u.length>0?u:"0");return isNaN(o)||o<0||o>255?null:(s|=o<<24-h*8,s)}},0)}if(t?.includes(":")){i=t.split(":");var n=t.indexOf("::");if(n!=t.lastIndexOf("::"))return;if(n>=0){var r=i.length;if(r>9)return;n=i.findIndex(s=>s.length==0),(n==0||n==r-2&&i[r-1].length==0)&&(i.splice(n,1),r--),i[n]="0";for(var e=0;e<8-r;e++)i.splice(n+1,0,"0")}return i.length!=8?void 0:i.reduce((s,u,h)=>{if(s!=null){var o=parseInt(u,16);if(!(isNaN(o)||o<0||o>65535))return s|=BigInt(o)<<112n-BigInt(h)*16n,s}},0n)}}function _0(t){var i=t?.__proto__.constructor.name,n,r;if(i=="BigInt"){var e={Ee:-1,o:0},s={Ee:-1,o:0};for(r=[],n=0;n<8;n++){var u=t&65535n;u==0?(s.o==0&&(s.Ee=7-n),s.o++,s.o>e.o&&(e.o=s.o,e.Ee=s.Ee)):s.o=0,r.splice(0,0,u.toString(16)),t>>=16n}e.o>0&&(n=e.Ee-e.o+1,r.splice(n,e.o-1),r[n]="");var h=r.join(":");return h.length==0?h="::":h.charAt(h.length-1)==":"?h+=":":h.charAt(0)==":"&&(h=":"+h),h}else if(i=="Number"){for(r=[],n=0;n<4;n++)r.splice(0,0,""+(t&255)),t>>=8;return r.join(".")}}function d0(t){if(t.length==43){for(var i=0n,n=0,r=252;n<43;n++,r-=6){var e=t.charCodeAt(n);if(e==45)e=0;else if(e==95)e=63;else if(e>=48&&e<=57)e-=47;else if(e>=65&&e<=90)e-=54;else if(e>=97&&e<=122)e-=60;else return;i|=BigInt(e)<<BigInt(r)}return i}}function B0(t){var i=t?.__proto__.constructor.name;if(i=="BigInt"){for(var n="",r=0;r<43;r++){if(i=Number(t&63n),i==0)i=45;else if(i==63)i=95;else if(i>=1&&i<=10)i+=47;else if(i>=11&&i<=36)i+=54;else if(i>=37&&i<=62)i+=60;else return;n=String.fromCharCode(i)+n,t>>=6n}return n}}function I0(t,i,n){return!((t^i)&n)}function G0(t){return t.pu()?null:R0.zs(t.Pl(),8)}function V0(t,i,n){return(n?16:0)|(t>0?8:t<0?4:0)|(i>0?2:i<0?1:0)}function L0(t){return{dirX:((t&8)>0)-((t&4)>0),dirY:((t&2)>0)-((t&1)>0),kick:(t&16)>0}}var U0=()=>Ah.of(Rh+"api/list","arraybuffer").then(t=>{t=new Th(new DataView(t),!1),t.O();for(var i=[];t.c.byteLength-t.l!=0;){var n=t.an(t.At()),r=t.fh(t.At());try{var e=new S0;e.a(new Th(new DataView(r),!1));var s=new k0;s.data=e,s.id=n,i.push(s)}catch{}}return i});function F0(t,i){let n=Math.PI/180;for(var r=t.lat,e=t.lon,s=0;s<i.length;s++){var u=i[s],{Me:h,je:o}=u.data,v=Math.cos(n*(h-r)),c=Math.cos(n*(h+r));u.ut=6378*Math.acos((v-c+(v+c)*Math.cos(n*(o-e)))/2),isFinite(u.ut)||(u.ut=22e3)}}var K0=()=>Ah.Fl(Rh+"api/geo").then(t=>({lat:t.lat,lon:t.lon,flag:t.code.toLowerCase()})),H0=(t,i,n=!0)=>!t&&n?null:(typeof t=="string"&&(t=JSON.parse(t)),{lat:t?.lat||i?.lat||40,lon:t?.lon||i?.lon||40,flag:t?.flag||i?.flag||"tr"});function J0(){return Ph.vu()}function W0(t,i){try{var n=new Ph;return n.Rl(t),n}catch(e){var r=e instanceof g0?e.zt:e;r instanceof SyntaxError?i(Oh(kh.StadiumParseSyntaxError,r.lineNumber)):r instanceof C0?i(r.Ws):i(Oh(kh.StadiumParseUnknownError,r))}}function Q0(t){return t.Ol()}function jh(t,i=1){if(i<=0){t();return}Promise.resolve().then(()=>{jh(t,i-1)})}er.y_=er.$l||(er.$l={generateAuth:P0,authFromKey:A0,getRoomList:U0,calculateAllRoomDistances:F0,numberToColor:M0,colorToNumber:j0,ipToNumber:E0,numberToIp:_0,authToNumber:d0,numberToAuth:B0,compareBits:I0,keyState:V0,reverseKeyState:L0,runAfterGameTick:jh,getGeo:K0,parseGeo:H0,stadiumChecksum:G0,parseStadium:W0,exportStadium:Q0,getDefaultStadiums:J0,promiseWithTimeout:m0,trimStringIfLonger:N0,hexStrToNumber:O0,byteArrayToIp:T0})});var Ih=O((n2,sr)=>{var{Event:Eh}=d(),{wu:X0,ve:Y0,Yh:$0,fs:Z0,yu:z0,ce:x0,pe:b0,os:D0,ls:a0,vs:t1,cs:_h,we:i1,ye:n1,ps:r1,qu:e1,ws:s1,ys:u1,Cu:h1,gu:f1,mu:o1,$h:l1,Nu:v1,Su:c1,ku:dh,CustomEvent:p1,BinaryCustomEvent:w1,qs:y1}=ui(),Bh=ht();sr.y_=sr.Zl||(sr.Zl={create:t=>{var i=Eh.nu.get(t);if(i){var n=Object.create(i.prototype);return n.L=0,n}},createFromStream:t=>Eh.nn(t,!0),checkConsistency:t=>$0.create(t),sendAnnouncement:(t,i=-1,n=0,r=1)=>X0.create(t,i,n,r),sendChatIndicator:t=>Y0.create(t?0:1),sendInput:t=>Z0.create(t),sendChat:t=>z0.create(t),joinRoom:(t,i,n,r,e,s)=>x0.create(t,i,n,r,e,s),setHeadlessAvatar:(t,i)=>c1.create(t,i),kickBanPlayer:(t,i,n)=>b0.create(t,i,n),reorderPlayers:(t,i)=>l1.create(t,i),startGame:()=>D0.create(),stopGame:()=>a0.create(),pauseResumeGame:t=>t1.create(t),setScoreLimit:t=>_h.create(0,t),setTimeLimit:t=>_h.create(1,t),setStadium:t=>i1.create(t),setPlayerTeam:(t,i)=>{var n=Bh.i[i];if(n)return n1.create(t,n)},setTeamsLock:t=>r1.create(t),setPlayerAdmin:(t,i)=>e1.create(t,i),autoTeams:()=>s1.create(),setPlayerSync:t=>u1.create(t),ping:t=>h1.create(t),setAvatar:t=>f1.create(t),setTeamColors:(t,i)=>{var n=Bh.i[t];if(n)return o1.create(n,i)},setKickRateLimit:(t,i,n)=>v1.create(t,i,n),setDiscProperties:(t,i)=>dh.create(t,!1,i),setPlayerDiscProperties:(t,i)=>dh.create(t,!0,i),customEvent:(t,i)=>p1.create(t,i),binaryCustomEvent:(t,i)=>w1.create(t,i),setPlayerIdentity:(t,i)=>y1.create(t,i)})});var Re=O((r2,Qh)=>{var{setTimeout:Gh,pako:Vh}=R(),ji=Q(),{Event:Lh}=d(),{Kt:Ei,Xe:q1,q:C1}=X(),{w:Se}=j(),Yi=ht(),{iu:g1}=Mr(),{wu:m1,ve:Uh,fs:N1,yu:ke,ce:S1,pe:Oe,os:k1,ls:O1,vs:T1,cs:Fh,we:R1,ye:P1,ps:A1,qu:Kh,ws:M1,ys:j1,gu:Te,$h:E1,Nu:Hh,mu:Jh,Su:_1,ku:Wh,CustomEvent:d1,BinaryCustomEvent:B1,qs:I1}=ui();function G1(t,i,n,r,e){var s=i.renderer,u=r;if(Object.defineProperty(this,"config",{get(){return u}}),Object.defineProperty(this,"sdp",{get(){return i.isHost?null:i.n?.r.et.Rt.remoteDescription.sdp}}),Object.defineProperty(this,"isHost",{get(){return i.isHost}}),Object.defineProperty(this,"currentPlayerId",{get(){return i.n?.r._i}}),Object.defineProperty(this,"currentPlayer",{get(){var f=i.n?.r._i;return i.n?.r.t.j.filter(l=>l.id==f)[0]}}),Object.defineProperty(this,"state",{get(){return i.n?.r?.t}}),Object.defineProperty(this,"stateExt",{get(){return i.n?.r?.t?.tt}}),Object.defineProperty(this,"gameState",{get(){return i.roomState?.s}}),Object.defineProperty(this,"gameStateExt",{get(){return i.roomState?.s?.tt}}),Object.defineProperty(this,"currentFrameNo",{get(){return i.n?.r?.m}}),Object.defineProperty(this,"banList",{get(){return i.n?.r?.Gt?.banList?.getList()}}),Object.defineProperty(this,"token",{get(){return i.n?.r?.Gt?._e},set(f){var l=i.n?.r?.Gt;l&&(l._e=f,l.ks(),i.n.pr=null,l.Mu=Gh(()=>{l.Os(),this._onRoomTokenChange?.(l._e)},2*l.vf))}}),Object.defineProperty(this,"requireRecaptcha",{get(){return i.n?.r?.Gt?.ju},set(f){i.n?.r?.Gt?.Eu(f)}}),Object.defineProperty(this,"name",{get:function(){return i.n?.r?.t.name}}),Object.defineProperty(this,"password",{get:function(){return i.n?.r?.oi}}),Object.defineProperty(this,"geo",{get:function(){return i.n?.r?.de}}),Object.defineProperty(this,"maxPlayerCount",{get:function(){var f=i.n?.r?.wr;return f==null?null:f+1}}),Object.defineProperty(this,"fakePassword",{get:function(){return i.n?.r?.yr}}),Object.defineProperty(this,"fixedPlayerCount",{get:function(){return i.n?.r?.Be}}),Object.defineProperty(this,"showInRoomList",{get:function(){return i.n?.r?.Ts}}),Object.defineProperty(this,"unlimitedPlayerCount",{get:function(){return i.n?.r?.qr}}),Object.defineProperty(this,"link",{get:function(){return i.n?.pr}}),Object.defineProperty(this,"timeLimit",{get:function(){return i.n?.r.t.Mt}}),Object.defineProperty(this,"scoreLimit",{get:function(){return i.n?.r.t.It}}),Object.defineProperty(this,"redScore",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.Oi}}),Object.defineProperty(this,"blueScore",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.ki}}),Object.defineProperty(this,"timeElapsed",{get:function(){var f=i.roomState?.s;return(f?.tt||f)?.bi}}),Object.defineProperty(this,"stadium",{get:function(){return i.n?.r.t.S}}),Object.defineProperty(this,"players",{get:function(){return i.n?.r.t.j}}),this.Mn=-1,this.libraries=n||[],this.librariesMap=this.libraries.reduce((f,l)=>(f[l.name]=l,f),{}),this.renderer=s,i.cf){let f=function(w,q,m){for(var S=0,T=0;S<w.length&&T<q.length;){for(;S<w.length&&T<q.length&&w[S]==q[T]&&w[S]!=m;)S++,T++;if(w[S]==m)break;for(;S<w.length&&T<q.length&&w[S]!=q[T]&&w[S]!=m;)S++;if(w[S]==m)break}q[T]!=m&&q.splice(T,0,m)},l=function(w){Object.defineProperty(h,w,{get(){return u[w]},set(q){u[w]=q}})},y=function(w){l(w+"Before"),l(w),l(w+"After")};var p=f,C=l,N=y;this.plugins=e||[],this.pluginsMap=this.plugins.reduce((w,q)=>(w[q.name]=q,w),{}),this.activePlugins=this.plugins.filter(w=>w.active);var h=this;this.setConfig=function(w){var q=u;q.finalize?.(),q.room=null,w=w||{},w.room=h,w.initialize?.(),h.client.config=w,u=w,h._onConfigUpdate?.(q,w)},this.mixConfig=function(w){Object.keys(w).forEach(q=>{var m=w[q];if(typeof m=="function"){var S=u[q];S?typeof S=="function"&&(u[q]=function(...T){S(...T),m(...T)}):u[q]=m}})},this.setRenderer=function(w){s&&(s.finalize?.(),s.room=null),w&&(w.room=h,w.initialize?.());var q=s;h.renderer=w,h.client.renderer=w,i.renderer=w,s=w,h._onRendererUpdate?.(q,w)},this.setPluginActive=function(w,q){var m=h.plugins.filter(T=>T.name==w)[0],S;if(!(!m||m.active==q))if(q){if(S=h.activePlugins.findIndex(T=>T.name==w),S>=0)return;f(h.plugins,h.activePlugins,m),m.active=q,h._onPluginActiveChange?.(m)}else{if(S=h.activePlugins.findIndex(T=>T.name==w),S<0)return;m.active=q,h._onPluginActiveChange?.(m),h.activePlugins.splice(S,1)}},this._modifyPlayerData=function(w,q,m,S,T,M){var A=[q,m,S],z;return u.modifyPlayerDataBefore&&([A,z]=u.modifyPlayerDataBefore(w,A[0],A[1],A[2],T,M)),z!==!1&&(h.activePlugins.forEach(a=>{a.modifyPlayerData&&A&&(A=a.modifyPlayerData(w,A[0],A[1],A[2],T,M,z))}),u.modifyPlayerData&&A&&(A=u.modifyPlayerData(w,A[0],A[1],A[2],T,M,z)),u.modifyPlayerDataAfter&&A&&(A=u.modifyPlayerDataAfter(w,A[0],A[1],A[2],T,M,z))),A},y("modifyPlayerData"),this._modifyPlayerPing=function(w,q){var m;return u.modifyPlayerPingBefore&&([q,m]=u.modifyPlayerPingBefore(w,q)),m!==!1&&(h.activePlugins.forEach(S=>{S.modifyPlayerPing&&(q=S.modifyPlayerPing(w,q,m))}),u.modifyPlayerPing&&(q=u.modifyPlayerPing(w,q,m)),u.modifyPlayerPingAfter&&(q=u.modifyPlayerPingAfter(w,q,m))),q},y("modifyPlayerPing"),this._modifyClientPing=function(w){var q;return u.modifyClientPingBefore&&([w,q]=u.modifyClientPingBefore(w)),q!==!1&&(h.activePlugins.forEach(m=>{m.modifyClientPing&&(w=m.modifyClientPing(w,q))}),u.modifyClientPing&&(w=u.modifyClientPing(w,q)),u.modifyClientPingAfter&&(w=u.modifyClientPingAfter(w,q))),w},y("modifyClientPing"),this._modifyFrameNo=function(w){var q;return u.modifyFrameNoBefore&&([w,q]=u.modifyFrameNoBefore(w)),q!==!1&&(h.activePlugins.forEach(m=>{m.modifyFrameNo&&(w=m.modifyFrameNo(w,q))}),u.modifyFrameNo&&(w=u.modifyFrameNo(w,q)),u.modifyFrameNoAfter&&(w=u.modifyFrameNoAfter(w,q))),w},y("modifyFrameNo"),this._onOperationReceived=function(w,q,m,S){var T=u.onBeforeOperationReceived&&u.onBeforeOperationReceived(w,q,m,S),M=T!==!1;return h.activePlugins.forEach(A=>{M&&A.onOperationReceived&&!A.onOperationReceived(w,q,m,S,T)&&(M=!1)}),M&&u.onOperationReceived&&!u.onOperationReceived(w,q,m,S,T)&&(M=!1),M&&u.onAfterOperationReceived&&!u.onAfterOperationReceived(w,q,m,S,T)&&(M=!1),M},l("onBeforeOperationReceived"),l("onOperationReceived"),l("onAfterOperationReceived");var o=function(w,q){h["_on"+w]=function(...m){var S=u["onBefore"+w],T=S&&S(...m);T!==!1&&(h.activePlugins.forEach(M=>{S=M["on"+w],S&&S(...m,T)}),S=u["on"+w],S&&S(...m,T),S=s&&s["on"+w],S&&S(...m,T),S=u["onAfter"+w],S&&S(...m,T))},l("onBefore"+w),l("on"+w),l("onAfter"+w)};g1.forEach(({name:w,metadata:q})=>{o(w,q)})}this.setProperties=function(f){i.isHost&&i.n?.zl?.(f)},this.setKickRateLimit=function(f,l,y){var w=Hh.create(f,l,y);i.W(w)!=!1&&i.n?.r._(w)},this.executeEvent=function(f,l){i.W(f,void 0,l)!=!1&&i.n?.r?._(f)},this.clearEvents=function(){var f=i.n?.r?.rn;f&&(f.list.length=0)},this.sendCustomEvent=function(f,l,y){var w=i.n?.r;if(!(!w?.t||y!=null&&!w.t.getPlayer(y)?.en)){var q=d1.create(f,l);i.W(q,y)!=!1&&(this.isHost?y!=null?i.Cr.then(function(){w.gr(q,y)}):w.Rs(q,0,!0):w._u&&w._(q))}},this.sendBinaryCustomEvent=function(f,l,y){var w=i.n?.r;if(!(!w?.t||y!=null&&!w.t.getPlayer(y)?.en)){var q=B1.create(f,l);i.W(q,y)!=!1&&(this.isHost?y!=null?i.Cr.then(function(){w.gr(q,y)}):w.Rs(q,0,!0):w._u&&w._(q))}},this.setPlayerIdentity=function(f,l,y){var w=i.n?.r;if(!(!w?.t||y!=null&&!w.t.getPlayer(y)?.en)){var q=I1.create(f,l);i.W(q,y)!=!1&&(this.isHost?y!=null?i.Cr.then(function(){w.gr(q,y)}):w.Rs(q,0,!0):w._u&&w._(q))}},this.setHandicap=function(f){i.n?.r.il(f)},this.setExtrapolation=function(f){h.client.st.li.setValue("extrapolation",f),i.n?.r.Ah(f)},this.clearBan=function(f){i.isHost&&i.n?.r.xl(f)},this.clearBans=function(){i.isHost&&i.n?.r.bl()},this.addPlayerBan=function(f){if(i.isHost){var l=i.n?.r.t.j.filter(y=>y.id==f)[0];if(l)return i.n?.r.Dl(l)}},this.addIpBan=function(...f){if(i.isHost)return i.n?.r.al(...f)},this.addAuthBan=function(...f){if(i.isHost)return i.n?.r.tv(...f)},this.removeBan=function(f){if(i.isHost)return i.n?.r.iv(f)},this.setAvatar=function(f){f=f?.substr(0,2)||"",h.client.st.li.setValue("avatar",f);var l=Te.create(f);i.W(l)!=!1&&i.n?.r._(l)},this.setPlayerAvatar=function(f,l,y){if(!(!i.isHost&&(y||f!=i.n.r._i))){var w=y?_1.create(f,l):Te.create(l);i.W(w,void 0,y?0:f)!=!1&&i.n?.r._(w)}},this.reorderPlayers=function(f,l){var y=E1.create(f,l);i.W(y)!=!1&&i.n?.r._(y)},this.setChatIndicatorActive=function(f){var l=Uh.create(f?0:1);i.W(l)!=!1&&i.n?.r._(l)},this.setTeamColors=function(f,l,...y){var w=Jh.createFromData(f,l,...y);i.W(w)!=!1&&i.n?.r._(w)},this.setUnlimitedPlayerCount=function(f){i.n?.nv?.(f)},this.setFakePassword=function(f){i.n?.rv?.(f)};var v=function(f,l){var y=i.n?.r;if(y){var w=ke.create(f);i.W(w,l)!=!1&&(l!=null?i.Cr.then(function(){y.gr(w,l)}):y._(w))}};this.sendChat=function(f,l){if(i.isHost)v(f,l);else{var y=i.n?.r;if(!y)return;var w=ke.create(f);i.W(w)!=!1&&y._(w)}},this.sendChatIndicator=function(f){i.n?.ev(f)},this.sendAnnouncement=function(f,l,y,w,q){if(i.isHost){var m=i.n?.r;if(m){w={bold:1,italic:2,small:3,"small-bold":4,"small-italic":5}[w],w==null&&(w=0),y==null&&(y=-1),q==null&&(q=1);var S=m1.create(f,y,w,q);i.W(S,l)!=!1&&(l!=null?i.Cr.then(function(){m.gr(S,l)}):m._(S))}}},this.setDiscProperties=function(f,l){if(i.isHost){var y=i.n?.r;if(y){var w=Wh.create(f,!1,l);i.W(w)!=!1&&y._(w)}}},this.setPlayerDiscProperties=function(f,l){if(i.isHost){var y=i.n?.r;if(y){var w=Wh.create(f,!0,l);i.W(w)!=!1&&y._(w)}}},this.getKeyState=function(){return i.keyState},this.setKeyState=function(f){h.Mn<0?i.keyState=f:(f&16)>0&&(i.keyState&16)>0&&!h.currentPlayer?.Ci?(i.keyState=f&-17,Gh(()=>{i.keyState=f},h.Mn)):i.keyState=f},this.startGame=function(){i.n?.sv()},this.stopGame=function(){i.n?.uv()},this.pauseGame=function(){i.n?.hv()},this.autoTeams=function(){i.n?.fv()},this.lockTeams=function(){i.n?.ov(!i.roomState?.fn)},this.isGamePaused=function(){return i.roomState?.s?.xt==120},this.resetTeams=function(){Yi.i.forEach((f,l)=>l>0&&i.n?.pf(f))},this.startRecording=function(){return i.n?.wf(!0)},this.stopRecording=function(){return i.n?.wf(!1)},this.isRecording=function(){return i.n?.Xn!=null},this.randTeams=function(){i.n?.lv()},this.setSync=function(f){i.n?.r?.t.tf(f)},this.leave=function(){i.n?.du()},this.setCurrentStadium=function(f,l){try{i.n?.vv(f)}catch(w){var y=w instanceof C1?w.zt:w;y instanceof SyntaxError?l(Ei(ji.StadiumParseSyntaxError,y.lineNumber)):y instanceof q1?l(y.Ws):l(Ei(ji.StadiumParseUnknownError,y))}},this.setTimeLimit=function(f){i.n?.cv(f)},this.setScoreLimit=function(f){i.n?.pv(f)},this.changeTeam=function(f){i.n?.yf(i.n?.r._i,Yi.i[f])},this.resetTeam=function(f){i.n?.pf(Yi.i[f])},this.setPlayerTeam=function(f,l){i.n?.yf(f,Yi.i[l])},this.setPlayerAdmin=function(f,l){var y=Kh.create(f,l);i.W(y)!=!1&&i.n?.r?._(y)},this.kickPlayer=function(f,l,y){var w=Oe.create(f,l||"",y);i.W(w)!=!1&&i.n?.r?._(w)},this.fakePlayerJoin=function(f,l,y,w,q,m){var S=S1.create(f,l,y,w,q,m);i.W(S)!=!1&&i.n?.r?._(S)},this.fakePlayerLeave=function(f){var l=i.n?.r.t.getPlayer(f);if(l){var y=Oe.create(f,null,!0);return i.W(y)!=!1&&i.n?.r?._(y),{id:l.id,name:l.name,flag:l.Tt,avatar:l.gt,conn:l.kn,auth:l.Qt}}};function c(f,l){i.W(l,void 0,f)!=!1&&i.n?.r?._(l)}this.fakeSendPlayerInput=function(f,l){c(l,N1.create(f))},this.fakeSendPlayerChat=function(f,l){c(l,ke.create(f))},this.fakeSetPlayerChatIndicator=function(f,l){c(l,Uh.create(f?0:1))},this.fakeSetPlayerAvatar=function(f,l){c(l,Te.create(f))},this.fakeSetStadium=function(f,l){c(l,R1.create(f))},this.fakeStartGame=function(f){c(f,k1.create())},this.fakeStopGame=function(f){c(f,O1.create())},this.fakeSetGamePaused=function(f,l){c(l,T1.create(f))},this.fakeSetScoreLimit=function(f,l){c(l,Fh.create(0,f))},this.fakeSetTimeLimit=function(f,l){c(l,Fh.create(1,f))},this.fakeSetTeamsLock=function(f,l){c(l,A1.create(f))},this.fakeAutoTeams=function(f){c(f,M1.create())},this.fakeSetPlayerTeam=function(f,l,y){var w=Yi.i[l];w&&c(y,P1.create(f,w))},this.fakeSetKickRateLimit=function(f,l,y,w){c(w,Hh.create(f,l,y))},this.fakeSetTeamColors=function(f,l,y,w){c(w,Jh.createFromData(f,l,...y))},this.fakeSetPlayerAdmin=function(f,l,y){c(y,Kh.create(f,l))},this.fakeKickPlayer=function(f,l,y,w){c(w,Oe.create(f,l,y))},this.fakeSetPlayerSync=function(f,l){c(l,j1.create(f))},this.getPlayer=function(f){return i.n?.r.t.j.filter(l=>l.id==f)[0]},this.getBall=function(f=!0){var l=i.roomState?.s;return(f?l?.tt:l)?.v.p[0]},this.getDiscs=function(f=!0){var l=i.roomState?.s;return(f?l?.tt:l)?.v.p},this.getDisc=function(f,l=!0){var y=i.roomState?.s;return(l?y?.tt:y)?.v.p[f]},this.getPlayerDisc=function(f,l=!0){var y=i.roomState?.s,w=(l?y?.tt:y)?.v.p,q=i.roomState?.S.p;if(!(!w||!q)){for(var m=q.length;m<w.length;m++)if(w[m].B==f)return w[m]}},this.getPlayerDisc_exp=function(f){return i.roomState?.j.filter(l=>l.id==f)[0]?.d},this.takeSnapshot=function(){var f=i.n?.r?.t;if(f)return f.copy()},this.exportStadium=function(){var f=i.n?.r?.t;if(f)return f.exportStadium()},this.createVertex=function(f){var l=i.n?.r?.t;if(l)return l.createVertex(f)},this.createSegment=function(f){var l=i.n?.r?.t;if(l)return l.createSegment(f)},this.createSegmentFromObj=function(f){var l=i.n?.r?.t;if(l)return l.createSegmentFromObj(f)},this.createGoal=function(f){var l=i.n?.r?.t;if(l)return l.createGoal(f)},this.createPlane=function(f){var l=i.n?.r?.t;if(l)return l.createPlane(f)},this.createDisc=function(f){var l=i.n?.r?.t;if(l)return l.createDisc(f)},this.createJoint=function(f){var l=i.n?.r?.t;if(l)return l.createJoint(f)},this.createJointFromObj=function(f){var l=i.n?.r?.t;if(l)return l.createJointFromObj(f)},this.addVertex=function(f){var l=i.n?.r?.t;if(l)return l.addVertex(f)},this.addSegment=function(f){var l=i.n?.r?.t;if(l)return l.addSegment(f)},this.addGoal=function(f){var l=i.n?.r?.t;if(l)return l.addGoal(f)},this.addPlane=function(f){var l=i.n?.r?.t;if(l)return l.addPlane(f)},this.addDisc=function(f){var l=i.n?.r?.t;if(l)return l.addDisc(f)},this.addJoint=function(f){var l=i.n?.r?.t;if(l)return l.addJoint(f)},this.addSpawnPoint=function(f){var l=i.n?.r?.t;if(l)return l.addSpawnPoint(f)},this.addPlayer=function(f){var l=i.n?.r?.t;if(l)return l.addPlayer(f)},this.findVertexIndicesOfSegmentObj=function(f){var l=i.n?.r?.t;if(l)return l.findVertexIndicesOfSegmentObj(f)},this.findVertexIndicesOfSegment=function(f){var l=i.n?.r?.t;if(l)return l.findVertexIndicesOfSegment(f)},this.updateVertex=function(f,l){var y=i.n?.r?.t;if(y)return y.updateVertex(f,l)},this.updateSegment=function(f,l){var y=i.n?.r?.t;if(y)return y.updateSegment(f,l)},this.updateGoal=function(f,l){var y=i.n?.r?.t;if(y)return y.updateGoal(f,l)},this.updatePlane=function(f,l){var y=i.n?.r?.t;if(y)return y.updatePlane(f,l)},this.updateDisc=function(f,l){var y=i.n?.r?.t;if(y)return y.updateDisc(f,l)},this.updateDiscObj=function(f,l){var y=i.n?.r?.t;if(y)return y.updateDiscObj(f,l)},this.updateJoint=function(f,l){var y=i.n?.r?.t;if(y)return y.updateJoint(f,l)},this.updateSpawnPoint=function(f,l,y){var w=i.n?.r?.t;if(w)return w.updateSpawnPoint(f,l,y)},this.updatePlayer=function(f,l){var y=i.n?.r?.t;if(y)return y.updatePlayer(f,l)},this.removeVertex=function(f){var l=i.n?.r?.t;if(l)return l.removeVertex(f)},this.removeSegment=function(f){var l=i.n?.r?.t;if(l)return l.removeSegment(f)},this.removeGoal=function(f){var l=i.n?.r?.t;if(l)return l.removeGoal(f)},this.removePlane=function(f){var l=i.n?.r?.t;if(l)return l.removePlane(f)},this.removeDisc=function(f){var l=i.n?.r?.t;if(l)return l.removeDisc(f)},this.removeJoint=function(f){var l=i.n?.r?.t;if(l)return l.removeJoint(f)},this.removeSpawnPoint=function(f,l){var y=i.n?.r?.t;if(y)return y.removeSpawnPoint(f,l)},this.removePlayer=function(f){var l=i.n?.r?.t;if(l)return l.removePlayer(f)},this.updateStadiumPlayerPhysics=function(f){var l=i.n?.r?.t;if(l)return l.updateStadiumPlayerPhysics(f)},this.updateStadiumBg=function(f){var l=i.n?.r?.t;if(l)return l.updateStadiumBg(f)},this.updateStadiumGeneral=function(f){var l=i.n?.r?.t;if(l)return l.updateStadiumGeneral(f)},this.updatePlugin=function(f,l){var y=h.plugins[f];if(!y)throw Ei(ji.PluginNotFoundError,f);var{name:w,active:q}=y;if(w!=l.name)throw Ei(ji.PluginNameChangeNotAllowedError);q&&h.setPluginActive(w,!1),y.finalize?.(),y.room=null,h.plugins[f]=l,h.pluginsMap[w]=l,l.room=h,l.initialize?.(),h._onPluginUpdate?.(y,l),q&&(l.active=!1,h.setPluginActive(w,!0))},this.updateLibrary=function(f,l){var y=h.libraries[f];if(!y)throw Ei(ji.LibraryNotFoundError,f);var{name:w}=y;if(w!=l.name)throw Ei(ji.LibraryNameChangeNotAllowedError);y.finalize?.(),y.room=null,h.libraries[f]=l,h.librariesMap[w]=l,l.room=h,l.initialize?.(),h._onLibraryUpdate?.(y,l)},t?.(this),i.cf&&(this.libraries.forEach(f=>{f.room=h,f.initialize?.()}),u.room=h,u.initialize?.(),s&&(s.room=h,s.initialize?.()),this.plugins.forEach(f=>{f.room=h,f.initialize?.()}),this.activePlugins.forEach(f=>{h._onPluginActiveChange?.(f)})),this.startStreaming=({immediate:f=!0,onClientCount:l,emitData:y})=>{var w=i.n?.r;if(!(!i.isHost||h.isRecording()||!w||w.ni)){var q=new Map,m=Se.U(16384),S=0;return{onSuccess:()=>{w.ni=function(T){if(f){m.o(2),m.Nt(w.m),m.Lt(T.i),Lh.Nn(T,m),y?.(m._t()),m.l=0;return}var M=q.get(w.m);M||(M=[],q.set(w.m,M)),M.push(T)}},onDataReceived:T=>{T=new DataView(T.buffer,T.byteOffset,T.byteLength);var M=T.getUint8(0),A=T.getUint16(1);switch(M){case 0:{S=A,l?.(A);break}case 1:{M=Se.U(),M.o(1),M.Lt(A),A=Se.U(),i.n.r.wv(A),M.Yt(Vh.deflateRaw(A._t())),y?.(M._t());break}}},interval:()=>{for(var T=q.keys(),M=T.next(),A=w.m;!M.done;){var z=M.value,a=q.get(z);m.Lt(A-z),m.Lt(a.length),a.forEach(it=>{m.Lt(it.i),Lh.Nn(it,m)}),M=T.next()}q.clear();var ut=m._t();if(m.l=0,S!=0){ut=Vh.deflateRaw(ut);var H=new Uint8Array(ut.byteLength+5),B=new DataView(H.buffer,H.byteOffset,H.byteLength);B.setUint8(0,0),B.setUint32(1,A),H.set(ut,5),y?.(H)}}}}},this.stopStreaming=()=>{var f=i.n?.r;!i.isHost||h.isRecording()||!f?.ni||(f.ni=null)}}Qh.y_=G1});var Pe=O((e2,ur)=>{var{backend:Xh,qi:V1,wn:L1,Hs:U1,E:F1}=R(),{parseGeo:K1}=Xi();function H1(t,i){return(Xh.secure?"https":"http")+"://"+Xh.hostname+"/play?c="+t+(i?"&p=1":"")}function J1(t){var i=t?.li;!i&&(i=t.li={}),i.setValue=(s,u)=>{i[s]=u,i.onValueSet?.(s,u)};var n=i.crappy_router||!1;n!=i.crappy_router&&i.setValue("crappy_router",n),n=i.extrapolation||0,n!=i.extrapolation&&i.setValue("extrapolation",n),n=i.player_name||"abc",n!=i.player_name&&i.setValue("player_name",n),n=i.avatar||null,n!=i.avatar&&i.setValue("avatar",n);var r={lat:40,lon:40,flag:"tr"};if(!i.geo)i.setValue("geo",r);else{var e=i.geo;n=K1(e,r),(e.lat!=n.lat||e.lon!=n.lon||e.flag!=n.flag)&&i.setValue("geo",n)}}function W1(t){var i=t.st={customClientIds:new Set,n:null,roomState:null,Hc:null,isHost:!1,createRoom:null,Cr:Promise.resolve(),keyState:0,renderer:t.renderer,li:t.li,cf:!t.qf,onOperationReceived:function(n,r,e){var s=t.room._onOperationReceived;if(!s)return!0;var u=n.eventType;return u==null?!0:s(u,n,r,e)},W:function(n,r,e){if(i.isHost)return n.i=e||0,n.ns=r,i.onOperationReceived(n,i.n?.r.m,null)}};return t.st=i,i}function Yh(){this.Ft=9,this.qi=null,this.wn=null,this.qf=!1,this.Mn=-1,this.renderer=null,this.config={},this.libraries=[],this.plugins=[],this.Bu=null,this.Iu=null,this.Gu=null,this.Vu=null,this.Cf=null,this.gf=null,this.Ps=null,this.mr=null,this.Ie=null,this.li=null}function Q1(t){var i=new Yh;return i.Ft=t.version==null?U1:t.version,i.qi=t.proxyAgent||V1,i.wn=t.identityToken||L1,i.qf=t.noPluginMechanism,i.Mn=t.kickTimeout||-1,i.renderer=t.renderer,i.config=t.config||{},i.libraries=t.libraries||[],i.plugins=t.plugins||[],i.Bu=t.preInit,i.Iu=t.onSuccess,i.Gu=t.onFailure,i.Vu=t.onLeave,i.Cf=t.onConnectionStateChange,i.gf=t.onReverseConnection,i.Ps=t.onRequestRecaptcha,i.mr=t.cancel,i.Ie=t.useRecaptchaToken,i.li=t.storage,J1(i),i}F1(Yh,["version","proxyAgent","identityToken","noPluginMechanism","kickTimeout","renderer","config","libraries","plugins","preInit","onSuccess","onFailure","onLeave","onConnectionStateChange","onReverseConnection","onRequestRecaptcha","cancel","useRecaptchaToken","storage"],[]);ur.y_=ur.yv||(ur.yv={roomLink:H1,mf:W1,Nf:Q1})});var je=O((s2,hr)=>{var{setTimeout:X1,clearTimeout:zh,console:Ae,performance:Me}=R(),{q:Y1}=X(),$h=Q(),{hh:Zh}=qi(),$1=t=>(Ae.warn(Zh($h.NoProxyIdentityProblem)||"NoProxyIdentityProblem"),t=Zh($h.NoProxyIdentitySolution),t&&Ae.warn(t));function xh(t){this.qv=1e4,this.Yn=!0;var i=this;t.Sf(),this.Rt=t.Rt,this.jn=t.jn,this.Ge=t.Ge,this.$n=t.$n,this.kf=Me.now();var n=null;n=function(){var s=i.qv-i.Cv();0>=s?i.rt():(zh(i.Of),s=X1(n,s+1e3),i.Of=s)},n(),this.Rt.oniceconnectionstatechange=function(){var s=i.Rt.iceConnectionState;s!="closed"&&s!="failed"||i.rt()},t=0;for(var r=this.jn;t<r.length;){var e=r[t];++t,e.onmessage=function(s){i.Yn&&(i.kf=Me.now(),i.As!=null&&i.As(s.data))},e.onclose=function(){i.rt()}}}xh.prototype={Cv:function(){return Me.now()-this.kf},vi:function(t,i){if(this.Yn){var n=this.jn[t];if(n.readyState=="open"){var r=i.$e();try{n.send(r)}catch(e){Ae.log(e instanceof Y1?e.zt:e)}}}},rt:function(){zh(this.Of),this.Yn&&(this.Yn=!1,this.Rt.close(),this.Ve!=null&&this.Ve())}};hr.y_=hr.gv||(hr.gv={Tf:[{name:"ro",reliable:!0,Lu:!0},{name:"ru",reliable:!0,Lu:!1},{name:"uu",reliable:!1,Lu:!1}],Rf:$1,Pf:xh})});var Ee=O((u2,ah)=>{var{setTimeout:bh,clearTimeout:Dh,console:Z1,RTCPeerConnection:z1,E:x1}=R(),{wh:b1}=j();function $i(t,i,n){this.Nr=null,this.$n=null,this.Ge=[],this.Af=0,this.Mf=!1,this.Ms=[],this.jn=[],this.Rt=i&&new z1({iceServers:i},$i.mv);var r=this;if(this.Uu=new Promise(function(e){r.Nv=e}),this.id=t,i)for(this.Rt.onicecandidate=function(e){e.candidate==null?r.Nv(r.Ms):(e=e.candidate,e.candidate!=null&&e.candidate!=""&&(r.js!=null&&r.js(e),r.Ms.push(e)))},i=0;i<n.length;)this.Sv(n[i++])}$i.mv={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};$i.prototype={Fu:function(t){t==null&&(t=1e4),Dh(this.Nr),this.Nr=bh(this.kv.bind(this),t)},Ov:function(t,i){var n=this;this.jf(this.Rt.setRemoteDescription(t).then(function(){return n.Rt.createAnswer()}),i,500)},Tv:function(){this.jf(this.Rt.createOffer(),[],1e3)},jf:function(t,i,n){var r=this;t.then(function(e){return r.Rt.setLocalDescription(e).then(function(){return e})}).then(function(e){function s(){return e}for(var u=0;u<i.length;)r.Ef(i[u++]);return b1(r.Uu,n).then(s,s)}).then(function(e){r.Ku(e)}).catch(function(e){Z1.log(e),r.Es()})},Sv:function(t){var i=this,n={id:this.jn.length,negotiated:!0,ordered:t.Lu};t.reliable||(n.maxRetransmits=0),t=this.Rt.createDataChannel(t.name,n),t.binaryType="arraybuffer",t.onopen=function(){for(var r=0,e=i.jn;r<e.length;)if(e[r++].readyState!="open")return;i.Zn!=null&&i.Zn()},t.onclose=function(){i.Es()},t.onmessage=function(){i.Es()},this.jn.push(t)},Ef:function(t){var i=this;bh(function(){return i.Rt.addIceCandidate(t)},this.Af)},kv:function(){this.Es()},Es:function(){this.En!=null&&this.En(),this.rt()},rt:function(){this.Sf(),this.Rt.close()},Sf:function(){Dh(this.Nr),this.Ku=this.Zn=this.js=this.En=null,this.Rt.onicecandidate=null,this.Rt.ondatachannel=null,this.Rt.onsignalingstatechange=null,this.Rt.oniceconnectionstatechange=null;for(var t=0,i=this.jn;t<i.length;){var n=i[t];++t,n.onopen=null,n.onclose=null,n.onmessage=null}}};x1($i,[null,null,null,null,null,null,null,null,null,"id"],[]);ah.y_=$i});var nf=O((h2,tf)=>{var{E:_e}=R(),{yh:D1}=li(),lt=gr(),{ipToNumber:gt,numberToIp:a1,compareBits:tp}=Xi(),fr=340282366920938463463374607431768211455n;function Zi(){this.ipv6=!1,this.value=null,this.mask=null}Zi.create=function(t,i){if(t==null)return;let n=new Zi,r=t.__proto__.constructor.name;return n.ipv6=r=="BigInt",n.value=t,n.mask=r!=i?.__proto__.constructor.name?n.ipv6?fr:-1:i,n};function fi(){this.id=null,this.type=null,this.value=null}fi.create=function(t,i,n){var r=new fi;return r.id=t,r.type=i,r.value=n,r};fi.prototype={_s:function(){var t=new fi;return t.id=this.id,t.type=this.type,t.value=this.value._s?this.value._s():this.value,t}};function _i(){this.Le=null,this.Hu=null,this.ips=null,this.Qt=null}_i.create=function(t,i,n,r){var e=new _i;return e.Le=t,e.Hu=i,e.ips=n,e.Qt=r,e};_i.prototype={_s:function(){var t=new _i;return t.Le=this.Le,t.Hu=this.Hu,t.ips=this.ips,t.Qt=this.Qt,t}};function ip(t){var i=[],n=1,r=new Set,e=[];this.addPlayer=h=>{var o=t.Kn.get(h?.id)?.et;if(!(!o||i.findIndex(c=>c.type==lt.Player&&c.value.Le==h.id)>-1)){var v=[];return o.$n&&v.push(D1(o.$n)),o.Ge.forEach(c=>{v.includes(c)||v.push(c)}),v.forEach(c=>{var p=gt(c);p&&e.push(Zi.create(p))}),r.add(h.Qt),i.push(fi.create(n,lt.Player,_i.create(h.id,h.name,v,h.Qt))),n++}},this.addIp=(...h)=>h.map(o=>{var v=typeof o;if(v=="string")o={ip:o};else if(v!="object")return;var c=gt(o.ip);if(c==null)return;let p=c.__proto__.constructor.name=="BigInt";var C=gt(o.mask);c.__proto__.constructor.name!=C?.__proto__.constructor.name&&(C=p?fr:-1,o.mask=a1(C));for(var N=0;N<i.length;N++){let f=i[N];if(f.type==lt.IP&&c==gt(f.value.ip)&&C==gt(f.value.mask))return}return e.push(Zi.create(c,C)),i.push(fi.create(n,lt.IP,o)),n++}),this.addAuth=(...h)=>h.map(o=>{if(!r.has(o))return i.push(fi.create(n,lt.Auth,o)),r.add(o),n++}),this.checkIp=h=>{let o=gt(h);if(o==null)return!1;let v=o.__proto__.constructor.name=="BigInt";for(var c=0;c<e.length;c++){let p=e[c];if(v==p.ipv6&&tp(o,p.value,p.mask))return!0}return!1},this.checkAuth=h=>r.has(h);let s=(h,o)=>{let v=gt(h);if(v==null)return;let c=v.__proto__.constructor.name=="BigInt";var p=gt(o);p==null&&(p=c?fr:-1);let C=p==(c?fr:-1);for(var N=[],f=0;f<e.length;f++){let l=e[f];c==l.ipv6&&v==l.value&&p==l.mask&&N.push(f)}for(;N.length>0;)e.splice(N.pop(),1);for(N.length=0,i.forEach((l,y)=>{C&&l.type==lt.Player&&l.value.ips.findIndex(w=>gt(w)==v)>-1?(l.type=lt.Auth,l.value=l.value.Qt):l.type==lt.IP&&v==gt(l.value.ip)&&p==gt(l.value.mask)&&N.push(y)});N.length>0;)i.splice(N.pop(),1)},u=h=>{r.delete(h);var o=[],v=[];for(i.forEach((c,p)=>{c.type==lt.Player&&h==c.value.Qt?(v.splice(v.length,0,...c.value.ips),o.push(p)):c.type==lt.Auth&&h==c.value&&o.push(p)});o.length>0;)i.splice(o.pop(),1);this.addIp(...v)};this.remove=h=>{var o=i.findIndex(p=>p.id==h);if(o<0)return!1;var{type:v,value:c}=i.splice(o,1)[0];switch(v){case lt.Player:c.ips.forEach(p=>{s(p)}),u(c.Qt);break;case lt.IP:s(c.ip,c.mask);break;case lt.Auth:u(c);break}return!0},this.removePlayer=h=>{var o=i.findIndex(c=>c.type==0&&c.value?.Le==h);if(o<0)return!1;var{value:v}=i.splice(o,1)[0];return v.ips.forEach(c=>{s(c)}),u(v.Qt),!0},this.clear=()=>{r.clear(),e.length=0,i.length=0},this.getList=()=>i.map(h=>h._s())}_e(Zi,["ipv6","value","mask"],[]);_e(fi,["id","type","value"],[]);_e(_i,["pId","pName","ips","auth"],[]);tf.y_=ip});var pf=O((o2,cf)=>{var ff=Q(),{proxy:zi,backend:rf,wn:f2,setTimeout:xi,clearTimeout:or,setInterval:np,clearInterval:ef,console:rp,WebSocket:sf,performance:vr,pako:cr,RTCIceCandidate:uf,RTCSessionDescription:ep,E:de}=R(),{Event:lr}=d(),{Kt:of,q:st}=X(),{qh:sp,J:up}=li(),{Tf:hp,Rf:fp,Pf:op}=je(),lp=Ee(),lf=ki(),vp=nf(),{D:hf,F:di,w:D,Nt:vf,extend:cp}=j(),pp=nr(),wp=Ne(),{Yh:yp,we:qp,CustomEvent:Cp,BinaryCustomEvent:gp,qs:mp}=ui();function Bi(t,i,n,r,e){this.haxball=t,this.ju=!1,this.Sr=!1,this.ds=!1,this.cn=null,this.id="",this.Rv=5e4,this.vf=1e4,this.zn=new Map,this.Pv=i,this.Av=n,this.Mv=r,this._e=e||"",i&&this.Os()}Bi._f=function(t){try{if(t=t.candidate.split(" "),t[6]!="typ")throw new st(null);if(t[7]=="srflx")return t[4]}catch{}return null};Bi.prototype={rt:function(){if(or(this.Mu),or(this.kr),this.kr=null,ef(this.df),this.X!=null)try{this.X.onmessage=null,this.X.onerror=null,this.X.onclose=null,this.X.onopen=null,this.X.close(),this.X=null}catch{}this.Bf()},Ju:function(t){var i=this;if(this.cn!=null||t!=null){if(this.cn!=null&&t!=null&&this.cn.byteLength==t.byteLength){for(var n=new Uint8Array(this.cn),r=new Uint8Array(t),e=!1,s=0,u=this.cn.byteLength;s<u;){var h=s++;if(n[h]!=r[h]){e=!0;break}}if(!e)return}this.cn=t.slice(0),this.ds=!0,this.X!=null&&this.X.readyState==1&&this.kr==null&&(this.Wu(),this.kr=xi(function(){i.kr=null,i.X.readyState==1&&i.ds&&i.Wu()},1e4))}},Eu:function(t){function i(){n.X!=null&&n.X.readyState==1&&n.Sr!=n.ju&&n.If(),n.Gf=null}var n=this;this.Sr=t,this.Gf==null&&(i(),this.Gf=xi(i,1e3))},Os:function(t){function i(e){if(e=e.sitekey,e==null)throw new st(null);if(r.haxball.Ie=s=>{r.haxball.Ie=null,r.Os(s)},!r.haxball.Ps)throw of(ff.MissingRecaptchaCallbackError);r.haxball.Ps(e)}function n(e){var s=e.url;if(s==null)throw new st(null);if(e=e.token,e==null)throw new st(null);zi?.WebSocketUrl&&(s=zi?.WebSocketUrl),!s.endsWith("host")&&(!s.endsWith("/")&&(s+="/"),s+="host");var u=r.haxball.wn;!zi&&u&&(fp(),u=null);var h=u?[u]:[];if(r.haxball.qi||zi?.WebSocketChangeOriginAllowed){var o={};r.haxball.qi&&(o.agent=r.haxball.qi),zi.WebSocketChangeOriginAllowed&&(o.headers={Origin:(rf.secure?"https":"http")+"://"+rf.hostname}),r.X=new sf(s+"?token="+e,h,o)}else r.X=new sf(s+"?token="+e,h);r.X.binaryType="arraybuffer",r.X.onopen=function(){r.jv()},r.X.onclose=function(v){r.ks(v.code!=4001)},r.X.onerror=function(){r.ks(!0)},r.X.onmessage=r.Qu.bind(r)}var r=this;pp.Kl(this.Pv,"token="+(t||this._e)+"&rcr=","application/x-www-form-urlencoded").then(function(e){switch(e.action){case"connect":r.haxball.Ie=null,n(e);break;case"recaptcha":i(e)}}).catch(function(e){rp.log(e instanceof st?e.zt:e),r.haxball.Ie=null,r.ks(!0)})},jv:function(){var t=this;this.cn!=null&&this.Wu(),this.Sr!=0&&this.If(),this.df=np(function(){t.Xu()},4e4)},Qu:function(t){switch(t=new di(new DataView(t.data),!1),t.O()){case 1:this.Yu(t);break;case 4:this.$u(t);break;case 5:this.Ev(t);break;case 6:this._v(t);break;case 111:this.dv(t);break}},dv:function(t,i){xi(()=>{try{this.haxball.room?.setPlayerIdentity?.(t.ht(),t.Ar())}catch{i&&this.Or(i,4111)}},3e3)},Yu:function(t){var i=t.ht(),n=sp(t.Vt(t.O())),r,e,s;try{t=new di(new DataView(cr.inflateRaw(t.Vt()).buffer),!1),r=t.O()!=0,e=t.ci();for(var u=t.Ar(),h=[],o=0;o<u.length;)h.push(new uf(u[o++]));s=h}catch{this.Or(i,0);return}this.Bv(i,n,e,s,t,r)},Bv:function(t,i,n,r,e,s){var u=this;if(16<=this.zn.size)this.Or(t,4104);else if(this.banList.checkIp(i))this.Or(t,4102);else{for(var h=[],o=0;o<r.length;){var v=Bi._f(r[o++]);if(v!=null){if(this.banList.checkIp(v)){this.Or(t,4102);return}h.push(v)}}if(this.Vf!=null&&(o=new di(e.c),o.l=e.l,e=this.Vf(o),e!=null)){this.Or(t,e);return}var c=new lp(t,this.Av,this.Mv);for(s&&(c.Af=2500),c.Ge=h,c.$n="",o=0;o<i.length;o++)c.$n+=up.zs(i.charCodeAt(o));this.zn.set(t,c),c.En=function(){u.pn(0,c,null),u.zn.delete(c.id)},c.Zn=function(){u.zn.delete(c.id),u.pn(0,c,null),u.Lf!=null&&u.Lf(new op(c))},c.Ku=function(p){u.Zu(c,p,c.Ms,null),c.Uu.then(function(){u.pn(0,c,null)}),c.js=function(C){u.zu(c,C)}},c.Fu(),c.Ov(new ep({sdp:n,type:"offer"}),r)}},$u:function(t){var i=t.ht(),n;try{t=new di(new DataView(cr.inflateRaw(t.Vt()).buffer),!1),n=new uf(t.Ar())}catch{return}this.Iv(i,n)},Iv:function(t,i){var n=this.zn.get(t);if(n!=null){var r=Bi._f(i);if(r!=null&&(n.Ge.push(r),this.banList.checkIp(r)))return;n.Ef(i)}},Ev:function(t){this.id=t.an(t.O()),this.Bs!=null&&this.Bs(this.id)},_v:function(t){this._e=t.an(t.c.byteLength-t.l)},pn:function(t,i,n){if(!i.Mf){t==0&&(i.Mf=!0),i=i.id;var r=D.U(32,!1);r.o(t),r.Nt(i),n!=null&&r.Yt(cr.deflateRaw(n._t())),this.X.send(r._n())}},Or:function(t,i){var n=D.U(16,!1);n.o(0),n.Nt(t),n.Lt(i),this.X.send(n._n())},Xu:function(){var t=D.U(1,!1);t.o(8),this.X.send(t._n())},Wu:function(){this.ds=!1;var t=D.U(256,!1);t.o(7),this.cn!=null&&t.Ze(this.cn),this.X.send(t._n())},If:function(){var t=D.U(2,!1);t.o(this.haxball.Ft),t.o(this.Sr?1:0),this.X.send(t._n()),this.ju=this.Sr,this.haxball.room._onRoomRecaptchaModeChange?.(this.Sr)},Zu:function(t,i,n,r){var e=D.U(32,!1);e.pi(i.sdp),e.ze(n),r!=null&&e.Yt(r._t()),this.pn(1,t,e)},zu:function(t,i){var n=D.U(32,!1);n.ze(i),this.pn(4,t,n)},Bf:function(){for(var t=this.zn.values(),i=t.next(),n;!i.done;)n=i.value,i=t.next(),n.rt();this.zn.clear()},ks:function(t){var i=this;this.Bf(),or(this.kr),this.kr=null,this.ds=!1,ef(this.df),or(this.Mu),t&&(this.Mu=xi(function(){i.Os()},this.vf+Math.random()*this.Rv|0))}};function Be(t){this.Uf=new Map,this.Gv=new vf(100,16),this.Ue=!1,this.sr=0,this.et=t,t=D.U(8),t.g(Math.random()),this.Fe=t._t()}Be.prototype={vi:function(t,i){i==null&&(i=0),this.et.vi(i,t)}};function Ie(t,i){this.haxball=t,this.oi=null,this.wr=32,this.Kn=new Map,this.Dt=[],this.Is=4,this.Vv=600;var n=this;lf.call(this,i?.t),this.Lv=i?.xu,this.Uv=i?.Ft,this.Fv=1,this.Ff=0,this._i=0,this.qr=!1,this.Ts=!0,this.Be=null,this.yr=null,this.Qn=vr.now(),this.Gt=i&&new Bi(t,this.Lv,i.iceServers,hp,i.bu),i&&(this.Gt.banList=new vp(this),this.Gt.Vf=this.Kv.bind(this),this.Gt.Lf=function(r){n.Hv(r)},this.Gt.Bs=function(r){n.Bs?.(r)})}Ie.prototype=cp(lf.prototype,{rt:function(){this.Gt.rt();for(var t=0,i=this.Dt;t<i.length;){var n=i[t++].et;n.Ve=null,n.As=null,n.rt()}},Jv:function(t,i,n,r){var e=this.Kn.get(t.id);e!=null&&(r&&this.Gt.banList.addPlayer(t),t=D.U(),t.o(5),t.o(r?1:0),t.pi(i),n==null&&(n=""),t.pi(n),e.vi(t),e.et.rt())},bl:function(){this.Gt.banList.clear()&&this.haxball.room._onBansClear?.()},xl:function(t){this.Gt.banList.removePlayer(t)&&this.haxball.room._onBanClear?.(t)},Dl:function(t){return this.Gt.banList.addPlayer(t)},al:function(...t){return this.Gt.banList.addIp(...t)},tv:function(...t){return this.Gt.banList.addAuth(...t)},iv:function(t){return this.Gt.banList.remove(t)},Ju:function(t){this.Gt.Ju(t)},Eu:function(t){this.Gt.Eu(t)},_:function(t){var i=this.m+this.Is+this.gi;t.ir.lt||(i=this.m),t.kt=i,this.Br(t),this.Gs(),0<this.Dt.length&&this.Ke(this.Vs(t),1)},Rs:function(t,i,n){t.i=i;var r;n?(t.apply(this.t),this.Wv(t,1)):0<this.Dt.length&&(r=this.m+this.Is+this.gi,t.ir.lt||(r=this.m),t.kt=r,this.Br(t),this.Gs(),this.Ke(this.Vs(t),1))},gr:function(t,i,n){if(i==0){t.apply(this.t);return}var r=this.Kn.get(i);if(r!=null){!n&&(t.i=0);var e=D.U();e.o(6),lr.Nn(t,e),r.vi(e,0)}},vt:function(){var t=((vr.now()-this.Qn)*this.Ki|0)-this.m;t>0&&this.Rh(t),this.m-this.Kf>=7&&this.Gs(),this.m-this.Ff>=this.Vv&&(this.Gs(),this.Qv())},Sn:function(){return this.gi<0&&(this.gi=0),this.Ph((vr.now()-this.Qn)*this.Ki-this.m+this.Is+this.gi+this.su)},Kv:function(t){if(!this.qr&&this.Dt.length>=this.wr)return 4100;try{if(t.At()!=this.Uv)throw new st(null)}catch{return 4103}try{var i=t.ui();if(this.oi!=null&&i!=this.oi)throw new st(null)}catch{return 4101}},Hv:function(t){var i=this;if(!this.qr&&this.Dt.length>=this.wr)t.rt();else{var n=new Be(t);this.Dt.push(n),t.As=function(r){r=new di(new DataView(r)),i.Xv(r,n)},t.Ve=function(){hf.remove(i.Dt,n),i.Kn.delete(n.id),i.Yv?.(n.id)},t=D.U(1+n.Fe.byteLength),t.o(0),t.Ut(n.Fe.byteLength),t.Yt(n.Fe),n.vi(t)}},Vs:function(t){var i=D.U();return i.o(2),this.Du(t,i),i},Du:function(t,i){i.Nt(t.kt),i.Ut(t.L),i.Lt(t.i),i.Nt(t.Gn),lr.Nn(t,i)},Gs:function(){if(!(0>=this.m-this.Kf)&&this.Dt.length!=0){var t=D.U();t.o(3),t.Nt(this.m),t.Nt(this.Vn),this.Ke(t,2),this.Kf=this.m}},Ke:function(t,i){i==null&&(i=0);for(var n=0,r=this.Dt;n<r.length;){var e=r[n];++n,e.Ue&&e.vi(t,i)}},Wv:function(t,i){i==null&&(i=0);var n=D.U();n.o(6),lr.Nn(t,n);for(var r=0,e=this.Dt;r<e.length;){var s=e[r];++r,s.Ue&&this.haxball.st.customClientIds.has(s.id)&&s.vi(n,0)}},$v:function(t){var i=D.U();i.o(1);var n=D.U();n.Lt(t.id),n.Nt(this.m),n.Nt(this.Vn),n.Ut(this.ii),this.t.$(n);for(var r=this.rn.list,e=0,s=r.length;e<s;)this.Du(r[e++],n);i.Yt(cr.deflateRaw(n._t())),t.vi(i)},wv:function(t){t.Nt(this.m),t.Nt(this.Vn),t.Ut(this.ii),this.t.$(t);var i=this;this.rn.list.forEach(n=>{i.Du(n,t)})},Zv:function(t){xi(()=>{this.t.j.forEach(i=>{i.lu&&this.haxball.room?.setPlayerIdentity(i.id,i.lu,t.id)})},3e3)},Qv:function(){if(this.Ff=this.m,this.Dt.length!=0){var t=yp.create(this.t.dl());t.kt=this.m,t.L=this.ii++,t.i=0,this.Ke(this.Vs(t))}},zv:function(t,i){var n=this,r=t.Vt(t.Ht()),e=t.Vt(t.Ht()),s=i.Fe;i.Fe=null,wp.Ql(r,s).catch(function(){return null}).then(function(u){try{if(n.Gt.banList.checkAuth(u))throw new st(of(ff.AuthBannedError,u));if(n.Dt.indexOf(i)!=-1){i.Jc=u;var h=n.Fv++;i.id=h,n.Kn.set(h,i),n.xv?.(h,new di(new DataView(e.buffer,e.byteOffset,e.byteLength),!1),i.et.$n,u),i.Ue=!0,n.$v(i),n.Zv(i)}}catch(o){n.Hf(i,o instanceof st?o.zt:o)}})},Xv:function(t,i){this.vt();try{if(!i.Gv.ch())throw new st(1);var n=t.O();if(i.Ue)switch(n){case 1:this.bv(t,i);break;case 2:this.Dv(t,i);break;default:throw new st(0)}else if(n==0)this.zv(t,i);else throw new st(0);if(0<t.c.byteLength-t.l)throw new st(2)}catch(r){this.Hf(i,r instanceof st?r.zt:r)}},Hf:function(t,i){this.haxball.onHostError?.(i,t.id),this.Kn.delete(t.id),hf.remove(this.Dt,t),t.Ue&&this.Jf!=null&&this.Jf(t.id),t.et.rt()},Dv:function(t,i){var n=t.N(),r=this.haxball.room._modifyPlayerPing;r&&(i.sr=r(i.id,t.Ht()));var e=D.U();e.o(4),e.g((vr.now()-this.Qn)*this.Ki+this.Is),e.g(n),i.vi(e,2)},bv:function(t,i){var n=t.ht(),r=t.ht(),e=lr.nn(t),s=e.ir.hu;if(s!=null){var u=i.Uf.get(s);if(u==null&&(u=new vf(s.fu,s.ou),i.Uf.set(s,u)),!u.ch())throw new st(3)}if(e.i=i.id,s=this.m,u=this.m+120,e.Gn=r,e.kt=n<s?s:n>u?u:n,!(e.__proto__.it==qp&&e.S.p.length==0)&&this.haxball.st.onOperationReceived(e,this.m,n)){if(e.__proto__.it==Cp||e.__proto__.it==gp||e.__proto__.it==mp){this.Rs(e,e.i,!0);return}e.Th(this.t)&&(this.Br(e),this.Ke(this.Vs(e),1))}}});de(Ie,[null,"password",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[]);de(Bi,[null,null,null,null,null,"id",null,null,null,null,null,null,null],[]);de(Be,[null,null,null,"ping",null,null],[]);cf.y_=Ie});var Ge=O((c2,mf)=>{var{clearTimeout:Np,setInterval:Sp,clearInterval:kp,requestAnimationFrame:qf,cancelAnimationFrame:Op,performance:l2,E:v2}=R(),$t=ht(),{ve:Cf,fs:wf,os:Tp,ls:Rp,vs:Pp,cs:yf,we:Ap,ye:Ii,ps:Mp,ws:jp,ys:Ep}=ui(),{Dt:_p}=pe();function gf(t){this.Ls=0,this.av=0,this.internalData=t?.st}gf.prototype={vt:function(){var t=this.internalData.keyState;this.Us!=null&&t!=this.Ls&&(this.Ls=t,this.Us(wf.create(t)))},tc:function(){this.Us!=null&&this.Ls!=0&&(this.Ls=this.av=0,this.Us(wf.create(0)))}};function pr(t,i){if(this.haxball=t,this.ic=null,this.Wf=!1,this.Xn=null,this.au=0,this.Ot=new gf(t),this.pr=null,this.Qf=!1,this.r=i,!!i){var n=this;i.t.er=e=>{t.room._onPlayerInputChange?.(e.id,e.Ot)},i.t.Hr=e=>{t.room._onPlayerJoin?.(e)},i.t.ge=e=>{t.room._onPlayerBallKick?.(e?.id)},i.t.Ne=e=>{t.room._onTeamGoal?.(e?.id)},i.t.Oe=e=>{t.room._onGameEnd?.(e.id)},i.t.Qr=(e,s,u)=>{!u&&t.room._onGamePauseChange?.(s,e?.id)},i.t.Te=function(e){t.room._onGameStart?.(e?.id)},i.t.Ce=()=>{t.room._onGameTick?.()},i.t.me=()=>{t.room._onKickOff?.()},i.t.jr=(e,s,u,h)=>{t.room._onCollisionDiscVsDisc?.(e,s.B,u,h.B)},i.t.Er=(e,s,u)=>{t.room._onCollisionDiscVsPlane?.(e,s.B,u)},i.t._r=(e,s,u)=>{t.room._onCollisionDiscVsSegment?.(e,s.B,u)},i.t.dr=(e,s,u,h)=>{t.room._onCollisionDiscVsVertex?.(e,s.B,u,h)},i.t.tr=(e,s,u)=>{t.room._onModifyJoint?.(e,s,u)},i.t.lr=(e,s,u,h,o)=>{t.room._onAutoTeams?.(e,s,u,h,o)},i.t.Yr=(e,s)=>{t.room._onTimeLimitChange?.(e,s)},i.t.Xr=(e,s)=>{t.room._onScoreLimitChange?.(e,s)},i.t.qe=e=>{t.room._onPlayerDiscCreated?.(e)},i.t.On=e=>{t.room._onPlayerDiscDestroyed?.(e)},i.t.te=(e,s)=>{t.room._onPlayerAvatarChange?.(e,s)},i.t.ue=(e,s)=>{t.room._onPlayerHeadlessAvatarChange?.(e,s)},i.t.re=(e,s)=>{t.room._onPlayersOrderChange?.(e,s)},i.t.zr=(e,s,u)=>{t.room._onPlayerTeamChange?.(e,s,u)},i.t.ne=(e,s,u)=>{t.room._onTeamColorsChange?.(e,s,u)},i.t.xr=(e,s)=>{t.room._onTeamsLockChange?.(e,s)},i.t.Mh=(e,s,u)=>{t.st.isHost?(e=i.t.getPlayer(e),e&&u==1&&(e.en=!0,t.st.customClientIds.add(e.id))):u==0&&(t.st.customClientIds.add(e),e=i.t.getPlayer(e),e&&(e.en=!0),i._u=!0,e=i.t.getPlayer(s),e&&(e.en=!0),t.st.customClientIds.add(s),i._(Cf.create(1,s,1),0,!0))},i.t.fe=(e,s,u)=>{t.room._onCustomEvent?.(e,s,u)},i.t.oe=(e,s,u)=>{t.room._onBinaryCustomEvent?.(e,s,u)},i.t.le=(e,s,u)=>{t.room._onIdentityEvent?.(e,s,u)},i.t.he=(e,s,u,h)=>{t.room._onSetDiscProperties?.(e,s,u,h)},i.t.ar=e=>{t.room._onPingData?.(e)},i.t.Wh=()=>t?.room?.hostPing||0,i.t.hl=()=>{n.Ot.tc()},i.t.Ir=e=>{t.room._onHandicapChange?.(e)},i.t.Gr=e=>{t.room?._onExtrapolationChange?.(e)},i.t.Se=()=>{t.room._onTimeIsUp?.()},i.t.ke=()=>{t.room._onPositionsReset?.()},i.t.tf=function(e){n.Qf!=e&&(n.Qf=e,e=Ep.create(e),t.st.W(e)!=!1&&i._(e))},i.t.Kr=function(e,s){t.room._onPlayerChat?.(e.id,s)},i.t.Ur=function(e,s,u,h){t.room._onAnnouncement?.(e,s,u,h)},i.t.hr=function(e){t.room._onGameStop?.(e?.id)},i.t.Zr=function(e,s){t.room._onStadiumChange?.(s,e?.id)},i.t.Dr=function(e){t.room._onPlayerSyncChange?.(e?.id,e?.di)},i.t.br=function(e,s){t.room._onPlayerAdminChange?.(s?.id,s?.yi,e?.id)},i.t.Re=function(e,s,u,h){t.room._onKickRateLimitChange?.(s,u,h,e?.id)},i.t.Wr=function(e,s,u,h){e.d&&t.room._onPlayerDiscDestroyed?.(e),n.nc?.(e.id),s!=null&&n.rc?.(e,s,h!=null?h.name:null,u),t.room._onPlayerLeave?.(e,s,u,h?.id),t.st.customClientIds.delete(e.id)},i.t.Fr=function(e,s){t.room._onPlayerChatIndicatorChange?.(e?.id,!s)},this.Ot.Us=function(e){t.st.W(e)!=!1&&i._(e)},this.cv=function(e){e=yf.create(1,e),t.st.W(e)!=!1&&i._(e)},this.pv=function(e){e=yf.create(0,e),t.st.W(e)!=!1&&i._(e)},this.vv=function(e){e=Ap.create(e),t.st.W(e)!=!1&&i._(e)},this.sv=function(){var e=Tp.create();t.st.W(e)!=!1&&i._(e)},this.uv=function(){var e=Rp.create();t.st.W(e)!=!1&&i._(e)},this.hv=function(){n.ec()},this.yf=function(e,s){if(s){var u=Ii.create(e,s);t.st.W(u)!=!1&&i._(u)}},this.pf=this.sc.bind(this),this.fv=function(){var e=jp.create();t.st.W(e)!=!1&&i._(e)},this.lv=function(){pr.uc(t,i)},this.ov=function(e){e=Mp.create(e),t.st.W(e)!=!1&&i._(e)},this.wf=function(e){if(e)return n.Xn!=null?!1:(n.hc(),t.room._onRoomRecordingChange?.(!0),!0);if(n.Xn==null)return null;var s=n.Xn.stop();return n.Xn=null,t.room._onRoomRecordingChange?.(s),s},this.Xf=this.fc.bind(this),this.au=qf(this.Xf),this.oc=Sp(function(){i.vt()},50);var r=t.st.li.extrapolation;r=-200>r?-200:200<r?200:r,r!=0&&i.Ah(t.st.li.extrapolation)}}pr.uc=function(t,i){for(var n=i.t.j,r=[],e=0,s=0,u=0;u<n.length;){var h=n[u];++u,h.R==$t.spec&&r.push(h.id),h.R==$t.red?++e:h.R==$t.blue&&++s}u=r.length;var o;u!=0&&(n=function(){return r.splice(Math.random()*r.length|0,1)[0]},u==1?(o=Ii.create(n(),Math.random()<.5?$t.red:$t.blue),t.st.W(o)!=!1&&i._(o)):s==e?(o=Ii.create(n(),$t.red),t.st.W(o)!=!1&&i._(o),o=Ii.create(n(),$t.blue),t.st.W(o)!=!1&&i._(o)):(e=s>e?$t.red:$t.blue,o=Ii.create(n(),e),t.st.W(o)!=!1&&i._(o)))};pr.prototype={hc:function(){this.Xn=new _p(this.r,3)},rt:function(){Op(this.au),kp(this.oc),Np(this.ic)},sc:function(t){for(var i=[],n=0,r=this.r.t.j;n<r.length;){var e=r[n];++n,e.R==t&&i.push(Ii.create(e.id,$t.spec))}for(t=0;t<i.length;){var s=i[t++];this.haxball.st.W(s)!=!1&&this.r._(s)}},fc:function(){this.au=qf(this.Xf),this.Ot.vt(),this.r.vt(),this.lc()},lc:function(){var t=this.r.Sn();this.haxball.st.renderer?.render?.(t)},ev:function(t){var i;t!=this.Wf&&(i=Cf.create(t?0:1),this.haxball.st.W(i)!=!1&&(this.r._(i),this.Wf=t))},ec:function(){if(this.r.t.s!=null){var t=Pp.create(this.r.t.s.xt!=120);this.haxball.st.W(t)!=!1&&this.r._(t)}}};mf.y_=pr});var Rf=O((w2,Tf)=>{var{stunServers:dp,httpUrl:Bp,Hs:p2,setInterval:Ip,clearInterval:Gp,console:Nf}=R(),Gi=Q(),{Kt:Vi,q:bi}=X(),{parseGeo:Sf}=Xi(),{w:Vp}=j(),{addRoomToList:Lp,removeRoomFromList:Up}=qi(),Fp=Re(),{roomLink:kf,mf:Kp,Nf:Hp}=Pe(),{RoomDataDetails:Jp}=ge(),Wp=Jn(),{ve:Qp,ce:Xp,pe:Of,Cu:Yp}=ui(),$p=Ti(),Zp=pf(),zp=Ge();function xp(t,i){var n=Hp(i);n.onHostError=t.onError;var r=Kp(n),e=function(){Nf.log("internal event: LeaveRoom"),Up(n.room),e=null,s=null,n.plugins&&n.plugins.forEach(f=>{f.finalize?.(),f.room=null}),n.renderer&&(n.renderer.finalize?.(),n.renderer.room=null),n.config.finalize?.(),n.config.room=null,n.libraries.forEach(f=>{f.finalize?.(),f.room=null}),e=null,r.n=null,r.roomState=null,r=null,n.room=null,n.Vu?.()},s=function(){Nf.log("internal event: CreateRoomSucceeded"),s=null,n.room=new Fp(n.Bu,r,n.libraries,n.config,n.plugins),Lp(n.room),n.room.client=n,n.room.Mn=n.Mn,n.room.hostPing=0,n.Iu?.(n.room);var f=n.room._onPlayerObjectCreated;f&&r.n?.r.t.j.forEach(f)},u=n.li;function h(){if(c.Ts){var f=new Jp;f.Ft=n.Ft,f.name=v.name,f.j=c.Be!=null?c.Be:v.j.length,f.Pu=c.wr+1,f.Tt=c.de.flag,f.oi=c.yr==null?c.oi!=null:c.yr,f.Me=c.de.Me,f.je=c.de.je;var l=Vp.U(16);f.$(l),f=l.$e(),c.Ju(f)}}var o=null,v=new $p;v.name=t.name;var c=new Zp(n,{iceServers:dp,xu:Bp+"api/host",t:v,Ft:n.Ft,bu:t.token});c.de=Sf(t.geo,u.geo,!1),c.vc=!!t.noPlayer;var p;c.vc||(p=new Wp,p.name=u.player_name,p.yi=!0,p.Tt=c.de.flag,p.gt=u.avatar,p.en=!0,v.j.push(p)),c.qr=!!t.unlimitedPlayerCount,c.Ts=!!t.showInRoomList,c.Be=t.playerCount,c.yr=t.fakePassword==null?null:!!t.fakePassword,c.wr=(t.maxPlayerCount|0)-1,c.oi=t.password==""?null:t.password,h();var C=new zp(n,c),N=Ip(function(){var f=Yp.create(c);r.W(f)!=!1&&c._(f)},3e3);return c.Jf=function(f){v.getPlayer(f)!=null&&(f=Of.create(f,Vi(Gi.BadActorError).toString(),!1),r.W(f)!=!1&&c._(f))},c.xv=function(f,l,y,w){var q=l.ci();if(25<q.length)throw new bi(Vi(Gi.PlayerNameTooLongError,y,w,q));var m=l.ci();if(3<m.length)throw new bi(Vi(Gi.PlayerCountryTooLongError,y,w,q,m));var S=l.ui();if(S!=null&&2<S.length)throw new bi(Vi(Gi.PlayerAvatarTooLongError,y,w,q,m,S));var T=n.room._modifyPlayerData;if(T){var M=T(f,q,m,S,y,w);if(!M)throw new bi(Vi(Gi.PlayerJoinBlockedByMPDError,y,w,q,m,S));[q,m,S]=M}if(q=Xp.create(f,q,m,S,y,w),r.W(q)==!1)throw new bi(Vi(Gi.PlayerJoinBlockedByORError,q));c._(q),h(),r.Cr.then(()=>{r.n?.r.gr(Qp.create(0,f,0),f,!0)})},c.Yv=function(f){v.getPlayer(f)!=null&&(f=Of.create(f,null,!1),r.W(f)!=!1&&c._(f))},c.Bs=function(f){o=f,C.pr=kf(f,c.oi!=null),n.room._onRoomLink?.(C.pr)},C.rc=function(f,l,y,w){c.Jv(f,l,y,w)},C.nc=function(){h()},C.du=function(){c.rt(),C.rt(),Gp(N),e()},n.mr=C.du,C.zl=function(f){if(f){var l={};if(f.hasOwnProperty("name")&&(l.name=v.name=f.name||""),f.hasOwnProperty("password")&&(l.password=c.oi=f.password),f.hasOwnProperty("fakePassword")&&(l.fakePassword=c.yr=f.fakePassword),f.hasOwnProperty("geo")){l.geo=f.geo;var y=Sf(f.geo,u.geo,!1);p&&(p.Tt=y.flag)}f.hasOwnProperty("unlimitedPlayerCount")&&(l.unlimitedPlayerCount=c.qr=!!f.unlimitedPlayerCount),f.hasOwnProperty("showInRoomList")&&(l.showInRoomList=c.Ts=!!f.showInRoomList),f.hasOwnProperty("playerCount")&&(l.playerCount=c.Be=f.playerCount),f.hasOwnProperty("maxPlayerCount")&&(l.maxPlayerCount=c.wr=f.maxPlayerCount==null?null:f.maxPlayerCount-1),h(),f.hasOwnProperty("password")&&o!=null&&(C.pr=kf(o,c.oi!=null)),n.room._onRoomPropertiesChange?.(l)}},C.nv=function(f){c.qr=f},C.rv=function(f){c.yr=f,h()},r.isHost=!0,r.n=C,r.roomState=v,s(),n}Tf.y_=xp});var Gf=O((y2,If)=>{var{proxy:Di,backend:Pf,setTimeout:bp,clearTimeout:Af,WebSocket:Mf,performance:ai,pako:Le,RTCIceCandidate:jf,RTCSessionDescription:Dp}=R(),tn=Q(),{Event:Ve}=d(),{Kt:nn,At:rn}=X(),{Tf:ap,Rf:tw,Pf:iw}=je(),nw=Ee(),_f=ki(),{F:wr,w:yi,_o:Ef,extend:rw}=j(),ew=jr();function df(t,i,n,r,e,s,u,h){this.th=!1,this.ih=!1,this.qi=u,this.wn=h,!Di&&h&&(tw(),h=null);var o=this;this.et=new nw(0,i,r),this.et.En=function(){o.He(rn.uo())},this.et.Zn=function(){o.Zn!=null&&o.Zn(new iw(o.et)),o.et=null,o.Yf()},this.et.Ku=function(v){o.$f=v,Di?.WebSocketUrl&&(t=Di.WebSocketUrl),!t.endsWith("client")&&(!t.endsWith("/")&&(t+="/"),t+="client");var c=h?[h]:[];if(o.qi||Di?.WebSocketChangeOriginAllowed){var p={};o.qi&&(p.agent=o.qi),Di.WebSocketChangeOriginAllowed&&(p.headers={Origin:(Pf.secure?"https":"http")+"://"+Pf.hostname}),o.X=new Mf(t+"?id="+n+(s==null?"":"&token="+s),c,p)}else o.X=new Mf(t+"?id="+n+(s==null?"":"&token="+s),c);o.X.binaryType="arraybuffer",o.X.onclose=function(C){o.th||o.He(rn.fo(C.code))},o.X.onerror=function(){o.th||o.He(rn.Error())},o.X.onmessage=o.Qu.bind(o),o.X.onopen=function(){o.Zf!=null&&o.Zf(),o.et.Fu(),o.Zu(o.$f,o.et.Ms,e),o.et.js=o.zu.bind(o),o.et.Uu.then(function(){o.pn(0,null)})}},this.et.Tv()}df.prototype={cc:function(){this.He(rn.ho())},Yf:function(){try{this.X!=null&&(this.X.onclose=null,this.X.onmessage=null,this.X.onerror=null,this.X.onopen=null,this.X.close(),this.X=null)}catch{}this.et!=null&&(this.et.rt(),this.et=null)},He:function(t){this.En!=null&&this.En(t),this.Yf()},Qu:function(t){t=new wr(new DataView(t.data));var i=t.O(),n,r,e;switch(0<t.c.byteLength-t.l&&(t=new wr(new DataView(Le.inflateRaw(t.Vt()).buffer),!1)),i){case 1:for(i=t.ci(),n=t.Ar(),r=[],e=0;e<n.length;)r.push(new jf(n[e++]));this.Yu(i,r,t);break;case 4:this.$u(new jf(t.Ar()))}},Yu:function(t,i){var n=this;this.et.Fu(this.ih?1e4:4e3),this.th=!0,this.zf!=null&&this.zf(),this.et.Rt.setRemoteDescription(new Dp({sdp:t,type:"answer"}),function(){for(var r=0;r<i.length;)n.et.Rt.addIceCandidate(i[r++])},function(){n.He(rn.Error())})},$u:function(t){this.et.Rt.addIceCandidate(t)},pn:function(t,i){if(this.X!=null){var n=yi.U(32,!1);n.o(t),i!=null&&n.Yt(Le.deflateRaw(i._t())),this.X.send(n._n())}},Zu:function(t,i,n){var r=yi.U(32,!1);r.o(this.ih?1:0),r.pi(t.sdp),r.ze(i),n!=null&&r.Yt(n._t()),this.pn(1,r)},zu:function(t){var i=yi.U(32,!1);i.ze(t),this.pn(4,i)}};function Bf(t,i,n){this.haxball=t,this.nh=[],this.rh=[],this.Fs=new ew,this.pc=1,this.xf=0,this.xn=0,this.eh=new Ef(50),this.Ks=new Ef(50),this.wc=1e3,this.sh=nn(tn.Empty);var r=this;_f.call(this,n.t),this.uh=n.yc,this.bf=n.qc;var e=null;e=function(s){r.Je(0);var u=yi.U();u.Lt(n.Ft),u.hi(n.oi),r.Vi=new df(n.xu,n.iceServers,i,ap,u,n.bu,r.haxball.qi,r.haxball.wn),r.Vi.ih=s,r.Vi.Zn=function(o){r.Vi=null,r.et=o,o.As=function(v){v=new wr(new DataView(v)),r.Cc(v)},o.Ve=function(){r.xn!=3&&r.We?.(nn(tn.ConnectionClosed)),r.rt()},o=bp(function(){r.We?.(nn(tn.GameStateTimeout)),r.rt()},1e4),r.Nr=o,r.Je(2,r.et.Rt.remoteDescription.sdp)},r.Vi.Zf=function(){r.Je(1,r.Vi.$f.sdp)};var h=!1;r.Vi.zf=function(){return h=!0},r.Vi.En=function(o){!s&&r.xn==1&&h?(r.gc?.(),e(!0)):(r.We?.(o[0]),r.rt(o[1]||o[0]))}},e(n.Df!=null&&n.Df)}Bf.prototype=rw(_f.prototype,{rt:function(t){this.Vi!=null&&(this.Vi.En=null,this.Vi.cc(),this.Vi=null),Af(this.Nr),this.et!=null&&(this.et.Ve=null,this.et.rt(),this.et=null),this.sh=t??nn(tn.ConnectionClosed),this.Je(4),this.haxball._onRoomLeave?.(this.sh)},Je:function(t,i){this.xn!=t&&(this.xn=t,this.haxball._onConnectionStateChange?.(t,i),this.bn!=null&&this.bn(t))},Yn:function(){return this.xn==3},vt:function(){this.Yn()&&ai.now()-this.xf>this.wc&&this.Xu(),this.Dn=ai.now()*this.Ki+this.eh.be(.5)-this.m,this.af()},Sn:function(){return this.Yn()?(0>this.gi&&(this.gi=0),this.Ph(ai.now()*this.Ki+this.eh.be(.5)-this.m+this.gi+this.su,this.Fs)):this.t},af:function(){0>this.Dn&&(this.Dn=0),this.Dn>this.rs&&(this.Dn=this.rs)},Cc:function(t){switch(t.O()){case 0:this.mc(t);break;case 1:this.Nc(t);break;case 2:this.Sc(t);break;case 3:this.kc(t);break;case 4:this.Oc(t);break;case 5:this.Tc(t);break;case 6:this.Rc(t)}},mc:function(t){var i=this;t=t.Vt(t.Ht());var n=Promise.resolve(null);this.bf!=null&&(n=this.bf.Yl(t)),n.catch(function(){return null}).then(function(r){i.Pc(r)})},Nc:function(t){for(t=Le.inflateRaw(t.Vt()),t=new wr(new DataView(t.buffer,t.byteOffset,t.byteLength)),this._i=t.At(),this.m=t.ht(),this.Vn=t.ht(),this.ii=t.Ht(),this.Dn=10,this.t.a(t);0<t.c.byteLength-t.l;)this.Br(this.to(t));Af(this.Nr),this.Je(3)},Pc:function(t){var i=yi.U();i.o(0),t!=null?(i.Ut(t.byteLength),i.Yt(t)):i.Ut(0),i.Ut(this.uh.byteLength),i.Ze(this.uh),this.vi(i),this.uh=null},vi:function(t,i){i==null&&(i=0),this.et.vi(i,t)},to:function(t){var i=t.ht(),n=t.Ht(),r=t.At(),e=t.ht();return t=Ve.nn(t),t.i=r,t.Gn=e,t.kt=i,t.L=n,t},Sc:function(t){t=this.to(t),this.Br(t),t.i==this._i&&this.Fs.ao(t.Gn),this.io()},Rc:function(t){t=Ve.nn(t),t.i=0,t.Gn=0,t.apply(this.t),this.ni!=null&&this.ni(t)},kc:function(t){var i=t.ht();t=t.ht(),this.rh.push({frame:i,Ac:t}),this.io()},io:function(){if(this.xn==3){for(var t=0,i=this.rh,n,r;t<i.length;)n=i[t],++t,n.frame<=this.m||n.Ac==this.Vn+this.ii+this.rn.tl(n.frame)&&this.Mc(n.frame-this.m);for(t=0,i=this.rh,n=0,r=i.length;n<r;){var e=i[n++];e.frame>this.m&&(i[t]=e,++t)}for(;i.length>t;)i.pop();this.Fs.bo(this.m)}},Tc:function(t){var i=t.O()!=0,n=t.ci(),r="";0<t.c.byteLength-t.l&&(r=t.ci()),this.rt(nn(tn.KickedNow,n,i,r))},Oc:function(t){var i=t.N();t=t.N();var n=ai.now()-t;this.eh.add(i-t*this.Ki),this.Ks.add(n);for(var r=i=0,e=this.nh;r<e.length;){var s=e[r];if(++r,s>t)break;this.jc?.(s<t?-1:n),++i}this.nh.splice(0,i)},Xu:function(){var t=ai.now();this.xf=t,this.nh.push(t);var i=this.Ks.be(.5)|0,n=yi.U(),r=this.haxball.room?._modifyClientPing;r&&(i=r(i)),n.o(2),n.g(t),n.Ut(i),this.vi(n,2)},Mc:function(t){this.Rh(t),this.Dn-=t,this.af()},_:function(t){if(this.xn==3){var i=this.pc++,n=0;0>this.gi&&(this.gi=0),t.ir.lt&&(n=this.m+(this.Dn|0)+this.gi);var r=yi.U(),e=this.haxball.room?._modifyFrameNo;r.o(1),e&&(n=e(n)),r.Nt(n),r.Nt(i),Ve.Nn(t,r),this.vi(r),t.ir.ct&&(t.Gn=i,t.i=this._i,t.kt=n,this.Fs.ru(t))}}});If.y_=Bf});var Kf=O((q2,Ff)=>{var{stunServers:sw,backendUrl:uw,console:oi}=R(),Vf=Q(),{Kt:Lf,q:Uf}=X(),{w:hw}=j(),fw=Re(),{addRoomToList:ow,removeRoomFromList:Ue}=qi(),{roomLink:lw,mf:vw,Nf:cw}=Pe(),pw=Ti(),ww=Gf(),yw=Ge();function qw(t,i){var n=t.id,r=t.password,e=t.token,s=t.authObj;if(!n||!s)throw Lf(Vf.JoinRoomNullIdAuthError);var u=cw(i);r==""&&(r=null);var h=vw(u),o=function(q){oi.log("internal event: LeaveRoom",q.toString()),Ue(u.room),u._onConnectionStateChange=null,o=null,u.plugins&&u.plugins.forEach(m=>{m.finalize?.(),m.room=null}),u.renderer&&(u.renderer.finalize?.(),u.renderer.room=null),u.config.finalize?.(),u.config.room=null,u.libraries.forEach(m=>{m.finalize?.(),m.room=null}),u._onRoomLeave=null,h.n=null,h.roomState=null,h=null,u.room=null,u.Vu?.(q)},v=function(){oi.log("internal event: JoinRoomSucceeded"),u._onConnectionStateChange=null,v=null,u.room=new fw(u.Bu,h,u.libraries,u.config,u.plugins),ow(u.room),u.room.client=u,u.room.Mn=u.Mn,u.Iu?.(u.room);var q=u.room?._onPlayerObjectCreated;q&&h.n?.r.t.j.forEach(q);var m=u.room?._onPlayerDiscCreated;m&&h.n?.r.t.j.filter(S=>S.d!=null).forEach(m)};u._onConnectionStateChange=function(q,m){oi.log("internal event: ConnectionStateChange"),u.Cf?.(q,m),q==4&&(u._onConnectionStateChange=null,v=null,u.room=null)},u._onRoomLeave=o;try{var c=u.li.crappy_router,p=new pw,C=hw.U();C.pi(u.li.player_name),C.pi(u.li.geo.flag),C.hi(u.li.avatar);var N=sw,f=uw,l=new ww(u,n,{iceServers:N,xu:f,t:p,Ft:u.Ft,yc:C.$e(),oi:r,Df:c,bu:e,qc:s});oi.log("Connecting to master..."),u.mr=function(){l.bn=null,l.We=null,l.rt()};var y=function(q){Ue(u.room),u.mr=null,u.Gu?.(q)},w=function(){u.mr=null;var q=new yw(u,l);q.pr=lw(n,!1),l.jc=function(m){u.room._onPingChange?.(m,l.Ks.be(.5),l.Ks.max())},q.du=function(){l.bn=null,l.rt(),q.rt()},l.bn=function(){l.bn=null,q.rt(),q.Xn?.stop(),y(l.sh)},h.isHost=!1,h.n=q,h.roomState=p,v?.()};l.We=function(q){l.We=null,l.bn=null,q.code==1&&q.params[0]==4004&&u.Ps?.(),y(q)},l.bn=function(q){switch(q){case 1:oi.log("Connecting to peer...");break;case 2:oi.log("Awaiting state...");break;case 3:w()}},l.gc=function(){oi.log("Trying reverse connection..."),u.gf?.()}}catch(q){oi.log(q instanceof Uf?q.zt:q),Ue(u.room),u.mr=null,u.Gu?.(Lf(Vf.Unknown,q instanceof Uf?q.zt:q))}return u}Ff.y_=qw});var Qf=O((C2,Wf)=>{var{performance:Cw,pako:gw,E:mw}=R(),Nw=Ti(),Jf=ki(),{Event:Fe}=d(),{F:Hf,extend:Sw}=j(),{Sandbox:kw}=ye();function Ke(t){Jf.call(this,t),this.A=1,this.Qn=0,this.frozen=!1,this.Ec=[],this.newEvents=[],this.maxFrameNo=0}Ke.prototype=Sw(Jf.prototype,{_:function(){},Sn:function(){return this.t},vt:function(){var t=this.maxFrameNo;if(!(this.m>=t))do{var i=0,n=this.newEvents[0];if(!n||this.m>n.kt)break;for(;n?.kt==this.m;)n.apply(this.t),this.Ec.push(n),n=this.newEvents[++i];this.t.vt(1),this.m++,this.newEvents.splice(0,i)}while(this.m<t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.m=this.m*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.vt(t)}});function Ow(t,i={},n){var r=new Nw,e=new Ke(r),s=new kw(e,i,n),u;function h(v){var c=v.ht(),p=v.Ht(),C=v.At(),N=v.ht();return v=Fe.nn(v),v.i=C,v.Gn=N,v.kt=c,v.L=p,v}function o(v){v.kt==e.m&&v.L<=e.ii?(v.L=e.ii++,e.receiveEvent(v)):e.rn.ru(v)}for(t=new Hf(new DataView(t.buffer,t.byteOffset,t.byteLength)),e._i=0,e.Qn=Cw.now(),e.m=t.ht(),e.Vn=t.ht(),e.ii=t.Ht(),r.a(t);t.l<t.c.byteLength;)o(h(t));return t=null,u={state:r,readStream:v=>{if(e.maxFrameNo=v.ht(),v.c.byteLength!=v.c.byteOffset+v.l){var c=gw.inflateRaw(new Uint8Array(v.c.buffer,v.l)),p,C,N,f,l;for(v=new Hf(new DataView(c.buffer,c.byteOffset,c.byteLength));v.l<c.byteLength;)for(f=e.maxFrameNo-v.At(),p=v.At(),l=0;l<p;l++)C=v.At(),N=Fe.nn(v,!0),N.i=C,N.kt=f,e.newEvents.push(N)}},readImmediateStream:v=>{var c=e.maxFrameNo=v.ht(),p=v.At(),C=Fe.nn(v,!0);C.i=p,C.kt=c,e.newEvents.push(C)},takeSnapshot:function(){return r.copy()},useSnapshot:function(v){var c=v.copy();s.ff(c),r=c,u.state=c},setSimulationSpeed:function(v){e.setSpeed(v)},runSteps:function(v){e.runSteps(v)},destroy:s.rt},Object.defineProperty(u,"gameState",{get(){return u.state.s}}),Object.defineProperty(u,"currentPlayerId",{get(){return 0}}),Object.defineProperty(u,"currentFrameNo",{get(){return e.m}}),Object.defineProperty(u,"maxFrameNo",{get(){return e.maxFrameNo}}),u}mw(Ke,[null,null,null,null,null,null,null,null,null,null,null,null,"speed",null,null,null,null,null],[]);Wf.y_=Ow});var Yf=O((g2,Xf)=>{var Tw=Ci(),{noVariableValueChangeEvent:Rw,E:Pw}=R();function Li(t,i=null){this.name=t,this.defineMetadata(i)}Li.prototype.defineMetadata=function(t){};Li.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Rw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};Li.prototype.setVariableGUIProps=function(t,...i){};Li.addonType=Tw.Library;Pw(Li,["name"],[]);Xf.y_=Li});var Zf=O((m2,$f)=>{var Aw=Ci(),{noVariableValueChangeEvent:Mw}=R();function en(t=null){this.defineMetadata(t)}en.prototype.defineMetadata=function(t){};en.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Mw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};en.prototype.setVariableGUIProps=function(t,...i){};en.addonType=Aw.RoomConfig;$f.y_=en});var xf=O((N2,zf)=>{var jw=mr(),Ew=Ci(),{noVariableValueChangeEvent:_w,E:dw}=R();function Ui(t,i=!1,n=null){this.name=t,this.defineMetadata(n),this.defineVariable({name:"active",description:"Whether this plugin is active or not.",type:jw.Boolean,value:i})}Ui.prototype.defineMetadata=function(t){};Ui.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;_w?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};Ui.prototype.setVariableGUIProps=function(t,...i){};Ui.addonType=Ew.Plugin;dw(Ui,["name"],[]);zf.y_=Ui});var Df=O((S2,bf)=>{var Bw=Ci(),{noVariableValueChangeEvent:Iw}=R();function sn(t=null){this.defineMetadata(t)}sn.prototype.defineMetadata=function(t){};sn.prototype.defineVariable=function(t){var{name:i,value:n}=t,r=this;Iw?r[i]=n:Object.defineProperty(r,i,{get:()=>n,set:e=>{var s=n;e!=s&&(n=e,r.room?._onVariableValueChange?.(r,i,s,n))}})};sn.prototype.setVariableGUIProps=function(t,...i){};sn.addonType=Bw.Renderer;bf.y_=sn});var Uw=O((k2,to)=>{var Gw=Ye(),Vw=ae(),Lw=qi(),af=X();to.y_=(t,i)=>{var{ErrorCodes:n,...r}=ls();Gw(t,i);var{D:e,F:s,w:u}=j(),{J:h,K:o}=li(),{Point:v}=gi(),c=Mr(),{Dt:p,...C}=pe(),{createSandbox:N}=ye();return{version:"1.4.0",...r,Callback:{add:c.$o,remove:c.Zo},Utils:Xi(),EventFactory:Ih(),Room:{create:Rf(),join:Kf(),sandbox:N,streamWatcher:Qf()},Replay:C,Query:Vw,Library:Yf(),RoomConfig:Zf(),Plugin:xf(),Renderer:Df(),Language:Lw.Language,Errors:{HBError:af.HBError,ErrorCodes:n},Impl:{Core:{Point:v,TeamColors:zn(),Team:ht()},Stream:{F:s,w:u},Utils:{D:e,J:h,K:o,M:nr(),q:af.q}}}}});return Uw();})();if (typeof exports !== 'undefined') { if (typeof module !== 'undefined' && module.exports) exports = module.exports = Py; exports.abcHaxballAPI = Py; } else if (typeof root !== 'undefined') root['abcHaxballAPI'] = Py; else window['abcHaxballAPI'] = Py;