var hn=(()=>{var T=(t,i)=>()=>(i||t((i={VT:{}}).VT,i),i.VT);var N=T((Vp,nr)=>{nr.VT=nr.ff||(nr.ff={proxy:null,backend:{hostname:"www.haxball.com",hostnameWs:"p2p.haxball.com",secure:!0},mi:null,Fs:9,noVariableValueChangeEvent:!1,noWebRTC:!1,fixNames:!0,cr:null,stunServers:[{urls:"stun:stun.l.google.com:19302"}],backendUrl:"wss://www.haxball.com/",httpUrl:"https://p2p.haxball.com/rs/",setTimeout:null,clearTimeout:null,setInterval:null,clearInterval:null,console:null,requestAnimationFrame:null,cancelAnimationFrame:null,crypto:null,WebSocket:null,XMLHttpRequest:null,performance:null,JSON5:null,pako:null,RTCPeerConnection:null,RTCIceCandidate:null,RTCSessionDescription:null,E:(t,i,r)=>{var n=new t,e=Object.keys(n),s=Object.keys(n.__proto__),u=e.concat(s);i.forEach((h,f)=>{if(!(!h||u.includes(h))){var v=e[f];v&&(u.push(h),Object.defineProperty(t.prototype,h,{get:function(){return this[v]},set:function(c){this[v]=c}}))}}),r.forEach((h,f)=>{if(!(!h||u.includes(h))){var v=s[f];v&&(u.push(h),t.prototype[h]=t.prototype[v])}})}})});var Xe=T((Lp,Qe)=>{var E=N();Qe.VT=(t,i)=>{var{setTimeout:r,clearTimeout:n,setInterval:e,clearInterval:s,console:u,requestAnimationFrame:h,cancelAnimationFrame:f,crypto:v,WebSocket:c,XMLHttpRequest:w,performance:m,JSON5:k,pako:o}=t,l=i?.backend;l&&(l.hostname!=null&&(E.backend.hostname=l.hostname),l.hostnameWs!=null&&(E.backend.hostnameWs=l.hostnameWs),l.secure!=null&&(E.backend.secure=l.secure)),l=i?.proxy,l&&(E.proxy={},l.HttpUrl!=null&&(E.proxy.HttpUrl=l.HttpUrl),l.WebSocketUrl!=null&&(E.proxy.WebSocketUrl=l.WebSocketUrl),l.WebSocketChangeOriginAllowed!=null&&(E.proxy.WebSocketChangeOriginAllowed=l.WebSocketChangeOriginAllowed)),i?.version!=null&&(E.Fs=i.version),E.backendUrl=(E.backend.secure?"wss":"ws")+"://"+E.backend.hostnameWs+"/",E.httpUrl=i?.proxy?.HttpUrl||(E.backend.secure?"https":"http")+"://"+E.backend.hostname+"/rs/",i?.stunServer!=null&&(E.stunServers=[{urls:i.stunServer}]),i?.noWebRTC!=null&&(E.noWebRTC=i.noWebRTC),i?.fixNames!=null&&(E.fixNames=i.fixNames),E.setTimeout=r,E.clearTimeout=n,E.setInterval=e,E.clearInterval=s,E.console=u,E.requestAnimationFrame=h,E.cancelAnimationFrame=f,E.crypto=v,E.WebSocket=c,E.XMLHttpRequest=w,E.performance=m,E.JSON5=k,E.pako=o,E.mi=i?.proxyAgent,E.cr=i?.identityToken,String.fromCodePoint||(String.fromCodePoint=A=>A<65536?String.fromCharCode(A):String.fromCharCode((A>>10)+55232)+String.fromCharCode((A&1023)+56320)),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(A,z){var a=new Uint8Array(this,A,z==null?null:z-A),ut=new Uint8Array(a.byteLength);return ut.set(a),ut.buffer});var q=t.webkitRTCPeerConnection||t.mozRTCPeerConnection||t.RTCPeerConnection,p=t.webkitRTCIceCandidate||t.mozRTCIceCandidate||t.RTCIceCandidate,y=t.webkitRTCSessionDescription||t.mozRTCSessionDescription||t.RTCSessionDescription;if(!E.noWebRTC){var g=new q({iceServers:[]});try{g.createAnswer().catch(function(){g.close()})}catch{var S=S.RTCPeerConnection.prototype,R=S.createOffer,M=S.createAnswer;S.createOffer=function(z){var a=this;return new Promise(function(ut,H){R.call(a,ut,H,z)})},S.createAnswer=function(z){var a=this;return new Promise(function(ut,H){M.call(a,ut,H,z)})}}}E.RTCPeerConnection=q,E.RTCIceCandidate=p,E.RTCSessionDescription=y}});var be=T((Up,er)=>{function Ye(t,{x:i,y:r},n){return t.s?.v.m.findIndex(e=>{var s=e.e.x-i,u=e.e.y-r;return s*s+u*u<=n*n})}function $e(t,{x:i,y:r},n){return t.s?.v.R.findIndex(e=>{var s,u,h,f,v,c,w;if(0*e.jt==0){if(u=i-e.Je.x,h=r-e.Je.y,(e.Yn.x*u+e.Yn.y*h>0&&e.$n.x*u+e.$n.y*h>0)==e.jt<=0)return!1;s=Math.sqrt(u*u+h*h)-e.Ks}else{if(f=e.Z.e,v=e.z.e,u=v.x-f.x,h=v.y-f.y,c=i-v.x,w=r-v.y,(i-f.x)*u+(r-f.y)*h<=0||c*u+w*h>=0)return!1;s=e.b.x*c+e.b.y*w}return Math.abs(s)<n})}function Ze(t,{x:i,y:r},n){return t.S.Pt.findIndex(e=>{var s=e.si,u=e.ui,h=u.x-s.x,f=u.y-s.y,v=i-u.x,c=r-u.y;if((i-s.x)*h+(r-s.y)*f<=0||v*h+c*f>=0)return!1;var w=Math.sqrt(f*f+h*h);return Math.abs(v*f/w-c*h/w)<n})}function ze(t,{x:i,y:r},n){return t.s?.v.Q.findIndex(e=>Math.abs(e.ht-(e.b.x*i+e.b.y*r))<n)}function xe(t,{x:i,y:r},n){var e=t.s?.v;if(!e)return-1;var s=e.p;return e.qt.findIndex(u=>{var h=s[u.$t];if(!h)return!1;var f=s[u.Zt];if(!f)return!1;var v=h.e,c=f.e,w=c.x-v.x,m=c.y-v.y,k=i-c.x,o=r-c.y;if((i-v.x)*w+(r-v.y)*m<=0||k*w+o*m>=0)return!1;var l=Math.sqrt(m*m+w*w);return Math.abs(k*m/l-o*w/l)<n})}function De(t,{x:i,y:r}){return t.s?.v.p.findIndex(n=>{var e=n.e.x-i,s=n.e.y-r;return e*e+s*s<=n.G*n.G})}function tf(t,{x:i,y:r},n){n||(n=t.s?.S.Pi.G);var e=n*n,s=t.s?.S.ti.findIndex(u=>{var h=u.x-i,f=u.y-r;return h*h+f*f<=e});return s>=0?[s,1]:(s=t.s?.S.ii.findIndex(u=>{var h=u.x-i,f=u.y-r;return h*h+f*f<=e}),s>=0?[s,2]:[-1,-1])}function rf(t,i,r){return t.s?.v.m[Ye(t,i,r)]}function nf(t,i,r){return t.s?.v.R[$e(t,i,r)]}function ef(t,i,r){return t.S.Pt[Ze(t,i,r)]}function sf(t,i,r){return t.s?.v.Q[ze(t,i,r)]}function uf(t,i,r){return t.s?.v.qt[xe(t,i,r)]}function hf(t,i){return t.s?.v.p[De(t,i)]}er.VT=er.lf||(er.lf={getVertexIndexAtMapCoord:Ye,getVertexAtMapCoord:rf,getSegmentIndexAtMapCoord:$e,getSegmentAtMapCoord:nf,getGoalIndexAtMapCoord:Ze,getGoalAtMapCoord:ef,getPlaneIndexAtMapCoord:ze,getPlaneAtMapCoord:sf,getJointIndexAtMapCoord:xe,getJointAtMapCoord:uf,getDiscIndexAtMapCoord:De,getDiscAtMapCoord:hf,getSpawnPointIndexAtMapCoord:tf})});var yi=T((Fp,sr)=>{var qn=null,ur=[];function of(t){t&&ur.push(t)}function ff(t){if(t){var i=ur.indexOf(t);i<0||ur.splice(i,1)}}function Li(t,i=null){this.abbr=t,this.api={errors:{}},this.defineMetadata(i)}Object.defineProperty(Li,"current",{get:function(){return qn},set:function(t){qn=t,ur.forEach(i=>{i._onLanguageChange?.(t?.abbr)})}});Li.prototype.defineMetadata=function(t){};Li.resolveText=function(t,i){if(t){for(var r=/\$([\d]+)\?\("([^"]*)":"([^"]*)"\)/gm,n=/\$([\d]+)/gm,e,s="",u=0;(e=r.exec(t))!=null;)s+=t.substring(u,e.index)+(i[e[1]-1]?e[2]:e[3]),u=e.index+e[0].length;for(s+=t.substring(u),t="",u=0;(e=n.exec(s))!=null;)t+=s.substring(u,e.index)+i[e[1]-1],u=e.index+e[0].length;return t+=s.substring(u),t}};sr.VT=sr.vf||(sr.vf={Language:Li,addRoomToList:of,removeRoomFromList:ff,vh:(t,i)=>Li.resolveText(qn?.api?.errors?.[t],i||[])})});var Q=T((Kp,hr)=>{hr.VT=hr.cf||(hr.cf={Empty:0,ConnectionClosed:1,GameStateTimeout:2,RoomClosed:3,RoomFull:4,WrongPassword:5,BannedBefore:6,IncompatibleVersion:7,FailedHost:8,Unknown:9,Cancelled:10,FailedPeer:11,KickedNow:12,Failed:13,MasterConnectionError:14,StadiumParseError:15,StadiumParseSyntaxError:16,StadiumParseUnknownError:17,ObjectCastError:18,TeamColorsReadError:19,UTF8CharacterDecodeError:20,ReadTooMuchError:21,ReadWrongStringLengthError:22,EncodeUTF8CharNegativeError:23,EncodeUTF8CharTooLargeError:24,CalculateLengthOfUTF8CharNegativeError:25,CalculateLengthOfUTF8CharTooLargeError:26,BufferResizeParameterTooSmallError:27,BadColorError:28,BadTeamError:29,StadiumLimitsExceededError:30,MissingActionConfigError:31,UnregisteredActionError:32,MissingImplementationError:33,AnnouncementActionMessageTooLongError:34,ChatActionMessageTooLongError:35,KickBanReasonTooLongError:36,ChangeTeamColorsInvalidTeamIdError:37,MissingRecaptchaCallbackError:38,ReplayFileVersionMismatchError:39,ReplayFileReadError:40,JoinRoomNullIdAuthError:41,PlayerNameTooLongError:42,PlayerCountryTooLongError:43,PlayerAvatarTooLongError:44,PlayerJoinBlockedByMPDError:45,PlayerJoinBlockedByORError:46,PluginNotFoundError:47,PluginNameChangeNotAllowedError:48,LibraryNotFoundError:49,LibraryNameChangeNotAllowedError:50,AuthFromKeyInvalidIdFormatError:51,BadActorError:55,AuthBannedError:56,NoProxyIdentityProblem:57,NoProxyIdentitySolution:58})});var X=T((Hp,or)=>{var{E:ae}=N(),ot=Q(),{vh:lf}=yi();function fr(){this.code=ot.Empty,this.params=null}fr.prototype={toString:function(){return lf(this.code,this.params)}};function ft(t,...i){var r=new fr;return r.code=t,r.params=i,r}function vf(t){this.Hs=t}function ts(t){this.Ft=t}function lr(t){this.zt=t,Error.captureStackTrace?.(this,lr)}lr.prototype=Error.prototype;Object.defineProperty(lr.prototype,"message",{get:function(){return String(this.zt)}});function cf(t){switch(t){case 4001:return ft(ot.RoomClosed);case 4100:return ft(ot.RoomFull);case 4101:return ft(ot.WrongPassword);case 4102:return ft(ot.BannedBefore);case 4103:return ft(ot.IncompatibleVersion)}return ft(ot.ConnectionClosed,t)}var wf={Error:()=>[ft(ot.MasterConnectionError),ft(ot.MasterConnectionError)],wf:()=>[ft(ot.FailedHost),ft(ot.Failed)],pf:()=>[ft(ot.Cancelled),ft(ot.Empty)],qf:t=>[cf(t)]};ae(fr,["code","params"],[]);ae(ts,["version"],[]);or.VT=or.yf||(or.yf={Kt:ft,HBError:fr,We:vf,mf:ts,q:lr,At:wf})});var is=T((Jp,vr)=>{vr.VT=vr.allowFlags||(vr.allowFlags={JoinRoom:1,CreateRoom:2})});var rs=T((Wp,cr)=>{cr.VT=cr.Cf||(cr.Cf={None:0,Grass:1,Hockey:2})});var yn=T((Qp,wr)=>{wr.VT=wr.gf||(wr.gf={Player:0,IP:1,Auth:2})});var ns=T((Xp,pr)=>{pr.VT=pr.Ui||(pr.Ui={None:0,Player:1})});var es=T((Yp,qr)=>{qr.VT=qr.kf||(qr.kf={ball:0,red:1,blue:2,redKO:3,blueKO:4,wall:5,kick:6,score:7,free1:8,free2:9,free3:10,free4:11,free5:12,free6:13,free7:14,free8:15,free9:16,free10:17,free11:18,free12:19,free13:20,free14:21,free15:22,free16:23,free17:24,free18:25,free19:26,free20:27,c0:28,c1:29,c2:30,c3:31})});var ss=T(($p,yr)=>{yr.VT=yr.Sf||(yr.Sf={ConnectingToMaster:0,ConnectingToPeer:1,AwaitingState:2,Active:3,ConnectionFailed:4})});var us=T((Zp,mr)=>{mr.VT=mr.Of||(mr.Of={Backward:-1,Still:0,Forward:1})});var hs=T((zp,Cr)=>{Cr.VT=Cr.Tf||(Cr.Tf={BeforeKickOff:0,Playing:1,AfterGoal:2,Ending:3})});var V=T((xp,gr)=>{gr.VT=gr.Rf||(gr.Rf={SendAnnouncement:0,SendChatIndicator:1,CheckConsistency:2,SendInput:3,SendChat:4,JoinRoom:5,KickBanPlayer:6,StartGame:7,StopGame:8,PauseResumeGame:9,SetGamePlayLimit:10,SetStadium:11,SetPlayerTeam:12,SetTeamsLock:13,SetPlayerAdmin:14,AutoTeams:15,SetPlayerSync:16,Ping:17,SetAvatar:18,SetTeamColors:19,ReorderPlayers:20,SetKickRateLimit:21,SetHeadlessAvatar:22,SetDiscProperties:23,CustomEvent:24,BinaryCustomEvent:25,SetPlayerIdentity:26})});var os=T((Dp,kr)=>{kr.VT=kr.Nf||(kr.Nf={None:0,GK:1,SW:2,WBL:3,DL:4,DC:5,DR:6,WBR:7,DML:8,DMC:9,DMR:10,ML:11,MC:12,MR:13,AML:14,AMC:15,AMR:16,FL:17,FC:18,FR:19,ST:20})});var mn=T((bp,Sr)=>{Sr.VT=Sr.Pf||(Sr.Pf={Void:0,Boolean:1,Integer:2,Number:3,String:4,Color:5,CollisionFlags:6,Coordinate:7,Team:8,TeamWithSpec:9,BgType:10,CameraFollow:11,KickOffReset:12,Flag:13,File:14,PlayerId:15,Keys:16,Progress:17,PlayerPositionInGame:18})});var fs=T((ap,Or)=>{Or.VT=Or.Af||(Or.Af={AllowFlags:is(),BackgroundType:rs(),BanEntryType:yn(),CameraFollow:ns(),CollisionFlags:es(),ConnectionState:ss(),Direction:us(),ErrorCodes:Q(),GamePlayState:hs(),OperationType:V(),PlayerPositionInGame:os(),VariableType:mn()})});var j=T((t2,Tr)=>{var{setTimeout:cs,clearTimeout:ls,performance:Cn}=N(),zt=Q(),{Kt:xt,q:kt}=X();function ws(t,i){var r=t.charCodeAt(i);if(r==r)return r}function Rr(){}Rr.substr=function(t,i,r){if(r==null)r=t.length;else if(0>r)if(i==0)r=t.length+r;else return"";return t.substr(i,r)};Rr.remove=function(t,i){var r=t.indexOf(i);return r==-1?!1:(t.splice(r,1),!0)};function Ui(t,i){i==null&&(i=!1),this.c=t,this.Et=i,this.l=0}Ui.Mf=function(t,i){var r=t.getUint8(i),n,e,s,u,h,f=i;if(!(r&128))++i;else if((r&224)==192)n=t.getUint8(i+1),r=(r&31)<<6|n&63,i+=2;else if((r&240)==224)n=t.getUint8(i+1),e=t.getUint8(i+2),r=(r&15)<<12|(n&63)<<6|e&63,i+=3;else if((r&248)==240)n=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),r=(r&7)<<18|(n&63)<<12|(e&63)<<6|s&63,i+=4;else if((r&252)==248)n=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),r=(r&3)<<24|(n&63)<<18|(e&63)<<12|(s&63)<<6|u&63,i+=5;else if((r&254)==252)n=t.getUint8(i+1),e=t.getUint8(i+2),s=t.getUint8(i+3),u=t.getUint8(i+4),h=t.getUint8(i+5),r=(r&1)<<30|(n&63)<<24|(e&63)<<18|(s&63)<<12|(u&63)<<6|h&63,i+=6;else throw new kt(xt(zt.UTF8CharacterDecodeError,i,r));return{char:r,length:i-f}};Ui.prototype={Vt:function(t){if(t==null&&(t=this.c.byteLength-this.l),this.l+t>this.c.byteLength)throw new kt(xt(zt.ReadTooMuchError));var i=new Uint8Array(this.c.buffer,this.c.byteOffset+this.l,t);return this.l+=t,i},ch:function(t){var i=this.Vt(t);return t=new ArrayBuffer(t),new Uint8Array(t).set(i),t},Zn:function(){return this.c.getInt8(this.l++)},T:function(){return this.c.getUint8(this.l++)},Js:function(){var t=this.c.getInt16(this.l,this.Et);return this.l+=2,t},At:function(){var t=this.c.getUint16(this.l,this.Et);return this.l+=2,t},M:function(){var t=this.c.getInt32(this.l,this.Et);return this.l+=4,t},ot:function(){var t=this.c.getUint32(this.l,this.Et);return this.l+=4,t},Ws:function(){var t=this.c.getFloat32(this.l,this.Et);return this.l+=4,t},k:function(){var t=this.c.getFloat64(this.l,this.Et);return this.l+=8,t},Ht:function(){for(var t=this.l,i=0,r,n=0;r=this.c.getUint8(t+i),5>i&&(n|=(r&127)<<7*i>>>0),++i,(r&128)!=0;);return this.l+=i,n|0},rn:function(t){var i=this.l,r,n="";for(t=i+t;i<t;)r=Ui.Mf(this.c,i),i+=r.length,n+=String.fromCodePoint(r.char);if(i!=t)throw new kt(xt(zt.ReadWrongStringLengthError,i-t));return this.l=i,n},hi:function(){var t=this.Ht();return 0>=t?null:this.rn(t-1)},ci:function(){return this.rn(this.Ht())},wh:function(){return this.rn(this.T())},zn:function(){var t=this.ci();return JSON.parse(t)}};function nt(t,i){i==null&&(i=!1),this.c=t,this.Et=i,this.l=0}nt.U=function(t,i){return i==null&&(i=!1),t==null&&(t=16),new nt(new DataView(new ArrayBuffer(t)),i)};nt.jf=function(t,i,r){var n=r;if(0>t)throw new kt(xt(zt.EncodeUTF8CharNegativeError,t));if(128>t)i.setUint8(r,t&127),++r;else if(2048>t)i.setUint8(r,t>>6&31|192),i.setUint8(r+1,t&63|128),r+=2;else if(65536>t)i.setUint8(r,t>>12&15|224),i.setUint8(r+1,t>>6&63|128),i.setUint8(r+2,t&63|128),r+=3;else if(2097152>t)i.setUint8(r,t>>18&7|240),i.setUint8(r+1,t>>12&63|128),i.setUint8(r+2,t>>6&63|128),i.setUint8(r+3,t&63|128),r+=4;else if(67108864>t)i.setUint8(r,t>>24&3|248),i.setUint8(r+1,t>>18&63|128),i.setUint8(r+2,t>>12&63|128),i.setUint8(r+3,t>>6&63|128),i.setUint8(r+4,t&63|128),r+=5;else if(-2147483648>t)i.setUint8(r,t>>30&1|252),i.setUint8(r+1,t>>24&63|128),i.setUint8(r+2,t>>18&63|128),i.setUint8(r+3,t>>12&63|128),i.setUint8(r+4,t>>6&63|128),i.setUint8(r+5,t&63|128),r+=6;else throw new kt(xt(zt.EncodeUTF8CharTooLargeError,t));return r-n};nt.Ef=function(t){if(0>t)throw new kt(xt(zt.CalculateLengthOfUTF8CharNegativeError,t));if(128>t)return 1;if(2048>t)return 2;if(65536>t)return 3;if(2097152>t)return 4;if(67108864>t)return 5;if(-2147483648>t)return 6;throw new kt(xt(zt.CalculateLengthOfUTF8CharTooLargeError,t))};nt.Qe=function(t){for(var i=0,r=t.length,n=0;n<r;)i+=nt.Ef(ws(t,n++));return i};nt._f=function(t){return t>>>=0,128>t?1:16384>t?2:2097152>t?3:268435456>t?4:5};nt.prototype={Xe:function(){var t=new ArrayBuffer(this.l),i=new Uint8Array(this.c.buffer,this.c.byteOffset,this.l);return new Uint8Array(t).set(i),t},_t:function(){return new Uint8Array(this.c.buffer,this.c.byteOffset,this.l)},_r:function(){return new DataView(this.c.buffer,this.c.byteOffset,this.l)},Bf:function(){return new Ui(this._r(),this.Et)},Fi:function(t){this.c.byteLength<t&&this.If(2*this.c.byteLength>=t?2*this.c.byteLength:t)},If:function(t){if(1>t)throw new kt(xt(zt.BufferResizeParameterTooSmallError));if(this.c.byteLength<t){var i=new Uint8Array(this.c.buffer);t=new ArrayBuffer(t),new Uint8Array(t).set(i),this.c=new DataView(t)}},f:function(t){var i=this.l++;this.Fi(this.l),this.c.setUint8(i,t)},Qs:function(t){var i=this.l;this.l+=2,this.Fi(this.l),this.c.setInt16(i,t,this.Et)},Lt:function(t){var i=this.l;this.l+=2,this.Fi(this.l),this.c.setUint16(i,t,this.Et)},V:function(t){var i=this.l;this.l+=4,this.Fi(this.l),this.c.setInt32(i,t,this.Et)},kt:function(t){var i=this.l;this.l+=4,this.Fi(this.l),this.c.setUint32(i,t,this.Et)},Xs:function(t){var i=this.l;this.l+=4,this.Fi(this.l),this.c.setFloat32(i,t,this.Et)},C:function(t){var i=this.l;this.l+=8,this.Fi(this.l),this.c.setFloat64(i,t,this.Et)},Yt:function(t){var i=this.l;this.l+=t.byteLength,this.Fi(this.l),new Uint8Array(this.c.buffer,this.c.byteOffset,this.c.byteLength).set(t,i)},Ye:function(t){this.Yt(new Uint8Array(t))},wi:function(t){this.Ut(nt.Qe(t)),this.xn(t)},oi:function(t){t==null?this.Ut(0):(this.Ut(nt.Qe(t)+1),this.xn(t))},ph:function(t){var i=nt.Qe(t);if(255<i)throw new kt(null);this.f(i),this.xn(t)},$e:function(t){this.wi(JSON.stringify(t))},xn:function(t){var i=this.l;this.Fi(i+nt.Qe(t));for(var r=t.length,n=0;n<r;)i+=nt.jf(ws(t,n++),this.c,i);this.l=i},Ut:function(t){var i=this.l;t>>>=0,this.Fi(i+nt._f(t)),this.c.setUint8(i,t|128),128<=t?(this.c.setUint8(i+1,t>>7|128),16384<=t?(this.c.setUint8(i+2,t>>14|128),2097152<=t?(this.c.setUint8(i+3,t>>21|128),268435456<=t?(this.c.setUint8(i+4,t>>28&127),t=5):(this.c.setUint8(i+3,this.c.getUint8(i+3)&127),t=4)):(this.c.setUint8(i+2,this.c.getUint8(i+2)&127),t=3)):(this.c.setUint8(i+1,this.c.getUint8(i+1)&127),t=2)):(this.c.setUint8(i,this.c.getUint8(i)&127),t=1),this.l+=t}};function ps(t){this.df=t,this.Jt=[]}ps.prototype={add:function(t){for(var i=this.Jt.length,r=0,n=this.Ze=0;n<i;){var e=n++,s=this.Jt[e];s.index++,s.weight*=.97,this.Jt[r].index<s.index&&(r=e),this.Ze+=s.weight}for(i>=this.df?(i=this.Jt[r],this.Ze-=i.weight,this.Jt.splice(r,1)):i={},i.value=t,i.weight=1,i.index=0,this.Ze+=i.weight,t=0;t<this.Jt.length&&this.Jt[t].value<=i.value;)++t;this.Jt.splice(t,0,i)},ze:function(t){if(this.Jt.length==0)return 0;if(this.Jt.length==1)return this.Jt[0].value;t*=this.Ze;for(var i=this.Jt[0].weight,r=0;r<this.Jt.length-1&&!(i>=t);)++r,i+=this.Jt[r].weight;return this.Jt[r].value},max:function(){return this.Jt.length==0?0:this.Jt[this.Jt.length-1].value}};function qs(t,i){this.qh=t,this.Ys=i,this.Br=t,this.xe=Cn.now()}qs.prototype={yh:function(t){return t==null&&(t=1),this.ct(),t<=this.Br?(this.Br-=t,!0):!1},Gf:function(t){return this.ct(),t-=this.Br,0>=t?0:this.xe+t*this.Ys-Cn.now()},jc:function(t,i){var r=this.Gf(t);this.Br-=t,cs(i,r|0)},ct:function(){var t=Cn.now(),i=Math.floor((t-this.xe)/this.Ys);this.xe+=i*this.Ys,this.Br+=i,this.Br>=this.qh&&(this.Br=this.qh,this.xe=t)}};var vs={};Tr.VT=Tr.Vf||(Tr.Vf={D:Rr,F:Ui,w:nt,Lf:ps,kt:qs,Integer:vs,mh:(t,i)=>{var r=i!=null;if(r){switch(i){case Array:r=t instanceof Array;break;case Boolean:r=typeof t=="boolean";break;case Number:r=typeof t=="number";break;case vs:r=typeof t=="number"&&(t|0)===t;break;case String:r=typeof t=="string";break;default:r=!1}if(r)return t}throw new kt(xt(zt.ObjectCastError,JSON.stringify(t),JSON.stringify(i)))},Ch:(t,i)=>new Promise((r,n)=>{var e=cs(()=>{n("Timed out")},i);t.then(s=>{ls(e),r(s)},s=>{ls(e),n(s)})}),Ir:(t,i)=>t.length<=i?t:Rr.substr(t,0,i),extend:(t,i)=>{var r=Object.create(t),n;for(n in i)r[n]=i[n];return i.toString!==Object.prototype.toString&&(r.toString=i.toString),r}})});var li=T((i2,Nr)=>{var{D:pf}=j(),gn="0123456789ABCDEF";function ys(){}ys.parseInt=function(t){return t=parseInt(t,!t||t[0]!="0"||t[1]!="x"&&t[1]!="X"?10:16),isNaN(t)?null:t};function Pr(){}Pr.startsWith=function(t,i){return t.length>=i.length?pf.substr(t,0,i.length)==i:!1};Pr.replace=function(t,i,r){return t.split(i).join(r)};Pr.$s=function(t,i){var r="";do r=gn.charAt(t&15)+r,t>>>=4;while(t>0);if(i!=null)for(;r.length<i;)r="0"+r;return r};var qf=t=>{for(var i="",r=0;r<t.length;)i+=String.fromCharCode(gn.indexOf(t.charAt(r++))<<4|gn.indexOf(t.charAt(r++)));return i},yf=t=>{for(var i="",r=0,n=t.byteLength;r<n;)i+=String.fromCharCode(t[r++]);return i};Nr.VT=Nr.Uf||(Nr.Uf={gh:qf,kh:yf,K:ys,J:Pr})});var ht=T((r2,ms)=>{var{E:mf}=N();function ct(t,i,r,n,e){this.id=t,this.O=i,this.Sh=r,this.u=n,this.o=e}ct.spec=new ct(0,16777215,0,-1,0);ct.red=new ct(1,15035990,-1,8,2);ct.blue=new ct(2,5671397,1,16,4);ct.i=[ct.spec,ct.red,ct.blue];mf(ct,["id","color","defenseDir","cMask","cGroup"],[]);ms.VT=ct});var ii=T((n2,Ar)=>{Ar.VT=Ar.Ff||(Ar.Ff={Ki:0})});var Cs=T((jr,Er)=>{var Mr=(()=>{var t=(c,w)=>()=>(w||c((w={VT:{}}).VT,w),w.VT),i=t((c,w)=>{function m(k,o){this.x=k,this.y=o}m.prototype={Oh:function(){this.x=-this.x,this.y=-this.y}},w.VT=m}),r=t((c,w)=>{var m=i();w.VT=function(k){var{o=32,u:l=63,h:q=1,Kf:p=0,Hf:y=0}=k||{};this.o=o,this.u=l,this.h=q,this.e=new m(p,y)}}),n=t((c,w)=>{function m(o){var{o:l=32,u:q=63,h:p=1,Wt:y=0,Z:g=null,z:S=null}=o||{};this.Yn=this.$n=this.b=null,this.Ks=0,this.Je=null,this.Z=g,this.z=S,this.Wt=y,this.h=p,this.u=q,this.o=l,this.jt=1/0}var k=i();m.prototype={Ai:function(o){if(o*=.017453292519943295,0>o){o=-o;var l=this.Z;this.Z=this.z,this.z=l,this.Wt=-this.Wt}.17435839227423353<o&&5.934119456780721>o&&(this.jt=1/Math.tan(o/2))},getCurveDegrees:function(){return isFinite(this.jt)?114.59155902616465*Math.atan(1/this.jt):0},calculateNormals:function(){var{jt:o,z:{e:l},Z:{e:q}}=this,p,y,g,S;isFinite(o)?(g=.5*(l.x-q.x),S=.5*(l.y-q.y),p=q.x+g-S*o,y=q.y+S+g*o,g=q.x-p,S=q.y-y,this.Ks=Math.sqrt(g*g+S*S),this.Yn=new k(y-q.y,q.x-p),this.$n=new k(l.y-y,p-l.x),0>=o&&(this.Yn.Oh(),this.$n.Oh()),this.Je=new k(p,y)):(g=q.x-l.x,S=q.y-l.y,y=Math.sqrt(S*S+g*g),this.b=new k(-S/y,g/y))}},w.VT=m}),e=t((c,w)=>{var m=i();w.VT=function(k){var{o=32,u:l=63,h:q=1,ht:p=0,Ec:y=0,_c:g=0}=k||{};this.o=o,this.u=l,this.h=q,this.ht=p,this.b=new m(y,g)}}),s=t((c,w)=>{function m(o){var{Bc:l=0,Ic:q=0,dc:p=0,Gc:y=0}=o||{};this.ui=new k(p,y),this.si=new k(l,q)}var k=i();m.prototype={Jf:function({x:o,y:l},{x:q,y:p}){var{si:{x:y,y:g},ui:{x:S,y:R}}=this,M=q-o,A=p-l;return 0<A*(y-o)-M*(g-l)==0<A*(S-o)-M*(R-l)?!1:(M=S-y,A=R-g,0<A*(o-y)-M*(l-g)!=0<A*(q-y)-M*(p-g))}},w.VT=m}),u=t((c,w)=>{var m=i();w.VT=function(k){var{o=63,u:l=63,Y:q=.99,H:p=1,h:y=.5,G:g=10,xgravity:S=0,ygravity:R=0,xspeed:M=0,yspeed:A=0,Kf:z=0,Hf:a=0}=k||{};this.o=o,this.u=l,this.Y=q,this.H=p,this.h=y,this.G=g,this.P=new m(S,R),this.A=new m(M,A),this.e=new m(z,a)}}),h=t((c,w)=>{w.VT=function(m){var{Mi:k=1/0,Bt:o=100,It:l=100,$t:q=0,Zt:p=0}=m||{};this.Mi=k,this.Bt=o,this.It=l,this.$t=q,this.Zt=p}}),f=t((c,w)=>{function m(o){k.apply(this,[o])}var k=u();m.prototype={Th:function(o,l,q){var{A:p,H:y}=this;p.x+=o*l*y,p.y+=o*q*y},Wf:function(o,l){var{A:q}=this;q.x+=o,q.y+=l},Qf:function(){var{x:o,y:l}=this.A;return 0<o*o+l*l}},w.VT=m}),v=t((c,w)=>{function m(){this.p=[],this.m=[],this.Q=[],this.R=[],this.qt=[]}m.prototype={De:function(k,o){var l,q,p,y,g,S,{p:R,Q:M,R:A,m:z,qt:a}=this;R.forEach(({e:H,A:I,P:it,Y:rt})=>{var{x:pt,y:gt}=I;H.x+=k*pt,H.y+=k*gt,I.x=rt*(pt+it.x),I.y=rt*(gt+it.y)}),R.forEach((H,I)=>{var{h:it,G:rt,u:pt,o:gt,H:bt,e:W,A:Y}=H;for(l=I+1;l<R.length;l++)if(p=R[l],p.u&gt&&p.o&pt){var{e:Zt,A:qt}=p,vt=W.x-Zt.x,at=W.y-Zt.y,yt=vt*vt+at*at,d=p.G+rt;if(0<yt&&yt<=d*d){yt=Math.sqrt(yt),vt/=yt,at/=yt;var ti=bt/(bt+p.H);d-=yt,yt=d*ti,W.x+=vt*yt,W.y+=at*yt,d-=yt,Zt.x-=vt*d,Zt.y-=at*d,d=vt*(Y.x-qt.x)+at*(Y.y-qt.y),0>d&&(d*=it*p.h+1,ti*=d,Y.x-=vt*ti,Y.y-=at*ti,ti=d-ti,qt.x+=vt*ti,qt.y+=at*ti,o?.Dn?.(I,H,l,p))}}if(bt!=0){M.forEach((F,Vi)=>{if(F.u&gt&&F.o&pt){var{b:{x:U,y:G}}=F;y=F.ht-(U*W.x+G*W.y)+rt,0<y&&(W.x+=U*y,W.y+=G*y,y=Y.x*U+Y.y*G,0>y&&(y*=it*F.h+1,Y.x-=y*U,Y.y-=y*G,o?.bn?.(I,H,Vi)))}}),A.forEach((F,Vi)=>{if(F.u&gt&&F.o&pt){var U,G,K,{x:wn,y:pn}=W;if(isFinite(F.jt)){if(G=F.Je,U=wn-G.x,G=pn-G.y,K=F.Yn,d=F.$n,(0<K.x*U+K.y*G&&0<d.x*U+d.y*G)==0>=F.jt||(d=Math.sqrt(U*U+G*G),d==0))return;K=d-F.Ks,U/=d,G/=d}else{var{x:Ke,y:He}=F.Z.e,{x:Je,y:We}=F.z.e;if(G=Je-Ke,U=We-He,K=wn-Je,d=pn-We,0>=(wn-Ke)*G+(pn-He)*U||0<=K*G+d*U)return;G=F.b,U=G.x,G=G.y,K=U*K+G*d}if(d=F.Wt,d==0)0>K&&(K=-K,U=-U,G=-G);else if(0>d&&(d=-d,K=-K,U=-U,G=-G),K<-d)return;K>=rt||(K=rt-K,W.x+=U*K,W.y+=G*K,K=U*Y.x+G*Y.y,0>K&&(K*=it*F.h+1,Y.x-=U*K,Y.y-=G*K,o?.an?.(I,H,Vi)))}});var ao=rt*rt;z.forEach((F,Vi)=>{if(F.u&gt&&F.o&pt&&(y=W.x-F.e.x,g=W.y-F.e.y,S=y*y+g*g,0<S&&S<=ao)){S=Math.sqrt(S),y/=S,g/=S,S=rt-S,W.x+=y*S,W.y+=g*S,S=y*Y.x+g*Y.y;var U=0>S;U&&(S*=it*F.h+1,Y.x-=y*S,Y.y-=g*S),o?.te?.(I,H,Vi,U)}})}});for(var ut=0;2>ut;ut++)a.forEach(({Zt:H,$t:I,Mi:it,It:rt,Bt:pt},gt)=>{if(H=R[H],I=R[I],H&&I){var{e:bt,A:W,H:Y}=H,{e:Zt,A:qt,H:vt}=I;if(q=bt.x-Zt.x,I=bt.y-Zt.y,p=Math.sqrt(q*q+I*I),!(0>=p)){if(q/=p,I/=p,l=Y/(Y+vt),l!=l&&(l=.5),rt>=pt)y=rt,g=0;else if(p<=rt)y=rt,g=1;else if(p>=pt)y=pt,g=-1;else return;p=y-p,isFinite(it)?(l=it*p*.5,q*=l,I*=l,W.x+=q*Y,W.y+=I*Y,qt.x-=q*vt,qt.y-=I*vt,o?.nn?.(gt,!1,!0)):(y=p*l,bt.x+=q*y*.5,bt.y+=I*y*.5,p-=y,Zt.x-=q*p*.5,Zt.y-=I*p*.5,p=q*(W.x-qt.x)+I*(W.y-qt.y),(it=0>=g*p)&&(l*=p,W.x-=q*l,W.y-=I*l,l=p-l,qt.x+=q*l,qt.y+=I*l),o?.nn?.(gt,!0,it))}}})},addDisc:function(k){this.p.push(k)},removeDisc:function(k){k=this.p.indexOf(k),0>k||this.p.splice(k,1)}},w.VT=m});return t((c,w)=>{w.VT={Point:i(),Zs:r(),be:n(),zs:e(),Xf:s(),ae:u(),xs:h(),Ds:f(),bs:v()}})()})();typeof jr<"u"?(typeof Er<"u"&&Er.VT&&(jr=Er.VT=Mr),jr.Vc=Mr):typeof root<"u"?root.nago=Mr:window.nago=Mr});var mi=T((e2,_r)=>{var{E:ni}=N(),{extend:ei}=j(),Br=ht(),ks=ii(),{Point:Cf,Zs:Ss,be:Os,zs:Ts,Xf:Rs,ae:Ns,xs:Ps,Ds:As,bs:Ms}=Cs(),gs=1/Math.SQRT2;function kn(){Ss.call(this),this.id=0}kn.prototype=ei(Ss.prototype,{$:function(t){var i=this.e;t.C(i.x),t.C(i.y),t.C(this.h),t.V(this.u),t.V(this.o)},tt:function(t){var i=this.e;i.x=t.k(),i.y=t.k(),this.h=t.k(),this.u=t.M(),this.o=t.M()}});function Sn(){Os.call(this),this.St=!0,this.O=0}Sn.prototype=ei(Os.prototype,{$:function(t){var i=0,r=t.l;t.f(0),t.f(this.Z.id),t.f(this.z.id),this.Wt!=0&&(i=1,t.C(this.Wt)),this.jt!=1/0&&(i|=2,t.C(this.jt)),this.O!=0&&(i|=4,t.V(this.O)),this.St&&(i|=8),t.c.setUint8(r,i),t.C(this.h),t.V(this.u),t.V(this.o)},tt:function(t,i){var r=t.T();this.Z=i[t.T()],this.z=i[t.T()],this.Wt=r&1?t.k():0,this.jt=r&2?t.k():1/0,this.O=r&4?t.M():0,this.St=(r&8)!=0,this.h=t.k(),this.u=t.M(),this.o=t.M()}});function On(){Ts.call(this)}On.prototype=ei(Ts.prototype,{$:function(t){var i=this.b;t.C(i.x),t.C(i.y),t.C(this.ht),t.C(this.h),t.V(this.u),t.V(this.o)},tt:function(t){var i=this.b;i.x=t.k(),i.y=t.k(),this.ht=t.k(),this.h=t.k(),this.u=t.M(),this.o=t.M()}});function Tn(){Rs.call(this),this.N=Br.spec}Tn.prototype=ei(Rs.prototype,{$:function(t){var i=this.si;t.C(i.x),t.C(i.y),i=this.ui,t.C(i.x),t.C(i.y),t.f(this.N.id)},tt:function(t){var i=this.si;i.x=t.k(),i.y=t.k(),i=this.ui,i.x=t.k(),i.y=t.k(),this.N=Br.i[t.Zn()]||Br.spec}});function Rn(){Ns.call(this),this.O=16777215}Rn.prototype=ei(Ns.prototype,{$:function(t){var i=this.e;t.C(i.x),t.C(i.y),i=this.A,t.C(i.x),t.C(i.y),i=this.P,t.C(i.x),t.C(i.y),t.C(this.G),t.C(this.h),t.C(this.H),t.C(this.Y),t.kt(this.O),t.V(this.u),t.V(this.o)},tt:function(t){var i=this.e;i.x=t.k(),i.y=t.k(),i=this.A,i.x=t.k(),i.y=t.k(),i=this.P,i.x=t.k(),i.y=t.k(),this.G=t.k(),this.h=t.k(),this.H=t.k(),this.Y=t.k(),this.O=t.ot(),this.u=t.M(),this.o=t.M()},Yf:function(){var t=new St;return this.Rh(t),t},Rh:function(t){var i=t.e,r=this.e;i.x=r.x,i.y=r.y,i=t.A,r=this.A,i.x=r.x,i.y=r.y,i=t.P,r=this.P,i.x=r.x,i.y=r.y,t.G=this.G,t.h=this.h,t.H=this.H,t.Y=this.Y,t.O=this.O,t.u=this.u,t.o=this.o}});function Nn(){Ps.call(this),this.O=0}Nn.prototype=ei(Ps.prototype,{$:function(t){t.f(this.Zt),t.f(this.$t),t.C(this.It),t.C(this.Bt),t.C(this.Mi),t.V(this.O)},tt:function(t){this.Zt=t.T(),this.$t=t.T(),this.It=t.k(),this.Bt=t.k(),this.Mi=t.k(),this.O=t.M()}});function St(){As.call(this),this.I=null,this.ji=-1,this.it=null,this.Nh=0,this.O=16777215}St.dr=function(t,i){t.G=i.G,t.h=i.h,t.H=i.H,t.Y=i.Y,t.O=i.O,t.u=i.u,t.o=i.o;var r=t.e,n=i.e;r.x=n.x,r.y=n.y,r=t.A,n=i.A,r.x=n.x,r.y=n.y,r=t.P,n=i.P,r.x=n.x,r.y=n.y};St.prototype=ei(As.prototype,{$:function(t){var i=this.e;t.C(i.x),t.C(i.y),i=this.A,t.C(i.x),t.C(i.y),i=this.P,t.C(i.x),t.C(i.y),t.C(this.G),t.C(this.h),t.C(this.H),t.C(this.Y),t.kt(this.O),t.V(this.u),t.V(this.o)},tt:function(t){var i=this.e;i.x=t.k(),i.y=t.k(),i=this.A,i.x=t.k(),i.y=t.k(),i=this.P,i.x=t.k(),i.y=t.k(),this.G=t.k(),this.h=t.k(),this.H=t.k(),this.Y=t.k(),this.O=t.ot(),this.u=t.M(),this.o=t.M()},Ei:function(){var t=ks.Ki;return t!=this.ji&&(this.it||(this.it=new St),this.ji=t,St.dr(this.it,this)),this.it}});function ri(){Ms.call(this),this.Pt=[],this.ji=-1,this.it=null}ri.dr=function(t,i){if(i.p==null)t.p=null;else{t.p==null&&(t.p=[]);for(var r=t.p,n=i.p,e=n.length,s;r.length>e;)r.pop();for(e=0,s=n.length;e<s;){var u=e++;r[u]=n[u].Ei()}}t.m=i.m,t.R=i.R,t.Q=i.Q,t.qt=i.qt};ri.prototype=ei(Ms.prototype,{$:function(t){t.f(this.p.length);for(var i=0,r=this.p.length;i<r;){var n=i++,e=this.p[n];e.Nh=n,e.$(t)}},tt:function(t){this.p=[];for(var i=t.T(),r=0;r<i;){++r;var n=new St;n.tt(t),this.addDisc(n)}},Ei:function(){var t=ks.Ki;return t!=this.ji&&(this.it||(this.it=new ri),this.ji=t,ri.dr(this.it,this)),this.it},kickBall:function(t,i,r){var e=i.e,s=t.e,n=e.x-s.x,e=e.y-s.y,s=Math.sqrt(n*n+e*e);if(!(s-i.G-t.G>=4)){var u=n/s,h=e/s;return i.Th(r.wr,u,h),t.Th(-r.pr,u,h),!0}},$f:function(t,i){var r=t.Tt,n=((r&8)>0)-((r&4)>0),e=n==0,s=((r&2)>0)-((r&1)>0),u=s==0;!e&&!u&&(n*=gs,s*=gs),r=t.Ci,(!e||!u)&&(u=r?i.qr:i.yr,t.B.Wf(n*u,s*u)),t.B.Y=r?i.mr:i.Y},Ph:function(t,i){t.B&&(this.removeDisc(t.B),i?.(t),t.B=null)},Zf:function(t,i,r){t.Tt=0;var n=t.B;n==null&&(n=new St,n.I=t.id,t.B=n,this.addDisc(n),r?.(t));var e=i.Pi;n.O=0,n.G=e.G,n.H=e.H,n.Y=e.Y,n.h=e.h,n.u=39,n.o=t.N.o|e.o;var s=t.N==Br.red?i.ti:i.ii;s.length==0?(n.e.x=t.N.Sh*i._i,n.e.y=0):(t=n.e,s=s[s.length-1],t.x=s.x,t.y=s.y),s=n.A,s.x=0,s.y=0,n=n.P,e=e.P,n.x=e.x,n.y=e.y}});ri.zf=t=>{var i=new ri;return i.m=t.m,i.R=t.R,i.Pt=t.Pt,i.Q=t.Q,i.qt=t.qt,t.p.forEach(r=>{var n=new St;return n.e.x=r.e.x,n.e.y=r.e.y,n.A.x=r.A.x,n.A.y=r.A.y,n.P.x=r.P.x,n.P.y=r.P.y,n.G=r.G,n.h=r.h,n.H=r.H,n.Y=r.Y,n.O=r.O,n.u=r.u,n.o=r.o,i.addDisc(n),n}),i};ni(kn,["cGroup","cMask","bCoef","pos","id"],[]);ni(Sn,["normal","v1Normal","v0Normal","arcRadius","arcCenter","v0","v1","bias","bCoef","cMask","cGroup","curveF","vis","color"],[]);ni(On,["cGroup","cMask","bCoef","dist","normal"],[]);ni(Tn,["p1","p0","team"],[]);ni(Rn,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","color"],[]);ni(Nn,["strength","maxLength","minLength","d1","d0","color"],[]);ni(St,["cGroup","cMask","damping","invMass","bCoef","radius","gravity","speed","pos","playerId",null,"ext",null,"color"],[]);ni(ri,["discs","vertices","planes","segments","joints","goals",null,"ext"],[]);_r.VT=_r.xf||(_r.xf={Point:Cf,Zs:kn,be:Sn,zs:On,Df:Tn,ae:Rn,xs:Nn,Ds:St,bs:ri})});var Pn=T((s2,Ir)=>{var{noVariableValueChangeEvent:gf}=N(),dr=[];function P(t,i){dr.push({name:t})}function kf(t){var i=dr.findIndex(r=>r.name==t);i<0||dr.splice(i,1)}P("PlayerObjectCreated");P("PlayerDiscCreated");P("PlayerDiscDestroyed");P("RoomLink");P("PlayerBallKick");P("TeamGoal");P("GameEnd");P("GameTick");P("PlayerSyncChange");P("Announcement");P("KickOff");P("AutoTeams");P("ScoreLimitChange");P("TimeLimitChange");P("PlayerAdminChange");P("PlayerAvatarChange");P("PlayerHeadlessAvatarChange");P("PlayersOrderChange");P("PlayerTeamChange");P("StadiumChange");P("TeamColorsChange");P("TeamsLockChange");P("PlayerJoin");P("GamePauseChange");P("PlayerChat");P("PlayerInputChange");P("PlayerChatIndicatorChange");P("PlayerLeave");P("SetDiscProperties");P("KickRateLimitChange");P("GameStart");P("GameStop");P("PingData");P("PingChange");P("CollisionDiscVsDisc");P("CollisionDiscVsSegment");P("CollisionDiscVsPlane");P("CollisionDiscVsVertex");P("ModifyJoint");P("TimeIsUp");P("PositionsReset");P("BansClear");P("BanClear");P("ExtrapolationChange");P("HandicapChange");P("RoomRecaptchaModeChange");P("RoomTokenChange");P("RoomRecordingChange");P("RoomPropertiesChange");P("CustomEvent");P("BinaryCustomEvent");P("IdentityEvent");P("PluginActiveChange");P("ConfigUpdate");P("RendererUpdate");P("PluginUpdate");P("LibraryUpdate");P("LanguageChange");gf||P("VariableValueChange");Ir.VT=Ir.as||(Ir.as={as:dr,bf:P,af:kf})});var B=T((u2,Gr)=>{var Ci=Q(),{Kt:gi,q:ki}=X();function mt(){this.L=0}mt.tu=new Map;mt.yt=function(t){return t.vt==null&&(t.vt=!0),t.wt==null&&(t.wt=!0),t};mt.mt=function(t){if(t.Ah=t.prototype.eventType,t.pt==null)throw new ki(gi(Ci.MissingActionConfigError));t.prototype.en=t.pt,mt.tu.set(t.Ah,t)};mt.Cr=function(t,i){var r=t?.rt?.Ah;if(r==null)throw new ki(gi(Ci.UnregisteredActionError));i.f(r),t.ft(i)};mt.ir=function(t,i){var r=Object.create(mt.tu.get(t.T()).prototype);return r.L=0,r.Ot=0,r.lt(t,i),r};mt.prototype={Mh:function(){return!0},apply:function(){throw new ki(gi(Ci.MissingImplementationError))},lt:function(){throw new ki(gi(Ci.MissingImplementationError))},ft:function(){throw new ki(gi(Ci.MissingImplementationError))},copy:function(){throw new ki(gi(Ci.MissingImplementationError))},rt:mt};Object.defineProperty(mt.prototype,"eventType",{get(){return null}});function Sf(t,i){return t.L=i.L,t.Ot=i.Ot,t.i=i.i,t.ts=i.ts,t}Gr.VT=Gr.tl||(Gr.tl={Event:mt,Ct:Sf})});var An=T((h2,js)=>{function Vr(){this.list=[]}Vr.il=function(t,i,r){if(t.length==0)for(t=0;t<i.length;)r.push(i[t++]);else if(i.length==0)for(i=0;i<t.length;)r.push(t[i++]);else for(var n=0,e=t.length,s=0,u=i.length;;){var h=t[n],f=i[s];if(h.Ot<=f.Ot){if(r.push(h),++n,n>=e){for(;s<u;)r.push(i[s++]);break}}else if(r.push(f),++s,s>=u){for(;n<e;)r.push(t[n++]);break}}};Vr.prototype={iu:function(t){for(var i=0,r=t.Ot,n=t.L,e=0,s=this.list;e<s.length;){var u=s[e];++e;var h=u.Ot;if(h>r)break;if(h==r){if(u=u.L,u>n)break;u==n&&++n}++i}t.L=n,this.list.splice(i,0,t)},rl:function(t){for(var i=0,r=0,n=this.list;r<n.length&&!(n[r++].Ot>=t);)++i;this.list.splice(0,i)},nl:function(t,i){for(var r=this.list;0<r.length;)r.pop();Vr.il(t.list,i.list,this.list)},el:function(t){for(var i=0,r=this.list,n=0,e=r.length;n<e;){var s=r[n++];s.Gr!=t&&(r[i]=s,++i)}for(;r.length>i;)r.pop()},sl:function(t){for(var i=0,r=0,n=this.list;r<n.length&&!(n[r++].Ot>=t);)++i;return i}};js.VT=Vr});var Si=T((o2,Bs)=>{var{Kt:Mn,q:jn}=X(),Es=An(),Of=ii(),En=Q();function _s(t){this.ru=new Es,this.Vr=0,this.ri=0,this.rr=new Es,this.nu=0,this.gi=0,this.Bi=0,this.Hi=.06,this.eu=16.666666666666668,this.is=120,this.g=0,this.t=t}_s.prototype={_:function(){throw new jn(Mn(En.MissingImplementationError))},gr:function(){throw new jn(Mn(En.MissingImplementationError))},ct:function(){throw new jn(Mn(En.MissingImplementationError))},jh:function(t){for(var i=this.rr.list,r=0,n=i.length,e=0;e<t;){for(++e;r<n;){var s=i[r];if(s.Ot!=this.g)break;s.apply(this.t),this.ni!=null&&this.ni(s),this.ri++,++r}this.t.ct(1),this.Vr+=this.ri,this.ri=0,this.g++}for(;r<n&&(t=i[r],!(t.Ot!=this.g||t.L!=this.ri));)t.apply(this.t),this.ni!=null&&this.ni(t),this.ri++,++r;i.splice(0,r)},ie:function(t){t.Ot==this.g&&t.L<=this.ri?(t.L=this.ri++,t.apply(this.t,this.haxball),this.ni!=null&&this.ni(t)):this.rr.iu(t)},Eh:function(t,i){if(0>=t)return this.t;t>this.is&&(t=this.is),Of.Ki++;var r=this.t.Ei(),n;i!=null?(this.ru.nl(this.rr,i),n=this.ru):n=this.rr,n=n.list;for(var e=0,s=n.length,u=this.g,h=t|0,f=u+h;u<=f;){for(;e<s;){var v=n[e];if(v.Ot>u)break;v.en.wt&&v.apply(r),++e}r.ct(u!=f?1:t-h),++u}for(n=this.ru.list;0<n.length;)n.pop();return r},ul:function(t){this.gi=this.Hi*t|0,this.t.sn&&this.t.sn(t)},_h:function(t){this.nu=this.Hi*t,this.t.un&&this.t.un(t)}};Bs.VT=_s});var ds=T((f2,Is)=>{var{E:Tf}=N(),{Kt:Rf,q:Nf}=X(),{Event:_n,Ct:Pf}=B(),Af=Q(),Mf=V(),{extend:jf,Ir:Ef}=j();function Ot(){this.L=0,this.hn="",this.O=0,this.re=0,this.ne=0,this.i=0,this.ts=null}Ot.create=function(t,i,r,n){var e=new Ot;return e.hn=t,e.O=i,e.re=r,e.ne=n,e};Ot.prototype=jf(_n.prototype,{apply:function(t){this.i==0&&t.ee?.(this.hn,this.O,this.re,this.ne)},ft:function(t){t.wi(Ef(this.hn,1e3)),t.V(this.O),t.f(this.re),t.f(this.ne)},lt:function(t){if(this.hn=t.ci(),1e3<this.hn.length)throw new Nf(Rf(Af.AnnouncementActionMessageTooLongError));this.O=t.M(),this.re=t.T(),this.ne=t.T()},copy:function(){return Pf(Ot.create(this.hn,this.O,this.re,this.ne),this)},rt:Ot});Object.defineProperty(Ot.prototype,"eventType",{get(){return Mf.SendAnnouncement}});Ot.pt=_n.yt({wt:!1,vt:!1,su:{uu:10,hu:900}});_n.mt(Ot);Tf(Ot,[null,"msg","color","style","sound","byId","targetId"],[]);Is.VT=Ot});var Vs=T((l2,Gs)=>{var{E:_f}=N(),{Event:Bn,Ct:Bf}=B(),If=V(),{extend:df}=j();function Tt(){this.L=0,this.value=0,this.id=null,this.on=null,this.i=0}Tt.create=function(t,i,r){var n=new Tt;return n.value=t,n.id=i,n.on=r,n};Tt.prototype=df(Bn.prototype,{apply:function(t){if(this.id!=null){t.Bh&&t.Bh(this.i,this.id,this.on);return}var i=t.getPlayer(this.i);i!=null&&t.se?.(i,this.value)},ft:function(t){t.f(this.value),this.id!=null&&this.on!=null&&(t.V(this.id),t.f(this.on))},lt:function(t,i){if(this.value=t.T(),!i)try{this.id=t.M(),this.on=t.T()}catch{}},copy:function(){return Bf(Tt.create(this.value,this.id,this.on),this)},rt:Tt});Object.defineProperty(Tt.prototype,"eventType",{get(){return If.SendChatIndicator}});Tt.pt=Bn.yt({wt:!1,vt:!1});Bn.mt(Tt);_f(Tt,[null,"value","id","mode","byId"],[]);Gs.VT=Tt});var Us=T((v2,Ls)=>{var{E:Gf}=N(),{Event:In,Ct:Vf}=B(),Lf=V(),{extend:Uf}=j();function Rt(){this.L=0,this.data=null}Rt.create=function(t){var i=new Rt;return i.data=t,i};Rt.prototype=Uf(In.prototype,{apply:function(t){t.hl(this.data)},ft:function(t){t.Ut(this.data.byteLength),t.Ye(this.data)},lt:function(t){this.data=t.ch(t.Ht())},copy:function(){var t=null;return this.data&&(t=new ArrayBuffer(this.data.byteLength),new Uint8Array(t).set(new Uint8Array(this.data))),Vf(Rt.create(t),this)},rt:Rt});Object.defineProperty(Rt.prototype,"eventType",{get(){return Lf.CheckConsistency}});Rt.pt=In.yt({wt:!1,vt:!1});In.mt(Rt);Gf(Rt,[null,"data"],[]);Ls.VT=Rt});var Ks=T((c2,Fs)=>{var{E:Ff}=N(),{Event:dn,Ct:Kf}=B(),Hf=V(),{extend:Jf}=j();function Nt(){this.L=0,this.Tt=0,this.i=0}Nt.create=function(t){var i=new Nt;return i.Tt=t,i};Nt.prototype=Jf(dn.prototype,{apply:function(t){var i=t.getPlayer(this.i);if(i!=null){var r=this.Tt;!(i.Tt&16)&&r&16&&(i.Ci=!0),i.Tt=r,t.Lr!=null&&t.Lr(i)}},ft:function(t){t.kt(this.Tt)},lt:function(t){this.Tt=t.ot()},copy:function(){return Kf(Nt.create(this.Tt),this)},rt:Nt});Object.defineProperty(Nt.prototype,"eventType",{get(){return Hf.SendInput}});Nt.pt=dn.yt({});dn.mt(Nt);Ff(Nt,[null,"input","byId"],[]);Fs.VT=Nt});var Js=T((w2,Hs)=>{var{E:Wf}=N(),{Kt:Qf,q:Xf}=X(),{Event:Gn,Ct:Yf}=B(),$f=V(),Zf=Q(),{extend:zf,Ir:xf}=j();function Pt(){this.L=0,this.pi="",this.i=0,this.ts=null}Pt.create=function(t){var i=new Pt;return i.pi=t,i};Pt.prototype=zf(Gn.prototype,{Mh:function(t){if(t.ol!=null){var i=t.getPlayer(this.i);return i==null?!1:t.ol(i,this.pi)}return!0},apply:function(t){var i=t.getPlayer(this.i);i!=null&&t.ue?.(i,this.pi)},ft:function(t){t.wi(xf(this.pi,140))},lt:function(t){if(this.pi=t.ci(),140<this.pi.length)throw new Xf(Qf(Zf.ChatActionMessageTooLongError))},copy:function(){return Yf(Pt.create(this.pi),this)},rt:Pt});Object.defineProperty(Pt.prototype,"eventType",{get(){return $f.SendChat}});Pt.pt=Gn.yt({wt:!1,vt:!1,su:{uu:10,hu:900}});Gn.mt(Pt);Wf(Pt,[null,"text","byId","targetId"],[]);Hs.VT=Pt});var Ur=T((p2,Ws)=>{var{E:Df}=N(),Lr=ht(),bf=ii();function Oi(){this.Ki=-1,this.it=null,this.N=Lr.spec,this.B=null,this.Ji=0,this.Wi=0,this.Ci=!1,this.id=0,this.Tt=0,this.name="Player",this.fn=0,this.ln=0,this.Rt=null,this.Ii=!1,this.Ur=null,this.gt=null,this.ki=0,this.qi=!1,this.kr=null,this.Qt=null,this.nr=!1,this.ou=null}Oi.fl=function(t,i){if(t.qi=i.qi,t.ki=i.ki,t.gt=i.gt,t.Ur=i.Ur,t.Ii=i.Ii,t.Rt=i.Rt,t.ln=i.ln,t.fn=i.fn,t.name=i.name,t.Tt=i.Tt,t.id=i.id,t.Ci=i.Ci,t.Wi=i.Wi,t.Ji=i.Ji,i.B&&!i.B.Ei)debugger;t.B=i.B==null?null:i.B.Ei(),t.B&&(t.B.I=t.id),t.N=i.N};Oi.prototype={ft:function(t){t.f(this.qi?1:0),t.V(this.ki),t.oi(this.gt),t.oi(this.Ur),t.f(this.Ii?1:0),t.oi(this.Rt),t.V(this.ln),t.oi(this.name),t.V(this.Tt),t.Ut(this.id),t.f(this.Ci?1:0),t.Qs(this.Wi),t.f(this.Ji),t.f(this.N.id),t.Qs(this.B==null?-1:this.B.Nh)},lt:function(t,i){this.qi=t.T()!=0,this.ki=t.M(),this.gt=t.hi(),this.Ur=t.hi(),this.Ii=t.T()!=0,this.Rt=t.hi(),this.ln=t.M(),this.name=t.hi(),this.Tt=t.M(),this.id=t.Ht(),this.Ci=t.T()!=0,this.Wi=t.Js(),this.Ji=t.T();var r=t.Zn();this.N=r==1?Lr.red:r==2?Lr.blue:Lr.spec,r=t.Js(),this.B=0>r?null:i[r],this.B&&(this.B.I=this.id)},ll:function(){var t=bf.Ki;return t!=this.Ki&&(this.it||(this.it=new Oi),this.Ki=t,Oi.fl(this.it,this)),this.it}};Df(Oi,[null,"ext","team","disc","kickRateMinTickCounter","kickRateMaxTickCounter","isKicking","id","input","name","ping",null,"flag","sync","headlessAvatar","avatar","avatarNumber","isAdmin","conn","auth","customClient","identity"],[]);Ws.VT=Oi});var Xs=T((q2,Qs)=>{var{E:af}=N(),{Event:Vn,Ct:tl}=B(),il=V(),rl=Ur(),{extend:nl}=j();function At(){this.L=0,this.id=0,this.name="",this.Rt="",this.gt="",this.kr="",this.Qt="",this.i=0}At.create=function(t,i,r,n,e,s){var u=new At;return u.id=t,u.name=i,u.Rt=r,u.gt=n,u.kr=e,u.Qt=s,u};At.prototype=nl(Vn.prototype,{apply:function(t,i){if(this.i==0){var r=new rl;r.id=this.id,r.name=this.name,r.Rt=this.Rt,r.gt=this.gt,r.kr=this.kr,r.Qt=this.Qt,t.j.push(r),t.he?.(r),i?.room?._onPlayerObjectCreated?.(r)}},ft:function(t){t.V(this.id),t.oi(this.name),t.oi(this.Rt),t.oi(this.gt)},lt:function(t){this.id=t.M(),this.name=t.hi(),this.Rt=t.hi(),this.gt=t.hi()},copy:function(){return tl(At.create(this.id,this.name,this.Rt,this.gt,this.kr,this.Qt),this)},rt:At});Object.defineProperty(At.prototype,"eventType",{get(){return il.JoinRoom}});At.pt=Vn.yt({wt:!1,vt:!1});Vn.mt(At);af(At,[null,"id","name","flag","avatar","conn","auth","byId"],[]);Qs.VT=At});var $s=T((y2,Ys)=>{var{E:el}=N(),{Kt:sl,q:ul}=X(),{Event:Ln,Ct:hl}=B(),ol=Q(),fl=V(),{D:ll,extend:vl,Ir:cl}=j();function Mt(){this.L=0,this.id=0,this.Qi=null,this.oe=!1,this.i=0}Mt.create=function(t,i,r){var n=new Mt;return n.id=t,n.Qi=i,n.oe=r,n};Mt.prototype=vl(Ln.prototype,{apply:function(t){if(this.id!=0&&t.Si(this.i,128)){var i=t.getPlayer(this.id);if(i!=null){var r=t.getPlayer(this.i);ll.remove(t.j,i),t.s!=null&&t.s.v.removeDisc(i.B),t.fe?.(i,this.Qi,this.oe,r)}}},ft:function(t){this.Qi!=null&&(this.Qi=cl(this.Qi,100)),t.V(this.id),t.oi(this.Qi),t.f(this.oe?1:0)},lt:function(t){if(this.id=t.M(),this.Qi=t.hi(),this.oe=t.T()!=0,this.Qi!=null&&100<this.Qi.length)throw new ul(sl(ol.KickBanReasonTooLongError))},copy:function(){return hl(Mt.create(this.id,this.Qi,this.oe),this)},rt:Mt});Object.defineProperty(Mt.prototype,"eventType",{get(){return fl.KickBanPlayer}});Mt.pt=Ln.yt({wt:!1,vt:!1});Ln.mt(Mt);el(Mt,[null,"id","reason","ban","byId"],[]);Ys.VT=Mt});var zs=T((m2,Zs)=>{var{E:wl}=N(),{Event:Un,Ct:pl}=B(),ql=V(),{extend:yl}=j();function jt(){this.L=0,this.i=0}jt.create=function(){return new jt};jt.prototype=yl(Un.prototype,{apply:function(t){t.Si(this.i,32)&&t.vl(t.getPlayer(this.i),0)},ft:function(){},lt:function(){},copy:function(){return pl(jt.create(),this)},rt:jt});Object.defineProperty(jt.prototype,"eventType",{get(){return ql.StartGame}});jt.pt=Un.yt({wt:!1,vt:!1});Un.mt(jt);wl(jt,[null,"byId"],[]);Zs.VT=jt});var Ds=T((C2,xs)=>{var{E:ml}=N(),{Event:Fn,Ct:Cl}=B(),gl=V(),{extend:kl}=j();function Et(){this.L=0,this.i=0}Et.create=function(){return new Et};Et.prototype=kl(Fn.prototype,{apply:function(t){if(t.Si(this.i,32)){var i=t.getPlayer(this.i);if(t.s!=null){t.s=null;for(var r=0,n=t.j;r<n.length;){var e=n[r];++r,e.B&&t.Sr?.(e),e.B=null,e.ki=0}t.Ih&&t.Ih(),t.Or!=null&&t.Or(i)}}},ft:function(){},lt:function(){},copy:function(){return Cl(Et.create(),this)},rt:Et});Object.defineProperty(Et.prototype,"eventType",{get(){return gl.StopGame}});Et.pt=Fn.yt({wt:!1,vt:!1});Fn.mt(Et);ml(Et,[null,"byId"],[]);xs.VT=Et});var as=T((g2,bs)=>{var{E:Sl}=N(),{Event:Kn,Ct:Ol}=B(),Tl=V(),{extend:Rl}=j();function _t(){this.L=0,this.Fr=!1,this.i=0}_t.create=function(t){var i=new _t;return i.Fr=t,i};_t.prototype=Rl(Kn.prototype,{apply:function(t){var i=t.s;if(i!=null&&t.Si(this.i,16)){var r=t.getPlayer(this.i),n=i.xt==120,e=0<i.xt;this.Fr?i.xt=120:i.xt==120&&(i.xt=119),this.Fr!=n&&t.le?.(r,this.Fr,e)}},ft:function(t){t.f(this.Fr?1:0)},lt:function(t){this.Fr=t.T()!=0},copy:function(){return Ol(_t.create(this.Fr),this)},rt:_t});Object.defineProperty(_t.prototype,"eventType",{get(){return Tl.PauseResumeGame}});_t.pt=Kn.yt({});Kn.mt(_t);Sl(_t,[null,"paused","byId"],[]);bs.VT=_t});var iu=T((k2,tu)=>{var{E:Nl}=N(),{Event:Hn,Ct:Pl}=B(),Al=V(),{extend:Ml}=j();function Bt(){this.L=0,this.type=0,this.ei=0,this.i=0}Bt.create=function(t,i){var r=new Bt;return r.type=t,r.ei=i,r};Bt.prototype=Ml(Hn.prototype,{apply:function(t){if(t.Si(this.i,2)&&t.s==null)switch(this.type){case 0:var i=this.ei;t.dt=0>i?0:99<i?99:i,t.vn&&t.vn(this.ei,this.i);break;case 1:i=this.ei,t.Mt=0>i?0:99<i?99:i,t.cn&&t.cn(this.ei,this.i)}},ft:function(t){t.V(this.type),t.V(this.ei)},lt:function(t){this.type=t.M(),this.ei=t.M()},copy:function(){return Pl(Bt.create(this.type,this.ei),this)},rt:Bt});Object.defineProperty(Bt.prototype,"eventType",{get(){return Al.SetGamePlayLimit}});Bt.pt=Hn.yt({wt:!1,vt:!1});Hn.mt(Bt);Nl(Bt,[null,"type","newValue","byId"],[]);tu.VT=Bt});var nu=T((S2,ru)=>{var{E:jl}=N(),{Point:El}=mi();function Jn(){this.pr=0,this.G=15,this.o=0,this.P=new El(0,0),this.h=.5,this.H=.5,this.Y=.96,this.yr=.1,this.qr=.07,this.mr=.96,this.wr=5}Jn.prototype={$:function(t){t.C(this.h),t.C(this.H),t.C(this.Y),t.C(this.yr),t.C(this.qr),t.C(this.mr),t.C(this.wr);var i=this.P;t.C(i.x),t.C(i.y),t.V(this.o),t.C(this.G),t.C(this.pr)},tt:function(t){this.h=t.k(),this.H=t.k(),this.Y=t.k(),this.yr=t.k(),this.qr=t.k(),this.mr=t.k(),this.wr=t.k();var i=this.P;i.x=t.k(),i.y=t.k(),this.o=t.M(),this.G=t.k(),this.pr=t.k()}};jl(Jn,["kickback","radius","cGroup","gravity","bCoef","invMass","damping","acceleration","kickingAcceleration","kickingDamping","kickStrength"],[]);ru.VT=Jn});var Wr=T((O2,su)=>{var{JSON5:_l,E:Bl}=N(),{Kt:Hr,We:Il,q:si}=X(),{w:dl,Integer:J,mh:O}=j(),Jr=Q(),{J:Gl,K:Vl}=li(),{Point:Fr,Zs:L,be:$,zs:x,Df:Kr,ae:vi,xs:Fi}=mi(),eu=nu(),ci=ht(),Ll=t=>{for(var i=0,r=0;r<t.length;r++)i+=t[r],i+=i<<10,i^=i>>>6;return i=(i+=i<<3)^i>>>11,i+=i<<15,i|0};function C(){this.m=[],this.R=[],this.Q=[],this.Pt=[],this.p=[],this.qt=[],this.ti=[],this.ii=[],this.Pi=new eu,this.ve=255,this.Tr=0,this.Ui=0,this.Kr=!0,this.er=!1,this.name="",this._i=0,this.Xi=0,this.Oi=0,this.Yi=0,this.$i=0,this.Zi=0,this.zi=0,this.xi=0,this.Dt=0,this.sr=0}C.cl=dl.U(1024);C.tt=function(t){var i=t.T();return i==255?(i=new C,i.wl(t),i):C.fu()[i]};C.fu=function(){if(C.fi==null){C.fi=[];var t=new C,i;for(t.Rr("Classic",420,200,370,170,64,75),C.fi.push(t),t=new C,t.Rr("Easy",420,200,370,170,90,75),C.fi.push(t),t=new C,t.Rr("Small",420,200,320,130,55,70),C.fi.push(t),t=new C,t.Rr("Big",600,270,550,240,80,80),C.fi.push(t),t=new C,t.Rr("Rounded",420,200,370,170,64,75,75),C.fi.push(t),t=new C,t.dh("Hockey",420,204,398,182,68,120,75,100),C.fi.push(t),t=new C,t.dh("Big Hockey",600,270,550,240,90,160,75,150),C.fi.push(t),t=new C,t.Rr("Big Easy",600,270,550,240,95,80),C.fi.push(t),t=new C,t.Rr("Big Rounded",600,270,550,240,80,75,100),C.fi.push(t),t=new C,t.Rr("Huge",750,350,700,320,100,80),C.fi.push(t),t=0,i=C.fi.length;t<i;){var r=t++;C.fi[r].ve=r}}return C.fi};C.pl=function(t,i){var r=i[t.trait];if(r)for(var n=0,e=Object.keys(r);n<e.length;n++){var s=e[n];t[s]==null&&(t[s]=r[s])}};C.ql=function(t){if(t==63)return["all"];var i=[];return t&2&&i.push("red"),t&4&&i.push("blue"),t&1&&i.push("ball"),t&8&&i.push("redKO"),t&16&&i.push("blueKO"),t&32&&i.push("wall"),t&64&&i.push("kick"),t&128&&i.push("score"),t&268435456&&i.push("c0"),t&536870912&&i.push("c1"),t&1073741824&&i.push("c2"),t&-2147483648&&i.push("c3"),i};C.ur=function(t){t=O(t,Array);for(var i=0,r=0;r<t.length;)switch(t[r++]){case"all":i|=63;break;case"ball":i|=1;break;case"blue":i|=4;break;case"blueKO":i|=16;break;case"c0":i|=268435456;break;case"c1":i|=536870912;break;case"c2":i|=1073741824;break;case"c3":i|=-2147483648;break;case"kick":i|=64;break;case"red":i|=2;break;case"redKO":i|=8;break;case"score":i|=128;break;case"wall":i|=32}return i};C.di=function(t,i,r,n){r!=n&&(t[i]=C.ql(r))};C.wn=function(t,i,r){i!=r&&(t.color=C.yl(i))};C.yl=function(t){return t|=0,0>t?"transparent":Gl.$s(t)};C.rs=function(t){if(t=="transparent")return-1;if(typeof t=="string")return Vl.parseInt("0x"+t);if(t instanceof Array)return((t[0]|0)<<16)+((t[1]|0)<<8)+(t[2]|0);throw new si(Hr(Jr.BadColorError))};C.Gh=function(t){var i={x:t.e.x,y:t.e.y};return C.d(i,"bCoef",t.h,1),C.di(i,"cMask",t.u,63),C.di(i,"cGroup",t.o,32),i};C.ml=function(t){var i=new L;i.e.x=O(t.x,Number),i.e.y=O(t.y,Number);var r=t.bCoef;return r!=null&&(i.h=O(r,Number)),r=t.cMask,r!=null&&(i.u=C.ur(r)),t=t.cGroup,t!=null&&(i.o=C.ur(t)),i};C.Vh=function(t){var i=new L;i.e.x=O(t.x,Number),i.e.y=O(t.y,Number);var r=t.bCoef;return r!=null&&(i.h=O(r,Number)),r=t.cMask,r!=null&&(i.u=O(r,J)),t=t.cGroup,t!=null&&(i.o=O(t,J)),i};C.Cl=function(t,i){var r={v0:t.Z.id,v1:t.z.id};C.d(r,"bias",t.Wt,i.Wt),C.d(r,"bCoef",t.h,i.h);var n=t.getCurveDegrees();return C.d(r,"curve",n,0),n!=0&&(r.curveF=t.jt),C.d(r,"vis",t.St,i.St),C.di(r,"cMask",t.u,i.u),C.di(r,"cGroup",t.o,i.o),C.wn(r,t.O,i.O),r};C.gl=function(t,i,r){var[n,e]=t.findVertexIndicesOfSegmentObj(i),s={v0:n,v1:e};C.d(s,"bias",i.Wt,r.Wt),C.d(s,"bCoef",i.h,r.h);var u=i.getCurveDegrees();return C.d(s,"curve",u,0),u!=0&&(s.curveF=i.jt),C.d(s,"vis",i.St,r.St),C.di(s,"cMask",i.u,r.u),C.di(s,"cGroup",i.o,r.o),C.wn(s,i.O,r.O),s};C.kl=function(t,i){var r=new $,n=O(t.v1,J);r.Z=i[O(t.v0,J)],r.z=i[n],n=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,f=t.cMask,v=t.cGroup,c=t.color;return n!=null&&(r.Wt=O(n,Number)),e!=null&&(r.h=O(e,Number)),u!=null?r.jt=O(u,Number):s!=null&&r.Ai(O(s,Number)),h!=null&&(r.St=O(h,Boolean)),f!=null&&(r.u=C.ur(f)),v!=null&&(r.o=C.ur(v)),c!=null&&(r.O=C.rs(c)),r};C.Lh=function(t,i){var r=new $,n=O(t.v1,J);r.Z=i[O(t.v0,J)],r.z=i[n],n=t.bias;var e=t.bCoef,s=t.curve,u=t.curveF,h=t.vis,f=t.cMask,v=t.cGroup,c=t.color;return n!=null&&(r.Wt=O(n,Number)),e!=null&&(r.h=O(e,Number)),u!=null?r.jt=O(u,Number):s!=null&&r.Ai(O(s,Number)),h!=null&&(r.St=O(h,Boolean)),f!=null&&(r.u=O(f,J)),v!=null&&(r.o=O(v,J)),c!=null&&(r.O=O(c,J)),r};C.Sl=function(t){var i=new $,r=t.v1;i.Z=t.v0,i.z=r,r=t.bias;var n=t.bCoef,e=t.curve,s=t.curveF,u=t.vis,h=t.cMask,f=t.cGroup,v=t.color;return r!=null&&(i.Wt=O(r,Number)),n!=null&&(i.h=O(n,Number)),s!=null?i.jt=O(s,Number):e!=null&&i.Ai(O(e,Number)),u!=null&&(i.St=O(u,Boolean)),h!=null&&(i.u=O(h,J)),f!=null&&(i.o=O(f,J)),v!=null&&(i.O=O(v,J)),i};C.Uh=function(t){var i={d0:t.d0,d1:t.d1,length:t.minLength>=t.maxLength?t.minLength:[t.minLength,t.maxLength]};return C.wn(i,t.color,0),C.d(i,"strength",t.strength,1/0),i};C.Ol=function(t,i){var r=new Fi,n=O(t.d0,J),e=O(t.d1,J),s=t.color,u=t.strength,h=t.length;if(n>=i.length||0>n)throw new si(null);if(e>=i.length||0>e)throw new si(null);return r.Zt=n,r.$t=e,h==null?(n=i[n],h=i[e],n==null||h==null?r.Bt=r.It=100:(e=n.e,h=h.e,n=e.x-h.x,e=e.y-h.y,r.Bt=r.It=Math.sqrt(n*n+e*e))):h instanceof Array?(r.It=O(h[0],Number),r.Bt=O(h[1],Number)):r.Bt=r.It=O(h,Number),r.Mi=u==null||u=="rigid"?1/0:O(u,Number),s!=null&&(r.O=C.rs(s)),r};C.Fh=function(t,i){var r=new Fi,n=O(t.d0,J),e=O(t.d1,J),s=t.color,u=t.strength,h=t.length;if(n>=i.length||0>n)throw new si(null);if(e>=i.length||0>e)throw new si(null);return r.Zt=n,r.$t=e,h==null?(n=i[n],h=i[e],n==null||h==null?r.Bt=r.It=100:(e=n.e,h=h.e,n=e.x-h.x,e=e.y-h.y,r.Bt=r.It=Math.sqrt(n*n+e*e))):h instanceof Array?(r.It=O(h[0],Number),r.Bt=O(h[1],Number)):r.Bt=r.It=O(h,Number),r.Mi=u==null||u=="rigid"?1/0:O(u,Number),s!=null&&(r.O=O(s,J)),r};C.Tl=function(t){var i=new Fi,r=t.d0,n=t.d1,e=t.color,s=t.strength,u=t.length;return i.d0Obj=r,i.d1Obj=n,u==null?(u=n,r==null||u==null?i.Bt=i.It=100:(n=r.e,u=u.e,r=n.x-u.x,n=n.y-u.y,i.Bt=i.It=Math.sqrt(r*r+n*n))):u instanceof Array?(i.It=O(u[0],Number),i.Bt=O(u[1],Number)):i.Bt=i.It=O(u,Number),i.Mi=s==null||s=="rigid"?1/0:O(s,Number),e!=null&&(i.O=O(e,J)),i};C.Kh=function(t){var i={normal:[t.b.x,t.b.y],dist:t.ht};return C.d(i,"bCoef",t.h,1),C.di(i,"cMask",t.u,63),C.di(i,"cGroup",t.o,32),i};C.Rl=function(t){var i=new x,r=O(t.normal,Array),n=O(r[0],Number);r=O(r[1],Number);var e=i.b,s=Math.sqrt(n*n+r*r);return e.x=n/s,e.y=r/s,i.ht=O(t.dist,Number),n=t.bCoef,r=t.cMask,t=t.cGroup,n!=null&&(i.h=O(n,Number)),r!=null&&(i.u=C.ur(r)),t!=null&&(i.o=C.ur(t)),i};C.Hh=function(t){var i=new x,r=O(t.normal,Array),n=O(r[0],Number);r=O(r[1],Number);var e=i.b,s=Math.sqrt(n*n+r*r);return e.x=n/s,e.y=r/s,i.ht=O(t.dist,Number),n=t.bCoef,r=t.cMask,t=t.cGroup,n!=null&&(i.h=O(n,Number)),r!=null&&(i.u=O(r,J)),t!=null&&(i.o=O(t,J)),i};C.Jh=function(t){return{p0:[t.si.x,t.si.y],p1:[t.ui.x,t.ui.y],team:t.N==ci.red?"red":"blue"}};C.ip=function(t){var i=new Kr,r=O(t.p0,Array),n=O(t.p1,Array),e=i.si;switch(e.x=r[0],e.y=r[1],r=i.ui,r.x=n[0],r.y=n[1],t.team){case"blue":t=ci.blue;break;case"red":t=ci.red;break;default:throw new si(Hr(Jr.BadTeamError))}return i.N=t,i};C.Wh=function(t){var i={};return C.d(i,"bCoef",t.h,.5),C.d(i,"invMass",t.H,.5),C.d(i,"damping",t.Y,.96),C.d(i,"acceleration",t.yr,.1),C.d(i,"kickingAcceleration",t.qr,.07),C.d(i,"kickingDamping",t.mr,.96),C.d(i,"kickStrength",t.wr,5),C.di(i,"cGroup",t.o,0),(t.P.x!=0||t.P.y!=0)&&(i.gravity=[t.P.x,t.P.y]),C.d(i,"radius",t.G,15),C.d(i,"kickback",t.pr,0),i};C.Nl=function(t){var i=new eu,r=t.bCoef,n=t.invMass,e=t.damping,s=t.acceleration,u=t.kickingAcceleration,h=t.kickingDamping,f=t.kickStrength,v=t.gravity,c=t.cGroup,w=t.radius;return t=t.kickback,r!=null&&(i.h=O(r,Number)),n!=null&&(i.H=O(n,Number)),e!=null&&(i.Y=O(e,Number)),s!=null&&(i.yr=O(s,Number)),u!=null&&(i.qr=O(u,Number)),h!=null&&(i.mr=O(h,Number)),f!=null&&(i.wr=O(f,Number)),v!=null&&(r=i.P,n=O(v[1],Number),r.x=O(v[0],Number),r.y=n),c!=null&&(i.o=C.ur(c)),w!=null&&(i.G=O(w,Number)),t!=null&&(i.pr=O(t,Number)),i};C.Qh=function(t,i){var r={};return(t.e.x!=i.e.x||t.e.y!=i.e.y)&&(r.pos=[t.e.x,t.e.y]),(t.A.x!=i.A.x||t.A.y!=i.A.y)&&(r.speed=[t.A.x,t.A.y]),(t.P.x!=i.P.x||t.P.y!=i.P.y)&&(r.gravity=[t.P.x,t.P.y]),C.d(r,"radius",t.G,i.G),C.d(r,"bCoef",t.h,i.h),C.d(r,"invMass",t.H,i.H),C.d(r,"damping",t.Y,i.Y),C.wn(r,t.O,i.O),C.di(r,"cMask",t.u,i.u),C.di(r,"cGroup",t.o,i.o),r};C.Xh=function(t,i){var r=t.pos,n=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,f=t.damping,v=t.color,c=t.cMask,w=t.cGroup;if(r!=null){var m=i.e;m.x=r[0],m.y=r[1]}return n!=null&&(r=i.A,r.x=n[0],r.y=n[1]),e!=null&&(n=i.P,n.x=e[0],n.y=e[1]),s!=null&&(i.G=O(s,Number)),u!=null&&(i.h=O(u,Number)),h!=null&&(i.H=O(h,Number)),f!=null&&(i.Y=O(f,Number)),v!=null&&(i.O=C.rs(v)),c!=null&&(i.u=C.ur(c)),w!=null&&(i.o=C.ur(w)),i};C.lu=function(t,i){var r=t.pos,n=t.speed,e=t.gravity,s=t.radius,u=t.bCoef,h=t.invMass,f=t.damping,v=t.color,c=t.cMask,w=t.cGroup;if(r!=null){var m=i.e;m.x=r[0],m.y=r[1]}return n!=null&&(r=i.A,r.x=n[0],r.y=n[1]),e!=null&&(n=i.P,n.x=e[0],n.y=e[1]),s!=null&&(i.G=O(s,Number)),u!=null&&(i.h=O(u,Number)),h!=null&&(i.H=O(h,Number)),f!=null&&(i.Y=O(f,Number)),v!=null&&(i.O=O(v,J)),c!=null&&(i.u=O(c,J)),w!=null&&(i.o=O(w,J)),i};C.d=function(t,i,r,n){r!=n&&(t[i]=r)};C.prototype={ns:function(){var t=new vi;return t.O=16777215,t.u=63,t.o=193,t.G=10,t.Y=.99,t.H=1,t.h=.5,t},$:function(t){if(t.f(this.ve),!this.vu()){t.oi(this.name),t.V(this.Oi),t.C(this.$i),t.C(this.Zi),t.C(this.zi),t.C(this.xi),t.C(this.sr),t.V(this.Yi),t.C(this._i),t.C(this.Xi),t.C(this.Dt),this.Pi.$(t),t.Lt(this.Tr),t.f(this.Ui),t.f(this.Kr?1:0),t.f(this.er?1:0),t.f(this.m.length);for(var i=0,r=this.m.length;i<r;){var n=i++,e=this.m[n];e.id=n,e.$(t)}for(t.f(this.R.length),i=0,r=this.R;i<r.length;)r[i++].$(t);for(t.f(this.Q.length),i=0,r=this.Q;i<r.length;)r[i++].$(t);for(t.f(this.Pt.length),i=0,r=this.Pt;i<r.length;)r[i++].$(t);for(t.f(this.p.length),i=0,r=this.p;i<r.length;)r[i++].$(t);for(t.f(this.qt.length),i=0,r=this.qt;i<r.length;)r[i++].$(t);for(t.f(this.ti.length),i=0,r=this.ti;i<r.length;)n=r[i],++i,t.C(n.x),t.C(n.y);for(t.f(this.ii.length),i=0,r=this.ii;i<r.length;)n=r[i],++i,t.C(n.x),t.C(n.y)}},wl:function(t){function i(){for(var s=[],u=t.T(),h=0;h<u;){++h;var f=new Fr(0,0);f.x=t.k(),f.y=t.k(),s.push(f)}return s}this.name=t.hi(),this.Oi=t.M(),this.$i=t.k(),this.Zi=t.k(),this.zi=t.k(),this.xi=t.k(),this.sr=t.k(),this.Yi=t.M(),this._i=t.k(),this.Xi=t.k(),this.Dt=t.k(),this.Pi.tt(t),this.Tr=t.At(),this.Ui=t.T(),this.Kr=t.T()!=0,this.er=t.T()!=0,this.m=[];for(var r=t.T(),n=0;n<r;){var e=new L;e.tt(t),e.id=n++,this.m.push(e)}for(this.R=[],r=t.T(),n=0;n<r;)++n,e=new $,e.tt(t,this.m),this.R.push(e);for(this.Q=[],r=t.T(),n=0;n<r;)++n,e=new x,e.tt(t),this.Q.push(e);for(this.Pt=[],r=t.T(),n=0;n<r;)++n,e=new Kr,e.tt(t),this.Pt.push(e);for(this.p=[],r=t.T(),n=0;n<r;)++n,e=new vi,e.tt(t),this.p.push(e);for(this.qt=[],r=t.T(),n=0;n<r;)++n,e=new Fi,e.tt(t),this.qt.push(e);this.ti=i(),this.ii=i(),this.calculateNormals()},calculateNormals:function(){for(var t=0,i=this.R;t<i.length;)i[t++].calculateNormals()},vu:function(){return this.ve!=255},pn:function(t,i,r){return t=t[i],t!=null?O(t,Number):r},Pl:function(t,i,r){return t=t[i],t!=null?O(t,Boolean):r},Al:function(){return JSON.stringify(this.Ml())},Ml:function(){for(var t={},i=0,r=[],n=0,e=this.m,s,u,h,f,v,c,w,m;n<e.length;)s=e[n],++n,s.id=i++,r.push(C.Gh(s));for(n=new $,i=[],e=0,s=this.R;e<s.length;)i.push(C.Cl(s[e++],n));for(n=[],e=0,s=this.Q;e<s.length;)n.push(C.Kh(s[e++]));for(e=[],s=0,u=this.Pt;s<u.length;)e.push(C.Jh(u[s++]));for(s=C.Wh(this.Pi),h=new vi,u=[],f=0,v=this.p;f<v.length;)u.push(C.Qh(v[f++],h));for(h=[],f=0,v=this.qt;f<v.length;)h.push(C.Uh(v[f++]));for(f=[],v=0,c=this.ti;v<c.length;)w=c[v],++v,f.push([w.x,w.y]);for(v=[],c=0,w=this.ii;c<w.length;)m=w[c],++c,v.push([m.x,m.y]);switch(r={name:this.name,width:this._i,height:this.Xi,bg:t,vertexes:r,segments:i,planes:n,goals:e,discs:u,playerPhysics:s,ballPhysics:"disc0"},C.d(r,"maxViewWidth",this.Tr,0),C.d(r,"cameraFollow",this.Ui==1?"player":"",""),C.d(r,"spawnDistance",this.Dt,200),h.length!=0&&(r.joints=h),f.length!=0&&(r.redSpawnPoints=f),v.length!=0&&(r.blueSpawnPoints=v),C.d(r,"kickOffReset",this.er?"full":"partial","partial"),this.Oi){case 1:i="grass";break;case 2:i="hockey";break;default:i="none"}return C.d(t,"type",i,"none"),C.d(t,"width",this.$i,0),C.d(t,"height",this.Zi,0),C.d(t,"kickOffRadius",this.zi,0),C.d(t,"cornerRadius",this.xi,0),C.wn(t,this.Yi,7441498),C.d(t,"goalLine",this.sr,0),r},jl:function(t){function i(h){var f=O(h[0],Number);return h=O(h[1],Number),new Fr(f,h)}function r(h,f,v,c){c==null&&(c=!1);var w=e[f];if((!c||w!=null)&&(c=O(w,Array),c!=null))for(w=0;w<c.length;){var m=c[w];++w;try{C.pl(m,u),h.push(v(m))}catch{throw new si(new Il(Hr(Jr.StadiumParseError,f,h.length)))}}}var n=this,e=_l.parse(t);this.m=[],this.R=[],this.Q=[],this.Pt=[],this.p=[],this.qt=[],this.name=O(e.name,String),this._i=O(e.width,Number),this.Xi=O(e.height,Number),this.Tr=this.pn(e,"maxViewWidth",0)|0,e.cameraFollow=="player"&&(this.Ui=1),this.Dt=200,t=e.spawnDistance,t!=null&&(this.Dt=O(t,Number)),t=e.bg;var s;switch(t.type){case"grass":s=1;break;case"hockey":s=2;break;default:s=0}this.Oi=s,this.$i=this.pn(t,"width",0),this.Zi=this.pn(t,"height",0),this.zi=this.pn(t,"kickOffRadius",0),this.xi=this.pn(t,"cornerRadius",0),this.Yi=7441498,t.color!=null&&(this.Yi=C.rs(t.color)),this.sr=this.pn(t,"goalLine",0),this.Kr=this.Pl(e,"canBeStored",!0),this.er=e.kickOffReset=="full";var u=e.traits||{};if(t=e.ballPhysics,t!="disc0"&&(t!=null?(t=C.Xh(t,this.ns()),t.o|=192,this.p.push(t)):this.p.push(this.ns())),r(this.m,"vertexes",C.ml),r(this.R,"segments",function(h){return C.kl(h,n.m)}),r(this.Pt,"goals",C.ip),r(this.p,"discs",function(h){return C.Xh(h,new vi)}),r(this.Q,"planes",C.Rl),r(this.qt,"joints",function(h){return C.Ol(h,n.p)},!0),r(this.ti,"redSpawnPoints",i,!0),r(this.ii,"blueSpawnPoints",i,!0),t=e.playerPhysics,t!=null&&(this.Pi=C.Nl(t)),255<this.m.length||255<this.R.length||255<this.Q.length||255<this.Pt.length||1>this.p.length||255<this.p.length)throw new si(Hr(Jr.StadiumLimitsExceededError));this.calculateNormals()},El:function(){var t=C.cl;return t.l=0,this.$(t),Ll(t._t())},Rr:function(t,i,r,n,e,s,u,h){h==null&&(h=0),this.name=t,this.p.push(this.ns()),this._i=i,this.Xi=r,this.Oi=1,this.Yi=7441498,this.$i=n,this.Zi=e,this.zi=u,this.xi=h,this.Dt=.75*n,400<this.Dt&&(this.Dt=400),t=new x;var f=t.b,v,c,w,m;f.x=0,f.y=1,t.ht=-r,t.h=0,this.Q.push(t),t=new x,f=t.b,f.x=0,f.y=-1,t.ht=-r,t.h=0,this.Q.push(t),t=new x,f=t.b,f.x=1,f.y=0,t.ht=-i,t.h=0,this.Q.push(t),t=new x,f=t.b,f.x=-1,f.y=0,t.ht=-i,t.h=0,this.Q.push(t),this.es(n,1,s,13421823,ci.blue),this.es(-n,-1,s,16764108,ci.red),this.Yh(u,r),i=new x,r=i.b,r.x=0,r.y=1,i.ht=-e,i.u=1,this.Q.push(i),i=new x,r=i.b,r.x=0,r.y=-1,i.ht=-e,i.u=1,this.Q.push(i),i=new L,r=i.e,r.x=-n,r.y=-e,i.u=0,r=new L,u=r.e,u.x=n,u.y=-e,r.u=0,u=new L,t=u.e,t.x=n,t.y=-s,u.u=0,t=new L,f=t.e,f.x=n,f.y=s,t.u=0,f=new L,v=f.e,v.x=n,v.y=e,f.u=0,v=new L,c=v.e,c.x=-n,c.y=e,v.u=0,c=new L,w=c.e,w.x=-n,w.y=s,c.u=0,w=new L,m=w.e,m.x=-n,m.y=-s,w.u=0,s=new $,s.Z=r,s.z=u,s.u=1,s.St=!1,m=new $,m.Z=t,m.z=f,m.u=1,m.St=!1;var k=new $;k.Z=v,k.z=c,k.u=1,k.St=!1;var o=new $;o.Z=w,o.z=i,o.u=1,o.St=!1,this.m.push(i),this.m.push(r),this.m.push(u),this.m.push(t),this.m.push(f),this.m.push(v),this.m.push(c),this.m.push(w),this.R.push(s),this.R.push(m),this.R.push(k),this.R.push(o),this.$h(n,e,h),this.calculateNormals()},dh:function(t,i,r,n,e,s,u,h,f){this.name=t,this.p.push(this.ns()),this._i=i,this.Xi=r,this.Oi=2,this.$i=n,this.Zi=e,this.zi=h,this.xi=f,this.sr=u,this.Dt=.75*(n-u),400<this.Dt&&(this.Dt=400),t=new x;var v=t.b;v.x=0,v.y=1,t.ht=-r,t.h=0,this.Q.push(t),t=new x,v=t.b,v.x=0,v.y=-1,t.ht=-r,t.h=0,this.Q.push(t),t=new x,v=t.b,v.x=1,v.y=0,t.ht=-i,t.h=0,this.Q.push(t),t=new x,v=t.b,v.x=-1,v.y=0,t.ht=-i,t.h=0,this.Q.push(t),this.es(n-u,1,s,13421823,ci.blue,63),this.es(-n+u,-1,s,16764108,ci.red,63),this.Yh(h,r),i=new x,r=i.b,r.x=0,r.y=1,i.ht=-e,i.u=1,this.Q.push(i),i=new x,r=i.b,r.x=0,r.y=-1,i.ht=-e,i.u=1,this.Q.push(i),i=new x,r=i.b,r.x=1,r.y=0,i.ht=-n,i.u=1,this.Q.push(i),i=new x,r=i.b,r.x=-1,r.y=0,i.ht=-n,i.u=1,this.Q.push(i),this.$h(n,e,f),this.calculateNormals()},es:function(t,i,r,n,e,s,u){u==null&&(u=32),s==null&&(s=1);var h=new L,f=h.e,v,c,w,m,k;for(f.x=t+8*i,f.y=-r,f=new L,v=f.e,v.x=t+8*i,v.y=r,c=new L,v=c.e,v.x=h.e.x+22*i,v.y=h.e.y+22,w=new L,v=w.e,v.x=f.e.x+22*i,v.y=f.e.y-22,v=new $,v.Z=h,v.z=c,v.Ai(90*i),m=new $,m.Z=w,m.z=c,k=new $,k.Z=w,k.z=f,k.Ai(90*i),i=this.m.length,this.m.push(h),this.m.push(f),this.m.push(c),this.m.push(w),h=i,i=this.m.length;h<i;)f=h++,this.m[f].u=s,this.m[f].o=u,this.m[f].h=.1;for(i=this.R.length,this.R.push(v),this.R.push(m),this.R.push(k),h=i,i=this.R.length;h<i;)f=h++,this.R[f].u=s,this.R[f].o=u,this.R[f].h=.1;s=new vi,u=s.e,u.x=t,u.y=-r,s.H=0,s.G=8,s.O=n,this.p.push(s),s=new vi,u=s.e,u.x=t,u.y=r,s.H=0,s.G=8,s.O=n,this.p.push(s),n=new Kr,s=n.si,s.x=t,s.y=-r,s=n.ui,s.x=t,s.y=r,n.N=e,this.Pt.push(n)},Yh:function(t,i){var r=new L,n=r.e,e,s,u;n.x=0,n.y=-i,r.h=.1,r.o=24,r.u=6,n=new L,e=n.e,e.x=0,e.y=-t,n.h=.1,n.o=24,n.u=6,e=new L,s=e.e,s.x=0,s.y=t,e.h=.1,e.o=24,e.u=6,s=new L,u=s.e,u.x=0,u.y=i,s.h=.1,s.o=24,s.u=6,u=new $,u.Z=r,u.z=n,u.o=24,u.u=6,u.St=!1,u.h=.1;var h=new $;h.Z=e,h.z=s,h.o=24,h.u=6,h.St=!1,h.h=.1;var f=new $;f.Z=n,f.z=e,f.o=8,f.u=6,f.St=!1,f.Ai(180),f.h=.1;var v=new $;v.Z=e,v.z=n,v.o=16,v.u=6,v.St=!1,v.Ai(180),v.h=.1,this.m.push(r),this.m.push(n),this.m.push(e),this.m.push(s),this.R.push(u),this.R.push(h),this.R.push(f),this.R.push(v)},$h:function(t,i,r){if(!(0>=r)){var n=new L,e=n.e,s,u,h,f,v,c,w;e.x=-t+r,e.y=-i,n.u=0,e=new L,s=e.e,s.x=-t,s.y=-i+r,e.u=0,s=new L,u=s.e,u.x=-t+r,u.y=i,s.u=0,u=new L,f=u.e,f.x=-t,f.y=i-r,u.u=0,f=new L,v=f.e,v.x=t-r,v.y=i,f.u=0,v=new L,h=v.e,h.x=t,h.y=i-r,v.u=0,h=new L,c=h.e,c.x=t-r,c.y=-i,h.u=0,c=new L,w=c.e,w.x=t,w.y=-i+r,c.u=0,t=new $,t.Z=n,t.z=e,t.u=1,t.St=!1,t.h=1,t.Ai(-90),i=new $,i.Z=s,i.z=u,i.u=1,i.St=!1,i.h=1,i.Ai(90),r=new $,r.Z=f,r.z=v,r.u=1,r.St=!1,r.h=1,r.Ai(-90),w=new $,w.Z=h,w.z=c,w.u=1,w.St=!1,w.h=1,w.Ai(90),this.m.push(n),this.m.push(e),this.m.push(s),this.m.push(u),this.m.push(f),this.m.push(v),this.m.push(h),this.m.push(c),this.R.push(t),this.R.push(i),this.R.push(r),this.R.push(w)}},copy:function(){var t=new C,i=this;t.ve=i.ve,t.name=i.name,t.Oi=i.Oi,t.$i=i.$i,t.Zi=i.Zi,t.zi=i.zi,t.xi=i.xi,t.sr=i.sr,t.Yi=i.Yi,t._i=i._i,t.Xi=i.Xi,t.Dt=i.Dt;var r=t.Pi,n=i.Pi;return r.h=n.h,r.H=n.H,r.Y=n.Y,r.yr=n.yr,r.qr=n.qr,r.mr=n.mr,r.wr=n.wr,r.P.x=n.P.x,r.P.y=n.P.y,r.o=n.o,r.G=n.G,r.pr=n.pr,t.Tr=i.Tr,t.Ui=i.Ui,t.Kr=i.Kr,t.er=i.er,t.m=i.m.map((e,s)=>{var u=new L;return u.e.x=e.e.x,u.e.y=e.e.y,u.h=e.h,u.u=e.u,u.o=e.o,u.id=s,u}),t.R=i.R.map(e=>{var s=new $,u=e.Z,h=e.z,f=-1,v=-1;return i.m.forEach((c,w)=>{c==u?f=w:c==h&&(v=w)}),s.Z=t.m[f],s.z=t.m[v],s.Wt=e.Wt,s.jt=e.jt,s.O=e.O,s.St=e.St,s.h=e.h,s.u=e.u,s.o=e.o,s}),t.Q=i.Q.map(e=>{var s=new x;return s.b.x=e.b.x,s.b.y=e.b.y,s.ht=e.ht,s.h=e.h,s.u=e.u,s.o=e.o,s}),t.Pt=i.Pt.map(e=>{var s=new Kr;return s.si.x=e.si.x,s.si.y=e.si.y,s.ui.x=e.ui.x,s.ui.y=e.ui.y,s.N=e.N,s}),t.p=i.p.map(e=>{var s=new vi;return s.e.x=e.e.x,s.e.y=e.e.y,s.A.x=e.A.x,s.A.y=e.A.y,s.P.x=e.P.x,s.P.y=e.P.y,s.G=e.G,s.h=e.h,s.H=e.H,s.Y=e.Y,s.O=e.O,s.u=e.u,s.o=e.o,s}),t.qt=i.qt.map(e=>{var s=new Fi;return s.Zt=e.Zt,s.$t=e.$t,s.It=e.It,s.Bt=e.Bt,s.Mi=e.Mi,s.O=e.O,s}),t.ti=i.ti.map(e=>new Fr(e.x,e.y)),t.ii=i.ii.map(e=>new Fr(e.x,e.y)),t.calculateNormals(),t}};Object.defineProperty(C.prototype,"isCustom",{get:function(){return!this.vu()}});Bl(C,["vertices","segments","planes","goals","discs","joints","redSpawnPoints","blueSpawnPoints","playerPhysics","defaultStadiumId","maxViewWidth","cameraFollow","canBeStored","fullKickOffReset","name","width","height","bgType","bgColor","bgWidth","bgHeight","bgKickOffRadius","bgCornerRadius","spawnDistance","bgGoalLine"],[]);su.VT=C});var ou=T((T2,hu)=>{var{pako:uu,E:Ul}=N(),{Event:Wn,Ct:Fl}=B(),Kl=V(),Hl=Wr(),{F:Jl,w:Wl,extend:Ql}=j();function It(){this.L=0,this.S=null,this.i=0}It.create=function(t){var i=new It;return i.S=t,i};It.prototype=Ql(Wn.prototype,{apply:function(t){if(t.Si(this.i,8)){var i=t.getPlayer(this.i);t.s==null&&(t.S=this.S,t.qn!=null&&t.qn(i,this.S))}},ft:function(t){var i=Wl.U();this.S.$(i),i=uu.deflateRaw(i._t()),t.Lt(i.byteLength),t.Yt(i)},lt:function(t){t=uu.inflateRaw(t.Vt(t.At())),this.S=Hl.tt(new Jl(new DataView(t.buffer,t.byteOffset,t.byteLength)))},copy:function(){return Fl(It.create(this.S?.copy()),this)},rt:It});Object.defineProperty(It.prototype,"eventType",{get(){return Kl.SetStadium}});It.pt=Wn.yt({wt:!1,vt:!1,su:{uu:10,hu:2e3}});Wn.mt(It);Ul(It,[null,"stadium","byId"],[]);hu.VT=It});var lu=T((R2,fu)=>{var{E:Xl}=N(),{Event:Xn,Ct:Yl}=B(),$l=V(),{extend:Zl}=j(),Qn=ht();function dt(){this.L=0,this.I=0,this.N=null,this.i=0}dt.create=function(t,i){var r=new dt;return r.I=t,r.N=i,r};dt.prototype=Zl(Xn.prototype,{apply:function(t){var i=t.getPlayer(this.I);if(i!=null){var r=t.getPlayer(this.i),n=t.Si(this.i,1);(n=n||i==r&&!t.hr&&t.s==null)&&i.N!=this.N&&(t.ss(r,i,this.N),t.yn&&t.yn(this.I,this.N.id,this.i))}},ft:function(t){t.V(this.I),t.f(this.N.id)},lt:function(t){this.I=t.M(),t=t.Zn(),this.N=t==1?Qn.red:t==2?Qn.blue:Qn.spec},copy:function(){return Yl(dt.create(this.I,this.N),this)},rt:dt});Object.defineProperty(dt.prototype,"eventType",{get(){return $l.SetPlayerTeam}});dt.pt=Xn.yt({wt:!1,vt:!1});Xn.mt(dt);Xl(dt,[null,"playerId","team","byId"],[]);fu.VT=dt});var cu=T((N2,vu)=>{var{E:zl}=N(),{Event:Yn,Ct:xl}=B(),Dl=V(),{extend:bl}=j();function Gt(){this.L=0,this.ei=0,this.i=0}Gt.create=function(t){var i=new Gt;return i.ei=t,i};Gt.prototype=bl(Yn.prototype,{apply:function(t){t.Si(this.i,2)&&(t.hr=this.ei,t.mn&&t.mn(this.ei,this.i))},ft:function(t){t.f(this.ei?1:0)},lt:function(t){this.ei=t.T()!=0},copy:function(){return xl(Gt.create(this.ei),this)},rt:Gt});Object.defineProperty(Gt.prototype,"eventType",{get(){return Dl.SetTeamsLock}});Gt.pt=Yn.yt({wt:!1,vt:!1});Yn.mt(Gt);zl(Gt,[null,"newValue","byId"],[]);vu.VT=Gt});var pu=T((P2,wu)=>{var{E:al}=N(),{Event:$n,Ct:tv}=B(),iv=V(),{extend:rv}=j();function Vt(){this.L=0,this.I=0,this.value=0,this.i=0}Vt.create=function(t,i){var r=new Vt;return r.I=t,r.value=i,r};Vt.prototype=rv($n.prototype,{apply:function(t){if(t.Si(this.i,4)){var i=t.getPlayer(this.i),r=t.getPlayer(this.I);r!=null&&r.id!=0&&r.qi!=this.value&&(r.qi=this.value,t.Cn!=null&&t.Cn(i,r))}},ft:function(t){t.V(this.I),t.f(this.value?1:0)},lt:function(t){this.I=t.M(),this.value=t.T()!=0},copy:function(){return tv(Vt.create(this.I,this.value),this)},rt:Vt});Object.defineProperty(Vt.prototype,"eventType",{get(){return iv.SetPlayerAdmin}});Vt.pt=$n.yt({wt:!1,vt:!1});$n.mt(Vt);al(Vt,[null,"playerId","value","byId"],[]);wu.VT=Vt});var yu=T((A2,qu)=>{var{E:nv}=N(),{Event:Zn,Ct:ev}=B(),sv=V(),{extend:uv}=j(),Dt=ht();function Lt(){this.L=0,this.i=0}Lt.create=function(){return new Lt};Lt.prototype=uv(Zn.prototype,{apply:function(t){if(t.Si(this.i,1)){for(var i=t.getPlayer(this.i),r=t.j,n=[],e=0,s=0,u=0;u<r.length;){var h=r[u];++u,h.N==Dt.spec&&n.push(h),h.N==Dt.red?++e:h.N==Dt.blue&&++s}r=n.length;var f;r!=0&&(s==e?2>r||(t.ss(i,n[0],Dt.red),t.ss(i,n[1],Dt.blue),t.Nr&&t.Nr(n[0].id,Dt.red.id,n[1].id,Dt.blue.id,this.i)):(f=s>e?Dt.red:Dt.blue,t.ss(i,n[0],f),t.Nr&&t.Nr(n[0].id,f.id,null,null,this.i)))}},ft:function(){},lt:function(){},copy:function(){return ev(Lt.create(),this)},rt:Lt});Object.defineProperty(Lt.prototype,"eventType",{get(){return sv.AutoTeams}});Lt.pt=Zn.yt({wt:!1,vt:!1});Zn.mt(Lt);nv(Lt,[null,"byId"],[]);qu.VT=Lt});var Cu=T((M2,mu)=>{var{E:hv}=N(),{Event:zn,Ct:ov}=B(),fv=V(),{extend:lv}=j();function Ut(){this.L=0,this.value=!1,this.i=0}Ut.create=function(t){var i=new Ut;return i.value=t,i};Ut.prototype=lv(zn.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&this.value!=i.Ii&&(i.Ii=this.value,t.ce?.(i))},ft:function(t){t.f(this.value?1:0)},lt:function(t){this.value=t.T()!=0},copy:function(){return ov(Ut.create(this.value),this)},rt:Ut});Object.defineProperty(Ut.prototype,"eventType",{get(){return fv.SetPlayerSync}});Ut.pt=zn.yt({wt:!1,vt:!1});zn.mt(Ut);hv(Ut,[null,"value","byId"],[]);mu.VT=Ut});var ku=T((j2,gu)=>{var{E:vv}=N(),{Event:xn,Ct:cv}=B(),wv=V(),{extend:pv}=j();function Ft(){this.L=0,this.values=null,this.i=0}Ft.prototype=pv(xn.prototype,{apply:function(t){if(this.i==0){var i=t;t=t.j;for(var r=0,n=t.length;r<n;){var e=r++;if(e>=this.values.length)break;t[e].fn=this.values[e]}i.gn&&i.gn(this.values)}},ft:function(t){t.Ut(this.values.length);for(var i=0,r=this.values;i<r.length;)t.Ut(r[i++])},lt:function(t){this.values=[];for(var i=t.Ht(),r=0;r<i;)++r,this.values.push(t.Ht())},copy:function(){var t=new Ft,i=this.values;t.values=[];for(var r=i.length,n=0;n<r;n++)t.values.push(i[n]);return cv(t,this)},rt:Ft});Ft.create=function(t){for(var i=new Ft,r=t.t.j,n=[],e=0;e<r.length;){var s=t.Hr.get(r[e++].id);n.push(s==null?t.t.Zh&&t.t.Zh():s.fn)}return i.values=n,i};Object.defineProperty(Ft.prototype,"eventType",{get(){return wv.Ping}});Ft.pt=xn.yt({wt:!1,vt:!1});xn.mt(Ft);vv(Ft,[null,"values","byId"],[]);gu.VT=Ft});var Ou=T((E2,Su)=>{var{E:qv}=N(),{Event:Dn,Ct:yv}=B(),mv=V(),{extend:Cv,Ir:gv}=j();function Kt(){this.L=0,this.value=null,this.i=0}Kt.create=function(t){var i=new Kt;return i.value=t,i};Kt.prototype=Cv(Dn.prototype,{apply:function(t){var i=t.getPlayer(this.i);i!=null&&(i.gt=this.value,t.kn&&t.kn(this.i,this.value))},ft:function(t){t.oi(this.value)},lt:function(t){this.value=t.hi(),this.value!=null&&(this.value=gv(this.value,2))},copy:function(){return yv(Kt.create(this.value),this)},rt:Kt});Object.defineProperty(Kt.prototype,"eventType",{get(){return mv.SetAvatar}});Kt.pt=Dn.yt({wt:!1,vt:!1});Dn.mt(Kt);qv(Kt,[null,"value","byId"],[]);Su.VT=Kt});var Xr=T((_2,Tu)=>{var{E:kv}=N(),Sv=Q(),{Kt:Ov,q:Tv}=X();function Qr(){this.we=0,this.pi=16777215,this.Gi=[]}Qr.prototype={$:function(t){t.f(this.we),t.V(this.pi),t.f(this.Gi.length);for(var i=0,r=this.Gi;i<r.length;)t.V(r[i++])},tt:function(t){this.we=t.T(),this.pi=t.M();var i=t.T();if(3<i)throw new Tv(Ov(Sv.TeamColorsReadError));this.Gi=[];for(var r=0;r<i;)++r,this.Gi.push(t.M())},copy:function(){var t=new Qr;return t.we=this.we,t.pi=this.pi,t.Gi=this.Gi.slice(),t}};kv(Qr,["angle","text","inner"],[]);Tu.VT=Qr});var Pu=T((B2,Nu)=>{var{E:Rv}=N(),{Event:an,Ct:Nv}=B(),Pv=Q(),{q:Av,Kt:Mv}=X(),jv=V(),{extend:Ev}=j(),{K:bn}=li(),Ki=ht(),Ru=Xr();function wt(){this.L=0,this.N=null,this.Jr=null,this.i=0}wt.create=function(t,i){var r=new wt;return r.N=t,r.Jr=i,r};wt.prototype=Ev(an.prototype,{apply:function(t){t.Si(this.i,2)&&this.N!=Ki.spec&&(t.Vi[this.N.id]=this.Jr,t.Sn&&t.Sn(this.N.id,this.Jr,this.i))},ft:function(t){t.f(this.N.id),this.Jr.$(t)},lt:function(t){var i=t.Zn();this.N=i==1?Ki.red:i==2?Ki.blue:Ki.spec,this.Jr=new Ru,this.Jr.tt(t)},copy:function(){return Nv(wt.create(this.N,this.Jr?.copy()),this)},rt:wt});Object.defineProperty(wt.prototype,"eventType",{get(){return jv.SetTeamColors}});wt.createFromData=function(t,i,...r){var n=new Ru,e=Ki.i[t];if(!e)throw new Av(Mv(Pv.ChangeTeamColorsInvalidTeamIdError));n.Gi=[e.O];var s=wt.create(e,n),u=r.length;if(u<1)return s;if(u>4&&(u=4),n.we=256*bn.parseInt(i)/360|0,n.pi=bn.parseInt("0x"+r[0]),1<u){n.Gi=[];for(var h=1,f=u;h<f;)n.Gi.push(bn.parseInt("0x"+r[h++]))}return s};wt.pt=an.yt({wt:!1,vt:!1});an.mt(wt);Rv(wt,[null,"team","colors","byId"],[]);Nu.VT=wt});var Mu=T((I2,Au)=>{var{E:_v}=N(),{Event:te,Ct:Bv}=B(),Iv=V(),{extend:dv}=j();function Ht(){this.L=0,this.Di=null,this.Wr=!0,this.i=0}Ht.create=function(t,i){for(var r=new Ht,n=new Set,e=0,s,u;e<t.length;)n.add(t[e++]);for(t=[],e=0,n=n.values(),s=n.next();!s.done&&(u=s.value,s=n.next(),t.push(u),++e,!(e>=40)););return r.Di=t,r.Wr=i,r};Ht.prototype=dv(te.prototype,{apply:function(t){if(this.i==0){for(var i=new Map,r=0,n=t.j;r<n.length;){var e=n[r];++r,i.set(e.id,e)}for(r=[],n=0,e=this.Di;n<e.length;){var s=e[n];++n;var u=i.get(s);u!=null&&(i.delete(s),r.push(u))}for(n=[],i=i.values(),e=i.next();!e.done;)s=e.value,e=i.next(),n.push(s);t.j=this.Wr?r.concat(n):n.concat(r),t.On&&t.On(this.Di,this.Wr)}},ft:function(t){t.f(this.Wr?1:0),t.f(this.Di.length);for(var i=0,r=this.Di;i<r.length;)t.V(r[i++])},lt:function(t){this.Wr=t.T()!=0;var i=t.T();this.Di=[];for(var r=0;r<i;)++r,this.Di.push(t.M())},copy:function(){var t=new Ht;t.Wr=this.Wr;var i=this.Di;t.Di=[];for(var r=i.length,n=0;n<r;n++)t.Di.push(i[n]);return Bv(t,this)},rt:Ht});Object.defineProperty(Ht.prototype,"eventType",{get(){return Iv.ReorderPlayers}});Ht.pt=te.yt({wt:!1,vt:!1});te.mt(Ht);_v(Ht,[null,"playerIdList","moveToTop","byId"],[]);Au.VT=Ht});var Eu=T((d2,ju)=>{var{E:Gv}=N(),{Event:ie,Ct:Vv}=B(),Lv=V(),{extend:Uv}=j();function Jt(){this.L=0,this.min=0,this.pe=0,this.qe=0,this.i=0}Jt.create=function(t,i,r){var n=new Jt;return n.min=t,n.pe=i,n.qe=r,n};Jt.prototype=Uv(ie.prototype,{apply:function(t){t.Si(this.i,2)&&t._l(t.getPlayer(this.i),this.min,this.pe,this.qe)},ft:function(t){t.V(this.min),t.V(this.pe),t.V(this.qe)},lt:function(t){this.min=t.M(),this.pe=t.M(),this.qe=t.M()},copy:function(){return Vv(Jt.create(this.min,this.pe,this.qe),this)},rt:Jt});Object.defineProperty(Jt.prototype,"eventType",{get(){return Lv.SetKickRateLimit}});Jt.pt=ie.yt({wt:!1,vt:!1});ie.mt(Jt);Gv(Jt,[null,"min","rate","burst","byId"],[]);ju.VT=Jt});var Iu=T((G2,Bu)=>{var{E:Fv}=N(),{Event:re,Ct:Kv}=B(),Hv=V(),{extend:Jv,Ir:_u}=j();function Wt(){this.L=0,this.gt="",this.I=0,this.i=0}Wt.create=function(t,i){var r=new Wt;return r.gt=i!=null?_u(i,2):null,r.I=t,r};Wt.prototype=Jv(re.prototype,{apply:function(t){t=t.getPlayer(this.I),t!=null&&this.i==0&&(t.Ur=this.gt,t.Tn&&t.Tn(this.I,this.gt))},ft:function(t){t.oi(this.gt),t.V(this.I)},lt:function(t){this.gt=t.hi(),this.I=t.M(),this.gt!=null&&(this.gt=_u(this.gt,2))},copy:function(){return Kv(Wt.create(this.I,this.gt),this)},rt:Wt});Object.defineProperty(Wt.prototype,"eventType",{get(){return Hv.SetHeadlessAvatar}});Wt.pt=re.yt({wt:!1,vt:!1});re.mt(Wt);Fv(Wt,[null,"avatar","playerId","byId"],[]);Bu.VT=Wt});var Gu=T((V2,du)=>{var{E:Wv}=N(),{Event:ne,Ct:Qv}=B(),Xv=V(),{extend:Yv}=j();function tt(){this.L=0,this.id=0,this.type=!1,this.nt=null,this.Xt=null,this.i=0}tt.create=function(t,i,r){var n=new tt;for(n.id=t,n.type=i,n.nt=[r.x,r.y,r.xspeed,r.yspeed,r.xgravity,r.ygravity,r.radius,r.bCoeff,r.invMass,r.damping],n.Xt=[r.color,r.cMask,r.cGroup],t=0,i=n.nt.length;t<i;){r=t++;var e=n.nt[r];e!=null&&(tt.zh[0]=e,n.nt[r]=tt.zh[0])}for(t=0,i=n.Xt.length;t<i;)r=t++,e=n.Xt[r],e!=null&&(tt.xh[0]=e,n.Xt[r]=tt.xh[0]);return n};tt.prototype=Yv(ne.prototype,{apply:function(t){if(this.i==0){var i=t.s,r=t;if(i!=null){if(this.type){if(t=t.getPlayer(this.id),t==null)return;t=t.B}else t=i.v.p[this.id];t!=null&&(this.nt[0]!=null&&(t.e.x=this.nt[0]),this.nt[1]!=null&&(t.e.y=this.nt[1]),this.nt[2]!=null&&(t.A.x=this.nt[2]),this.nt[3]!=null&&(t.A.y=this.nt[3]),this.nt[4]!=null&&(t.P.x=this.nt[4]),this.nt[5]!=null&&(t.P.y=this.nt[5]),this.nt[6]!=null&&(t.G=this.nt[6]),this.nt[7]!=null&&(t.h=this.nt[7]),this.nt[8]!=null&&(t.H=this.nt[8]),this.nt[9]!=null&&(t.Y=this.nt[9]),this.Xt[0]!=null&&(t.O=this.Xt[0]),this.Xt[1]!=null&&(t.u=this.Xt[1]),this.Xt[2]!=null&&(t.o=this.Xt[2]),r.Rn&&r.Rn(this.id,this.type,this.nt,this.Xt))}}},ft:function(t){t.V(this.id),t.f(this.type?1:0);var i=t.l;t.Lt(0);for(var r=0,n=1,e=0,s=this.nt;e<s.length;){var u=s[e];++e,u!=null&&(r|=n,t.Xs(u)),n<<=1}for(e=0,s=this.Xt;e<s.length;)u=s[e],++e,u!=null&&(r|=n,t.V(u)),n<<=1;n=t.l,t.l=i,t.Lt(r),t.l=n},lt:function(t){this.id=t.M(),this.type=t.T()!=0;var i=t.At();this.nt=[];for(var r=0;10>r;){var n=r++;this.nt[n]=null,i&1&&(this.nt[n]=t.Ws()),i>>>=1}for(this.Xt=[],r=0;3>r;)n=r++,this.Xt[n]=null,i&1&&(this.Xt[n]=t.M()),i>>>=1},copy:function(){var t=new tt;t.id=this.id,t.type=this.type;var i=this.nt;t.nt=[];for(var r=i.length,n=0;n<r;n++)t.nt.push(i[n]);for(i=this.Xt,t.Xt=[],r=i.length,n=0;n<r;n++)t.Xt.push(i[n]);return Qv(t,this)},rt:tt});Object.defineProperty(tt.prototype,"eventType",{get(){return Xv.SetDiscProperties}});tt.zh=new Float32Array(1);tt.xh=new Int32Array(1);tt.pt=ne.yt({wt:!1,vt:!1});ne.mt(tt);Wv(tt,[null,"id","type","data1","data2","byId"],[]);du.VT=tt});var Lu=T((L2,Vu)=>{var{E:$v}=N(),{Event:ee,Ct:Zv}=B(),zv=V(),{extend:xv}=j();function Qt(){this.L=0,this.type=0,this.data=null,this.i=0}Qt.create=function(t,i){var r=new Qt;return r.type=t,r.data=i,r};Qt.prototype=xv(ee.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.Nn&&t.Nn(this.type,this.data,this.i)},ft:function(t){t.kt(this.type),t.wi(JSON.stringify(this.data))},lt:function(t){this.type=t.ot(),this.data=JSON.parse(t.ci())},copy:function(){return Zv(Qt.create(this.type,JSON.parse(JSON.stringify(this.data))),this)},rt:Qt});Object.defineProperty(Qt.prototype,"eventType",{get(){return zv.CustomEvent}});Qt.pt=ee.yt({wt:!1,vt:!1});ee.mt(Qt);$v(Qt,[null,"type","data","byId"],[]);Vu.VT=Qt});var Ku=T((U2,Fu)=>{var{pako:Uu,E:Dv}=N(),{Event:se,Ct:bv}=B(),av=V(),{F:tc,w:ic,extend:rc}=j();function Xt(){this.L=0,this.type=0,this.data=null,this.i=0}Xt.create=function(t,i){var r=new Xt;return r.type=t,r.data=i,r};Xt.prototype=rc(se.prototype,{apply:function(t){this.i!=0&&!t.getPlayer(this.i)||t.Pn&&t.Pn(this.type,this.data,this.i)},ft:function(t){var i=ic.U();i.kt(this.type),i.Yt(this.data),i=Uu.deflateRaw(i._t()),t.kt(i.byteLength),t.Yt(i)},lt:function(t){t=Uu.inflateRaw(t.Vt(t.ot()));var i=new tc(new DataView(t.buffer,t.byteOffset,t.byteLength));this.type=i.ot(),this.data=i.Vt()},copy:function(){var t=new Uint8Array;return t.set(this.data),bv(Xt.create(this.type,t),this)},rt:Xt});Object.defineProperty(Xt.prototype,"eventType",{get(){return av.BinaryCustomEvent}});Xt.pt=se.yt({wt:!1,vt:!1});se.mt(Xt);Dv(Xt,[null,"type","data","byId"],[]);Fu.VT=Xt});var Ju=T((F2,Hu)=>{var{E:nc}=N(),{Event:ue,Ct:ec}=B(),sc=V(),{extend:uc}=j();function Yt(){this.L=0,this.id=0,this.data=null,this.i=0}Yt.create=function(t,i){var r=new Yt;return r.id=t,r.data=i,r};Yt.prototype=uc(ue.prototype,{apply:function(t){if(this.i==0){var i=t.getPlayer(this.id);i!=null&&t.An&&(i.ou=this.data,t.An(this.id,this.data,this.i))}},ft:function(t){t.kt(this.id),t.wi(JSON.stringify(this.data))},lt:function(t){this.id=t.ot(),this.data=JSON.parse(t.ci())},copy:function(){return ec(Yt.create(this.id,JSON.parse(JSON.stringify(this.data))),this)},rt:Yt});Object.defineProperty(Yt.prototype,"eventType",{get(){return sc.SetPlayerIdentity}});Yt.pt=ue.yt({wt:!1,vt:!1});ue.mt(Yt);nc(Yt,[null,"id","data","byId"],[]);Hu.VT=Yt});var ui=T((K2,Yr)=>{Yr.VT=Yr.Bl||(Yr.Bl={cu:ds(),ye:Vs(),Dh:Us(),us:Ks(),wu:Js(),me:Xs(),Ce:$s(),hs:zs(),os:Ds(),fs:as(),ls:iu(),ge:ou(),ke:lu(),vs:cu(),pu:pu(),cs:yu(),ws:Cu(),qu:ku(),yu:Ou(),mu:Pu(),bh:Mu(),Cu:Eu(),gu:Iu(),ku:Gu(),CustomEvent:Lu(),BinaryCustomEvent:Ku(),ps:Ju()})});var Xu=T((H2,Qu)=>{var{E:hc}=N(),{Point:oc,bs:Wu,Ds:fc}=mi(),D=ht(),lc=ii();function et(){this.ji=-1,this.it=null,this.xt=0,this.bi=0,this.Ti=0,this.Ri=0,this.Pr=D.red,this.state=0,this.Ni=0,this.v=new Wu,this.Mt=0,this.dt=5,this.S=null,this.a=null}et.ah=function(){for(var t=[],i=0;256>i;)++i,t.push(new oc(0,0));return t}();et.to=function(){for(var t=[],i=0;256>i;)++i,t.push(0);return t}();et.dr=function(t,i){t.a=i.a.Ei(),t.dt=i.dt,t.Mt=i.Mt,t.v=i.v.Ei(),t.Ni=i.Ni,t.state=i.state,t.Ri=i.Ri,t.Ti=i.Ti,t.bi=i.bi,t.xt=i.xt,t.S=i.S,t.Pr=i.Pr};et.prototype={Il:function(t){this.a=t,this.dt=t.dt,this.Mt=t.Mt,this.S=t.S,this.v=Wu.zf(t.S),this.io()},ro:function(t){t.N==D.spec?this.v.Ph(t,this.a.Sr):this.v.Zf(t,this.S,this.a.Se)},dl:function(t,i){for(var r=0,n=this.S.Pt;r<n.length;r++){var e=n[r];if(e.Jf(t,i))return e.N}return D.spec},De:function(t){if(0<this.xt)120>this.xt&&this.xt--;else{this.a.Oe?.();for(var i=this.a.j,r=0;r<i.length;r++){var n=i[r];if(n.B!=null){!(n.Tt&16)&&(n.Ci=!1);var e=this.S.Pi;if(0<n.Ji&&n.Ji--,n.Wi<this.a.Ar&&n.Wi++,n.Ci&&0>=n.Ji&&0<=n.Wi){for(var s=!1,u=0,h=this.v.p;u<h.length;){var f=h[u];++u,f.o&64&&f!=n.B&&this.v.kickBall(n.B,f,e)&&(s=!0)}s&&(this.a.Mn!=null&&this.a.Mn(n),n.Ci=!1,n.Ji=this.a.or,n.Wi-=this.a.ai)}this.v.$f(n,e)}}for(r=0,n=this.v.p,e=0,u=n.length;e<u;)s=e++,h=n[s],h.o&128&&(et.to[r]=s,s=et.ah[r],h=h.e,s.x=h.x,s.y=h.y,++r);switch(this.v.De(t,this.a),this.state){case 0:{for(t=0;t<i.length;)r=i[t],++t,r.B!=null&&(r.B.u=39|this.Pr.u);this.v.p[0].Qf()&&(this.state=1,this.a.jn!=null&&this.a.jn());break}case 1:{for(this.bi+=.016666666666666666,t=0;t<i.length;)n=i[t],++t,n.B!=null&&(n.B.u=39);for(n=D.spec,i=this.v.p,t=0;t<r&&n==D.spec;t++)n=this.dl(i[et.to[t]].e,et.ah[t]);n!=D.spec?(this.state=2,this.Ni=150,this.Pr=n,n==D.red?this.Ti++:this.Ri++,this.a.En!=null&&this.a.En(n==D.red?D.blue:D.red),this.a.no!=null&&this.a.no(n.id)):0<this.Mt&&this.bi>=60*this.Mt&&this.Ri!=this.Ti&&(this.a._n!=null&&this.a._n(),this.eo());break}case 2:{this.Ni--,0>=this.Ni&&(0<this.dt&&(this.Ri>=this.dt||this.Ti>=this.dt)||0<this.Mt&&this.bi>=60*this.Mt&&this.Ri!=this.Ti?this.eo():(this.io(),this.a.Bn!=null&&this.a.Bn()));break}case 3:{if(this.Ni--,this.Ni<=0&&(i=this.a,i.s!=null)){for(i.s=null,t=0,r=i.j;t<r.length;)n=r[t],++t,n.B&&this.a.Sr?.(n),n.B=null,n.ki=0;i.Or!=null&&i.Or(null)}break}}}},eo:function(){this.Ni=300,this.state=3,this.a.In!=null&&this.a.In(this.Ri>this.Ti?D.red:D.blue)},io:function(){var t=this.a.j;this.state=0;for(var i=this.S.p,r=this.v.p,n=0,e=this.S.er?i.length:1,s,u,h,f;n<e;)s=n++,i[s].Rh(r[s]);for(i=[0,0,0],r=0;r<t.length;)n=t[r],++r,this.ro(n),e=n.N,e!=D.spec&&(s=n.B.e,u=this.S,h=i[e.id],f=e==D.red?u.ti:u.ii,f.length==0?(f=h+1>>1,!(h&1)&&(f=-f),u=u.Dt*e.Sh,h=55*f):(h>=f.length&&(h=f.length-1),h=f[h],u=h.x,h=h.y),s.x=u,s.y=h,i[e.id]++,n.ki=i[e.id])},$:function(t){this.v.$(t),t.V(this.Ni),t.V(this.state),t.V(this.Ri),t.V(this.Ti),t.C(this.bi),t.V(this.xt),t.f(this.Pr.id)},tt:function(t,i){this.v.tt(t),this.Ni=t.M(),this.state=t.M(),this.Ri=t.M(),this.Ti=t.M(),this.bi=t.k(),this.xt=t.M();var r=t.Zn();this.Pr=r==1?D.red:r==2?D.blue:D.spec,this.a=i,this.dt=i.dt,this.Mt=i.Mt,this.S=i.S,this.v.m=this.S.m,this.v.R=this.S.R,this.v.Q=this.S.Q,this.v.qt=this.S.qt},Ei:function(){var t=lc.Ki;return t!=this.ji&&(this.it||(this.it=new et),this.ji=t,et.dr(this.it,this)),this.it},copy:function(t){var i=new et;return i.v.p=this.v.p.map(r=>{var n=new fc;return n.e.x=r.e.x,n.e.y=r.e.y,n.A.x=r.A.x,n.A.y=r.A.y,n.P.x=r.P.x,n.P.y=r.P.y,n.G=r.G,n.h=r.h,n.H=r.H,n.Y=r.Y,n.O=r.O,n.u=r.u,n.o=r.o,n.I=r.I,n}),i.Ni=this.Ni,i.state=this.state,i.Ri=this.Ri,i.Ti=this.Ti,i.bi=this.bi,i.xt=this.xt,i.Pr=this.Pr,i.a=t||this.a,i.dt=i.a.dt,i.Mt=i.a.Mt,i.S=i.a.S,i.v.m=i.S.m,i.v.R=i.S.R,i.v.Q=i.S.Q,i.v.qt=i.S.qt,i}};et.prototype.advance=et.prototype.De;hc(et,[null,"ext","pauseGameTickCounter","timeElapsed","blueScore","redScore",null,"state","goalTickCounter","physicsState","timeLimit","scoreLimit","stadium",null],[]);Qu.VT=et});var Ti=T((J2,Du)=>{var{E:vc}=N(),{D:cc,F:wc,w:Yu,Integer:he,mh:Z}=j(),{Point:pc,be:qc,ae:$r}=mi(),{me:yc,Ce:mc,ke:$u}=ui(),_=Wr(),hi=ht(),Zu=Ur(),zu=Xr(),xu=Xu(),Cc=ii();function wi(){this.ji=-1,this.it=null,this.S=_.fu()[0],this.or=2,this.ai=0,this.Ar=1,this.Mt=3,this.dt=3,this.hr=!1,this.s=null,this.j=[],this.name="",this.Vi=[null,new zu,new zu],this.Vi[1].Gi.push(hi.red.O),this.Vi[2].Gi.push(hi.blue.O)}wi.dr=function(t,i){if(t.name=i.name,i.j==null)t.j=null;else{t.j==null&&(t.j=[]);for(var r=t.j,n=i.j,e=n.length,s;r.length>e;)r.pop();for(e=0,s=n.length;e<s;){var u=e++;r[u]=n[u].ll()}}t.s=i.s==null?null:i.s.Ei(),t.hr=i.hr,t.dt=i.dt,t.Mt=i.Mt,t.Ar=i.Ar,t.ai=i.ai,t.or=i.or,t.S=i.S,t.Vi=i.Vi};wi.prototype={vl:function(t){if(this.s==null){this.s=new xu;for(var i=0,r=this.j;i<r.length;){var n=r[i];++i,n.B=null,n.ki=0}this.s.Il(this),this.dn!=null&&this.dn(t)}},ss:function(t,i,r){if(i.N!=r&&(i.N=r,cc.remove(this.j,i),this.j.push(i),!!this.s)){this.s.v.Ph(i,this.Sr),this.s.ro(i);for(var n=0,e=!1,s,u;!e;)for(++n,e=!0,s=0,u=this.j;s<u.length;){var h=u[s];if(++s,h!=i&&h.N==i.N&&h.ki==n){e=!1;break}}i.ki=n}},getPlayer:function(t){for(var i=0,r=this.j;i<r.length;){var n=r[i];if(++i,n.id==t)return n}return null},ct:function(t){this.s!=null&&this.s.De(t)},$:function(t){t.oi(this.name),t.f(this.hr?1:0),t.V(this.dt),t.V(this.Mt),t.Qs(this.Ar),t.f(this.ai),t.f(this.or),this.S.$(t),t.f(this.s!=null?1:0),this.s!=null&&this.s.$(t),t.f(this.j.length);for(var i=0,r=this.j;i<r.length;)r[i++].ft(t);this.Vi[1].$(t),this.Vi[2].$(t)},tt:function(t){this.name=t.hi(),this.hr=t.T()!=0,this.dt=t.M(),this.Mt=t.M(),this.Ar=t.Js(),this.ai=t.T(),this.or=t.T(),this.S=_.tt(t);var i=t.T()!=0,r,n;for(this.s=null,i&&(this.s=new xu,this.s.tt(t,this)),i=this.s==null?null:this.s.v.p,r=t.T(),n=this.j;n.length>r;)n.pop();for(n=0;n<r;){var e=new Zu;e.lt(t,i),this.j[n++]=e}this.Vi[1].tt(t),this.Vi[2].tt(t)},so:function(){var t=0,i=Yu.U();for(this.$(i),i=i.Bf();4<=i.c.byteLength-i.l;)t^=i.M();return t},Gl:function(){var t=Yu.U(4);return t.V(this.so()),t.Xe()},hl:function(t){t=new wc(new DataView(t)).M(),this.uo?.(this.so()!=t)},ho:function(t){this.no=t},Si:function(t){return t==0?!0:(t=this.getPlayer(t),!!(t!=null&&t.qi))},_l:function(t,i,r,n){this.or=0>i?0:255<i?255:i,this.ai=0>r?0:255<r?255:r,n=0>n?0:100<n?100:n,this.Ar=this.ai*n,this.Te?.(t,this.or,this.ai,n)},Ei:function(){var t=Cc.Ki;return t!=this.ji&&(this.it||(this.it=new wi),this.ji=t,wi.dr(this.it,this)),this.it},copy:function(){var t=new wi;return t.name=this.name,t.hr=this.hr,t.dt=this.dt,t.Mt=this.Mt,t.Ar=this.Ar,t.ai=this.ai,t.or=this.or,t.S=this.S?.copy(),t.s=this.s?.copy(t),t.j=[],this.j.forEach((i,r)=>{var n=new Zu;if(n.qi=i.qi,n.ki=i.ki,n.gt=i.gt,n.Ur=i.Ur,n.Ii=i.Ii,n.Rt=i.Rt,n.ln=i.ln,n.name=i.name,n.Tt=i.Tt,n.id=i.id,n.Ci=i.Ci,n.Wi=i.Wi,n.Ji=i.Ji,n.N=i.N,n.Qt=i.Qt,n.kr=i.kr,n.nr=i.nr,t.s&&i.B){var e=i.B.I,s=t.s.v.p.findIndex(u=>u.I==e);s>-1&&(n.B=t.s.v.p[s])}t.j[r]=n}),this.Vi.forEach((i,r)=>{t.Vi[r]=i?.copy()}),t},exportStadium:function(){if(this.s){var{S:t,v:i}=this.s,r=new qc,n=new $r,e={},s=t.ti.map(v=>[v.x,v.y]),u=t.ii.map(v=>[v.x,v.y]),h=i.qt.map(_.Uh);_.d(e,"type",t.Oi==1?"grass":t.Oi==2?"hockey":"none","none"),_.d(e,"width",t.$i,0),_.d(e,"height",t.Zi,0),_.d(e,"kickOffRadius",t.zi,0),_.d(e,"cornerRadius",t.xi,0),_.wn(e,t.Yi,7441498),t.Oi==2&&_.d(e,"goalLine",t.sr,0);var f={name:t.name,width:t._i,height:t.Xi,vertexes:i.m.map((v,c)=>{var w=_.Gh(v);return w.id=c,w}),segments:i.R.map(v=>_.gl(this,v,r)),planes:i.Q.map(_.Kh),goals:t.Pt.map(_.Jh),discs:i.p.map(v=>_.Qh(v,n)),bg:e,playerPhysics:_.Wh(t.Pi),ballPhysics:"disc0"};return _.d(f,"maxViewWidth",t.Tr,0),_.d(f,"cameraFollow",t.Ui==1?"player":"",""),_.d(f,"spawnDistance",t.Dt,200),h.length>0&&(f.joints=h),s.length>0&&(f.redSpawnPoints=s),u.length>0&&(f.blueSpawnPoints=u),_.d(f,"kickOffReset",t.er?"full":"partial","partial"),!t.Kr&&(f.canBeStored=!1),f}},createVertex:function(t){return _.Vh(t)},createSegment:function(t){var i=_.Lh(t,this.s.v.m);return i.calculateNormals(),i},createSegmentFromObj:function(t){var i=_.Sl(t,this.s.v.m);return i.calculateNormals(),i},createGoal:function(t){return _.ip(t)},createPlane:function(t){return _.Hh(t)},createDisc:function(t){return _.lu(t,new $r).Yf()},createJoint:function(t){return _.Fh(t,this.s.v.p)},createJointFromObj:function(t){return _.Tl(t,this.s.v.p)},addVertex:function(t){this.s.v.m.push(this.createVertex(t))},addSegment:function(t){this.s.v.R.push(this.createSegment(t))},addGoal:function(t){this.s.S.Pt.push(this.createGoal(t))},addPlane:function(t){this.s.v.Q.push(this.createPlane(t))},addDisc:function(t){var i=this.createDisc(t),r=this.s.v.p.findIndex(s=>s.I!=null);r<0&&(r=this.s.v.p.length),this.s.v.p.splice(r,0,i);for(var n=this.s.v.qt,e=this.s.v.p.length-2;e>=r;e--)n.forEach(s=>{s.Zt==e&&s.Zt++,s.$t==e&&s.$t++})},addJoint:function(t){this.s.v.qt.push(this.createJoint(t))},addSpawnPoint:function(t){var i;t.team=="red"?i=this.s.S.ti:t.team=="blue"&&(i=this.s.S.ii),i&&i.push(new pc(t.x,t.y))},addPlayer:function(t){var{team:i,id:r,name:n,avatar:e,flag:s}=t,u=i=="spec"?hi.spec:i=="red"?hi.red:i=="blue"?hi.blue:null;if(u){var h=yc.create(r,n,s,e,"fakeConn","fakeAuth");h.i=0,h.apply(this),i!="spec"&&(h=$u.create(r,u),h.i=0,h.apply(this),this.updateDiscObj(this.getPlayer(r).B,t))}},findVertexIndicesOfSegmentObj:function(t){var i=t.Z,r=t.z,n=-1,e=-1;return this.s.v.m.forEach((s,u)=>{s==i?n=u:s==r&&(e=u)}),[n,e]},findVertexIndicesOfSegment:function(t){return this.findVertexIndicesOfSegmentObj(this.s.v.R[t])},updateVertex:function(t,i){var r=this.s.v.m[t];if(r){var n=_.Vh(i);i.hasOwnProperty("x")&&(r.e.x=n.e.x),i.hasOwnProperty("y")&&(r.e.y=n.e.y),i.hasOwnProperty("bCoef")&&(r.h=n.h),i.hasOwnProperty("cMask")&&(r.u=n.u),i.hasOwnProperty("cGroup")&&(r.o=n.o),this.s.v.R.forEach(e=>{(e.z==r||e.Z==r)&&e.calculateNormals()})}},updateSegment:function(t,i){var r=this.s.v.R[t];if(r){var n=_.Lh(i,this.s.v.m);(i.hasOwnProperty("v0")||i.hasOwnProperty("curve"))&&(r.Z=n.Z),(i.hasOwnProperty("v1")||i.hasOwnProperty("curve"))&&(r.z=n.z),(i.hasOwnProperty("bias")||i.hasOwnProperty("curve"))&&(r.Wt=n.Wt),(i.hasOwnProperty("curveF")||i.hasOwnProperty("curve"))&&(r.jt=n.jt),i.hasOwnProperty("vis")&&(r.St=n.St),i.hasOwnProperty("color")&&(r.O=n.O),i.hasOwnProperty("bCoef")&&(r.h=n.h),i.hasOwnProperty("cMask")&&(r.u=n.u),i.hasOwnProperty("cGroup")&&(r.o=n.o),r.calculateNormals()}},updateGoal:function(t,i){var r=this.s.S.Pt[t];if(r){var n=_.ip(i);i.hasOwnProperty("p0")&&(r.si=n.si),i.hasOwnProperty("p1")&&(r.ui=n.ui),i.hasOwnProperty("team")&&(r.N=n.N)}},updatePlane:function(t,i){var r=this.s.v.Q[t];if(r){var n=_.Hh(i);i.hasOwnProperty("normal")&&(r.b=n.b),i.hasOwnProperty("dist")&&(r.ht=n.ht),i.hasOwnProperty("bCoef")&&(r.h=n.h),i.hasOwnProperty("cMask")&&(r.u=n.u),i.hasOwnProperty("cGroup")&&(r.o=n.o)}},updateDisc:function(t,i){this.updateDiscObj(this.s.v.p[t],i)},updateDiscObj:function(t,i){if(t){var r=_.lu(i,new $r);i.hasOwnProperty("pos")&&(t.e=r.e),i.hasOwnProperty("speed")&&(t.A=r.A),i.hasOwnProperty("gravity")&&(t.P=r.P),i.hasOwnProperty("radius")&&(t.G=r.G),i.hasOwnProperty("invMass")&&(t.H=r.H),i.hasOwnProperty("damping")&&(t.Y=r.Y),i.hasOwnProperty("color")&&(t.O=r.O),i.hasOwnProperty("bCoef")&&(t.h=r.h),i.hasOwnProperty("cMask")&&(t.u=r.u),i.hasOwnProperty("cGroup")&&(t.o=r.o)}},updateJoint:function(t,i){var r=this.s.v.qt[t];if(r){var n=_.Fh(i,this.s.v.p);i.hasOwnProperty("d0")&&(r.Zt=n.Zt),i.hasOwnProperty("d1")&&(r.$t=n.$t),i.hasOwnProperty("color")&&(r.O=n.O),i.hasOwnProperty("strength")&&(r.Mi=n.Mi),i.hasOwnProperty("length")&&(r.Bt=n.Bt,r.It=n.It)}},updateSpawnPoint:function(t,i,r){var n,e;if(i=="red"?n=this.s.S.ti:i=="blue"&&(n=this.s.S.ii),r.team=="red"?e=this.s.S.ti:r.team=="blue"&&(e=this.s.S.ii),!(!n||!e)){var s;n==e?s=n[t]:s=n.splice(t,1)[0],s&&(r.hasOwnProperty("x")&&(s.x=r.x),r.hasOwnProperty("y")&&(s.y=r.y),n!=e&&e.push(s))}},updatePlayer:function(t,i){var r=this.getPlayer(t);if(r){var n=null;if(i.hasOwnProperty("team")&&(n=i.team=="spec"?hi.spec:i.team=="red"?hi.red:i.team=="blue"?hi.blue:null),i.hasOwnProperty("name")&&(r.name=i.name),i.hasOwnProperty("flag")&&(r.Rt=i.flag),i.hasOwnProperty("avatar")&&(r.gt=i.avatar),n!=null){var e=$u.create(t,n);e.i=0,e.apply(this)}r.B!=null&&this.updateDiscObj(r.B,i)}},removeVertex:function(t){var i=this.s.v.m.splice(t,1)[0];if(i){var r=this.s.v.R,n=[];r.forEach((e,s)=>{(e.z==i||e.Z==i)&&n.unshift(s)}),n.forEach(e=>r.splice(e,1))}},removeSegment:function(t){this.s.v.R.splice(t,1)},removeGoal:function(t){this.s.S.Pt.splice(t,1)},removePlane:function(t){this.s.v.Q.splice(t,1)},removeDisc:function(t){this.s.v.p.splice(t,1);var i=this.s.v.qt,r=[];i.forEach((e,s)=>{(e.Zt==t||e.$t==t)&&r.unshift(s)}),r.forEach(e=>i.splice(e,1));for(var n=t+1;n<=this.s.v.p.length;n++)i.forEach(e=>{e.Zt==n&&e.Zt--,e.$t==n&&e.$t--})},removeJoint:function(t){this.s.v.qt.splice(t,1)},removeSpawnPoint:function(t,i){var r;i=="red"?r=this.s.S.ti:i=="blue"&&(r=this.s.S.ii),r&&r.splice(t,1)},removePlayer:function(t){var i=mc.create(t,null,!0);i.i=0,i.apply(this)},updateStadiumPlayerPhysics:function(t){var i=this.s?.S.Pi;if(i){var r=_.lu(t,new $r);t.hasOwnProperty("radius")&&(i.G=r.G),t.hasOwnProperty("gravity")&&(i.P=r.P),t.hasOwnProperty("invMass")&&(i.H=r.H),t.hasOwnProperty("bCoef")&&(i.h=r.h),t.hasOwnProperty("cGroup")&&(i.o=r.o),t.hasOwnProperty("damping")&&(i.Y=r.Y),t.hasOwnProperty("kickingDamping")&&(i.mr=Z(t.kickingDamping,Number)),t.hasOwnProperty("acceleration")&&(i.yr=Z(t.acceleration,Number)),t.hasOwnProperty("kickingAcceleration")&&(i.qr=Z(t.kickingAcceleration,Number)),t.hasOwnProperty("kickStrength")&&(i.wr=Z(t.kickStrength,Number)),t.hasOwnProperty("kickback")&&(i.pr=Z(t.kickback,Number))}},updateStadiumBg:function(t){var i=this.s?.S;i&&(t.hasOwnProperty("type")&&(i.Oi=Z(t.type,he)),t.hasOwnProperty("width")&&(i.$i=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.Zi=Z(t.height,Number)),t.hasOwnProperty("kickOffRadius")&&(i.zi=Z(t.kickOffRadius,Number)),t.hasOwnProperty("cornerRadius")&&(i.xi=Z(t.cornerRadius,Number)),t.hasOwnProperty("color")&&(i.Yi=Z(t.color,he)),t.hasOwnProperty("goalLine")&&(i.sr=Z(t.goalLine,Number)))},updateStadiumGeneral:function(t){var i=this.s?.S;i&&(t.hasOwnProperty("name")&&(i.name=Z(t.name,String)),t.hasOwnProperty("width")&&(i._i=Z(t.width,Number)),t.hasOwnProperty("height")&&(i.Xi=Z(t.height,Number)),t.hasOwnProperty("maxViewWidth")&&(i.Tr=Z(t.maxViewWidth,Number)),t.hasOwnProperty("cameraFollow")&&(i.Ui=Z(t.cameraFollow,he)),t.hasOwnProperty("spawnDistance")&&(i.Dt=Z(t.spawnDistance,Number)),t.hasOwnProperty("kickOffReset")&&(i.er=Z(t.kickOffReset,Boolean)),t.hasOwnProperty("canBeStored")&&(i.Kr=Z(t.canBeStored,Boolean)))},runSteps:function(t){this.ct(t)}};vc(wi,[null,"ext","stadium","kickRate_min","kickRate_rate","kickRate_max","timeLimit","scoreLimit","teamsLocked","gameState","players","name","teamColors"],[]);Du.VT=wi});var ve=T((W2,Zr)=>{var{setInterval:gc,clearInterval:kc,requestAnimationFrame:Sc,cancelAnimationFrame:Oc,performance:th,pako:zr,E:ih}=N(),{Event:xr}=B(),{Kt:bu,mf:oe,q:Hi}=X(),rh=Si(),{F:Ri,w:Ni,extend:Tc}=j(),Rc=ii(),nh=Ti(),au=Q();function fe(t,i){if(this.oo=0,this.Ft=i,this.fo=t?.g,this.Qr=Ni.U(1e3),this.Re=Ni.U(16384),this.Su=t,!!t){var r=this,n=t.g;t.t.$(this.Re),t.ni=function(s){var u=t.g;r.Re.Ut(u-n),n=u,r.Re.Lt(s.i),xr.Cr(s,r.Re)},this.Qr.Lt(0);var e=this.fo;t.t.ho(function(s){var u=t.g;r.Qr.Ut(u-e),r.Qr.f(s),r.oo++,e=u})}}fe.prototype={stop:function(){this.Su.ni=null,this.Su.t.ho(null),this.Qr.c.setUint16(0,this.oo,this.Qr.Et),this.Qr.Yt(this.Re._t());var t=zr.deflateRaw(this.Qr._t()),i=Ni.U(t.byteLength+32);return i.xn("HBR2"),i.kt(this.Ft),i.kt(this.Su.g-this.fo),i.Yt(t),i._t()}};function eh(t,i,r,n){if(this.Vl=[],this.qs=0,this.Gn=-1,this.Ou=this.tr=this.Tu=this.lo=0,rh.call(this,i),t=new Ri(new DataView(t.buffer),!1),t.ot()!=1212305970)throw new Hi("");if(i=t.ot(),r!=i)throw new Hi(new oe(i));this.ys=t.ot(),r=zr.inflateRaw(t.Vt()),this.fr=new Ri(new DataView(r.buffer,r.byteOffset,r.byteLength)),this.Ll(this.fr),r=this.fr.Vt(),this.fr=new Ri(new DataView(r.buffer,r.byteOffset,r.byteLength),!1),this.ms(),this.Tu=th.now(),this.Bi=-1,this.callbacks=n,this.Cs=null,this.Ne=null}eh.prototype=Tc(rh.prototype,{Ll:function(t){for(var i=t.At(),r=0,n=0,e;n<i;)++n,r=r+t.Ht(),e=t.T(),this.Vl.push({Lc:r/this.ys,kind:e})},vo:function(){var t=this.fr;0<t.c.byteLength-t.l?(t=this.fr.Ht(),this.Ou+=t,t=this.fr.At(),this.gs=xr.ir(this.fr,!0),this.gs.i=t):this.gs=null},Uc:function(){return this.g/this.ys},_:function(){},gr:function(){this.ct(),Rc.Ki++;var t=this.t.Ei();return t.ct(this.lo),t},ct:function(){var t=th.now(),i=t-this.Tu;this.Tu=t;var r=!1,n=!1;for(this.Gn>=0?(this.tr+=1e4,this.tr>this.Gn&&(this.tr=this.Gn,this.Gn=-1,r=!0)):this.tr+=i*this.qs,t=this.ys*this.eu,this.tr>t&&(this.tr=t,n=!0),i=this.tr*this.Hi,t=i|0,this.lo=i-t;this.g<t;){for(;this.gs!=null&&this.Ou==this.g;)i=this.gs,i.apply(this.t),this.ni!=null&&this.ni(i),this.vo();this.g++,this.t.ct(1)}r&&(this.Cs.assignCallbacks(),this.Ne?.onDestinationTimeReached&&this.Ne.onDestinationTimeReached()),n&&(this.qs=0,this.Cs.clearCallbacks(),this.Ne?.onEnd&&this.Ne.onEnd())},co:function(t){this.Cs.clearCallbacks(),this.Gn=t,t<this.tr&&this.ms()},ms:function(){this.Ou=0,this.tr=this.g=this.fr.l=0,this.t.tt(this.fr),this.vo()}});function Nc(t,i,r){var n=0,e=r?.requestAnimationFrame||Sc,s=r?.cancelAnimationFrame||Oc,u=i?.render,h=u&&function(){0<t.Gn||u(t.gr())},f=function(){n=e(f),t.ct(),u&&h()};n=e(f),this.clearCallbacks=function(){t.t.Lr=null,t.t.he=null,t.t.Mn=null,t.t.En=null,t.t.In=null,t.t.le=null,t.t.dn=null,t.t.Oe=null,t.t.jn=null,t.t.Dn=null,t.t.bn=null,t.t.an=null,t.t.te=null,t.t.nn=null,t.t.Nr=null,t.t.cn=null,t.t.vn=null,t.t.kn=null,t.t.Se=null,t.t.Sr=null,t.t.Tn=null,t.t.On=null,t.t.yn=null,t.t.Sn=null,t.t.mn=null,t.t.Nn=null,t.t.Pn=null,t.t.An=null,t.t.Rn=null,t.t.gn=null,t.t.sn=null,t.t.un=null,t.t._n=null,t.t.Bn=null,t.t.ue=null,t.t.ee=null,t.t.Or=null,t.t.qn=null,t.t.ce=null,t.t.Cn=null,t.t.Te=null,t.t.fe=null,t.t.se=null},this.assignCallbacks=function(){t.t.Lr==null&&(t.t.Lr=v=>{i.onPlayerInputChange?.(v.id,v.Tt)},t.t.he=v=>{i.onPlayerJoin?.(v)},t.t.Mn=v=>{i.onPlayerBallKick?.(v?.id)},t.t.En=v=>{i.onTeamGoal?.(v?.id)},t.t.In=v=>{i.onGameEnd?.(v.id)},t.t.le=(v,c,w)=>{!w&&i.onGamePauseChange?.(c,v?.id)},t.t.dn=function(v){i.onGameStart?.(v?.id)},t.t.Oe=()=>{i.onGameTick?.()},t.t.jn=()=>{i.onKickOff?.()},t.t.Dn=(v,c,w,m)=>{i.onCollisionDiscVsDisc?.(v,c.I,w,m.I)},t.t.bn=(v,c,w)=>{i.onCollisionDiscVsPlane?.(v,c.I,w)},t.t.an=(v,c,w)=>{i.onCollisionDiscVsSegment?.(v,c.I,w)},t.t.te=(v,c,w,m)=>{i.Ul?.(v,c.I,w,m)},t.t.nn=(v,c,w)=>{i.Fl?.(v,c,w)},t.t.Nr=(v,c,w,m,k)=>{i.onAutoTeams?.(v,c,w,m,k)},t.t.cn=(v,c)=>{i.onTimeLimitChange?.(v,c)},t.t.vn=(v,c)=>{i.onScoreLimitChange?.(v,c)},t.t.Se=v=>{i.onPlayerDiscCreated?.(v)},t.t.Sr=v=>{i.onPlayerDiscDestroyed?.(v)},t.t.kn=(v,c)=>{i.onPlayerAvatarChange?.(v,c)},t.t.Tn=(v,c)=>{i.onPlayerHeadlessAvatarChange?.(v,c)},t.t.On=(v,c)=>{i.onPlayersOrderChange?.(v,c)},t.t.yn=(v,c,w)=>{i.onPlayerTeamChange?.(v,c,w)},t.t.Sn=(v,c,w)=>{i.onTeamColorsChange?.(v,c,w)},t.t.mn=(v,c)=>{i.onTeamsLockChange?.(v,c)},t.t.Nn=(v,c,w)=>{i.onCustomEvent?.(v,c,w)},t.t.Pn=(v,c,w)=>{i.onBinaryCustomEvent?.(v,c,w)},t.t.An=(v,c,w)=>{i.onIdentityEvent?.(v,c,w)},t.t.Rn=(v,c,w,m)=>{i.onSetDiscProperties?.(v,c,w,m)},t.t.gn=v=>{i.onPingData?.(v)},t.t.sn=v=>{i.onHandicapChange?.(v)},t.t.un=v=>{i.onExtrapolationChange?.(v)},t.t._n=()=>{i.onTimeIsUp?.()},t.t.Bn=()=>{i.onPositionsReset?.()},t.t.ue=function(v,c){i.onPlayerChat?.(v.id,c)},t.t.ee=function(v,c,w,m){i.onAnnouncement?.(v,c,w,m)},t.t.Or=function(v){i.onGameStop?.(v?.id)},t.t.qn=function(v,c){i.onStadiumChange?.(c,v?.id)},t.t.ce=function(v){i.onPlayerSyncChange?.(v?.id,v?.Ii)},t.t.Cn=function(v,c){i.onPlayerAdminChange?.(c?.id,c?.qi,v?.id)},t.t.Te=function(v,c,w,m){i.onKickRateLimitChange?.(c,w,m,v?.id)},t.t.fe=function(v,c,w,m){v.B&&i.onPlayerDiscDestroyed?.(v),i.onPlayerLeave?.(v,c,w,m?.id)},t.t.se=function(v,c){i.onPlayerChatIndicatorChange?.(v?.id,!c)})},this.et=function(){s(n),this.clearCallbacks()},this.ms=()=>{t.ms()}}function Pc(t,i,r){var n,e,s=new nh;try{e=new eh(t,s,3,i),n=new Nc(e,i,r),e.Cs=n}catch(f){var u=f instanceof Hi?f.zt:f;throw u instanceof oe?bu(au.ReplayFileVersionMismatchError):bu(au.ReplayFileReadError)}var h={state:s,getSpeed:()=>e.qs,setSpeed:f=>{n.assignCallbacks(),e.qs=f},getTime:()=>e.tr,length:()=>e.eu*e.ys,setTime:f=>{e.co(f)},getCurrentFrameNo:()=>e.g,setCurrentFrameNo:f=>{e.co(e.eu*f)},destroy:()=>{n.et()}};return Object.defineProperty(h,"gameState",{get(){return h.state.s}}),Object.defineProperty(h,"currentPlayerId",{get(){return e.Bi}}),e.Ne=h,h}function le(){this.roomData=new nh,this.events=[],this.goalMarkers=[],this.totalFrames=0,this.Ft=3}function Ac(t){var i=new le,r=0,n=new Ri(new DataView(t.buffer),!1);if(n.ot()!=1212305970)throw new Hi("");var e=n.ot();if(e!=3)throw new Hi(new oe(e));i.totalFrames=n.ot();var s=zr.inflateRaw(n.Vt()),u=new Ri(new DataView(s.buffer,s.byteOffset,s.byteLength)),h=null,f;for(e=u.At(),s=0,f=0;f<e;f++)s+=u.Ht(),i.goalMarkers.push({frameNo:s,teamId:u.T()});for(s=u.Vt(),u=new Ri(new DataView(s.buffer,s.byteOffset,s.byteLength),!1),i.roomData.tt(u);u.l<u.c.byteLength;)e=u.Ht(),r+=e,e=u.At(),h=xr.ir(u,!0),h.i=e,h.frameNo=r,i.events.push(h);return i}function Mc(t,i){if(t){var{roomData:r,events:n,totalFrames:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),!(u<s)){for(var h=0,f=0,v=n[0];f<s;){for(;f==v?.frameNo;)v.apply(r),v=n[++h];f++,r.ct(1)}n=n.filter(c=>c.frameNo>=s&&c.frameNo<=u),n.forEach(c=>{c.frameNo-=s}),t.events=n,t.goalMarkers=t.goalMarkers.filter(c=>c.frameNo>=s&&c.frameNo<=u),t.goalMarkers.forEach(c=>{c.frameNo-=s}),t.totalFrames=u-s+1}}}function jc(t,i){if(!t)return Promise.resolve();var{roomData:r,events:n,totalFrames:e}=t,s=i?.beginFrameNo||0;s<0&&(s=0);var u=i?.endFrameNo||e-1;if(u>=e&&(u=e-1),u<s)return Promise.resolve();var h=0,f=0,v=n[0];return new Promise((c,w)=>{var m;m=gc(()=>{if(f>=s){kc(m),n=n.filter(k=>k.frameNo>=s&&k.frameNo<=u),n.forEach(k=>{k.frameNo-=s}),t.events=n,t.goalMarkers=t.goalMarkers.filter(k=>k.frameNo>=s&&k.frameNo<=u),t.goalMarkers.forEach(k=>{k.frameNo-=s}),t.totalFrames=u-s+1,c();return}for(;f==v?.frameNo;)v.apply(r),v=n[++h];f++,r.ct(1)},0)})}function Ec(t){var i=Ni.U(16384),r=0;t.roomData.$(i),t.events.forEach(h=>{var f=h.frameNo;f<r||(i.Ut(f-r),r=f,i.Lt(h.i),xr.Cr(h,i))});var n=Ni.U(1e3);n.Lt(t.goalMarkers.length);var e=0;t.goalMarkers.forEach(h=>{n.Ut(h.frameNo-e),n.f(h.teamId),e=h.frameNo}),n.Yt(i._t());var s=zr.deflateRaw(n._t()),u=Ni.U(s.byteLength+32);return u.xn("HBR2"),u.kt(t.Ft),u.kt(t.totalFrames),u.Yt(s),u._t()}ih(fe,[null,"version",null,null,null,null],[]);ih(le,["roomData","events","goalMarkers","totalFrames","version"],[]);Zr.VT=Zr.Kl||(Zr.Kl={ReplayData:le,read:Pc,readAll:Ac,writeAll:Ec,trim:Mc,trimAsync:jc,bt:fe})});var we=T((X2,Dr)=>{var{requestAnimationFrame:_c,cancelAnimationFrame:Bc,performance:fh,E:Ic}=N(),sh=Q(),dc=ht(),{Kt:uh,We:Gc,q:Vc}=X(),{extend:Lc}=j(),{cu:Uc,ye:Fc,us:Kc,wu:Hc,me:Jc,Ce:hh,hs:Wc,os:Qc,fs:Xc,ls:oh,ge:Yc,ke:$c,vs:Zc,pu:zc,cs:xc,ws:Dc,qu:bc,yu:ac,Cu:t0,mu:i0,gu:r0,ku:n0,CustomEvent:e0,BinaryCustomEvent:s0,ps:u0}=ui(),lh=Si(),h0=Ti(),Q2=ii();function ce(t){lh.call(this,t),this.events=[],this.A=1,this.Xr=fh.now(),this.frozen=!1}ce.prototype=Lc(lh.prototype,{_:function(){},gr:function(){return this.t},ct:function(){var t=this.events;this.events=[];for(var i=((fh.now()-this.Xr)*this.Hi*this.A|0)-this.g,r=0;r<i;r++)this.g+=1,this.frozen||this.t.ct(1);t.forEach(n=>{n.apply(this.t)})},receiveEvent:function(t){this.events.push(t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.g=this.g*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.ct(t)}});function vh(t,i,r){var n=0,e=r?.requestAnimationFrame||_c,s=r?.cancelAnimationFrame||Bc,u=i?.render,h=u&&function(){u(t.gr())},f=function(){n=e(f),t.ct(),u&&h()};function v(){n=e(f),t.t.Lr=w=>{i.onPlayerInputChange?.(w.id,w.Tt)},t.t.he=w=>{i.onPlayerJoin?.(w)},t.t.Mn=w=>{i.onPlayerBallKick?.(w?.id)},t.t.En=w=>{i.onTeamGoal?.(w?.id)},t.t.In=w=>{i.onGameEnd?.(w.id)},t.t.le=(w,m,k)=>{!k&&i.onGamePauseChange?.(m,w?.id)},t.t.dn=function(w){i.onGameStart?.(w?.id)},t.t.Oe=()=>{i.onGameTick?.()},t.t.jn=()=>{i.onKickOff?.()},t.t.Dn=(w,m,k,o)=>{i.onCollisionDiscVsDisc?.(w,m.I,k,o.I)},t.t.bn=(w,m,k)=>{i.onCollisionDiscVsPlane?.(w,m.I,k)},t.t.an=(w,m,k)=>{i.onCollisionDiscVsSegment?.(w,m.I,k)},t.t.te=(w,m,k,o)=>{i.Ul?.(w,m.I,k,o)},t.t.nn=(w,m,k)=>{i.Fl?.(w,m,k)},t.t.Nr=(w,m,k,o,l)=>{i.onAutoTeams?.(w,m,k,o,l)},t.t.cn=(w,m)=>{i.onTimeLimitChange?.(w,m)},t.t.vn=(w,m)=>{i.onScoreLimitChange?.(w,m)},t.t.Se=w=>{i.onPlayerDiscCreated?.(w)},t.t.Sr=w=>{i.onPlayerDiscDestroyed?.(w)},t.t.kn=(w,m)=>{i.onPlayerAvatarChange?.(w,m)},t.t.Tn=(w,m)=>{i.onPlayerHeadlessAvatarChange?.(w,m)},t.t.On=(w,m)=>{i.onPlayersOrderChange?.(w,m)},t.t.yn=(w,m,k)=>{i.onPlayerTeamChange?.(w,m,k)},t.t.Sn=(w,m,k)=>{i.onTeamColorsChange?.(w,m,k)},t.t.mn=(w,m)=>{i.onTeamsLockChange?.(w,m)},t.t.Nn=(w,m,k)=>{i.onCustomEvent?.(w,m,k)},t.t.Pn=(w,m,k)=>{i.onBinaryCustomEvent?.(w,m,k)},t.t.An=(w,m,k)=>{i.onIdentityEvent?.(w,m,k)},t.t.Rn=(w,m,k,o)=>{i.onSetDiscProperties?.(w,m,k,o)},t.t.gn=w=>{i.onPingData?.(w)},t.t.sn=w=>{i.onHandicapChange?.(w)},t.t.un=w=>{i.onExtrapolationChange?.(w)},t.t._n=()=>{i.onTimeIsUp?.()},t.t.Bn=()=>{i.onPositionsReset?.()},t.t.ue=function(w,m){i.onPlayerChat?.(w.id,m)},t.t.ee=function(w,m,k,o){i.onAnnouncement?.(w,m,k,o)},t.t.Or=function(w){i.onGameStop?.(w?.id)},t.t.qn=function(w,m){i.onStadiumChange?.(m,w?.id)},t.t.ce=function(w){i.onPlayerSyncChange?.(w?.id,w?.Ii)},t.t.Cn=function(w,m){i.onPlayerAdminChange?.(m?.id,m?.qi,w?.id)},t.t.Te=function(w,m,k,o){i.onKickRateLimitChange?.(m,k,o,w?.id)},t.t.fe=function(w,m,k,o){w.B&&i.onPlayerDiscDestroyed?.(w),i.onPlayerLeave?.(w,m,k,o?.id)},t.t.se=function(w,m){i.onPlayerChatIndicatorChange?.(w?.id,!m)}}function c(){s(n),t.t.Lr=null,t.t.he=null,t.t.Mn=null,t.t.En=null,t.t.In=null,t.t.le=null,t.t.dn=null,t.t.Oe=null,t.t.jn=null,t.t.Dn=null,t.t.bn=null,t.t.an=null,t.t.te=null,t.t.nn=null,t.t.Nr=null,t.t.cn=null,t.t.vn=null,t.t.kn=null,t.t.Se=null,t.t.Sr=null,t.t.Tn=null,t.t.On=null,t.t.yn=null,t.t.Sn=null,t.t.mn=null,t.t.Nn=null,t.t.Pn=null,t.t.An=null,t.t.Rn=null,t.t.gn=null,t.t.sn=null,t.t.un=null,t.t._n=null,t.t.Bn=null,t.t.ue=null,t.t.ee=null,t.t.Or=null,t.t.qn=null,t.t.ce=null,t.t.Cn=null,t.t.Te=null,t.t.fe=null,t.t.se=null}v(),this.et=function(){c()},this.wo=function(w){c(),t.t=w,v()}}function o0(t,i){var r=new h0,n=new ce(r),e=new vh(n,t,i),s;return s={state:r,takeSnapshot:function(){return r.copy()},useSnapshot:function(u){var h=u.copy();e.wo(h),r=h,s.state=h},playerJoin:function(u,h,f,v,c,w){var m=Jc.create(u,h,f,v,c,w);m.i=0,n.receiveEvent(m)},playerLeave:function(u){var h=n.t.getPlayer(u);if(h){var f=hh.create(u,null,!0);f.i=0,n.receiveEvent(f)}},playerInput:function(u,h){var f=Kc.create(u);f.i=h,n.receiveEvent(f)},playerChat:function(u,h){var f=Hc.create(u);f.i=h,n.receiveEvent(f)},setKeyState:function(u){s.playerInput(u,i?.controlledPlayerId||0)},setPlayerChatIndicator:function(u,h){var f=Fc.create(u);f.i=h,n.receiveEvent(f)},setPlayerAvatar:function(u,h,f){if(u){var v=r0.create(f,h);v.i=0}else{var c=ac.create(h);c.i=f}n.receiveEvent(c)},setCurrentStadium:function(u,h,f){try{var v=Yc.create(u);v.i=h,n.receiveEvent(v)}catch(c){v=c instanceof Vc?c.zt:c,v instanceof SyntaxError?f(uh(sh.StadiumParseSyntaxError,v.lineNumber)):v instanceof Gc?f(v.Hs):f(uh(sh.StadiumParseUnknownError,v))}},sendAnnouncement:function(u,h=-1,f=0,v=1,c,w){var m=Uc.create(u,h,f,v);m.i=w,n.receiveEvent(m)},startGame:function(u){var h=Wc.create();h.i=u,n.receiveEvent(h)},stopGame:function(u){var h=Qc.create();h.i=u,n.receiveEvent(h)},setGamePaused:function(u,h){var f=Xc.create(u);f.i=h,n.receiveEvent(f)},setScoreLimit:function(u,h){var f=oh.create(0,u);f.i=h,n.receiveEvent(f)},setTimeLimit:function(u,h){var f=oh.create(1,u);f.i=h,n.receiveEvent(f)},setTeamsLock:function(u,h){var f=Zc.create(u);f.i=h,n.receiveEvent(f)},autoTeams:function(u){var h=xc.create();h.i=u,n.receiveEvent(h)},setPlayerTeam:function(u,h,f){var v=dc.i[h];if(v){var c=$c.create(u,v);c.i=f,n.receiveEvent(c)}},setKickRateLimit:function(u,h,f,v){var c=t0.create(u,h,f);c.i=v,n.receiveEvent(c)},setTeamColors:function(u,h,f,v){var c=i0.createFromData(u,h,...f);c.i=v,n.receiveEvent(c)},setPlayerAdmin:function(u,h,f){var v=zc.create(u,h);v.i=f,n.receiveEvent(v)},kickPlayer:function(u,h,f,v){var c=hh.create(u,h,f);c.i=v,n.receiveEvent(c)},setPlayerSync:function(u,h){var f=Dc.create(u);f.i=h,n.receiveEvent(f)},sendPingData:function(u,h){for(var f=new bc,v=[],c=0;c<n.t.j.length;c++)v.push(u(n.t.j[c]));f.values=v,f.i=h,n.receiveEvent(f)},setDiscProperties:function(u,h,f,v){var c=n0.create(u,h,f);c.i=v,n.receiveEvent(c)},sendCustomEvent:function(u,h,f){var v=e0.create(u,h);v.i=f,n.receiveEvent(v)},sendBinaryCustomEvent:function(u,h,f){var v=s0.create(u,h);v.i=f,n.receiveEvent(v)},setPlayerIdentity:function(u,h,f){var v=u0.create(u,h);v.i=f,n.receiveEvent(v)},executeEvent:function(u){n.receiveEvent(u)},setSimulationSpeed:function(u){n.setSpeed(u)},runSteps:function(u){n.runSteps(u)},destroy:e.et},Object.defineProperty(s,"gameState",{get(){return s.state.s}}),Object.defineProperty(s,"currentPlayerId",{get(){return 0}}),Object.defineProperty(s,"currentFrameNo",{get(){return n.g}}),s}Ic(ce,[null,null,null,null,null,null,null,null,null,null,null,null,null,"speed",null,null],[]);Dr.VT=Dr.Hl||(Dr.Hl={Sandbox:vh,createSandbox:o0})});var br=T(($2,ph)=>{var{httpUrl:Y2,XMLHttpRequest:f0}=N(),{q:ch}=X();function wh(t,i,r,n,e){return new Promise(function(s,u){var h=new f0;h.open(i,t),h.responseType=r,h.onload=function(){200<=h.status&&300>h.status?h.response!=null?s(h.response):u(null):u("status: "+h.status)},h.onerror=function(f){u(f)},e!=null&&h.setRequestHeader("Content-type",e),h.send(n)})}var pe,pe={po:function(t,i){return wh(t,"GET",i,null)},Jl:function(t){return pe.po(t,"json").then(function(i){if(i.error!=null)throw new ch(i.error);return i.data})},Wl:function(t,i,r){return wh(t,"POST","json",i,r).then(function(n){if(n.error!=null)throw new ch(n.error);return n.data})}};ph.VT=pe});var ye=T((Z2,ar)=>{var{E:yh}=N(),{Ir:qh}=j();function qe(){this.Ft=0,this.name="",this.Rt="",this.Pe=0,this.Ae=0,this.at=!1,this.Ru=0,this.j=0}qe.prototype={qo:function(){this.name=qh(this.name,40),this.Rt=qh(this.Rt,3)},$:function(t){this.qo(),t.Et=!0,t.Lt(this.Ft),t.ph(this.name),t.ph(this.Rt),t.Xs(this.Pe),t.Xs(this.Ae),t.f(this.at?1:0),t.f(this.Ru),t.f(this.j),t.Et=!1},tt:function(t){t.Et=!0,this.Ft=t.At(),this.name=t.wh(),this.Rt=t.wh(),this.Pe=t.Ws(),this.Ae=t.Ws(),this.at=t.T()!=0,this.Ru=t.T(),this.j=t.T(),t.Et=!1,this.qo()}};function mh(){this.data=null,this.id="",this.ht=1/0}yh(qe,["version","name","flag","lat","lon","password","maxPlayers","players"],[]);yh(mh,["data","id","dist"],[]);ar.VT=ar.Ql||(ar.Ql={RoomDataDetails:qe,RoomData:mh})});var Ce=T((z2,kh)=>{var{crypto:Pi}=N(),l0=Q(),{F:Ch,w:v0}=j(),{Kt:c0,q:Ai}=X(),me={name:"ECDSA",namedCurve:"P-256"},gh={name:"ECDSA",hash:{name:"SHA-256"}};function w0(t,i,r){try{return Pi.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["sign"],kty:"EC",d:r,x:t,y:i},me,!0,["sign"])}catch(n){return Promise.reject(n instanceof Ai?n.zt:n)}}function p0(t,i){try{return Pi.subtle.importKey("jwk",{crv:"P-256",ext:!0,key_ops:["verify"],kty:"EC",x:t,y:i},me,!0,["verify"])}catch(r){return Promise.reject(r instanceof Ai?r.zt:r)}}function pi(){this.x=null,this.y=null,this.Nu=null,this.privateKey=null}pi.Xl=function(){try{return Pi.subtle.generateKey(me,!0,["sign","verify"]).then(function(t){var i=t.privateKey;return Pi.subtle.exportKey("jwk",i).then(function(r){var n=new pi;return n.x=r.x,n.y=r.y,n.Nu=r.d,n.privateKey=i,n})})}catch(t){return Promise.reject(t instanceof Ai?t.zt:t)}};pi.Yl=function(t){var i=t.split(".");if(i.length!=4||i[0]!="idkey")return Promise.reject(c0(l0.AuthFromKeyInvalidIdFormatError));var r=i[1],n=i[2],e=i[3];return w0(r,n,e).then(function(s){var u=new pi;return u.x=r,u.y=n,u.Nu=e,u.privateKey=s,u})};pi.$l=function(t,i){try{var r=new Ch(new DataView(t.buffer,t.byteOffset,t.byteLength),!1);r.T();var n=r.Vt(r.At()),e=r.Vt(),s=new Ch(new DataView(n.buffer,n.byteOffset,n.byteLength),!1),u=s.ci(),h=s.ci(),f=s.Vt();if(f.byteLength!=i.byteLength)return Promise.reject(null);for(var v=0;v<f.byteLength;v++)if(f[v]!=i[v])return Promise.reject(null);return p0(u,h).then(function(c){return Pi.subtle.verify(gh,c,e,n)}).then(function(c){if(!c)throw new Ai(null);return u})}catch(c){return Promise.reject(c instanceof Ai?c.zt:c)}};pi.prototype={Zl:function(){return"idkey."+this.x+"."+this.y+"."+this.Nu},zl:function(t){try{var i=v0.U(1024);i.f(1);var r=i.l;i.Lt(0);var n=i.l;i.wi(this.x),i.wi(this.y),i.Yt(t);var e=i.l-n;return i.c.setUint16(r,e,i.Et),Pi.subtle.sign(gh,this.privateKey,new Uint8Array(i.c.buffer,i.c.byteOffset+n,e)).then(function(s){return i.Ye(s),i._t()})}catch(s){return Promise.reject(s instanceof Ai?s.zt:s)}}};kh.VT=pi});var Ji=T((x2,tn)=>{var{httpUrl:Rh}=N(),Sh=Q(),{Kt:Oh,We:q0,q:y0}=X(),{F:Th,Ch:m0,Ir:C0}=j(),Nh=Wr(),Ph=br(),{RoomDataDetails:g0,RoomData:k0}=ye(),{gh:S0,kh:O0,J:T0}=li(),Ah=Ce();function R0(){try{return Ah.Xl().then(t=>[t.Zl(),t])}catch(t){return Promise.reject(t)}}function N0(t){try{return Ah.Yl(t)}catch(i){return Promise.reject(i)}}function P0(t){return"rgba("+[(t&16711680)>>>16,(t&65280)>>>8,t&255].join()+",255)"}function A0(t){var i=t.match(/rgba?[ \t]*\([ \t]*(\d+),[ \t]*(\d+),[ \t]*(\d+)[ \t]*\)/);if(!(i.length<4)){var r=parseInt(i[1]),n=parseInt(i[2]),e=parseInt(i[3]);if(!(r>255||n>255||e>255))return r<<16|n<<8|e}}function M0(t){var i;if(t?.includes(".")){if(i=t.split("."),i.length>4)return;for(;i.length<4;)i.splice(0,0,"");return i.reduce((s,u,h)=>{if(s!=null){var f=parseInt(u.length>0?u:"0");return isNaN(f)||f<0||f>255?null:(s|=f<<24-h*8,s)}},0)}if(t?.includes(":")){i=t.split(":");var r=t.indexOf("::");if(r!=t.lastIndexOf("::"))return;if(r>=0){var n=i.length;if(n>9)return;r=i.findIndex(s=>s.length==0),(r==0||r==n-2&&i[n-1].length==0)&&(i.splice(r,1),n--),i[r]="0";for(var e=0;e<8-n;e++)i.splice(r+1,0,"0")}return i.length!=8?void 0:i.reduce((s,u,h)=>{if(s!=null){var f=parseInt(u,16);if(!(isNaN(f)||f<0||f>65535))return s|=BigInt(f)<<112n-BigInt(h)*16n,s}},0n)}}function j0(t){var i=t?.__proto__.constructor.name,r,n;if(i=="BigInt"){var e={Me:-1,f:0},s={Me:-1,f:0};for(n=[],r=0;r<8;r++){var u=t&65535n;u==0?(s.f==0&&(s.Me=7-r),s.f++,s.f>e.f&&(e.f=s.f,e.Me=s.Me)):s.f=0,n.splice(0,0,u.toString(16)),t>>=16n}e.f>0&&(r=e.Me-e.f+1,n.splice(r,e.f-1),n[r]="");var h=n.join(":");return h.length==0?h="::":h.charAt(h.length-1)==":"?h+=":":h.charAt(0)==":"&&(h=":"+h),h}else if(i=="Number"){for(n=[],r=0;r<4;r++)n.splice(0,0,""+(t&255)),t>>=8;return n.join(".")}}function E0(t){if(t.length==43){for(var i=0n,r=0,n=252;r<43;r++,n-=6){var e=t.charCodeAt(r);if(e==45)e=0;else if(e==95)e=63;else if(e>=48&&e<=57)e-=47;else if(e>=65&&e<=90)e-=54;else if(e>=97&&e<=122)e-=60;else return;i|=BigInt(e)<<BigInt(n)}return i}}function _0(t){var i=t?.__proto__.constructor.name;if(i=="BigInt"){for(var r="",n=0;n<43;n++){if(i=Number(t&63n),i==0)i=45;else if(i==63)i=95;else if(i>=1&&i<=10)i+=47;else if(i>=11&&i<=36)i+=54;else if(i>=37&&i<=62)i+=60;else return;r=String.fromCharCode(i)+r,t>>=6n}return r}}function B0(t,i,r){return!((t^i)&r)}function I0(t){return t.vu()?null:T0.$s(t.El(),8)}function d0(t,i,r){return(r?16:0)|(t>0?8:t<0?4:0)|(i>0?2:i<0?1:0)}function G0(t){return{dirX:((t&8)>0)-((t&4)>0),dirY:((t&2)>0)-((t&1)>0),kick:(t&16)>0}}var V0=()=>Ph.po(Rh+"api/list","arraybuffer").then(t=>{t=new Th(new DataView(t),!1),t.T();for(var i=[];t.c.byteLength-t.l!=0;){var r=t.rn(t.At()),n=t.ch(t.At());try{var e=new g0;e.tt(new Th(new DataView(n),!1));var s=new k0;s.data=e,s.id=r,i.push(s)}catch{}}return i});function L0(t,i){let r=Math.PI/180;for(var n=t.lat,e=t.lon,s=0;s<i.length;s++){var u=i[s],{Pe:h,Ae:f}=u.data,v=Math.cos(r*(h-n)),c=Math.cos(r*(h+n));u.ht=6378*Math.acos((v-c+(v+c)*Math.cos(r*(f-e)))/2),isFinite(u.ht)||(u.ht=22e3)}}var U0=()=>Ph.Jl(Rh+"api/geo").then(t=>({lat:t.lat,lon:t.lon,flag:t.code.toLowerCase()})),F0=(t,i,r=!0)=>!t&&r?null:(typeof t=="string"&&(t=JSON.parse(t)),{lat:t?.lat||i?.lat||40,lon:t?.lon||i?.lon||40,flag:t?.flag||i?.flag||"tr"});function K0(){return Nh.fu()}function H0(t,i){try{var r=new Nh;return r.jl(t),r}catch(e){var n=e instanceof y0?e.zt:e;n instanceof SyntaxError?i(Oh(Sh.StadiumParseSyntaxError,n.lineNumber)):n instanceof q0?i(n.Hs):i(Oh(Sh.StadiumParseUnknownError,n))}}function J0(t){return t.Al()}function Mh(t,i=1){if(i<=0){t();return}Promise.resolve().then(()=>{Mh(t,i-1)})}tn.VT=tn.xl||(tn.xl={generateAuth:R0,authFromKey:N0,getRoomList:V0,calculateAllRoomDistances:L0,numberToColor:P0,colorToNumber:A0,ipToNumber:M0,numberToIp:j0,authToNumber:E0,numberToAuth:_0,compareBits:B0,keyState:d0,reverseKeyState:G0,runAfterGameTick:Mh,getGeo:U0,parseGeo:F0,stadiumChecksum:I0,parseStadium:H0,exportStadium:J0,getDefaultStadiums:K0,promiseWithTimeout:m0,trimStringIfLonger:C0,hexStrToNumber:S0,byteArrayToIp:O0})});var Ih=T((D2,rn)=>{var{Event:jh}=B(),{cu:W0,ye:Q0,Dh:X0,us:Y0,wu:$0,me:Z0,Ce:z0,hs:x0,os:D0,fs:b0,ls:Eh,ge:a0,ke:t1,vs:i1,pu:r1,cs:n1,ws:e1,qu:s1,yu:u1,mu:h1,bh:o1,Cu:f1,gu:l1,ku:_h,CustomEvent:v1,BinaryCustomEvent:c1,ps:w1}=ui(),Bh=ht();rn.VT=rn.Dl||(rn.Dl={create:t=>{var i=jh.tu.get(t);if(i){var r=Object.create(i.prototype);return r.L=0,r}},createFromStream:t=>jh.ir(t,!0),checkConsistency:t=>X0.create(t),sendAnnouncement:(t,i=-1,r=0,n=1)=>W0.create(t,i,r,n),sendChatIndicator:t=>Q0.create(t?0:1),sendInput:t=>Y0.create(t),sendChat:t=>$0.create(t),joinRoom:(t,i,r,n,e,s)=>Z0.create(t,i,r,n,e,s),setHeadlessAvatar:(t,i)=>l1.create(t,i),kickBanPlayer:(t,i,r)=>z0.create(t,i,r),reorderPlayers:(t,i)=>o1.create(t,i),startGame:()=>x0.create(),stopGame:()=>D0.create(),pauseResumeGame:t=>b0.create(t),setScoreLimit:t=>Eh.create(0,t),setTimeLimit:t=>Eh.create(1,t),setStadium:t=>a0.create(t),setPlayerTeam:(t,i)=>{var r=Bh.i[i];if(r)return t1.create(t,r)},setTeamsLock:t=>i1.create(t),setPlayerAdmin:(t,i)=>r1.create(t,i),autoTeams:()=>n1.create(),setPlayerSync:t=>e1.create(t),ping:t=>s1.create(t),setAvatar:t=>u1.create(t),setTeamColors:(t,i)=>{var r=Bh.i[t];if(r)return h1.create(r,i)},setKickRateLimit:(t,i,r)=>f1.create(t,i,r),setDiscProperties:(t,i)=>_h.create(t,!1,i),setPlayerDiscProperties:(t,i)=>_h.create(t,!0,i),customEvent:(t,i)=>v1.create(t,i),binaryCustomEvent:(t,i)=>c1.create(t,i),setPlayerIdentity:(t,i)=>w1.create(t,i)})});var Te=T((b2,Wh)=>{var{setTimeout:dh,pako:Gh}=N(),Mi=Q(),{Event:Vh}=B(),{Kt:ji,We:p1,q:q1}=X(),{w:ge}=j(),Wi=ht(),{as:y1}=Pn(),{cu:m1,ye:Lh,us:C1,wu:ke,me:g1,Ce:Se,hs:k1,os:S1,fs:O1,ls:Uh,ge:T1,ke:R1,vs:N1,pu:Fh,cs:P1,ws:A1,yu:Oe,bh:M1,Cu:Kh,mu:Hh,gu:j1,ku:Jh,CustomEvent:E1,BinaryCustomEvent:_1,ps:B1}=ui();function I1(t,i,r,n,e){var s=i.renderer,u=n;if(Object.defineProperty(this,"config",{get(){return u}}),Object.defineProperty(this,"sdp",{get(){return i.isHost?null:i.r?.n.st.Nt.remoteDescription.sdp}}),Object.defineProperty(this,"isHost",{get(){return i.isHost}}),Object.defineProperty(this,"currentPlayerId",{get(){return i.r?.n.Bi}}),Object.defineProperty(this,"currentPlayer",{get(){var o=i.r?.n.Bi;return i.r?.n.t.j.filter(l=>l.id==o)[0]}}),Object.defineProperty(this,"state",{get(){return i.r?.n?.t}}),Object.defineProperty(this,"stateExt",{get(){return i.r?.n?.t?.it}}),Object.defineProperty(this,"gameState",{get(){return i.roomState?.s}}),Object.defineProperty(this,"gameStateExt",{get(){return i.roomState?.s?.it}}),Object.defineProperty(this,"currentFrameNo",{get(){return i.r?.n?.g}}),Object.defineProperty(this,"banList",{get(){return i.r?.n?.Gt?.banList?.getList()}}),Object.defineProperty(this,"token",{get(){return i.r?.n?.Gt?.je},set(o){var l=i.r?.n?.Gt;l&&(l.je=o,l.ks(),i.r.Yr="",l.Pu=dh(()=>{l.Ss(),this._onRoomTokenChange?.(l.je)},2*l.yo))}}),Object.defineProperty(this,"requireRecaptcha",{get(){return i.r?.n?.Gt?.Au},set(o){i.r?.n?.Gt?.Mu(o)}}),Object.defineProperty(this,"name",{get:function(){return i.r?.n?.t.name}}),Object.defineProperty(this,"password",{get:function(){return i.r?.n?.at}}),Object.defineProperty(this,"geo",{get:function(){return i.r?.n?.Ee}}),Object.defineProperty(this,"maxPlayerCount",{get:function(){var o=i.r?.n?.Vn;return o==null?null:o+1}}),Object.defineProperty(this,"fakePassword",{get:function(){return i.r?.n?.Ln}}),Object.defineProperty(this,"fixedPlayerCount",{get:function(){return i.r?.n?._e}}),Object.defineProperty(this,"showInRoomList",{get:function(){return i.r?.n?.Os}}),Object.defineProperty(this,"unlimitedPlayerCount",{get:function(){return i.r?.n?.Un}}),Object.defineProperty(this,"link",{get:function(){return i.r?.Yr}}),Object.defineProperty(this,"timeLimit",{get:function(){return i.r?.n.t.Mt}}),Object.defineProperty(this,"scoreLimit",{get:function(){return i.r?.n.t.dt}}),Object.defineProperty(this,"redScore",{get:function(){var o=i.roomState?.s;return(o?.it||o)?.Ri}}),Object.defineProperty(this,"blueScore",{get:function(){var o=i.roomState?.s;return(o?.it||o)?.Ti}}),Object.defineProperty(this,"timeElapsed",{get:function(){var o=i.roomState?.s;return(o?.it||o)?.bi}}),Object.defineProperty(this,"stadium",{get:function(){return i.r?.n.t.S}}),Object.defineProperty(this,"players",{get:function(){return i.r?.n.t.j}}),this.Mr=-1,this.libraries=r||[],this.librariesMap=this.libraries.reduce((o,l)=>(o[l.name]=l,o),{}),this.renderer=s,i.mo){let o=function(p,y,g){for(var S=0,R=0;S<p.length&&R<y.length;){for(;S<p.length&&R<y.length&&p[S]==y[R]&&p[S]!=g;)S++,R++;if(p[S]==g)break;for(;S<p.length&&R<y.length&&p[S]!=y[R]&&p[S]!=g;)S++;if(p[S]==g)break}y[R]!=g&&y.splice(R,0,g)},l=function(p){Object.defineProperty(h,p,{get(){return u[p]},set(y){u[p]=y}})},q=function(p){l(p+"Before"),l(p),l(p+"After")};var w=o,m=l,k=q;this.plugins=e||[],this.pluginsMap=this.plugins.reduce((p,y)=>(p[y.name]=y,p),{}),this.activePlugins=this.plugins.filter(p=>p.active);var h=this;this.setConfig=function(p){var y=u;y.finalize?.(),y.room=null,p=p||{},p.room=h,p.initialize?.(),h.client.config=p,u=p,h._onConfigUpdate?.(y,p)},this.mixConfig=function(p){Object.keys(p).forEach(y=>{var g=p[y];if(typeof g=="function"){var S=u[y];S?typeof S=="function"&&(u[y]=function(...R){S(...R),g(...R)}):u[y]=g}})},this.setRenderer=function(p){s&&(s.finalize?.(),s.room=null),p&&(p.room=h,p.initialize?.());var y=s;h.renderer=p,h.client.renderer=p,i.renderer=p,s=p,h._onRendererUpdate?.(y,p)},this.setPluginActive=function(p,y){var g=h.plugins.filter(R=>R.name==p)[0],S;if(!(!g||g.active==y))if(y){if(S=h.activePlugins.findIndex(R=>R.name==p),S>=0)return;o(h.plugins,h.activePlugins,g),g.active=y,h._onPluginActiveChange?.(g)}else{if(S=h.activePlugins.findIndex(R=>R.name==p),S<0)return;g.active=y,h._onPluginActiveChange?.(g),h.activePlugins.splice(S,1)}},this._modifyPlayerData=function(p,y,g,S,R,M){var A=[y,g,S],z;return u.modifyPlayerDataBefore&&([A,z]=u.modifyPlayerDataBefore(p,A[0],A[1],A[2],R,M)),z!==!1&&(h.activePlugins.forEach(a=>{a.modifyPlayerData&&A&&(A=a.modifyPlayerData(p,A[0],A[1],A[2],R,M,z))}),u.modifyPlayerData&&A&&(A=u.modifyPlayerData(p,A[0],A[1],A[2],R,M,z)),u.modifyPlayerDataAfter&&A&&(A=u.modifyPlayerDataAfter(p,A[0],A[1],A[2],R,M,z))),A},q("modifyPlayerData"),this._modifyPlayerPing=function(p,y){var g;return u.modifyPlayerPingBefore&&([y,g]=u.modifyPlayerPingBefore(p,y)),g!==!1&&(h.activePlugins.forEach(S=>{S.modifyPlayerPing&&(y=S.modifyPlayerPing(p,y,g))}),u.modifyPlayerPing&&(y=u.modifyPlayerPing(p,y,g)),u.modifyPlayerPingAfter&&(y=u.modifyPlayerPingAfter(p,y,g))),y},q("modifyPlayerPing"),this._modifyClientPing=function(p){var y;return u.modifyClientPingBefore&&([p,y]=u.modifyClientPingBefore(p)),y!==!1&&(h.activePlugins.forEach(g=>{g.modifyClientPing&&(p=g.modifyClientPing(p,y))}),u.modifyClientPing&&(p=u.modifyClientPing(p,y)),u.modifyClientPingAfter&&(p=u.modifyClientPingAfter(p,y))),p},q("modifyClientPing"),this._modifyFrameNo=function(p){var y;return u.modifyFrameNoBefore&&([p,y]=u.modifyFrameNoBefore(p)),y!==!1&&(h.activePlugins.forEach(g=>{g.modifyFrameNo&&(p=g.modifyFrameNo(p,y))}),u.modifyFrameNo&&(p=u.modifyFrameNo(p,y)),u.modifyFrameNoAfter&&(p=u.modifyFrameNoAfter(p,y))),p},q("modifyFrameNo"),this._onOperationReceived=function(p,y,g,S){var R=u.onBeforeOperationReceived&&u.onBeforeOperationReceived(p,y,g,S),M=R!==!1;return h.activePlugins.forEach(A=>{M&&A.onOperationReceived&&!A.onOperationReceived(p,y,g,S,R)&&(M=!1)}),M&&u.onOperationReceived&&!u.onOperationReceived(p,y,g,S,R)&&(M=!1),M&&u.onAfterOperationReceived&&!u.onAfterOperationReceived(p,y,g,S,R)&&(M=!1),M},l("onBeforeOperationReceived"),l("onOperationReceived"),l("onAfterOperationReceived");var f=function(p,y){h["_on"+p]=function(...g){var S=u["onBefore"+p],R=S&&S(...g);R!==!1&&(h.activePlugins.forEach(M=>{S=M["on"+p],S&&S(...g,R)}),S=u["on"+p],S&&S(...g,R),S=s&&s["on"+p],S&&S(...g,R),S=u["onAfter"+p],S&&S(...g,R))},l("onBefore"+p),l("on"+p),l("onAfter"+p)};y1.forEach(({name:p,metadata:y})=>{f(p,y)})}this.setProperties=function(o){i.isHost&&i.r?.yi.bl(o)},this.setKickRateLimit=function(o,l,q){var p=Kh.create(o,l,q);i.W(p)!=!1&&i.r?.n._(p)},this.executeEvent=function(o,l){i.W(o,void 0,l)!=!1&&i.r?.n?._(o)},this.clearEvents=function(){var o=i.r?.n?.rr;o&&(o.list.length=0)},this.sendCustomEvent=function(o,l,q){var p=i.r?.n;if(!(!p?.t||q!=null&&!p.t.getPlayer(q)?.nr)){var y=E1.create(o,l);i.W(y,q)!=!1&&(this.isHost?q!=null?i.Fn.then(function(){p.Kn(y,q)}):p.Ts(y,0,!0):p.ju&&p._(y))}},this.sendBinaryCustomEvent=function(o,l,q){var p=i.r?.n;if(!(!p?.t||q!=null&&!p.t.getPlayer(q)?.nr)){var y=_1.create(o,l);i.W(y,q)!=!1&&(this.isHost?q!=null?i.Fn.then(function(){p.Kn(y,q)}):p.Ts(y,0,!0):p.ju&&p._(y))}},this.setPlayerIdentity=function(o,l,q){var p=i.r?.n;if(!(!p?.t||q!=null&&!p.t.getPlayer(q)?.nr)){var y=B1.create(o,l);i.W(y,q)!=!1&&(this.isHost?q!=null?i.Fn.then(function(){p.Kn(y,q)}):p.Ts(y,0,!0):p.ju&&p._(y))}},this.setHandicap=function(o){i.r?.n.ul(o)},this.setExtrapolation=function(o){h.client.ut.li.setValue("extrapolation",o),i.r?.n._h(o)},this.clearBan=function(o){i.isHost&&i.r?.n.Eu(o)},this.clearBans=function(){i.isHost&&i.r?.n._u()},this.addPlayerBan=function(o){if(i.isHost){var l=i.r?.n.t.j.filter(q=>q.id==o)[0];if(l)return i.r?.n.Bu(l)}},this.addIpBan=function(...o){if(i.isHost)return i.r?.n.Iu(...o)},this.addAuthBan=function(...o){if(i.isHost)return i.r?.n.du(...o)},this.removeBan=function(o){if(i.isHost)return i.r?.n.Gu(o)},this.setAvatar=function(o){o=o?.substr(0,2)||"",h.client.ut.li.setValue("avatar",o);var l=Oe.create(o);i.W(l)!=!1&&i.r?.n._(l)},this.setPlayerAvatar=function(o,l,q){if(!(!i.isHost&&(q||o!=i.r.n.Bi))){var p=q?j1.create(o,l):Oe.create(l);i.W(p,void 0,q?0:o)!=!1&&i.r?.n._(p)}},this.reorderPlayers=function(o,l){var q=M1.create(o,l);i.W(q)!=!1&&i.r?.n._(q)},this.setChatIndicatorActive=function(o){var l=Lh.create(o?0:1);i.W(l)!=!1&&i.r?.n._(l)},this.setTeamColors=function(o,l,...q){var p=Hh.createFromData(o,l,...q);i.W(p)!=!1&&i.r?.n._(p)},this.setUnlimitedPlayerCount=function(o){i.r?.yi.al(o)},this.setFakePassword=function(o){i.r?.yi.tv(o)};var v=function(o,l){var q=i.r?.n;if(q){var p=ke.create(o);i.W(p,l)!=!1&&(l!=null?i.Fn.then(function(){q.Kn(p,l)}):q._(p))}};this.sendChat=function(o,l){if(i.isHost)v(o,l);else{var q=i.r?.n;if(!q)return;var p=ke.create(o);i.W(p)!=!1&&q._(p)}},this.sendChatIndicator=function(o){i.r?.iv(o)},this.sendAnnouncement=function(o,l,q,p,y){if(i.isHost){var g=i.r?.n;if(g){p={bold:1,italic:2,small:3,"small-bold":4,"small-italic":5}[p],p==null&&(p=0),q==null&&(q=-1),y==null&&(y=1);var S=m1.create(o,q,p,y);i.W(S,l)!=!1&&(l!=null?i.Fn.then(function(){g.Kn(S,l)}):g._(S))}}},this.setDiscProperties=function(o,l){if(i.isHost){var q=i.r?.n;if(q){var p=Jh.create(o,!1,l);i.W(p)!=!1&&q._(p)}}},this.setPlayerDiscProperties=function(o,l){if(i.isHost){var q=i.r?.n;if(q){var p=Jh.create(o,!0,l);i.W(p)!=!1&&q._(p)}}},this.getKeyState=function(){return i.keyState},this.setKeyState=function(o){h.Mr<0?i.keyState=o:(o&16)>0&&(i.keyState&16)>0&&!h.currentPlayer?.Ci?(i.keyState=o&-17,dh(()=>{i.keyState=o},h.Mr)):i.keyState=o},this.startGame=function(){i.r?.rv()},this.stopGame=function(){i.r?.nv()},this.pauseGame=function(){i.r?.ev()},this.autoTeams=function(){i.r?.sv()},this.lockTeams=function(){i.r?.uv(!i.roomState?.hr)},this.isGamePaused=function(){return i.roomState?.s?.xt==120},this.resetTeams=function(){Wi.i.forEach((o,l)=>l>0&&i.r?.Co(o))},this.startRecording=function(){return i.r?.go(!0)},this.stopRecording=function(){return i.r?.go(!1)},this.isRecording=function(){return i.r?.$r!=null},this.randTeams=function(){i.r?.hv()},this.setSync=function(o){i.r?.n?.t.uo(o)},this.leave=function(){i.r?.Vu()},this.setCurrentStadium=function(o,l){try{i.r?.ov(o)}catch(p){var q=p instanceof q1?p.zt:p;q instanceof SyntaxError?l(ji(Mi.StadiumParseSyntaxError,q.lineNumber)):q instanceof p1?l(q.Hs):l(ji(Mi.StadiumParseUnknownError,q))}},this.setTimeLimit=function(o){i.r?.fv(o)},this.setScoreLimit=function(o){i.r?.lv(o)},this.changeTeam=function(o){i.r?.ko(i.r?.n.Bi,Wi.i[o])},this.resetTeam=function(o){i.r?.Co(Wi.i[o])},this.setPlayerTeam=function(o,l){i.r?.ko(o,Wi.i[l])},this.setPlayerAdmin=function(o,l){var q=Fh.create(o,l);i.W(q)!=!1&&i.r?.n?._(q)},this.kickPlayer=function(o,l,q){var p=Se.create(o,l||"",q);i.W(p)!=!1&&i.r?.n?._(p)},this.fakePlayerJoin=function(o,l,q,p,y,g){var S=g1.create(o,l,q,p,y,g);i.W(S)!=!1&&i.r?.n?._(S)},this.fakePlayerLeave=function(o){var l=i.r?.n.t.getPlayer(o);if(l){var q=Se.create(o,null,!0);return i.W(q)!=!1&&i.r?.n?._(q),{id:l.id,name:l.name,flag:l.Rt,avatar:l.gt,conn:l.kr,auth:l.Qt}}};function c(o,l){i.W(l,void 0,o)!=!1&&i.r?.n?._(l)}this.fakeSendPlayerInput=function(o,l){c(l,C1.create(o))},this.fakeSendPlayerChat=function(o,l){c(l,ke.create(o))},this.fakeSetPlayerChatIndicator=function(o,l){c(l,Lh.create(o?0:1))},this.fakeSetPlayerAvatar=function(o,l){c(l,Oe.create(o))},this.fakeSetStadium=function(o,l){c(l,T1.create(o))},this.fakeStartGame=function(o){c(o,k1.create())},this.fakeStopGame=function(o){c(o,S1.create())},this.fakeSetGamePaused=function(o,l){c(l,O1.create(o))},this.fakeSetScoreLimit=function(o,l){c(l,Uh.create(0,o))},this.fakeSetTimeLimit=function(o,l){c(l,Uh.create(1,o))},this.fakeSetTeamsLock=function(o,l){c(l,N1.create(o))},this.fakeAutoTeams=function(o){c(o,P1.create())},this.fakeSetPlayerTeam=function(o,l,q){var p=Wi.i[l];p&&c(q,R1.create(o,p))},this.fakeSetKickRateLimit=function(o,l,q,p){c(p,Kh.create(o,l,q))},this.fakeSetTeamColors=function(o,l,q,p){c(p,Hh.createFromData(o,l,...q))},this.fakeSetPlayerAdmin=function(o,l,q){c(q,Fh.create(o,l))},this.fakeKickPlayer=function(o,l,q,p){c(p,Se.create(o,l,q))},this.fakeSetPlayerSync=function(o,l){c(l,A1.create(o))},this.getPlayer=function(o){return i.r?.n.t.j.filter(l=>l.id==o)[0]},this.getBall=function(o=!0){var l=i.roomState?.s;return(o?l?.it:l)?.v.p[0]},this.getDiscs=function(o=!0){var l=i.roomState?.s;return(o?l?.it:l)?.v.p},this.getDisc=function(o,l=!0){var q=i.roomState?.s;return(l?q?.it:q)?.v.p[o]},this.getPlayerDisc=function(o,l=!0){var q=i.roomState?.s,p=(l?q?.it:q)?.v.p,y=i.roomState?.S.p;if(!(!p||!y)){for(var g=y.length;g<p.length;g++)if(p[g].I==o)return p[g]}},this.getPlayerDisc_exp=function(o){return i.roomState?.j.filter(l=>l.id==o)[0]?.B},this.takeSnapshot=function(){var o=i.r?.n?.t;if(o)return o.copy()},this.exportStadium=function(){var o=i.r?.n?.t;if(o)return o.exportStadium()},this.createVertex=function(o){var l=i.r?.n?.t;if(l)return l.createVertex(o)},this.createSegment=function(o){var l=i.r?.n?.t;if(l)return l.createSegment(o)},this.createSegmentFromObj=function(o){var l=i.r?.n?.t;if(l)return l.createSegmentFromObj(o)},this.createGoal=function(o){var l=i.r?.n?.t;if(l)return l.createGoal(o)},this.createPlane=function(o){var l=i.r?.n?.t;if(l)return l.createPlane(o)},this.createDisc=function(o){var l=i.r?.n?.t;if(l)return l.createDisc(o)},this.createJoint=function(o){var l=i.r?.n?.t;if(l)return l.createJoint(o)},this.createJointFromObj=function(o){var l=i.r?.n?.t;if(l)return l.createJointFromObj(o)},this.addVertex=function(o){var l=i.r?.n?.t;if(l)return l.addVertex(o)},this.addSegment=function(o){var l=i.r?.n?.t;if(l)return l.addSegment(o)},this.addGoal=function(o){var l=i.r?.n?.t;if(l)return l.addGoal(o)},this.addPlane=function(o){var l=i.r?.n?.t;if(l)return l.addPlane(o)},this.addDisc=function(o){var l=i.r?.n?.t;if(l)return l.addDisc(o)},this.addJoint=function(o){var l=i.r?.n?.t;if(l)return l.addJoint(o)},this.addSpawnPoint=function(o){var l=i.r?.n?.t;if(l)return l.addSpawnPoint(o)},this.addPlayer=function(o){var l=i.r?.n?.t;if(l)return l.addPlayer(o)},this.findVertexIndicesOfSegmentObj=function(o){var l=i.r?.n?.t;if(l)return l.findVertexIndicesOfSegmentObj(o)},this.findVertexIndicesOfSegment=function(o){var l=i.r?.n?.t;if(l)return l.findVertexIndicesOfSegment(o)},this.updateVertex=function(o,l){var q=i.r?.n?.t;if(q)return q.updateVertex(o,l)},this.updateSegment=function(o,l){var q=i.r?.n?.t;if(q)return q.updateSegment(o,l)},this.updateGoal=function(o,l){var q=i.r?.n?.t;if(q)return q.updateGoal(o,l)},this.updatePlane=function(o,l){var q=i.r?.n?.t;if(q)return q.updatePlane(o,l)},this.updateDisc=function(o,l){var q=i.r?.n?.t;if(q)return q.updateDisc(o,l)},this.updateDiscObj=function(o,l){var q=i.r?.n?.t;if(q)return q.updateDiscObj(o,l)},this.updateJoint=function(o,l){var q=i.r?.n?.t;if(q)return q.updateJoint(o,l)},this.updateSpawnPoint=function(o,l,q){var p=i.r?.n?.t;if(p)return p.updateSpawnPoint(o,l,q)},this.updatePlayer=function(o,l){var q=i.r?.n?.t;if(q)return q.updatePlayer(o,l)},this.removeVertex=function(o){var l=i.r?.n?.t;if(l)return l.removeVertex(o)},this.removeSegment=function(o){var l=i.r?.n?.t;if(l)return l.removeSegment(o)},this.removeGoal=function(o){var l=i.r?.n?.t;if(l)return l.removeGoal(o)},this.removePlane=function(o){var l=i.r?.n?.t;if(l)return l.removePlane(o)},this.removeDisc=function(o){var l=i.r?.n?.t;if(l)return l.removeDisc(o)},this.removeJoint=function(o){var l=i.r?.n?.t;if(l)return l.removeJoint(o)},this.removeSpawnPoint=function(o,l){var q=i.r?.n?.t;if(q)return q.removeSpawnPoint(o,l)},this.removePlayer=function(o){var l=i.r?.n?.t;if(l)return l.removePlayer(o)},this.updateStadiumPlayerPhysics=function(o){var l=i.r?.n?.t;if(l)return l.updateStadiumPlayerPhysics(o)},this.updateStadiumBg=function(o){var l=i.r?.n?.t;if(l)return l.updateStadiumBg(o)},this.updateStadiumGeneral=function(o){var l=i.r?.n?.t;if(l)return l.updateStadiumGeneral(o)},this.updatePlugin=function(o,l){var q=h.plugins[o];if(!q)throw ji(Mi.PluginNotFoundError,o);var{name:p,active:y}=q;if(p!=l.name)throw ji(Mi.PluginNameChangeNotAllowedError);y&&h.setPluginActive(p,!1),q.finalize?.(),q.room=null,h.plugins[o]=l,h.pluginsMap[p]=l,l.room=h,l.initialize?.(),h._onPluginUpdate?.(q,l),y&&(l.active=!1,h.setPluginActive(p,!0))},this.updateLibrary=function(o,l){var q=h.libraries[o];if(!q)throw ji(Mi.LibraryNotFoundError,o);var{name:p}=q;if(p!=l.name)throw ji(Mi.LibraryNameChangeNotAllowedError);q.finalize?.(),q.room=null,h.libraries[o]=l,h.librariesMap[p]=l,l.room=h,l.initialize?.(),h._onLibraryUpdate?.(q,l)},t?.(this),i.mo&&(this.libraries.forEach(o=>{o.room=h,o.initialize?.()}),u.room=h,u.initialize?.(),s&&(s.room=h,s.initialize?.()),this.plugins.forEach(o=>{o.room=h,o.initialize?.()}),this.activePlugins.forEach(o=>{h._onPluginActiveChange?.(o)})),this.startStreaming=({immediate:o=!0,onClientCount:l,emitData:q})=>{var p=i.r?.n;if(!(!i.isHost||h.isRecording()||!p||p.ni)){var y=new Map,g=ge.U(16384),S=0;return{onSuccess:()=>{p.ni=function(R){if(o){g.f(2),g.kt(p.g),g.Lt(R.i),Vh.Cr(R,g),q?.(g._t()),g.l=0;return}var M=y.get(p.g);M||(M=[],y.set(p.g,M)),M.push(R)}},onDataReceived:R=>{R=new DataView(R.buffer,R.byteOffset,R.byteLength);var M=R.getUint8(0),A=R.getUint16(1);switch(M){case 0:{S=A,l?.(A);break}case 1:{M=ge.U(),M.f(1),M.Lt(A),A=ge.U(),i.r.n.vv(A),M.Yt(Gh.deflateRaw(A._t())),q?.(M._t());break}}},interval:()=>{for(var R=y.keys(),M=R.next(),A=p.g;!M.done;){var z=M.value,a=y.get(z);g.Lt(A-z),g.Lt(a.length),a.forEach(it=>{g.Lt(it.i),Vh.Cr(it,g)}),M=R.next()}y.clear();var ut=g._t();if(g.l=0,S!=0){ut=Gh.deflateRaw(ut);var H=new Uint8Array(ut.byteLength+5),I=new DataView(H.buffer,H.byteOffset,H.byteLength);I.setUint8(0,0),I.setUint32(1,A),H.set(ut,5),q?.(H)}}}}},this.stopStreaming=()=>{var o=i.r?.n;!i.isHost||h.isRecording()||!o?.ni||(o.ni=null)}}Wh.VT=I1});var Re=T((a2,nn)=>{var{backend:Qh,mi:d1,cr:G1,Fs:V1,E:L1}=N(),{parseGeo:U1}=Ji();function F1(t,i){return(Qh.secure?"https":"http")+"://"+Qh.hostname+"/play?c="+t+(i?"&p=1":"")}function K1(t){var i=t?.li;!i&&(i=t.li={}),i.setValue=(s,u)=>{i[s]=u,i.onValueSet?.(s,u)};var r=i.crappy_router||!1;r!=i.crappy_router&&i.setValue("crappy_router",r),r=i.extrapolation||0,r!=i.extrapolation&&i.setValue("extrapolation",r),r=i.player_name||"abc",r!=i.player_name&&i.setValue("player_name",r),r=i.avatar||null,r!=i.avatar&&i.setValue("avatar",r);var n={lat:40,lon:40,flag:"tr"};if(!i.geo)i.setValue("geo",n);else{var e=i.geo;r=U1(e,n),(e.lat!=r.lat||e.lon!=r.lon||e.flag!=r.flag)&&i.setValue("geo",r)}}function H1(t){var i=t.ut={customClientIds:new Set,r:null,roomState:null,Fc:null,isHost:!1,createRoom:null,Fn:Promise.resolve(),keyState:0,renderer:t.renderer,li:t.li,mo:!t.So,onOperationReceived:function(r,n,e){var s=t.room._onOperationReceived;if(!s)return!0;var u=r.eventType;return u==null?!0:s(u,r,n,e)},W:function(r,n,e){if(i.isHost)return r.i=e||0,r.ts=n,i.onOperationReceived(r,i.r?.n.g,null)}};return t.ut=i,i}function Xh(){this.Ft=9,this.mi=null,this.cr=null,this.So=!1,this.Mr=-1,this.renderer=null,this.config={},this.libraries=[],this.plugins=[],this.Lu=null,this.Uu=null,this.Fu=null,this.Ku=null,this.Oo=null,this.To=null,this.Rs=null,this.Hn=null,this.Be=null,this.li=null}function J1(t){var i=new Xh;return i.Ft=t.version==null?V1:t.version,i.mi=t.proxyAgent||d1,i.cr=t.identityToken||G1,i.So=t.noPluginMechanism,i.Mr=t.kickTimeout||-1,i.renderer=t.renderer,i.config=t.config||{},i.libraries=t.libraries||[],i.plugins=t.plugins||[],i.Lu=t.preInit,i.Uu=t.onSuccess,i.Fu=t.onFailure,i.Ku=t.onLeave,i.Oo=t.onConnectionStateChange,i.To=t.onReverseConnection,i.Rs=t.onRequestRecaptcha,i.Hn=t.cancel,i.Be=t.useRecaptchaToken,i.li=t.storage,K1(i),i}L1(Xh,["version","proxyAgent","identityToken","noPluginMechanism","kickTimeout","renderer","config","libraries","plugins","preInit","onSuccess","onFailure","onLeave","onConnectionStateChange","onReverseConnection","onRequestRecaptcha","cancel","useRecaptchaToken","storage"],[]);nn.VT=nn.cv||(nn.cv={roomLink:F1,Ro:H1,No:J1})});var Ae=T((tq,en)=>{var{setTimeout:W1,clearTimeout:Zh,console:Ne,performance:Pe}=N(),{q:Q1}=X(),Yh=Q(),{vh:$h}=yi(),X1=t=>(Ne.warn($h(Yh.NoProxyIdentityProblem)||"NoProxyIdentityProblem"),t=$h(Yh.NoProxyIdentitySolution),t&&Ne.warn(t));function zh(t){this.wv=1e4,this.Zr=!0;var i=this;t.Po(),this.Nt=t.Nt,this.jr=t.jr,this.Ie=t.Ie,this.zr=t.zr,this.Ao=Pe.now();var r=null;r=function(){var s=i.wv-i.pv();0>=s?i.et():(Zh(i.Mo),s=W1(r,s+1e3),i.Mo=s)},r(),this.Nt.oniceconnectionstatechange=function(){var s=i.Nt.iceConnectionState;s!="closed"&&s!="failed"||i.et()},t=0;for(var n=this.jr;t<n.length;){var e=n[t];++t,e.onmessage=function(s){i.Zr&&(i.Ao=Pe.now(),i.Ns!=null&&i.Ns(s.data))},e.onclose=function(){i.et()}}}zh.prototype={pv:function(){return Pe.now()-this.Ao},vi:function(t,i){if(this.Zr){var r=this.jr[t];if(r.readyState=="open"){var n=i.Xe();try{r.send(n)}catch(e){Ne.log(e instanceof Q1?e.zt:e)}}}},et:function(){Zh(this.Mo),this.Zr&&(this.Zr=!1,this.Nt.close(),this.de!=null&&this.de())}};en.VT=en.qv||(en.qv={jo:[{name:"ro",reliable:!0,Hu:!0},{name:"ru",reliable:!0,Hu:!1},{name:"uu",reliable:!1,Hu:!1}],Eo:X1,_o:zh})});var Me=T((iq,bh)=>{var{setTimeout:xh,clearTimeout:Dh,console:Y1,RTCPeerConnection:$1,E:Z1}=N(),{Ch:z1}=j();function Qi(t,i,r){this.Jn=null,this.zr=null,this.Ie=[],this.Bo=0,this.Io=!1,this.Ps=[],this.jr=[],this.Nt=i&&new $1({iceServers:i},Qi.yv);var n=this;if(this.Ju=new Promise(function(e){n.mv=e}),this.id=t,i)for(this.Nt.onicecandidate=function(e){e.candidate==null?n.mv(n.Ps):(e=e.candidate,e.candidate!=null&&e.candidate!=""&&(n.As!=null&&n.As(e),n.Ps.push(e)))},i=0;i<r.length;)this.Cv(r[i++])}Qi.yv={mandatory:{OfferToReceiveAudio:!1,OfferToReceiveVideo:!1}};Qi.prototype={Wu:function(t){t==null&&(t=1e4),Dh(this.Jn),this.Jn=xh(this.gv.bind(this),t)},kv:function(t,i){var r=this;this.Go(this.Nt.setRemoteDescription(t).then(function(){return r.Nt.createAnswer()}),i,500)},Sv:function(){this.Go(this.Nt.createOffer(),[],1e3)},Go:function(t,i,r){var n=this;t.then(function(e){return n.Nt.setLocalDescription(e).then(function(){return e})}).then(function(e){function s(){return e}for(var u=0;u<i.length;)n.Vo(i[u++]);return z1(n.Ju,r).then(s,s)}).then(function(e){n.Qu(e)}).catch(function(e){Y1.log(e),n.Ms()})},Cv:function(t){var i=this,r={id:this.jr.length,negotiated:!0,ordered:t.Hu};t.reliable||(r.maxRetransmits=0),t=this.Nt.createDataChannel(t.name,r),t.binaryType="arraybuffer",t.onopen=function(){for(var n=0,e=i.jr;n<e.length;)if(e[n++].readyState!="open")return;i.xr!=null&&i.xr()},t.onclose=function(){i.Ms()},t.onmessage=function(){i.Ms()},this.jr.push(t)},Vo:function(t){var i=this;xh(function(){return i.Nt.addIceCandidate(t)},this.Bo)},gv:function(){this.Ms()},Ms:function(){this.Er!=null&&this.Er(),this.et()},et:function(){this.Po(),this.Nt.close()},Po:function(){Dh(this.Jn),this.Qu=this.xr=this.As=this.Er=null,this.Nt.onicecandidate=null,this.Nt.ondatachannel=null,this.Nt.onsignalingstatechange=null,this.Nt.oniceconnectionstatechange=null;for(var t=0,i=this.jr;t<i.length;){var r=i[t];++t,r.onopen=null,r.onclose=null,r.onmessage=null}}};Z1(Qi,[null,null,null,null,null,null,null,null,null,"id"],[]);bh.VT=Qi});var to=T((rq,ah)=>{var{E:je}=N(),{gh:x1}=li(),lt=yn(),{ipToNumber:Ct,numberToIp:D1,compareBits:b1}=Ji(),sn=340282366920938463463374607431768211455n;function Xi(){this.ipv6=!1,this.value=null,this.mask=null}Xi.create=function(t,i){if(t==null)return;let r=new Xi,n=t.__proto__.constructor.name;return r.ipv6=n=="BigInt",r.value=t,r.mask=n!=i?.__proto__.constructor.name?r.ipv6?sn:-1:i,r};function oi(){this.id=null,this.type=null,this.value=null}oi.create=function(t,i,r){var n=new oi;return n.id=t,n.type=i,n.value=r,n};oi.prototype={js:function(){var t=new oi;return t.id=this.id,t.type=this.type,t.value=this.value.js?this.value.js():this.value,t}};function Ei(){this.Ge=null,this.Xu=null,this.ips=null,this.Qt=null}Ei.create=function(t,i,r,n){var e=new Ei;return e.Ge=t,e.Xu=i,e.ips=r,e.Qt=n,e};Ei.prototype={js:function(){var t=new Ei;return t.Ge=this.Ge,t.Xu=this.Xu,t.ips=this.ips,t.Qt=this.Qt,t}};function a1(t){var i=[],r=1,n=new Set,e=[];this.addPlayer=h=>{var f=t.Hr.get(h?.id)?.st;if(!(!f||i.findIndex(c=>c.type==lt.Player&&c.value.Ge==h.id)>-1)){var v=[];return f.zr&&v.push(x1(f.zr)),f.Ie.forEach(c=>{v.includes(c)||v.push(c)}),v.forEach(c=>{var w=Ct(c);w&&e.push(Xi.create(w))}),n.add(h.Qt),i.push(oi.create(r,lt.Player,Ei.create(h.id,h.name,v,h.Qt))),r++}},this.addIp=(...h)=>h.map(f=>{var v=typeof f;if(v=="string")f={ip:f};else if(v!="object")return;var c=Ct(f.ip);if(c==null)return;let w=c.__proto__.constructor.name=="BigInt";var m=Ct(f.mask);c.__proto__.constructor.name!=m?.__proto__.constructor.name&&(m=w?sn:-1,f.mask=D1(m));for(var k=0;k<i.length;k++){let o=i[k];if(o.type==lt.IP&&c==Ct(o.value.ip)&&m==Ct(o.value.mask))return}return e.push(Xi.create(c,m)),i.push(oi.create(r,lt.IP,f)),r++}),this.addAuth=(...h)=>h.map(f=>{if(!n.has(f))return i.push(oi.create(r,lt.Auth,f)),n.add(f),r++}),this.checkIp=h=>{let f=Ct(h);if(f==null)return!1;let v=f.__proto__.constructor.name=="BigInt";for(var c=0;c<e.length;c++){let w=e[c];if(v==w.ipv6&&b1(f,w.value,w.mask))return!0}return!1},this.checkAuth=h=>n.has(h);let s=(h,f)=>{let v=Ct(h);if(v==null)return;let c=v.__proto__.constructor.name=="BigInt";var w=Ct(f);w==null&&(w=c?sn:-1);let m=w==(c?sn:-1);for(var k=[],o=0;o<e.length;o++){let l=e[o];c==l.ipv6&&v==l.value&&w==l.mask&&k.push(o)}for(;k.length>0;)e.splice(k.pop(),1);for(k.length=0,i.forEach((l,q)=>{m&&l.type==lt.Player&&l.value.ips.findIndex(p=>Ct(p)==v)>-1?(l.type=lt.Auth,l.value=l.value.Qt):l.type==lt.IP&&v==Ct(l.value.ip)&&w==Ct(l.value.mask)&&k.push(q)});k.length>0;)i.splice(k.pop(),1)},u=h=>{n.delete(h);var f=[],v=[];for(i.forEach((c,w)=>{c.type==lt.Player&&h==c.value.Qt?(v.splice(v.length,0,...c.value.ips),f.push(w)):c.type==lt.Auth&&h==c.value&&f.push(w)});f.length>0;)i.splice(f.pop(),1);this.addIp(...v)};this.remove=h=>{var f=i.findIndex(w=>w.id==h);if(f<0)return!1;var{type:v,value:c}=i.splice(f,1)[0];switch(v){case lt.Player:c.ips.forEach(w=>{s(w)}),u(c.Qt);break;case lt.IP:s(c.ip,c.mask);break;case lt.Auth:u(c);break}return!0},this.removePlayer=h=>{var f=i.findIndex(c=>c.type==0&&c.value?.Ge==h);if(f<0)return!1;var{value:v}=i.splice(f,1)[0];return v.ips.forEach(c=>{s(c)}),u(v.Qt),!0},this.clear=()=>{n.clear(),e.length=0,i.length=0},this.getList=()=>i.map(h=>h.js())}je(Xi,["ipv6","value","mask"],[]);je(oi,["id","type","value"],[]);je(Ei,["pId","pName","ips","auth"],[]);ah.VT=a1});var vo=T((eq,lo)=>{var uo=Q(),{proxy:Yi,backend:io,cr:nq,setTimeout:$i,clearTimeout:un,setInterval:tw,clearInterval:ro,console:iw,WebSocket:no,performance:on,pako:fn,RTCIceCandidate:eo,RTCSessionDescription:rw,E:Ee}=N(),{Event:hn}=B(),{Kt:ho,q:st}=X(),{kh:nw,J:ew}=li(),{jo:sw,Eo:uw,_o:hw}=Ae(),ow=Me(),oo=Si(),fw=to(),{D:so,F:_i,w:b,kt:fo,extend:lw}=j(),vw=br(),cw=Ce(),{Dh:ww,ge:pw,CustomEvent:qw,BinaryCustomEvent:yw,ps:mw}=ui();function Bi(t,i,r,n,e){this.haxball=t,this.Au=!1,this.Wn=!1,this.Es=!1,this.lr=null,this.id="",this.Ov=5e4,this.yo=1e4,this.Dr=new Map,this.Tv=i,this.Rv=r,this.Nv=n,this.je=e||"",i&&this.Ss()}Bi.Lo=function(t){try{if(t=t.candidate.split(" "),t[6]!="typ")throw new st(null);if(t[7]=="srflx")return t[4]}catch{}return null};Bi.prototype={et:function(){if(un(this.Pu),un(this.Qn),this.Qn=null,ro(this.Uo),this.X!=null)try{this.X.onmessage=null,this.X.onerror=null,this.X.onclose=null,this.X.onopen=null,this.X.close(),this.X=null}catch{}this.Fo()},Yu:function(t){var i=this;if(this.lr!=null||t!=null){if(this.lr!=null&&t!=null&&this.lr.byteLength==t.byteLength){for(var r=new Uint8Array(this.lr),n=new Uint8Array(t),e=!1,s=0,u=this.lr.byteLength;s<u;){var h=s++;if(r[h]!=n[h]){e=!0;break}}if(!e)return}this.lr=t.slice(0),this.Es=!0,this.X!=null&&this.X.readyState==1&&this.Qn==null&&(this.$u(),this.Qn=$i(function(){i.Qn=null,i.X.readyState==1&&i.Es&&i.$u()},1e4))}},Mu:function(t){function i(){r.X!=null&&r.X.readyState==1&&r.Wn!=r.Au&&r.Ko(),r.Ho=null}var r=this;this.Wn=t,this.Ho==null&&(i(),this.Ho=$i(i,1e3))},Ss:function(t){function i(e){if(e=e.sitekey,e==null)throw new st(null);if(n.haxball.Be=s=>{n.haxball.Be=null,n.Ss(s)},!n.haxball.Rs)throw ho(uo.MissingRecaptchaCallbackError);n.haxball.Rs(e)}function r(e){var s=e.url;if(s==null)throw new st(null);if(e=e.token,e==null)throw new st(null);Yi?.WebSocketUrl&&(s=Yi?.WebSocketUrl),!s.endsWith("host")&&(!s.endsWith("/")&&(s+="/"),s+="host");var u=n.haxball.cr;!Yi&&u&&(uw(),u=null);var h=u?[u]:[];if(n.haxball.mi||Yi?.WebSocketChangeOriginAllowed){var f={};n.haxball.mi&&(f.agent=n.haxball.mi),Yi.WebSocketChangeOriginAllowed&&(f.headers={Origin:(io.secure?"https":"http")+"://"+io.hostname}),n.X=new no(s+"?token="+e,h,f)}else n.X=new no(s+"?token="+e,h);n.X.binaryType="arraybuffer",n.X.onopen=function(){n.Pv()},n.X.onclose=function(v){n.ks(v.code!=4001)},n.X.onerror=function(){n.ks(!0)},n.X.onmessage=n.Zu.bind(n)}var n=this;vw.Wl(this.Tv,"token="+(t||this.je)+"&rcr=","application/x-www-form-urlencoded").then(function(e){switch(e.action){case"connect":n.haxball.Be=null,r(e);break;case"recaptcha":i(e)}}).catch(function(e){iw.log(e instanceof st?e.zt:e),n.haxball.Be=null,n.ks(!0)})},Pv:function(){var t=this;this.lr!=null&&this.$u(),this.Wn!=0&&this.Ko(),this.Uo=tw(function(){t.zu()},4e4)},Zu:function(t){switch(t=new _i(new DataView(t.data),!1),t.T()){case 1:this.xu(t);break;case 4:this.Du(t);break;case 5:this.Av(t);break;case 6:this.Mv(t);break;case 111:this.jv(t);break}},jv:function(t,i){$i(()=>{try{this.haxball.room?.setPlayerIdentity?.(t.ot(),t.zn())}catch{i&&this.Xn(i,4111)}},3e3)},xu:function(t){var i=t.ot(),r=nw(t.Vt(t.T())),n,e,s;try{t=new _i(new DataView(fn.inflateRaw(t.Vt()).buffer),!1),n=t.T()!=0,e=t.ci();for(var u=t.zn(),h=[],f=0;f<u.length;)h.push(new eo(u[f++]));s=h}catch{this.Xn(i,0);return}this.Ev(i,r,e,s,t,n)},Ev:function(t,i,r,n,e,s){var u=this;if(16<=this.Dr.size)this.Xn(t,4104);else if(this.banList.checkIp(i))this.Xn(t,4102);else{for(var h=[],f=0;f<n.length;){var v=Bi.Lo(n[f++]);if(v!=null){if(this.banList.checkIp(v)){this.Xn(t,4102);return}h.push(v)}}if(this.Jo!=null&&(f=new _i(e.c),f.l=e.l,e=this.Jo(f),e!=null)){this.Xn(t,e);return}var c=new ow(t,this.Rv,this.Nv);for(s&&(c.Bo=2500),c.Ie=h,c.zr="",f=0;f<i.length;f++)c.zr+=ew.$s(i.charCodeAt(f));this.Dr.set(t,c),c.Er=function(){u.vr(0,c,null),u.Dr.delete(c.id)},c.xr=function(){u.Dr.delete(c.id),u.vr(0,c,null),u.Wo!=null&&u.Wo(new hw(c))},c.Qu=function(w){u.bu(c,w,c.Ps,null),c.Ju.then(function(){u.vr(0,c,null)}),c.As=function(m){u.au(c,m)}},c.Wu(),c.kv(new rw({sdp:r,type:"offer"}),n)}},Du:function(t){var i=t.ot(),r;try{t=new _i(new DataView(fn.inflateRaw(t.Vt()).buffer),!1),r=new eo(t.zn())}catch{return}this._v(i,r)},_v:function(t,i){var r=this.Dr.get(t);if(r!=null){var n=Bi.Lo(i);if(n!=null&&(r.Ie.push(n),this.banList.checkIp(n)))return;r.Vo(i)}},Av:function(t){this.id=t.rn(t.T()),this._s!=null&&this._s(this.id)},Mv:function(t){this.je=t.rn(t.c.byteLength-t.l)},vr:function(t,i,r){if(!i.Io){t==0&&(i.Io=!0),i=i.id;var n=b.U(32,!1);n.f(t),n.kt(i),r!=null&&n.Yt(fn.deflateRaw(r._t())),this.X.send(n._r())}},Xn:function(t,i){var r=b.U(16,!1);r.f(0),r.kt(t),r.Lt(i),this.X.send(r._r())},zu:function(){var t=b.U(1,!1);t.f(8),this.X.send(t._r())},$u:function(){this.Es=!1;var t=b.U(256,!1);t.f(7),this.lr!=null&&t.Ye(this.lr),this.X.send(t._r())},Ko:function(){var t=b.U(2,!1);t.f(this.haxball.Ft),t.f(this.Wn?1:0),this.X.send(t._r()),this.Au=this.Wn,this.haxball.room._onRoomRecaptchaModeChange?.(this.Wn)},bu:function(t,i,r,n){var e=b.U(32,!1);e.wi(i.sdp),e.$e(r),n!=null&&e.Yt(n._t()),this.vr(1,t,e)},au:function(t,i){var r=b.U(32,!1);r.$e(i),this.vr(4,t,r)},Fo:function(){for(var t=this.Dr.values(),i=t.next(),r;!i.done;)r=i.value,i=t.next(),r.et();this.Dr.clear()},ks:function(t){var i=this;this.Fo(),un(this.Qn),this.Qn=null,this.Es=!1,ro(this.Uo),un(this.Pu),t&&(this.Pu=$i(function(){i.Ss()},this.yo+Math.random()*this.Ov|0))}};function _e(t){this.Qo=new Map,this.Bv=new fo(100,16),this.Ve=!1,this.fn=0,this.st=t,t=b.U(8),t.C(Math.random()),this.Le=t._t()}_e.prototype={vi:function(t,i){i==null&&(i=0),this.st.vi(i,t)}};function Be(t,i){this.haxball=t,this.at=null,this.Vn=32,this.Hr=new Map,this.bt=[],this.Bs=4,this.Iv=600;var r=this;oo.call(this,i?.state),this.dv=i?.th,this.Gv=i?.Ft,this.Vv=1,this.Xo=0,this.Bi=0,this.Un=!1,this.Os=!0,this._e=null,this.Ln=null,this.Xr=on.now(),this.Gt=i&&new Bi(t,this.dv,i.iceServers,sw,i.ih),i&&(this.Gt.banList=new fw(this),this.Gt.Jo=this.Lv.bind(this),this.Gt.Wo=function(n){r.Uv(n)},this.Gt._s=function(n){r._s?.(n)})}Be.prototype=lw(oo.prototype,{et:function(){this.Gt.et();for(var t=0,i=this.bt;t<i.length;){var r=i[t++].st;r.de=null,r.Ns=null,r.et()}},Fv:function(t,i,r,n){var e=this.Hr.get(t.id);e!=null&&(n&&this.Gt.banList.addPlayer(t),t=b.U(),t.f(5),t.f(n?1:0),t.wi(i),r==null&&(r=""),t.wi(r),e.vi(t),e.st.et())},_u:function(){this.Gt.banList.clear()&&this.haxball.room._onBansClear?.()},Eu:function(t){this.Gt.banList.removePlayer(t)&&this.haxball.room._onBanClear?.(t)},Bu:function(t){return this.Gt.banList.addPlayer(t)},Iu:function(...t){return this.Gt.banList.addIp(...t)},du:function(...t){return this.Gt.banList.addAuth(...t)},Gu:function(t){return this.Gt.banList.remove(t)},Yu:function(t){this.Gt.Yu(t)},Mu:function(t){this.Gt.Mu(t)},_:function(t){var i=this.g+this.Bs+this.gi;t.en.vt||(i=this.g),t.Ot=i,this.ie(t),this.Is(),0<this.bt.length&&this.Ue(this.ds(t),1)},Ts:function(t,i,r){t.i=i;var n;r?(t.apply(this.t),this.Kv(t,1)):0<this.bt.length&&(n=this.g+this.Bs+this.gi,t.en.vt||(n=this.g),t.Ot=n,this.ie(t),this.Is(),this.Ue(this.ds(t),1))},Kn:function(t,i,r){if(i==0){t.apply(this.t);return}var n=this.Hr.get(i);if(n!=null){!r&&(t.i=0);var e=b.U();e.f(6),hn.Cr(t,e),n.vi(e,0)}},ct:function(){var t=((on.now()-this.Xr)*this.Hi|0)-this.g;t>0&&this.jh(t),this.g-this.Yo>=7&&this.Is(),this.g-this.Xo>=this.Iv&&(this.Is(),this.Hv())},gr:function(){return this.gi<0&&(this.gi=0),this.Eh((on.now()-this.Xr)*this.Hi-this.g+this.Bs+this.gi+this.nu)},Lv:function(t){if(!this.Un&&this.bt.length>=this.Vn)return 4100;try{if(t.At()!=this.Gv)throw new st(null)}catch{return 4103}try{var i=t.hi();if(this.at!=null&&i!=this.at)throw new st(null)}catch{return 4101}},Uv:function(t){var i=this;if(!this.Un&&this.bt.length>=this.Vn)t.et();else{var r=new _e(t);this.bt.push(r),t.Ns=function(n){n=new _i(new DataView(n)),i.Jv(n,r)},t.de=function(){so.remove(i.bt,r),i.Hr.delete(r.id),i.Wv?.(r.id)},t=b.U(1+r.Le.byteLength),t.f(0),t.Ut(r.Le.byteLength),t.Yt(r.Le),r.vi(t)}},ds:function(t){var i=b.U();return i.f(2),this.rh(t,i),i},rh:function(t,i){i.kt(t.Ot),i.Ut(t.L),i.Lt(t.i),i.kt(t.Gr),hn.Cr(t,i)},Is:function(){if(!(0>=this.g-this.Yo)&&this.bt.length!=0){var t=b.U();t.f(3),t.kt(this.g),t.kt(this.Vr),this.Ue(t,2),this.Yo=this.g}},Ue:function(t,i){i==null&&(i=0);for(var r=0,n=this.bt;r<n.length;){var e=n[r];++r,e.Ve&&e.vi(t,i)}},Kv:function(t,i){i==null&&(i=0);var r=b.U();r.f(6),hn.Cr(t,r);for(var n=0,e=this.bt;n<e.length;){var s=e[n];++n,s.Ve&&this.haxball.ut.customClientIds.has(s.id)&&s.vi(r,0)}},Qv:function(t){var i=b.U();i.f(1);var r=b.U();r.Lt(t.id),r.kt(this.g),r.kt(this.Vr),r.Ut(this.ri),this.t.$(r);for(var n=this.rr.list,e=0,s=n.length;e<s;)this.rh(n[e++],r);i.Yt(fn.deflateRaw(r._t())),t.vi(i)},vv:function(t){t.kt(this.g),t.kt(this.Vr),t.Ut(this.ri),this.t.$(t);var i=this;this.rr.list.forEach(r=>{i.rh(r,t)})},Xv:function(t){$i(()=>{this.t.j.forEach(i=>{i.ou&&this.haxball.room?.setPlayerIdentity(i.id,i.ou,t.id)})},3e3)},Hv:function(){if(this.Xo=this.g,this.bt.length!=0){var t=ww.create(this.t.Gl());t.Ot=this.g,t.L=this.ri++,t.i=0,this.Ue(this.ds(t))}},Yv:function(t,i){var r=this,n=t.Vt(t.Ht()),e=t.Vt(t.Ht()),s=i.Le;i.Le=null,cw.$l(n,s).catch(function(){return null}).then(function(u){try{if(r.Gt.banList.checkAuth(u))throw new st(ho(uo.AuthBannedError,u));if(r.bt.indexOf(i)!=-1){i.Kc=u;var h=r.Vv++;i.id=h,r.Hr.set(h,i),r.$v?.(h,new _i(new DataView(e.buffer,e.byteOffset,e.byteLength),!1),i.st.zr,u),i.Ve=!0,r.Qv(i),r.Xv(i)}}catch(f){r.$o(i,f instanceof st?f.zt:f)}})},Jv:function(t,i){this.ct();try{if(!i.Bv.yh())throw new st(1);var r=t.T();if(i.Ve)switch(r){case 1:this.Zv(t,i);break;case 2:this.zv(t,i);break;default:throw new st(0)}else if(r==0)this.Yv(t,i);else throw new st(0);if(0<t.c.byteLength-t.l)throw new st(2)}catch(n){this.$o(i,n instanceof st?n.zt:n)}},$o:function(t,i){this.haxball.onHostError?.(i,t.id),this.Hr.delete(t.id),so.remove(this.bt,t),t.Ve&&this.Zo!=null&&this.Zo(t.id),t.st.et()},zv:function(t,i){var r=t.k(),n=this.haxball.room._modifyPlayerPing;n&&(i.fn=n(i.id,t.Ht()));var e=b.U();e.f(4),e.C((on.now()-this.Xr)*this.Hi+this.Bs),e.C(r),i.vi(e,2)},Zv:function(t,i){var r=t.ot(),n=t.ot(),e=hn.ir(t),s=e.en.su;if(s!=null){var u=i.Qo.get(s);if(u==null&&(u=new fo(s.uu,s.hu),i.Qo.set(s,u)),!u.yh())throw new st(3)}if(e.i=i.id,s=this.g,u=this.g+120,e.Gr=n,e.Ot=r<s?s:r>u?u:r,!(e.__proto__.rt==pw&&e.S.p.length==0)&&this.haxball.ut.onOperationReceived(e,this.g,r)){if(e.__proto__.rt==qw||e.__proto__.rt==yw||e.__proto__.rt==mw){this.Ts(e,e.i,!0);return}e.Mh(this.t)&&(this.ie(e),this.Ue(this.ds(e),1))}}});Ee(Be,[null,"password",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],[]);Ee(Bi,[null,null,null,null,null,"id",null,null,null,null,null,null,null],[]);Ee(_e,[null,null,null,"ping",null,null],[]);lo.VT=Be});var Ie=T((uq,mo)=>{var{clearTimeout:Cw,setInterval:gw,clearInterval:kw,requestAnimationFrame:po,cancelAnimationFrame:Sw,performance:sq,E:Ow}=N(),$t=ht(),{ye:qo,us:co,hs:Tw,os:Rw,fs:Nw,ls:wo,ge:Pw,ke:Ii,vs:Aw,cs:Mw,ws:jw}=ui(),{bt:Ew}=ve();function _w(t){this.n=t}function yo(t){this.Gs=0,this.xv=0,this.internalData=t?.ut}yo.prototype={ct:function(){var t=this.internalData.keyState;this.Vs!=null&&t!=this.Gs&&(this.Gs=t,this.Vs(co.create(t)))},Dv:function(){this.Vs!=null&&this.Gs!=0&&(this.Gs=this.xv=0,this.Vs(co.create(0)))}};function Zi(t,i){this.haxball=t,this.bv=null,this.zo=!1,this.$r=null,this.nh=0,this.Tt=new yo(t),this.Yr="Waiting for link",this.xo=!1;var r=this;if(this.yi=new _w(i),this.n=i,!!i){i.t.Lr=e=>{t.room._onPlayerInputChange?.(e.id,e.Tt)},i.t.he=e=>{t.room._onPlayerJoin?.(e)},i.t.Mn=e=>{t.room._onPlayerBallKick?.(e?.id)},i.t.En=e=>{t.room._onTeamGoal?.(e?.id)},i.t.In=e=>{t.room._onGameEnd?.(e.id)},i.t.le=(e,s,u)=>{!u&&t.room._onGamePauseChange?.(s,e?.id)},i.t.dn=function(e){t.room._onGameStart?.(e?.id)},i.t.Oe=()=>{t.room._onGameTick?.()},i.t.jn=()=>{t.room._onKickOff?.()},i.t.Dn=(e,s,u,h)=>{t.room._onCollisionDiscVsDisc?.(e,s.I,u,h.I)},i.t.bn=(e,s,u)=>{t.room._onCollisionDiscVsPlane?.(e,s.I,u)},i.t.an=(e,s,u)=>{t.room._onCollisionDiscVsSegment?.(e,s.I,u)},i.t.te=(e,s,u,h)=>{t.room._onCollisionDiscVsVertex?.(e,s.I,u,h)},i.t.nn=(e,s,u)=>{t.room._onModifyJoint?.(e,s,u)},i.t.Nr=(e,s,u,h,f)=>{t.room._onAutoTeams?.(e,s,u,h,f)},i.t.cn=(e,s)=>{t.room._onTimeLimitChange?.(e,s)},i.t.vn=(e,s)=>{t.room._onScoreLimitChange?.(e,s)},i.t.Se=e=>{t.room._onPlayerDiscCreated?.(e)},i.t.Sr=e=>{t.room._onPlayerDiscDestroyed?.(e)},i.t.kn=(e,s)=>{t.room._onPlayerAvatarChange?.(e,s)},i.t.Tn=(e,s)=>{t.room._onPlayerHeadlessAvatarChange?.(e,s)},i.t.On=(e,s)=>{t.room._onPlayersOrderChange?.(e,s)},i.t.yn=(e,s,u)=>{t.room._onPlayerTeamChange?.(e,s,u)},i.t.Sn=(e,s,u)=>{t.room._onTeamColorsChange?.(e,s,u)},i.t.mn=(e,s)=>{t.room._onTeamsLockChange?.(e,s)},i.t.Bh=(e,s,u)=>{t.ut.isHost?(e=i.t.getPlayer(e),e&&u==1&&(e.nr=!0,t.ut.customClientIds.add(e.id))):u==0&&(t.ut.customClientIds.add(e),e=i.t.getPlayer(e),e&&(e.nr=!0),i.ju=!0,e=i.t.getPlayer(s),e&&(e.nr=!0),t.ut.customClientIds.add(s),i._(qo.create(1,s,1),0,!0))},i.t.Nn=(e,s,u)=>{t.room._onCustomEvent?.(e,s,u)},i.t.Pn=(e,s,u)=>{t.room._onBinaryCustomEvent?.(e,s,u)},i.t.An=(e,s,u)=>{t.room._onIdentityEvent?.(e,s,u)},i.t.Rn=(e,s,u,h)=>{t.room._onSetDiscProperties?.(e,s,u,h)},i.t.gn=e=>{t.room._onPingData?.(e)},i.t.Zh=()=>t?.room?.hostPing||0,i.t.Ih=()=>{r.Tt.Dv()},i.t.sn=e=>{t.room._onHandicapChange?.(e)},i.t.un=e=>{t.room?._onExtrapolationChange?.(e)},i.t._n=()=>{t.room._onTimeIsUp?.()},i.t.Bn=()=>{t.room._onPositionsReset?.()},i.t.uo=function(e){r.xo!=e&&(r.xo=e,e=jw.create(e),t.ut.W(e)!=!1&&i._(e))},i.t.ue=function(e,s){t.room._onPlayerChat?.(e.id,s)},i.t.ee=function(e,s,u,h){t.room._onAnnouncement?.(e,s,u,h)},i.t.Or=function(e){t.room._onGameStop?.(e?.id)},i.t.qn=function(e,s){t.room._onStadiumChange?.(s,e?.id)},i.t.ce=function(e){t.room._onPlayerSyncChange?.(e?.id,e?.Ii)},i.t.Cn=function(e,s){t.room._onPlayerAdminChange?.(s?.id,s?.qi,e?.id)},i.t.Te=function(e,s,u,h){t.room._onKickRateLimitChange?.(s,u,h,e?.id)},i.t.fe=function(e,s,u,h){e.B&&t.room._onPlayerDiscDestroyed?.(e),r.av?.(e.id),s!=null&&r.tc?.(e,s,h!=null?h.name:null,u),t.room._onPlayerLeave?.(e,s,u,h?.id),t.ut.customClientIds.delete(e.id)},i.t.se=function(e,s){t.room._onPlayerChatIndicatorChange?.(e?.id,!s)},this.Tt.Vs=function(e){t.ut.W(e)!=!1&&i._(e)},this.fv=function(e){e=wo.create(1,e),t.ut.W(e)!=!1&&i._(e)},this.lv=function(e){e=wo.create(0,e),t.ut.W(e)!=!1&&i._(e)},this.ov=function(e){e=Pw.create(e),t.ut.W(e)!=!1&&i._(e)},this.rv=function(){var e=Tw.create();t.ut.W(e)!=!1&&i._(e)},this.nv=function(){var e=Rw.create();t.ut.W(e)!=!1&&i._(e)},this.ev=function(){r.ic()},this.ko=function(e,s){if(s){var u=Ii.create(e,s);t.ut.W(u)!=!1&&i._(u)}},this.Co=this.rc.bind(this),this.sv=function(){var e=Mw.create();t.ut.W(e)!=!1&&i._(e)},this.hv=function(){Zi.nc(t,i)},this.uv=function(e){e=Aw.create(e),t.ut.W(e)!=!1&&i._(e)},this.go=function(e){if(e)return r.$r!=null?!1:(r.ec(),t.room._onRoomRecordingChange?.(!0),!0);if(r.$r==null)return null;var s=r.$r.stop();return r.$r=null,t.room._onRoomRecordingChange?.(s),s},this.Do=this.sc.bind(this),this.nh=po(this.Do),this.uc=gw(function(){i.ct()},50);var n=t.ut.li.extrapolation;n=-200>n?-200:200<n?200:n,n!=0&&i._h(t.ut.li.extrapolation)}}Zi.nc=function(t,i){for(var r=i.t.j,n=[],e=0,s=0,u=0;u<r.length;){var h=r[u];++u,h.N==$t.spec&&n.push(h.id),h.N==$t.red?++e:h.N==$t.blue&&++s}u=n.length;var f;u!=0&&(r=function(){return n.splice(Math.random()*n.length|0,1)[0]},u==1?(f=Ii.create(r(),Math.random()<.5?$t.red:$t.blue),t.ut.W(f)!=!1&&i._(f)):s==e?(f=Ii.create(r(),$t.red),t.ut.W(f)!=!1&&i._(f),f=Ii.create(r(),$t.blue),t.ut.W(f)!=!1&&i._(f)):(e=s>e?$t.red:$t.blue,f=Ii.create(r(),e),t.ut.W(f)!=!1&&i._(f)))};Zi.prototype={ec:function(){this.$r=new Ew(this.n,3)},et:function(){Sw(this.nh),kw(this.uc),Cw(this.bv)},rc:function(t){for(var i=[],r=0,n=this.n.t.j;r<n.length;){var e=n[r];++r,e.N==t&&i.push(Ii.create(e.id,$t.spec))}for(t=0;t<i.length;){var s=i[t++];this.haxball.ut.W(s)!=!1&&this.n._(s)}},sc:function(){this.nh=po(this.Do),this.Tt.ct(),this.n.ct(),this.hc()},hc:function(){var t=this.n.gr();this.haxball.ut.renderer?.render?.(t)},iv:function(t){var i;t!=this.zo&&(i=qo.create(t?0:1),this.haxball.ut.W(i)!=!1&&(this.n._(i),this.zo=t))},ic:function(){if(this.n.t.s!=null){var t=Nw.create(this.n.t.s.xt!=120);this.haxball.ut.W(t)!=!1&&this.n._(t)}}};Ow(Zi,[null,null,null,null,null,null,"input",null,null,null,null],[]);mo.VT=Zi});var Oo=T((oq,So)=>{var{stunServers:Bw,httpUrl:Iw,Fs:hq,setInterval:dw,clearInterval:Gw,console:Co}=N(),di=Q(),{Kt:Gi,q:zi}=X(),{parseGeo:go}=Ji(),{w:Vw}=j(),{addRoomToList:Lw,removeRoomFromList:Uw}=yi(),Fw=Te(),{roomLink:de,Ro:Kw,No:Hw}=Re(),{RoomDataDetails:Jw}=ye(),Ww=Ur(),{ye:Qw,me:Xw,Ce:ko,qu:Yw}=ui(),$w=Ti(),Zw=vo(),zw=Ie();function xw(t,i){var r=Hw(i);r.onHostError=t.onError;var n=Kw(r),e=function(){Co.log("internal event: LeaveRoom"),Uw(r.room),e=null,s=null,r.plugins&&r.plugins.forEach(o=>{o.finalize?.(),o.room=null}),r.renderer&&(r.renderer.finalize?.(),r.renderer.room=null),r.config.finalize?.(),r.config.room=null,r.libraries.forEach(o=>{o.finalize?.(),o.room=null}),e=null,n.r=null,n.roomState=null,n=null,r.room=null,r.Ku?.()},s=function(){Co.log("internal event: CreateRoomSucceeded"),s=null,r.room=new Fw(r.Lu,n,r.libraries,r.config,r.plugins),Lw(r.room),r.room.client=r,r.room.Mr=r.Mr,r.room.hostPing=0,r.Uu?.(r.room);var o=r.room._onPlayerObjectCreated;o&&n.r?.n.t.j.forEach(o)},u=r.li;function h(){if(c.Os){var o=new Jw;o.Ft=r.Ft,o.name=v.name,o.j=c._e!=null?c._e:v.j.length,o.Ru=c.Vn+1,o.Rt=c.Ee.flag,o.at=c.Ln==null?c.at!=null:c.Ln,o.Pe=c.Ee.Pe,o.Ae=c.Ee.Ae;var l=Vw.U(16);o.$(l),o=l.Xe(),c.Yu(o)}}var f=null,v=new $w;v.name=t.name;var c=new Zw(r,{iceServers:Bw,th:Iw+"api/host",state:v,Ft:r.Ft,ih:t.token});c.Ee=go(t.geo,u.geo,!1),c.oc=!!t.noPlayer;var w;c.oc||(w=new Ww,w.name=u.player_name,w.qi=!0,w.Rt=c.Ee.flag,w.gt=u.avatar,w.nr=!0,v.j.push(w)),c.Un=!!t.unlimitedPlayerCount,c.Os=!!t.showInRoomList,c._e=t.playerCount,c.Ln=t.fakePassword==null?null:!!t.fakePassword,c.Vn=(t.maxPlayerCount|0)-1,c.at=t.password==""?null:t.password,h();var m=new zw(r,c),k=dw(function(){var o=Yw.create(c);n.W(o)!=!1&&c._(o)},3e3);return c.Zo=function(o){v.getPlayer(o)!=null&&(o=ko.create(o,Gi(di.BadActorError).toString(),!1),n.W(o)!=!1&&c._(o))},c.$v=function(o,l,q,p){var y=l.ci();if(25<y.length)throw new zi(Gi(di.PlayerNameTooLongError,q,p,y));var g=l.ci();if(3<g.length)throw new zi(Gi(di.PlayerCountryTooLongError,q,p,y,g));var S=l.hi();if(S!=null&&2<S.length)throw new zi(Gi(di.PlayerAvatarTooLongError,q,p,y,g,S));var R=r.room._modifyPlayerData;if(R){var M=R(o,y,g,S,q,p);if(!M)throw new zi(Gi(di.PlayerJoinBlockedByMPDError,q,p,y,g,S));[y,g,S]=M}if(y=Xw.create(o,y,g,S,q,p),n.W(y)==!1)throw new zi(Gi(di.PlayerJoinBlockedByORError,y));c._(y),h(),n.Fn.then(()=>{n.r?.n.Kn(Qw.create(0,o,0),o,!0)})},c.Wv=function(o){v.getPlayer(o)!=null&&(o=ko.create(o,null,!1),n.W(o)!=!1&&c._(o))},c._s=function(o){f=o,m.Yr=de(o,c.at!=null),r.room._onRoomLink?.(m.Yr)},m.tc=function(o,l,q,p){c.Fv(o,l,q,p)},m.av=function(){h()},m.Vu=function(){c.et(),m.et(),Gw(k),e()},r.Hn=m.Vu,m.yi.Hc=function(o){c.at=o,h(),f!=null&&(m.Yr=de(f,c.at!=null)),r.room._onRoomPropertiesChange?.({password:o})},m.yi._u=c._u.bind(c),m.yi.Eu=c.Eu.bind(c),m.yi.Bu=c.Bu.bind(c),m.yi.Iu=c.Iu.bind(c),m.yi.du=c.du.bind(c),m.yi.Gu=c.Gu.bind(c),m.yi.bl=function(o){if(o){var l={};if(o.hasOwnProperty("name")&&(l.name=v.name=o.name||""),o.hasOwnProperty("password")&&(l.password=c.at=o.password),o.hasOwnProperty("fakePassword")&&(l.fakePassword=c.Ln=o.fakePassword),o.hasOwnProperty("geo")){l.geo=o.geo;var q=go(o.geo,u.geo,!1);w&&(w.Rt=q.flag)}o.hasOwnProperty("unlimitedPlayerCount")&&(l.unlimitedPlayerCount=c.Un=!!o.unlimitedPlayerCount),o.hasOwnProperty("showInRoomList")&&(l.showInRoomList=c.Os=!!o.showInRoomList),o.hasOwnProperty("playerCount")&&(l.playerCount=c._e=o.playerCount),o.hasOwnProperty("maxPlayerCount")&&(l.maxPlayerCount=c.Vn=o.maxPlayerCount==null?null:o.maxPlayerCount-1),h(),o.hasOwnProperty("password")&&f!=null&&(m.Yr=de(f,c.at!=null)),r.room._onRoomPropertiesChange?.(l)}},m.yi.al=function(o){c.Un=o},m.yi.tv=function(o){c.Ln=o,h()},n.isHost=!0,n.r=m,n.roomState=v,s(),r}So.VT=xw});var Bo=T((fq,_o)=>{var{proxy:xi,backend:To,setTimeout:Dw,clearTimeout:Ro,WebSocket:No,performance:Di,pako:Ve,RTCIceCandidate:Po,RTCSessionDescription:bw}=N(),bi=Q(),{Event:Ge}=B(),{Kt:ai,At:tr}=X(),{jo:aw,Eo:tp,_o:ip}=Ae(),rp=Me(),Mo=Si(),{F:ln,w:qi,Lf:Ao,extend:np}=j(),ep=An();function jo(t,i,r,n,e,s,u,h){this.eh=!1,this.sh=!1,this.mi=u,this.cr=h,!xi&&h&&(tp(),h=null);var f=this;this.st=new rp(0,i,n),this.st.Er=function(){f.Fe(tr.wf())},this.st.xr=function(){f.xr!=null&&f.xr(new ip(f.st)),f.st=null,f.bo()},this.st.Qu=function(v){f.ao=v,xi?.WebSocketUrl&&(t=xi.WebSocketUrl),!t.endsWith("client")&&(!t.endsWith("/")&&(t+="/"),t+="client");var c=h?[h]:[];if(f.mi||xi?.WebSocketChangeOriginAllowed){var w={};f.mi&&(w.agent=f.mi),xi.WebSocketChangeOriginAllowed&&(w.headers={Origin:(To.secure?"https":"http")+"://"+To.hostname}),f.X=new No(t+"?id="+r+(s==null?"":"&token="+s),c,w)}else f.X=new No(t+"?id="+r+(s==null?"":"&token="+s),c);f.X.binaryType="arraybuffer",f.X.onclose=function(m){f.eh||f.Fe(tr.qf(m.code))},f.X.onerror=function(){f.eh||f.Fe(tr.Error())},f.X.onmessage=f.Zu.bind(f),f.X.onopen=function(){f.tf!=null&&f.tf(),f.st.Wu(),f.bu(f.ao,f.st.Ps,e),f.st.As=f.au.bind(f),f.st.Ju.then(function(){f.vr(0,null)})}},this.st.Sv()}jo.prototype={fc:function(){this.Fe(tr.pf())},bo:function(){try{this.X!=null&&(this.X.onclose=null,this.X.onmessage=null,this.X.onerror=null,this.X.onopen=null,this.X.close(),this.X=null)}catch{}this.st!=null&&(this.st.et(),this.st=null)},Fe:function(t){this.Er!=null&&this.Er(t),this.bo()},Zu:function(t){t=new ln(new DataView(t.data));var i=t.T(),r,n,e;switch(0<t.c.byteLength-t.l&&(t=new ln(new DataView(Ve.inflateRaw(t.Vt()).buffer),!1)),i){case 1:for(i=t.ci(),r=t.zn(),n=[],e=0;e<r.length;)n.push(new Po(r[e++]));this.xu(i,n,t);break;case 4:this.Du(new Po(t.zn()))}},xu:function(t,i){var r=this;this.st.Wu(this.sh?1e4:4e3),this.eh=!0,this.rf!=null&&this.rf(),this.st.Nt.setRemoteDescription(new bw({sdp:t,type:"answer"}),function(){for(var n=0;n<i.length;)r.st.Nt.addIceCandidate(i[n++])},function(){r.Fe(tr.Error())})},Du:function(t){this.st.Nt.addIceCandidate(t)},vr:function(t,i){if(this.X!=null){var r=qi.U(32,!1);r.f(t),i!=null&&r.Yt(Ve.deflateRaw(i._t())),this.X.send(r._r())}},bu:function(t,i,r){var n=qi.U(32,!1);n.f(this.sh?1:0),n.wi(t.sdp),n.$e(i),r!=null&&n.Yt(r._t()),this.vr(1,n)},au:function(t){var i=qi.U(32,!1);i.$e(t),this.vr(4,i)}};function Eo(t,i,r){this.haxball=t,this.uh=[],this.hh=[],this.Ls=new ep,this.lc=1,this.nf=0,this.br=0,this.oh=new Ao(50),this.Us=new Ao(50),this.vc=1e3,this.fh=ai(bi.Empty);var n=this;Mo.call(this,r.state),this.lh=r.cc,this.ef=r.wc;var e=null;e=function(s){n.Ke(0);var u=qi.U();u.Lt(r.Ft),u.oi(r.at),n.Li=new jo(r.th,r.iceServers,i,aw,u,r.ih,n.haxball.mi,n.haxball.cr),n.Li.sh=s,n.Li.xr=function(f){n.Li=null,n.st=f,f.Ns=function(v){v=new ln(new DataView(v)),n.pc(v)},f.de=function(){n.br!=3&&n.He?.(ai(bi.ConnectionClosed)),n.et()},f=Dw(function(){n.He?.(ai(bi.GameStateTimeout)),n.et()},1e4),n.Jn=f,n.Ke(2,n.st.Nt.remoteDescription.sdp)},n.Li.tf=function(){n.Ke(1,n.Li.ao.sdp)};var h=!1;n.Li.rf=function(){return h=!0},n.Li.Er=function(f){!s&&n.br==1&&h?(n.qc?.(),e(!0)):(n.He?.(f[0]),n.et(f[1]||f[0]))}},e(r.sf!=null&&r.sf)}Eo.prototype=np(Mo.prototype,{et:function(t){this.Li!=null&&(this.Li.Er=null,this.Li.fc(),this.Li=null),Ro(this.Jn),this.st!=null&&(this.st.de=null,this.st.et(),this.st=null),this.fh=t??ai(bi.ConnectionClosed),this.Ke(4),this.haxball._onRoomLeave?.(this.fh)},Ke:function(t,i){this.br!=t&&(this.br=t,this.haxball._onConnectionStateChange?.(t,i),this.ar!=null&&this.ar(t))},Zr:function(){return this.br==3},ct:function(){this.Zr()&&Di.now()-this.nf>this.vc&&this.zu(),this.tn=Di.now()*this.Hi+this.oh.ze(.5)-this.g,this.uf()},gr:function(){return this.Zr()?(0>this.gi&&(this.gi=0),this.Eh(Di.now()*this.Hi+this.oh.ze(.5)-this.g+this.gi+this.nu,this.Ls)):this.t},uf:function(){0>this.tn&&(this.tn=0),this.tn>this.is&&(this.tn=this.is)},pc:function(t){switch(t.T()){case 0:this.yc(t);break;case 1:this.mc(t);break;case 2:this.Cc(t);break;case 3:this.gc(t);break;case 4:this.kc(t);break;case 5:this.Sc(t);break;case 6:this.Oc(t)}},yc:function(t){var i=this;t=t.Vt(t.Ht());var r=Promise.resolve(null);this.ef!=null&&(r=this.ef.zl(t)),r.catch(function(){return null}).then(function(n){i.Tc(n)})},mc:function(t){for(t=Ve.inflateRaw(t.Vt()),t=new ln(new DataView(t.buffer,t.byteOffset,t.byteLength)),this.Bi=t.At(),this.g=t.ot(),this.Vr=t.ot(),this.ri=t.Ht(),this.tn=10,this.t.tt(t);0<t.c.byteLength-t.l;)this.ie(this.hf(t));Ro(this.Jn),this.Ke(3)},Tc:function(t){var i=qi.U();i.f(0),t!=null?(i.Ut(t.byteLength),i.Yt(t)):i.Ut(0),i.Ut(this.lh.byteLength),i.Ye(this.lh),this.vi(i),this.lh=null},vi:function(t,i){i==null&&(i=0),this.st.vi(i,t)},hf:function(t){var i=t.ot(),r=t.Ht(),n=t.At(),e=t.ot();return t=Ge.ir(t),t.i=n,t.Gr=e,t.Ot=i,t.L=r,t},Cc:function(t){t=this.hf(t),this.ie(t),t.i==this.Bi&&this.Ls.el(t.Gr),this.of()},Oc:function(t){t=Ge.ir(t),t.i=0,t.Gr=0,t.apply(this.t),this.ni!=null&&this.ni(t)},gc:function(t){var i=t.ot();t=t.ot(),this.hh.push({frame:i,Rc:t}),this.of()},of:function(){if(this.br==3){for(var t=0,i=this.hh,r,n;t<i.length;)r=i[t],++t,r.frame<=this.g||r.Rc==this.Vr+this.ri+this.rr.sl(r.frame)&&this.Nc(r.frame-this.g);for(t=0,i=this.hh,r=0,n=i.length;r<n;){var e=i[r++];e.frame>this.g&&(i[t]=e,++t)}for(;i.length>t;)i.pop();this.Ls.rl(this.g)}},Sc:function(t){var i=t.T()!=0,r=t.ci(),n="";0<t.c.byteLength-t.l&&(n=t.ci()),this.et(ai(bi.KickedNow,r,i,n))},kc:function(t){var i=t.k();t=t.k();var r=Di.now()-t;this.oh.add(i-t*this.Hi),this.Us.add(r);for(var n=i=0,e=this.uh;n<e.length;){var s=e[n];if(++n,s>t)break;this.Pc?.(s<t?-1:r),++i}this.uh.splice(0,i)},zu:function(){var t=Di.now();this.nf=t,this.uh.push(t);var i=this.Us.ze(.5)|0,r=qi.U(),n=this.haxball.room?._modifyClientPing;n&&(i=n(i)),r.f(2),r.C(t),r.Ut(i),this.vi(r,2)},Nc:function(t){this.jh(t),this.tn-=t,this.uf()},_:function(t){if(this.br==3){var i=this.lc++,r=0;0>this.gi&&(this.gi=0),t.en.vt&&(r=this.g+(this.tn|0)+this.gi);var n=qi.U(),e=this.haxball.room?._modifyFrameNo;n.f(1),e&&(r=e(r)),n.kt(r),n.kt(i),Ge.Cr(t,n),this.vi(n),t.en.wt&&(t.Gr=i,t.i=this.Bi,t.Ot=r,this.Ls.iu(t))}}});_o.VT=Eo});var Uo=T((lq,Lo)=>{var{stunServers:sp,backendUrl:up,console:fi}=N(),Io=Q(),{Kt:Go,q:Vo}=X(),{w:hp}=j(),op=Te(),{addRoomToList:fp,removeRoomFromList:Le}=yi(),{roomLink:lp,Ro:vp,No:cp}=Re(),wp=Ti(),pp=Bo(),qp=Ie();function yp(t,i){var r=t.id,n=t.password,e=t.token,s=t.authObj;if(!r||!s)throw Go(Io.JoinRoomNullIdAuthError);var u=cp(i);n==""&&(n=null);var h=vp(u),f=function(y){fi.log("internal event: LeaveRoom",y.toString()),Le(u.room),u._onConnectionStateChange=null,f=null,u.plugins&&u.plugins.forEach(g=>{g.finalize?.(),g.room=null}),u.renderer&&(u.renderer.finalize?.(),u.renderer.room=null),u.config.finalize?.(),u.config.room=null,u.libraries.forEach(g=>{g.finalize?.(),g.room=null}),u._onRoomLeave=null,h.r=null,h.roomState=null,h=null,u.room=null,u.Ku?.(y)},v=function(){fi.log("internal event: JoinRoomSucceeded"),u._onConnectionStateChange=null,v=null,u.room=new op(u.Lu,h,u.libraries,u.config,u.plugins),fp(u.room),u.room.client=u,u.room.Mr=u.Mr,u.Uu?.(u.room);var y=u.room?._onPlayerObjectCreated;y&&h.r?.n.t.j.forEach(y);var g=u.room?._onPlayerDiscCreated;g&&h.r?.n.t.j.filter(S=>S.B!=null).forEach(g)};u._onConnectionStateChange=function(y,g){fi.log("internal event: ConnectionStateChange"),u.Oo?.(y,g),y==4&&(u._onConnectionStateChange=null,v=null,u.room=null)},u._onRoomLeave=f;try{var c=u.li.crappy_router,w=new wp,m=hp.U();m.wi(u.li.player_name),m.wi(u.li.geo.flag),m.oi(u.li.avatar);var k=sp,o=up,l=new pp(u,r,{iceServers:k,th:o,state:w,Ft:u.Ft,cc:m.Xe(),at:n,sf:c,ih:e,wc:s});fi.log("Connecting to master..."),u.Hn=function(){l.ar=null,l.He=null,l.et()};var q=function(y){Le(u.room),u.Hn=null,u.Fu?.(y)},p=function(){u.Hn=null;var y=new qp(u,l);y.Yr=lp(r,!1),l.Pc=function(g){u.room._onPingChange?.(g,l.Us.ze(.5),l.Us.max())},y.Vu=function(){l.ar=null,l.et(),y.et()},l.ar=function(){l.ar=null,y.et(),y.$r?.stop(),q(l.fh)},h.isHost=!1,h.r=y,h.roomState=w,v?.()};l.He=function(y){l.He=null,l.ar=null,y.code==1&&y.params[0]==4004&&u.Rs?.(),q(y)},l.ar=function(y){switch(y){case 1:fi.log("Connecting to peer...");break;case 2:fi.log("Awaiting state...");break;case 3:p()}},l.qc=function(){fi.log("Trying reverse connection..."),u.To?.()}}catch(y){fi.log(y instanceof Vo?y.zt:y),Le(u.room),u.Hn=null,u.Fu?.(Go(Io.Unknown,y instanceof Vo?y.zt:y))}return u}Lo.VT=yp});var Jo=T((vq,Ho)=>{var{performance:mp,pako:Cp,E:gp}=N(),kp=Ti(),Ko=Si(),{Event:Ue}=B(),{F:Fo,extend:Sp}=j(),{Sandbox:Op}=we();function Fe(t){Ko.call(this,t),this.A=1,this.Xr=0,this.Ac=0,this.frozen=!1,this.Mc=[],this.newEvents=[],this.maxFrameNo=0}Fe.prototype=Sp(Ko.prototype,{_:function(){},gr:function(){return this.t},ct:function(){var t=this.maxFrameNo;if(!(this.g>=t))do{var i=0,r=this.newEvents[0];if(!r||this.g>r.Ot)break;for(;r?.Ot==this.g;)r.apply(this.t),this.Mc.push(r),r=this.newEvents[++i];this.t.ct(1),this.g++,this.newEvents.splice(0,i)}while(this.g<t)},setSpeed:function(t){if(!(t<0)){if(t==0){this.frozen=!0;return}this.g=this.g*t/this.A|0,this.A=t,this.frozen=!1}},runSteps:function(t){this.frozen&&this.t.ct(t)}});function Tp(t,i={},r){var n=new kp,e=new Fe(n),s=new Op(e,i,r),u;function h(v){var c=v.ot(),w=v.Ht(),m=v.At(),k=v.ot();return v=Ue.ir(v),v.i=m,v.Gr=k,v.Ot=c,v.L=w,v}function f(v){v.Ot==e.g&&v.L<=e.ri?(v.L=e.ri++,e.receiveEvent(v)):e.rr.iu(v)}for(t=new Fo(new DataView(t.buffer,t.byteOffset,t.byteLength)),e.Bi=0,e.Xr=mp.now(),e.Ac=e.g=t.ot(),e.Vr=t.ot(),e.ri=t.Ht(),n.tt(t);t.l<t.c.byteLength;)f(h(t));return t=null,u={state:n,readStream:v=>{if(e.maxFrameNo=v.ot(),v.c.byteLength!=v.c.byteOffset+v.l){var c=Cp.inflateRaw(new Uint8Array(v.c.buffer,v.l)),w,m,k,o,l;for(v=new Fo(new DataView(c.buffer,c.byteOffset,c.byteLength));v.l<c.byteLength;)for(o=e.maxFrameNo-v.At(),w=v.At(),l=0;l<w;l++)m=v.At(),k=Ue.ir(v,!0),k.i=m,k.Ot=o,e.newEvents.push(k)}},readImmediateStream:v=>{var c=e.maxFrameNo=v.ot(),w=v.At(),m=Ue.ir(v,!0);m.i=w,m.Ot=c,e.newEvents.push(m)},takeSnapshot:function(){return n.copy()},useSnapshot:function(v){var c=v.copy();s.wo(c),n=c,u.state=c},setSimulationSpeed:function(v){e.setSpeed(v)},runSteps:function(v){e.runSteps(v)},destroy:s.et},Object.defineProperty(u,"gameState",{get(){return u.state.s}}),Object.defineProperty(u,"currentPlayerId",{get(){return 0}}),Object.defineProperty(u,"currentFrameNo",{get(){return e.g}}),Object.defineProperty(u,"maxFrameNo",{get(){return e.maxFrameNo}}),u}gp(Fe,[null,null,null,null,null,null,null,null,null,null,null,null,"speed",null,null,null,null,null,null],[]);Ho.VT=Tp});var Qo=T((cq,Wo)=>{var{noVariableValueChangeEvent:Rp,E:Np}=N();function ir(t,i=null){this.name=t,this.defineMetadata(i)}ir.prototype.defineMetadata=function(t){};ir.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Rp?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};ir.prototype.setVariableGUIProps=function(t,...i){};Np(ir,["name"],[]);Wo.VT=ir});var Yo=T((wq,Xo)=>{var{noVariableValueChangeEvent:Pp}=N();function vn(t=null){this.defineMetadata(t)}vn.prototype.defineMetadata=function(t){};vn.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Pp?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};vn.prototype.setVariableGUIProps=function(t,...i){};Xo.VT=vn});var Zo=T((pq,$o)=>{var Ap=mn(),{noVariableValueChangeEvent:Mp,E:jp}=N();function rr(t,i=!1,r=null){this.name=t,this.defineMetadata(r),this.defineVariable({name:"active",description:"Whether this plugin is active or not.",type:Ap.Boolean,value:i})}rr.prototype.defineMetadata=function(t){};rr.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Mp?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};rr.prototype.setVariableGUIProps=function(t,...i){};jp(rr,["name"],[]);$o.VT=rr});var xo=T((qq,zo)=>{var{noVariableValueChangeEvent:Ep}=N();function cn(t=null){this.defineMetadata(t)}cn.prototype.defineMetadata=function(t){};cn.prototype.defineVariable=function(t){var{name:i,value:r}=t,n=this;Ep?n[i]=r:Object.defineProperty(n,i,{get:()=>r,set:e=>{var s=r;e!=s&&(r=e,n.room?._onVariableValueChange?.(n,i,s,r))}})};cn.prototype.setVariableGUIProps=function(t,...i){};zo.VT=cn});var dp=T((yq,bo)=>{var _p=Xe(),Bp=be(),Ip=yi(),Do=X();bo.VT=(t,i)=>{var{ErrorCodes:r,...n}=fs();_p(t,i);var{D:e,F:s,w:u}=j(),{J:h,K:f}=li(),{Point:v}=mi(),c=Pn(),{bt:w,...m}=ve(),{createSandbox:k}=we();return{version:"1.4.0",...n,Callback:{add:c.bf,remove:c.af},Utils:Ji(),EventFactory:Ih(),Room:{create:Oo(),join:Uo(),sandbox:k,streamWatcher:Jo()},Replay:m,Query:Bp,Library:Qo(),RoomConfig:Yo(),Plugin:Zo(),Renderer:xo(),Language:Ip.Language,Errors:{HBError:Do.HBError,ErrorCodes:r},Impl:{Core:{Point:v,TeamColors:Xr(),Team:ht()},Stream:{F:s,w:u},Utils:{D:e,J:h,K:f,M:br(),q:Do.q}}}}});return dp();})();if (typeof exports !== 'undefined') { if (typeof module !== 'undefined' && module.exports) exports = module.exports = hn; exports.abcHaxballAPI = hn; } else if (typeof root !== 'undefined') root['abcHaxballAPI'] = hn; else window['abcHaxballAPI'] = hn;